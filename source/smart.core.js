
/* Smart HTML Elements v3.0.0 (2019-April) 
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

(function(){"use strict";function t(t,n){const a=n.properties;n._properties=[];const o=function(a,r){const l=Object.keys(a);for(let s=0;s<l.length;s++){const i=l[s],d=a[i];if(n._properties[r+i]=d,Array.isArray(d)){n._properties[r+i]=new ObservableArray(d,function(n){const a=i+"."+n.path,o=n.newValue,r=document.querySelector(t);if(r){const t=a.split(".");let n=r;for(let a=0;a<t.length;a++){const i=t[a];n=n[i]}n=o}});continue}(Object.defineProperty(a,i,{configurable:!1,enumerable:!0,get(){return n._properties[r+i]},set(t){n._properties[r+i]=t}}),"DataAdapter"!==d.constructor.name)&&"object"==typeof d&&d&&0<Object.keys(d).length&&o(d,r+i+".")}};o(a,""),Object.defineProperty(n,"properties",{configurable:!1,enumerable:!0,get(){return a}});const i=document.querySelector(t);if(i&&i.isReady)for(let t in a)i[t]=a[t]}var n=Math.floor,i=Math.asin,o=Math.abs,a=Math.sqrt,r=Math.pow,l=Math.sin,s=Math.cos,m=Math.PI,d=Math.max;const c="3.0.0",p=[];let u="Smart";if(window[u]&&window[u].Version){if(window[u].Version===c)return;if(window[u].Version!==c)u+=c;else for(let t=2;window[u];)u+=t.toString(),t++}class LocalizationModule{static get moduleName(){return"LocalizationModule"}static get properties(){return{messages:{value:{en:{}},type:"object",inherit:!0,reflectToAttribute:!1},locale:{value:"en",type:"string",reflectToAttribute:!1},localizeFormatFunction:{value:void 0,type:"function",reflectToAttribute:!1}}}addMessages(t,n){const a=this;Object.assign(a.messages[t],n)}localize(t,n){const a=this;if(!a.messages||!a.messages[a.locale])return;let i=a.messages[a.locale][t];if(""===i)return"";if(i){const t=i;for(let t in n){let a=n[t];i=i.replace(new RegExp("{{"+t+"}}","g"),a)}return a.localizeFormatFunction&&a.localizeFormatFunction(t,i,n),i}}}class ErrorModule{static get moduleName(){return"ErrorModule"}static get properties(){return{rethrowError:{value:!0,type:"boolean",reflectToAttribute:!1},debugMode:{value:!0,type:"boolean",reflectToAttribute:!1}}}log(t){const n=this;n._logger("log",t)}warn(t){const n=this;n._logger("warn",t)}error(t){const n=this;n._logger("error",t)}_logger(t,n){const a=this;if(a.debugMode){const a=n instanceof Error?n.message:n.toString();console[t](a)}if(a.rethrowError&&"error"===t)throw n}}class BindingModule{static get moduleName(){return"BindingModule"}getBindings(t){const n=this;let a=0,i={},o=(t=>{if(t instanceof HTMLElement)return n.parseAttributes(t);else{let a=n.parseProperty(t.data?t.data.trim():null,"textContent",t);if(a)return n.ownerElement&&t.parentNode===n.ownerElement.$.content&&(a.value=""===n.ownerElement.$.html?void 0:n.ownerElement.$.html,n.ownerElement.innerHTML=""),{textContent:a}}})(t);o&&(i.data=o),t.getAttribute&&(i.nodeId=t.getAttribute("smart-id")),i.node=t,t.firstChild&&(i.children={});for(let o=t.firstChild;o;o=o.nextSibling)i.children[a++]=n.getBindings(o);return i}_addRemovePropertyBinding(t,n,a,i){if(!t||!n||!a)return;const o=this,r=o.ownerElement.bindings,l=a.getAttribute("smart-id"),s=0<=t.indexOf("{{");t=t.replace("{{","").replace("}}","").replace("[[","").replace("]]","");let d=!1;0<=t.indexOf("!")&&(t=t.replace("!",""),d=!0);const c=o.ownerElement._properties[t],m={name:t,reflectToAttribute:c.reflectToAttribute,twoWay:s,type:c.type,not:d},p=function(t){for(let r in t){const s=t[r];if(s.nodeId===l){s.data||(s.data={}),i?(s.data[n]=null,delete s.data[n]):s.data[n]=m;break}if(s.children)p(s.children);else if(s.node&&s.node.children&&s.node===a.parentElement){const t=s.node;if(t.firstChild)s.children={};else continue;let n=0;for(let a=t.firstChild;a;a=a.nextSibling)s.children[n++]=o.getBindings(a);p(s.children)}}};p(r.children),i?delete o.ownerElement.boundProperties[t]:o.ownerElement.boundProperties[t]=!0,o.updateBoundNodes(t)}addPropertyBinding(t,n,a){const i=this;i._addRemovePropertyBinding(t,n,a)}removePropertyBinding(t,n,a){const i=this;i._addRemovePropertyBinding(t,n,a,!0)}parseAttributes(t){const n=this;let a;for(let o=0;o<t.attributes.length;o++){const i=t.attributes[o],r=i.name,l=i.value;BindingModule.cache["toCamelCase"+r]||(BindingModule.cache["toCamelCase"+r]=Utilities.Core.toCamelCase(r));const s=BindingModule.cache["toCamelCase"+r];if(0<=r.indexOf("(")){let i=r.substring(1,r.length-1);if(n.ownerElement&&!n.ownerElement.dataContext){n.ownerElement.templateListeners[t.getAttribute("smart-id")+"."+i]=l,t.removeAttribute(r);continue}else{a||(a={});const t=l.substring(0,l.indexOf("("));a[s]={isEvent:!0,name:i,value:t};continue}}let d=n.parseProperty(l,r,t);d&&(a||(a={}),a[s]=d)}return a}parseProperty(t,n){if(!t||!t.length)return;const a=this;let i=t.length,o=0,r=0,l=0,s=!0,d;for(;r<i;){o=t.indexOf("{{",r);let n=t.indexOf("[[",r),a="}}";if(0<=n&&(0>o||n<o)&&(o=n,s=!1,a="]]"),l=0>o?-1:t.indexOf(a,o+2),0>l)return;d=d||{};let i=t.slice(o+2,l).trim();d.name=i,r=l+2}const c=d.name,m=a.ownerElement?a.ownerElement._properties[c]:null;if(d.twoWay=s,d.ready=!1,a.ownerElement&&(0<=c.indexOf("::")?a.ownerElement.boundProperties[c.substring(0,c.indexOf("::"))]=!0:a.ownerElement.boundProperties[c]=!0),m)d.type=m.type,d.reflectToAttribute=m.reflectToAttribute;else{d.type=0<=["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(n)?"boolean":"string",d.reflectToAttribute=!0}return d}updateTextNodes(){const t=this;t.updateTextNode(t.ownerElement.shadowRoot||t.ownerElement,t.ownerElement.bindings,t.ownerElement)}updateTextNode(t,n,a){const i=this;if(!n)return;let o=0;for(let r=t.firstChild;r&&!!n.children;r=r.nextSibling)i.updateTextNode(r,n.children[o++],a);if(n&&n.data)for(let t in n.data){const i=n.data[t],o=i.name;"textContent"==t&&i.twoWay&&!i.updating&&void 0!==i.value&&(a[o]=i.value)}}updateBoundProperty(t,n){if(n.updating)return;const a=this,i=a.ownerElement;n.updating=!0,i[t]=n.value,n.updating=!1}updateBoundNodes(t){const n=this;if(n.updateBoundNode(n.ownerElement.shadowRoot||n.ownerElement,n.ownerElement.bindings,n.ownerElement,t),0<n.ownerElement.detachedChildren.length)for(let a=0;a<n.ownerElement.detachedChildren.length;a++){const i=n.ownerElement.detachedChildren[a],o=i.getAttribute("smart-id"),r=function(t){if(t.nodeId===o)return t;for(let n in t.children){const a=t.children[n],i=a.getAttribute?a.getAttribute("smart-id"):"";if(i===o)return t;if(a.children){const t=r(a);if(t)return t}}return null},l=r(n.ownerElement.bindings);l&&n.updateBoundNode(i,l,n.ownerElement,t,!0)}}updateBoundNode(t,n,a,i,o){const r=this;if(!n)return;let l=0;if(!o){for(let o=t.firstChild;o&&!!n.children;o=o.nextSibling)if(o.getAttribute){const t=o.getAttribute("smart-id"),s=function(){for(let a in n.children)if(n.children[a].nodeId===t)return n.children[a]}();r.updateBoundNode(o,s,a,i),l++}else r.updateBoundNode(o,n.children[l++],a,i);}else if(o&&!n.data)for(let s=t.firstChild;s&&!!n.children;s=s.nextSibling)if(s.getAttribute){const t=s.getAttribute("smart-id"),o=function(){for(let a in n.children)if(n.children[a].nodeId===t)return n.children[a]}();r.updateBoundNode(s,o,a,i),l++}else r.updateBoundNode(s,n.children[l++],a,i,o);if(n&&n.data)for(let o in n.data){const l=n.data[o];let s=l.name;if(!l.updating&&(0<=s.indexOf("::")&&(s=s.substring(0,s.indexOf("::"))),void 0===i||i===s)){if(0<=s.indexOf("(")){let t=s.substring(s.indexOf("("));const n=s.substring(0,s.indexOf("("));if(t=t.substring(1,t.length-1),t=t.replace(/ /ig,""),t=t.split(","),0<t.length&&""!==t[0]){let o=[];for(let n=0;n<t.length;n++)o.push(a[t[n]]);l.value=a[n].apply(a,o)}else l.value=a[n]();l.type=typeof l.value}else l.value=a[s];if("innerHTML"===s?t[o].toString().trim()!==a[s].toString().trim()&&(l.ready?t[o]=l.value.toString().trim():a._properties[s].defaultValue!==l.value&&(t[o]=l.value.toString().trim())):l.not?t[o]=!l.value:t[o]=l.value,t.$&&t.$.isNativeElement){BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const n=BindingModule.cache["toDash"+o],a=t.$.getAttributeValue(n,l.type);l.reflectToAttribute&&(a!==l.value||!l.ready)&&t.$.setAttributeValue(n,l.value,l.type),l.reflectToAttribute||t.$.setAttributeValue(n,null,l.type)}if(!l.ready){if(t.$&&t.$.isCustomElement){BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const n=BindingModule.cache["toDash"+o];t._properties||(t._beforeCreatedProperties=t._properties=t.propertyByAttributeName=[]),t._properties[o]||(t._properties[o]={attributeName:n},t._beforeCreatedProperties[o]=t._properties[o],t.propertyByAttributeName[n]=t._properties[o]);const a=t._properties[o];a.isUpdating=!0,l.reflectToAttribute&&(l.not?t.$.setAttributeValue(a.attributeName,!l.value,l.type):t.$.setAttributeValue(a.attributeName,l.value,l.type)),l.reflectToAttribute||t.$.setAttributeValue(a.attributeName,null,l.type),a.isUpdating=!1}if(l.twoWay){const n=function(n){if(l.value=n,t.$&&t.$.isNativeElement){BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const n=BindingModule.cache["toDash"+o],a=t.$.getAttributeValue(n,l.type);l.reflectToAttribute&&a!==l.value&&t.$.setAttributeValue(n,l.value,l.type),l.reflectToAttribute||t.$.setAttributeValue(n,null,l.type)}};if(0<=l.name.indexOf("::")){const a=l.name.indexOf("::"),i=l.name.substring(a+2);r.ownerElement["$"+t.getAttribute("smart-id")].listen(i,function(){n(t[o]);const a=l.name.substring(0,l.name.indexOf("::"));r.updateBoundProperty(a,l)})}if(t.$&&t.$.isCustomElement){t._properties[o]&&(t._properties[o].notify=!0),BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const a=BindingModule.cache["toDash"+o];r.ownerElement["$"+t.getAttribute("smart-id")].listen(a+"-changed",function(t){let a=t.detail;n(a.value);const i=r.ownerElement.context;t.context!==document&&(r.ownerElement.context=r.ownerElement),r.updateBoundProperty(l.name,l),r.ownerElement.context=i})}}}l.ready=!0}}}static clearCache(){const t=this;t.cache={}}}class Types{static isBoolean(t){return"boolean"==typeof t}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static isArray(t){return Array.isArray(t)}static isObject(t){const n=this;return t&&("object"==typeof t||n.isFunction(t))||!1}static isDate(t){return t instanceof Date}static isString(t){return"string"==typeof t}static isNumber(t){return"number"==typeof t}static getType(t){const n=this,a=["Boolean","Number","String","Function","Array","Date","Object"].find(a=>{if(n["is"+a](t))return a});return a?a.toLowerCase():void 0}}class Ripple{static animate(t,n,a,i){const o=t;if(!o||!1==o instanceof HTMLElement)return;if(0===o.getElementsByClassName("smart-ripple").length){const t=document.createElement("span");t.classList.add("smart-ripple");let n=!0,a=null;if(window[u].EnableShadowDOM&&o.enableShadowDOM){for(let t=0;t<o.shadowRoot.host.shadowRoot.children.length;t++)"link"!==o.shadowRoot.host.shadowRoot.children[t].tagName.toLowerCase()&&(a=o.shadowRoot.host.shadowRoot.children[t]);o.shadowRoot.host.shadowRoot.querySelector(".smart-ripple")&&(n=!1)}else a=o.firstElementChild;n&&(a&&!a.noRipple&&0<a.offsetHeight?a.appendChild(t):o.appendChild(t))}let r=null;if(r=window[u].EnableShadowDOM&&o.enableShadowDOM?o.shadowRoot.host.shadowRoot.querySelector(".smart-ripple"):o.getElementsByClassName("smart-ripple")[0],!!r){r.innerHTML="",r.classList.remove("smart-animate"),r.style.height=r.style.width=d(o.offsetHeight,o.offsetWidth)+"px";const t=window.getComputedStyle(r.parentElement),l=parseInt(t.borderLeftWidth)||0,s=parseInt(t.borderTopWidth)||0,c=o.getBoundingClientRect(),m=n-(c.left+window.pageXOffset)-r.offsetWidth/2-l,p=a-(c.top+window.pageYOffset)-r.offsetHeight/2-s;r.style.left=m+"px",r.style.top=p+"px",r.classList.add("smart-animate"),r.addEventListener("animationend",function t(){r.parentElement&&r.parentElement.removeChild(r),i&&i(),r.removeEventListener("animationend",t),r.removeEventListener("animationcancel",t)}),r.addEventListener("animationcancel",function t(){r.parentElement&&r.parentElement.removeChild(r),i&&i(),r.removeEventListener("animationcancel",t),r.removeEventListener("animationend",t)})}}}class Easings{static easeInQuad(n,a,i,o){return i*(n/=o)*n+a}static easeOutQuad(n,a,i,o){return-i*(n/=o)*(n-2)+a}static easeInOutQuad(n,a,i,o){return 1>(n/=o/2)?i/2*n*n+a:-i/2*(--n*(n-2)-1)+a}static easeInCubic(n,a,i,o){return i*(n/=o)*n*n+a}static easeOutCubic(n,a,i,o){return i*((n=n/o-1)*n*n+1)+a}static easeInOutCubic(n,a,i,o){return 1>(n/=o/2)?i/2*n*n*n+a:i/2*((n-=2)*n*n+2)+a}static easeInQuart(n,a,i,o){return i*(n/=o)*n*n*n+a}static easeOutQuart(n,a,i,o){return-i*((n=n/o-1)*n*n*n-1)+a}static easeInOutQuart(n,a,i,o){return 1>(n/=o/2)?i/2*n*n*n*n+a:-i/2*((n-=2)*n*n*n-2)+a}static easeInQuint(n,a,i,o){return i*(n/=o)*n*n*n*n+a}static easeOutQuint(n,a,i,o){return i*((n=n/o-1)*n*n*n*n+1)+a}static easeInOutQuint(n,a,i,o){return 1>(n/=o/2)?i/2*n*n*n*n*n+a:i/2*((n-=2)*n*n*n*n+2)+a}static easeInSine(n,t,a,i){return-a*s(n/i*(m/2))+a+t}static easeOutSine(n,t,a,i){return a*l(n/i*(m/2))+t}static easeInOutSine(n,t,a,i){return-a/2*(s(m*n/i)-1)+t}static easeInExpo(n,t,a,i){return 0===n?t:a*r(2,10*(n/i-1))+t}static easeOutExpo(n,t,a,i){return n===i?t+a:a*(-r(2,-10*n/i)+1)+t}static easeInOutExpo(n,a,i,o){return 0===n?a:n===o?a+i:1>(n/=o/2)?i/2*r(2,10*(n-1))+a:i/2*(-r(2,-10*--n)+2)+a}static easeInCirc(n,i,o,r){return-o*(a(1-(n/=r)*n)-1)+i}static easeOutCirc(n,i,o,r){return o*a(1-(n=n/r-1)*n)+i}static easeInOutCirc(n,i,o,r){return 1>(n/=r/2)?-o/2*(a(1-n*n)-1)+i:o/2*(a(1-(n-=2)*n)+1)+i}static easeInElastic(n,u,g,c){let d=1.70158,h=0,_=g;return 0===n?u:1===(n/=c)?u+g:(h||(h=.3*c),_<o(g)?(_=g,d=h/4):d=h/(2*m)*i(g/_),-(_*r(2,10*(n-=1))*l((n*c-d)*(2*m)/h))+u)}static easeOutElastic(n,u,g,c){let d=1.70158,h=0,_=g;return 0===n?u:1===(n/=c)?u+g:(h||(h=.3*c),_<o(g)?(_=g,d=h/4):d=h/(2*m)*i(g/_),_*r(2,-10*n)*l((n*c-d)*(2*m)/h)+g+u)}static easeInOutElastic(n,u,g,c){let d=1.70158,h=0,_=g;return 0===n?u:2==(n/=c/2)?u+g:(h||(h=c*(1.5*.3)),_<o(g)?(_=g,d=h/4):d=h/(2*m)*i(g/_),1>n?-.5*(_*r(2,10*(n-=1))*l((n*c-d)*(2*m)/h))+u:.5*(_*r(2,-10*(n-=1))*l((n*c-d)*(2*m)/h))+g+u)}static easeInBack(n,a,i,o,r){return void 0===r&&(r=1.70158),i*(n/=o)*n*((r+1)*n-r)+a}static easeOutBack(n,a,i,o,r){return void 0===r&&(r=1.70158),i*((n=n/o-1)*n*((r+1)*n+r)+1)+a}static easeInOutBack(n,a,i,o,r){return void 0===r&&(r=1.70158),1>(n/=o/2)?i/2*(n*n*(((r*=1.525)+1)*n-r))+a:i/2*((n-=2)*n*(((r*=1.525)+1)*n+r)+2)+a}static easeInBounce(n,t,a,i){return a-this.easeOutBounce(i-n,0,a,i)+t}static easeOutBounce(n,a,i,o){return(n/=o)<1/2.75?i*(7.5625*n*n)+a:n<2/2.75?i*(7.5625*(n-=1.5/2.75)*n+.75)+a:n<2.5/2.75?i*(7.5625*(n-=2.25/2.75)*n+.9375)+a:i*(7.5625*(n-=2.625/2.75)*n+.984375)+a}static easeInOutBounce(n,t,a,i){return n<i/2?.5*this.easeInBounce(2*n,0,a,i)+t:.5*this.easeOutBounce(2*n-i,0,a,i)+.5*a+t}}class Core{static get isMobile(){const t=/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase());return t}static get Browser(){let t;const n=function(n){let a=n.indexOf(t);if(-1!==a){const i=n.indexOf("rv:");return"Trident"===t&&-1!==i?parseFloat(n.substring(i+3)):parseFloat(n.substring(a+t.length+1))}};let a={};return a[function(){const n=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}];for(let a=0,i;a<n.length;a++)if(i=n[a].string,t=n[a].subString,-1!==i.indexOf(n[a].subString))return n[a].identity;return"Other"}()]=!0,a.version=n(navigator.userAgent)||n(navigator.appVersion)||"Unknown",a}static toCamelCase(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}static toDash(t){return t.split(/(?=[A-Z])/).join("-").toLowerCase()}static unescapeHTML(t){let n=new DOMParser().parseFromString(t,"text/html");return n.documentElement.textContent}static escapeHTML(t){const n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return(t+"").replace(/[&<>"'`=\/]/g,t=>n[t])}static createGUID(){function t(){return n(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}static getScriptLocation(){const t=function(){if(document.currentScript){let t=document.currentScript.src,n=t.lastIndexOf("/");return t=t.substring(0,n),t}const t=new Error;let n="(",a=")";if(Smart.Utilities.Core.Browser.Safari&&(n="@",a="\n"),t.fileName)return t.fileName.replace("/smart.element.js","");let i=t.stack.split(n);return i=i[1],i=i.split(a)[0],i=i.split(":"),i.splice(-2,2),i=i.join(":"),i.replace("/smart.element.js","")}();return t}static CSSVariablesSupport(){return window.CSS&&window.CSS.supports&&window.CSS.supports("(--fake-var: 0)")}static assign(t,n){const a=t=>t&&"object"==typeof t&&!Array.isArray(t)&&null!==t;let i=Object.assign({},t);return a(t)&&a(n)&&Object.keys(n).forEach(o=>{a(n[o])?o in t?i[o]=this.assign(t[o],n[o]):Object.assign(i,{[o]:n[o]}):Object.assign(i,{[o]:n[o]})}),i}static html(t,n){const a=this;let i="",o=t.childNodes;if(n){const a=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;return void(t.innerHTML=n.replace(a,"<$1></$2>"))}for(let r=0,s=o.length,l;r<s&&(l=o[r]);r++){if(l instanceof HTMLElement||l.tagName&&0<=["strong"].indexOf(l.tagName.toLowerCase())){const t=l.tagName.toLowerCase(),n=l.attributes;let o="<"+t;for(let t=0,a;a=n[t];t++)o+=" "+a.name+"=\""+a.value.replace(/[&\u00A0"]/g,Utilities.Core.escapeHTML)+"\"";o+=">";["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"][t]&&(i+=o),i=i+o+a.html(l)+"</"+t+">"}else i+=l.textContent.replace(/[&\u00A0<>]/g,Utilities.Core.escapeHTML)}return i}}let g=[];class StyleObserver{static watch(t){g.push(t),StyleObserver.interval&&clearInterval(StyleObserver.interval),StyleObserver.interval=setInterval(function(){StyleObserver.observe()},100)}static observeElement(t){const n=t;let a=t._computedStyle||"resize"!==n.hasStyleObserver?document.defaultView.getComputedStyle(n,null):{},i=!0,o="resize"===n.hasStyleObserver?[]:["paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","display","visibility","font-size","font-family","font-style","font-weight","max-height","min-height","max-width","min-width","overflow","overflow-x","overflow-y"];if(t.styleProperties&&(o=o.concat(t.styleProperties)),t.observableStyleProperties&&(o=t.observableStyleProperties),!n._styleInfo){n._styleInfo=[];for(let t=0;t<o.length;t++){const i=o[t];n._styleInfo[i]=a[i]}return}if(t.isHidden||"none"===a.display||requestAnimationFrame(()=>{(0===t.offsetWidth||0===t.offsetHeight)&&(t.isHidden=!0)}),t.isHidden)if(t.visibilityChangedHandler(),!t.isHidden)i=!1;else return;let r=[];for(let l=0;l<o.length;l++){const t=o[l];n._styleInfo[t]!==a[t]&&(r[t]={oldValue:n._styleInfo[t],value:a[t]},r.length++),n._styleInfo[t]=a[t]}0<r.length&&(n.$.fireEvent("styleChanged",{styleProperties:r},{bubbles:!1,cancelable:!0}),r.display&&i&&n.$.fireEvent("resize",n,{bubbles:!1,cancelable:!0}))}static observe(){for(let t=0;t<g.length;t++){const n=g[t];requestAnimationFrame(()=>{this.observeElement(n)})}}static unwatch(t){StyleObserver.interval&&clearInterval(StyleObserver.interval),g.splice(g.indexOf(t),1),0<g.length&&(StyleObserver.interval=setInterval(function(){StyleObserver.observe()},100))}}let h=[];const _=[],f=["resize","down","up","move","tap","taphold","swipeleft","swiperight","swipetop","swipebottom"];class InputEvents{constructor(t){const n=this;n.target=t,n.$target=new Extend(t),n.$document=new Extend(document),n.id=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase();let a={handlers:{},boundEventTypes:[],listen:n.listen.bind(n),unlisten:n.unlisten.bind(n)};return n.tapHoldDelay=750,n.swipeMin=10,n.swipeMax=5e3,n.swipeDelay=1e3,n.tapHoldDelay=750,n.inputEventProperties=["clientX","clientY","pageX","pageY","screenX","screenY"],f.forEach(t=>{a[t]=n=>{a.handlers[t]=n},n[t]=t=>{if(!a.handlers[t.type]){if(("mousemove"===t.type||"pointermove"===t.type||"touchmove"===t.type)&&a.handlers.move){const i=n.createEvent(t,"move");a.handlers.move(i)}return!0}return a.handlers[t.type](t)}}),n.listen(),n.handlers=a.handlers,a}listen(t){const n=this;if("resize"===t&&!n.target.resizeTrigger&&n.target!==document&&n.target!==window&&!1!==n.target.hasResizeObserver){const t=document.createElement("div");t.className="smart-resize-trigger-container",t.innerHTML="<div class=\"smart-resize-trigger-container\"><div class=\"smart-resize-trigger\"></div></div><div class=\"smart-resize-trigger-container\"><div class=\"smart-resize-trigger-shrink\"></div></div>",window[u].EnableShadowDOM&&n.target.enableShadowDOM?n.target.shadowRoot.appendChild(t):n.target.appendChild(t),n.target.resizeTrigger=t,requestAnimationFrame(()=>{const a=t.childNodes[0],i=a.childNodes[0],o=t.childNodes[1],r=function(){i.style.width="100000px",i.style.height="100000px",a.scrollLeft=1e5,a.scrollTop=1e5,o.scrollLeft=1e5,o.scrollTop=1e5};let l=n.target.offsetWidth,s=n.target.offsetHeight,d,c,m,p;if(0===l||0===s){const t=function(){r(),n.target.removeEventListener("resize",t)};n.target.addEventListener("resize",t),r()}else r();n.target.resizeHandler=function(){c||(c=requestAnimationFrame(function(){if(c=0,m=n.target.offsetWidth,p=n.target.offsetHeight,d=m!==l||p!==s,n.target.requiresLayout&&(d=!0),!!d){l=m,s=p;const t=new CustomEvent("resize",{bubbles:!1,cancelable:!0});n.resize(t),n.target.requiresLayout=!1}})),r()},a.addEventListener("scroll",n.target.resizeHandler),o.addEventListener("scroll",n.target.resizeHandler)})}if(!n.isListening){if(n.isListening=!0,n.isPressed=!1,n.isReleased=!1,n.isInBounds=!1,window.PointerEvent)n.$target.listen("pointerdown.inputEvents"+n.id,n.pointerDown.bind(n)),n.$target.listen("pointerup.inputEvents"+n.id,n.pointerUp.bind(n)),n.$target.listen("pointermove.inputEvents"+n.id,n.pointerMove.bind(n)),n.$target.listen("pointercancel.inputEvents"+n.id,n.pointerCancel.bind(n));else{const t="ontouchstart"in window;t&&(n.$target.listen("touchmove.inputEvents"+n.id,n.touchMove.bind(n)),n.$target.listen("touchstart.inputEvents"+n.id,n.touchStart.bind(n)),n.$target.listen("touchend.inputEvents"+n.id,n.touchEnd.bind(n)),n.$target.listen("touchcancel.inputEvents"+n.id,n.touchCancel.bind(n))),n.$target.listen("mousedown.inputEvents"+n.id,n.mouseDown.bind(n)),n.$target.listen("mouseup.inputEvents"+n.id,n.mouseUp.bind(n)),n.$target.listen("mousemove.inputEvents"+n.id,n.mouseMove.bind(n)),n.$target.listen("mouseleave.inputEvents"+n.id,n.mouseLeave.bind(n))}n.$document.listen("mouseup.inputEvents"+n.id,n.handleDocumentUp.bind(n))}}unlisten(t){const n=this;if(n.isListening=!1,window.PointerEvent)n.$target.unlisten("pointerdown.inputEvents"+n.id),n.$target.unlisten("pointerup.inputEvents"+n.id),n.$target.unlisten("pointermove.inputEvents"+n.id),n.$target.unlisten("pointercancel.inputEvents"+n.id);else{const t="ontouchstart"in window;t&&(n.$target.unlisten("touchstart.inputEvents"+n.id),n.$target.unlisten("touchmove.inputEvents"+n.id),n.$target.unlisten("touchend.inputEvents"+n.id),n.$target.unlisten("touchcancel.inputEvents"+n.id)),n.$target.unlisten("mousedown.inputEvents"+n.id),n.$target.unlisten("mouseup.inputEvents"+n.id),n.$target.unlisten("mousemove.inputEvents"+n.id),n.$target.unlisten("mouseleave.inputEvents"+n.id)}if(n.$document.unlisten("mouseup.inputEvents"+n.id,n.handleDocumentUp),"resize"===t&&n.target.resizeTrigger){const t=n.target.resizeTrigger,a=t.childNodes[0],i=t.childNodes[1];a.removeEventListener("scroll",n.target.resizeHandler),i.removeEventListener("scroll",n.target.resizeHandler),n.target.resizeHandler=null,(window[u].EnableShadowDOM&&n.target.enableShadowDOM?n.target.shadowRoot:n.target).removeChild(t),delete n.target.resizeTrigger}}handleDocumentUp(t){const n=this;n.isPressed=!1,n.isReleased=!1,n.resetSwipe(t)}createEvent(t,n){const a=this,i=t.touches,o=t.changedTouches,r=i&&i.length?i[0]:o&&o.length?o[0]:void 0,l=new CustomEvent(n,{bubbles:!0,cancelable:!0});if(l.originalEvent=t,r){for(let t=0;t<a.inputEventProperties.length;t++){const n=a.inputEventProperties[t];l[n]=r[n]}return l}for(let a in t)a in l||(l[a]=t[a]);return l}fireTap(t){const n=this;if(clearTimeout(this.tapHoldTimeout),!this.tapHoldFired&&this.isInBounds){const a=n.createEvent(t,"tap");n.tap(a)}}initTap(t){const n=this;n.isInBounds=!0,n.tapHoldFired=!1,n.tapHoldTimeout=setTimeout(function(){if(n.isInBounds){n.tapHoldFired=!0;const a=n.createEvent(t,"taphold");n.taphold(a)}},n.tapHoldDelay)}pointerDown(t){const n=this;return n.handleDown(t)}mouseDown(t){const n=this;return n.isPressed||n.touchStartTime&&500>new Date-n.touchStartTime?void 0:n.handleDown(t)}touchStart(t){const n=this;return n.touchStartTime=new Date,n.isTouchMoved=!0,n.handleDown(t)}mouseUp(t){const n=this;return n.isReleased||n.touchEndTime&&500>new Date-n.touchEndTime?void 0:n.handleUp(t)}handleDown(t){const n=this;n.isReleased=!1,n.isPressed=!0;const a=n.createEvent(t,"down");return(n.handlers.tap||n.handlers.taphold)&&n.initTap(a),(n.handlers.swipeleft||n.handlers.swiperight||n.handlers.swipetop||n.handlers.swipebottom)&&n.initSwipe(a),n.down(a)}handleUp(t){const n=this;n.isReleased=!0,n.isPressed=!1;const a=n.createEvent(t,"up"),i=n.up(a);return(n.handlers.tap||n.handlers.taphold)&&n.fireTap(a),n.resetSwipe(a),i}handleMove(t){const n=this;let a=n.move(t);return n.isPressed&&(n._maxSwipeVerticalDistance=d(n._maxSwipeVerticalDistance,o(n._startY-t.pageY)),n._maxSwipeHorizontalDistance=d(n._maxSwipeHorizontalDistance,o(n._startX-t.pageX)),a=n.handleSwipeEvents(t)),a}touchEnd(t){const n=this;return n.touchEndTime=new Date,n.handleUp(t)}pointerUp(t){const n=this;return n.handleUp(t)}pointerCancel(t){const n=this;n.pointerUp(t)}touchCancel(t){const n=this;n.touchEnd(t)}mouseLeave(){const t=this;t.isInBounds=!1}mouseMove(t){const n=this;return n.isTouchMoved?void 0:n.handleMove(t)}pointerMove(t){const n=this;return n.handleMove(t)}touchMove(t){const n=this,a=t.touches,i=t.changedTouches,o=a&&a.length?a[0]:i&&i.length?i[0]:void 0;for(let a=0;a<n.inputEventProperties.length;a++){const i=n.inputEventProperties[a];void 0===t[i]&&(t[i]=o[i])}return n.isTouchMoved=!0,n.handleMove(t)}handleSwipeEvents(t){const n=this;let a=!0;return((n.handlers.swipetop||n.handlers.swipebottom)&&(a=this.handleVerticalSwipeEvents(t)),!1===a)?a:((n.handlers.swipeleft||n.handlers.swiperight)&&(a=this.handleHorizontalSwipeEvents(t)),a)}handleVerticalSwipeEvents(t){let n,a;return n=t.pageY,a=n-this._startY,this.swiped(t,a,"vertical")}handleHorizontalSwipeEvents(t){let n,a;return n=t.pageX,a=n-this._startX,this.swiped(t,a,"horizontal")}swiped(t,n,a){const i=this;if(a=a||0,o(n)>=i.swipeMin&&!i._swipeEvent&&!i._swipeLocked){let r=0>n?"swipeleft":"swiperight";if("horizontal"===a?i._swipeEvent=i.createEvent(t,r):(r=0>n?"swipetop":"swipebottom",i._swipeEvent=i.createEvent(t,0>n?"swipetop":"swipebottom")),i[r]&&(i[r](this._swipeEvent),o(n)<=this.swipeMax))return t.stopImmediatePropagation(),!1}return!0}resetSwipe(){const t=this;t._swipeEvent=null,clearTimeout(this._swipeTimeout)}initSwipe(t){const n=this;n._maxSwipeVerticalDistance=0,n._maxSwipeHorizontalDistance=0,n._startX=t.pageX,n._startY=t.pageY,n._swipeLocked=!1,n._swipeEvent=null,n._swipeTimeout=setTimeout(function(){n._swipeLocked=!0},n.swipeDelay)}}class Scroll{get scrollWidth(){const t=this;return t.horizontalScrollBar?t.horizontalScrollBar.max:-1}set scrollWidth(t){const n=this;0>t&&(t=0),n.horizontalScrollBar&&(n.horizontalScrollBar.max=t)}get scrollHeight(){const t=this;return t.verticalScrollBar?t.verticalScrollBar.max:-1}set scrollHeight(t){const n=this;0>t&&(t=0),n.verticalScrollBar&&(n.verticalScrollBar.max=t)}get scrollLeft(){const t=this;return t.horizontalScrollBar?t.horizontalScrollBar.value:-1}set scrollLeft(t){const n=this;0>t&&(t=0),n.horizontalScrollBar&&(n.horizontalScrollBar.value=t)}get scrollTop(){const t=this;return t.verticalScrollBar?t.verticalScrollBar.value:-1}set scrollTop(t){const n=this;0>t&&(t=0),n.verticalScrollBar&&(n.verticalScrollBar.value=t)}get vScrollBar(){const t=this;return t.verticalScrollBar}get hScrollBar(){const t=this;return t.horizontalScrollBar}constructor(t,n,a){const i=this;i.container=t,i.horizontalScrollBar=n,i.verticalScrollBar=a,i.disableSwipeScroll=!1,i.listen()}listen(){function t(){let i,o;_.amplitude&&(a.container.$.fireEvent("kineticScroll"),i=Date.now()-p,o=-_.amplitude*n(-i/s),5<o||-5>o?(x(_.targetValue+o),cancelAnimationFrame(c),c=0,c=requestAnimationFrame(t)):x(_.targetValue))}var n=Math.exp;const a=this,i=Core.isMobile,r=a.horizontalScrollBar,l=a.verticalScrollBar;a.inputEvents=new InputEvents(a.container);let s=500,d,c,m,p,u,g,h,_;const f=function(t){return{amplitude:0,delta:0,initialValue:0,min:0,max:t.max,previousValue:0,pointerPosition:0,targetValue:0,scrollBar:t,value:0,velocity:0}},y=f(r),b=f(l),v=function(){g=Date.now(),h=g-p,p=g;const t=function(t){t.delta=t.value-t.previousValue,t.previousValue=t.value;let n=1e3*t.delta/(1+h);t.velocity=.8*n+.2*t.velocity};t(b),t(y)},x=function(t){return _.value=t>_.max?_.max:t<_.min?_.min:t,_.scrollBar.value=_.value,t>_.max?"max":t<_.min?"min":"value"};a.inputEvents.down(function(t){if(i){m=!0,d=!1;const n=function(t,n){t.amplitude=0,t.pointerPosition=n,t.previousValue=t.value,t.value=t.scrollBar.value,t.initialValue=t.value,t.max=t.scrollBar.max};n(b,t.clientY),n(y,t.clientX),p=Date.now(),clearInterval(u),u=setInterval(v,s)}}),a.inputEvents.up(function(){if(!m)return!0;clearInterval(u);const n=function(n){_=n,n.amplitude=.8*n.velocity,n.targetValue=Math.round(n.value+n.amplitude),p=Date.now(),cancelAnimationFrame(c),c=requestAnimationFrame(t),n.velocity=0};10<b.velocity||-10>b.velocity?n(b):(10<y.velocity||-10>y.velocity)&&n(y),m=!1}),a.inputEvents.move(function(t){if(!m)return!0;if(a.disableSwipeScroll)return;if(d&&(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation()),y.visible=0<r.offsetHeight,b.visible=0<l.offsetWidth,!m||!y.visible&&!b.visible)return;b.ratio=-b.max/b.scrollBar.offsetHeight,b.delta=(t.clientY-b.pointerPosition)*b.ratio,y.ratio=-y.max/y.scrollBar.offsetWidth,y.delta=(t.clientX-y.pointerPosition)*y.ratio;let n="value";const i=function(t,i,o){return 5<t.delta||-5>t.delta?(_=t,n=t.initialValue+t.delta>_.max?"max":t.initialValue+t.delta<_.min?"min":"value","min"==n&&0===t.initialValue)||"max"==n&&t.initialValue===t.max||!t.visible||(a.container.$.fireEvent("kineticScroll"),x(t.initialValue+t.delta),v(),o.originalEvent.preventDefault(),o.originalEvent.stopPropagation(),d=!0,!1):null};let o=i(b,t.clientY,t);if(null===o){let n=i(y,t.clientX,t);if(null!==n)return n}else return o});let C;a.scrollTo=function(t,i){const r=!1===i?y:b;let l=!1;p||(p=Date.now()),C||(C=Date.now()),375<o(Date.now()-C)?p=Date.now():l=!0,C=Date.now(),r.value=r.scrollBar.value,r.delta=t-r.value,r.max=r.scrollBar.max,t<=r.min&&(t=r.min),t>=r.max&&(t=r.max),r.targetValue=t;const s=t;let d=r.value;r.velocity=100*r.delta/(1+r.max),r.from=d;const m=function(t){return r.value=t>r.max?r.max:t<r.min?r.min:t,r.scrollBar.value=r.value,t>r.max?"max":t<r.min?"min":"value"},u=function(){let i=175,o=Date.now()-C,g=Math.min(1e3,Date.now()-p),h=r.velocity*n(g/i),_;if(l)0>h&&r.value<=t?h=0:0<h&&r.value>=t&&(h=0),(r.value+h<=r.min||r.value+h>=r.max)&&(h=0),.5<h||-.5>h?(m(r.value+h),cancelAnimationFrame(c),c=0,c=requestAnimationFrame(u)):m(r.targetValue);else{if(o>=i)return cancelAnimationFrame(c),a.container.$.fireEvent("kineticScroll"),void(c=0);_=Utilities.Animation.Easings.easeInSine(o,d,s-d,i),m(_),cancelAnimationFrame(c),c=0,c=requestAnimationFrame(u)}};cancelAnimationFrame(c),c=requestAnimationFrame(u)},a.inputEvents.listen()}unlisten(){const t=this;t.inputEvents&&t.inputEvents.unlisten(),delete t.inputEvents}}class Extend{constructor(t){this.events={},this.handlers={},this.element=t}hasClass(t){const n=this,a=t.split(" ");for(let o=0;o<a.length;o++){const t=n.element.classList.contains(a[o]);if(!t)return!1}return!0}addClass(t){const n=this;if(!n.hasClass(t)){const a=t.split(" ");for(let t=0;t<a.length;t++)n.element.classList.add(a[t]);n.isNativeElement||StyleObserver.observeElement(n.element)}}removeClass(t){const n=this;if(0===arguments.length)return void n.element.removeAttribute("class");const a=t.split(" ");for(let o=0;o<a.length;o++)n.element.classList.remove(a[o]);""===n.element.className&&n.element.removeAttribute("class"),n.isNativeElement||StyleObserver.observeElement(n.element)}get isCustomElement(){const t=this;return!(!0!=t.element instanceof window[u].BaseElement)||"DIV"!==t.element.tagName&&"SPAN"!==t.element.tagName&&"BUTTON"!==t.element.tagName&&"INPUT"!==t.element.tagName&&"UL"!==t.element.tagName&&"LI"!==t.element.tagName&&!(!0!=document.createElement(t.element.nodeName)instanceof window[u].BaseElement)}get isNativeElement(){const t=this;return!t.isCustomElement}dispatch(t){const n=this,a=n.events[t.type];let i=!1;if(1<a.length)for(let t=0;t<a.length;t++){const n=a[t];if(n.namespace&&0<=n.namespace.indexOf("_")){i=!0;break}}i&&a.sort(function(t,n){let a=t.namespace,i=n.namespace;return a=-1===a.indexOf("_")?0:parseInt(a.substring(a.indexOf("_")+1)),i=-1===i.indexOf("_")?0:parseInt(i.substring(i.indexOf("_")+1)),a<i?-1:a>i?1:0});for(let o=0;o<a.length;o++){const i=a[o];if(t.namespace=i.namespace,t.context=i.context,t.defaultPrevented)break;const r=i.handler.apply(n.element,[t]);if(void 0!==r&&(t.result=r,!1===r)){t.preventDefault(),t.stopPropagation();break}}return t.result}fireEvent(t,n,a){const i=this;a||(a={bubbles:!0,cancelable:!0}),a.detail=n||{};const o=new CustomEvent(t,a);return o.originalStopPropagation=o.stopPropagation,o.stopPropagation=function(){return o.isPropagationStopped=!0,o.originalStopPropagation()},i.dispatchEvent(o),o}get isPassiveSupported(){const t=this;if(t.supportsPassive!==void 0)return t.supportsPassive;t.supportsPassive=!1;try{let n=Object.defineProperty({},"passive",{get:function(){t.supportsPassive=!0}});window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}catch(t){}return t.supportsPassive}dispatchEvent(t){const n=this,a=t.type,i=n.element.context;n.element.context=document,n.element["on"+a]?n.element["on"+a](t):n.element.dispatchEvent(t),n.element.context=i}listen(t,n){const a=this,i=t.split("."),o=i.slice(1).join("."),r=i[0];a.events[r]||(a.events[r]=[]);const l={type:r,handler:n,context:a.element,namespace:o};0<=f.indexOf(r)&&(!a.inputEvents&&(a.inputEvents=new InputEvents(a.element)),a.inputEvents[r](function(t){a.dispatchEvent(t)}),a.inputEvents.boundEventTypes.push(r),a.inputEvents.listen(r)),0===a.events[r].length&&(a.handlers[r]=a.dispatch.bind(a),"wheel"===r?a.element.addEventListener("wheel",a.handlers[r],!!a.isPassiveSupported&&{passive:!1}):a.element.addEventListener(r,a.handlers[r],!1)),a.events[r].push(l)}unlisten(t){const n=this,a=t.split("."),r=a.slice(1).join("."),i=a[0];let o=n.events[i];if(n.inputEvents&&0<=n.inputEvents.boundEventTypes.indexOf(i)&&(n.inputEvents.boundEventTypes.splice(n.inputEvents.boundEventTypes.indexOf(i),1),0===n.inputEvents.boundEventTypes.length&&n.inputEvents.unlisten(i)),!!o){for(let t=0;t<o.length;t++)if(""!==r){let t=o.findIndex(t=>t.namespace===r);o.splice(t,1);break}else o=[];0===o.length&&(n.element.removeEventListener(i,n.handlers[i]),n.events[i]=[],delete n.handlers[i])}}getAttributeValue(t,n){const a=this,i=a.element.getAttribute(t);if(a.isNativeElement)return a.deserialize(i,n);const o=a.element.propertyByAttributeName[t],r=o.deserialize===void 0?a.deserialize(i,n,o.nullable):a.element[o.deserialize](i);return r}setAttributeValue(t,n,a){const i=this;let o=!1,r;if(!i.isNativeElement){const l=i.element.propertyByAttributeName[t];o=!l||l.nullable,r=l&&l.serialize?i.element[l.serialize](n):i.serialize(n,a,o)}else if(r=i.serialize(n,a),"boolean"===a){if(0<=["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(t))return void(n?i.element.setAttribute(t,""):i.element.removeAttribute(t))}return("array"===a||"object"===a)&&("[]"===r||"{}"===r)?void i.element.removeAttribute(t):void(void 0===r?i.element.removeAttribute(t):i.element.setAttribute(t,r))}serialize(t,n,a){if(void 0===n&&(n=Utilities.Types.getType(t)),void 0!==t&&(a||null!==t)){if(a&&null===t)return"null";if("string"===n)return t;if("boolean"===n||"bool"===n){if(!0===t||"true"===t||1===t||"1"===t)return"";if(!1===t||"false"===t||0===t||"0"===t)return}if("array"===n)return JSON.stringify(t);return 0<=["string","number","int","integer","float","date","any","function"].indexOf(n)?t.toString():"object"===n?JSON.stringify(t):void 0}}deserialize(t,n,a){const i="null"===t;if(void 0!==t&&(!i||a)){if(i&&a)return null;if("boolean"===n||"bool"===n)return null!==t;if("number"===n||"float"===n)return"NaN"===t?NaN:"Infinity"===t?1/0:"-Infinity"===t?-Infinity:parseFloat(t);if("int"===n||"integer"===n)return"NaN"===t?NaN:"Infinity"===t?1/0:"-Infinity"===t?-Infinity:parseInt(t);if("string"===n)return t;if("any"===n)return t;if("date"===n)return new Date(t);if("function"===n){if("function"==typeof window[t])return window[t];}else if("array"===n||"object"===n)try{const n=JSON.parse(t);if(n)return n}catch(a){if(window[t]&&"object"==typeof window[t])return window[t];if("array"===n&&0<=t.indexOf("[")){if(0<=t.indexOf("{")){let n=t.replace(/{/ig,"").replace("[","").replace("]","").replace(/'/ig,"").replace(/"/ig,"").trim();n=n.split("},");for(let t=0;t<n.length;t++){let a={},i=n[t].trim().split(",");for(let t=0;t<i.length;t++){const n=i[t].split(":")[0].trim(),o=i[t].split(":")[1].trim();a[n]=o}n[t]=a}return n}const n=t.replace("[","").replace("]","").replace(/'/ig,"").replace(/"/ig,"").trim().split(",");return n}}}}}class Animation{static get Ripple(){return Ripple}static get Easings(){return Easings}}class Utilities{static get Types(){return Types}static get Core(){return Core}static get Animation(){return Animation}static get Scroll(){return Scroll}static get InputEvents(){return InputEvents}static Extend(t){return new Extend(t)}static Assign(t,n){if(0<=t.indexOf(".")){const a=t.split(".");return Utilities[a[0]]||(Utilities[a[0]]={}),void(Utilities[a[0]][a[1]]=n)}Utilities[t]=n}}const y=Utilities.Extend(document);BindingModule.cache={};class BaseElement extends HTMLElement{static get properties(){return{animation:{value:"advanced",type:"string",allowedValues:["none","simple","advanced"]},unfocusable:{value:!1,type:"boolean"},disabled:{value:!1,type:"boolean"},dataContext:{value:null,reflectToAttribute:!1,type:"any"},messages:{value:{en:{propertyUnknownType:"'{{name}}' property is with undefined 'type' member!",propertyInvalidValue:"Invalid '{{name}}' property value! Actual value: '{{actualValue}}', Expected value: '{{value}}'!",propertyInvalidValueType:"Invalid '{{name}}' property value type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",methodInvalidValueType:"Invalid '{{name}}' method argument value type! Actual type: '{{actualType}}', Expected type: '{{type}}' for argument with index: '{{argumentIndex}}'!",methodInvalidArgumentsCount:"Invalid '{{name}}' method arguments count! Actual arguments count: '{{actualArgumentsCount}}', Expected at least: '{{argumentsCount}}' argument(s)!",methodInvalidReturnType:"Invalid '{{name}}' method return type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",elementNotInDOM:"Element does not exist in DOM! Please, add the element to the DOM, before invoking a method.",moduleUndefined:"Module is undefined.",missingReference:"{{elementType}}: Missing reference to '{{files}}'.",htmlTemplateNotSuported:"{{elementType}}: Web Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: '{{property}}' property accepts a string that must match the id of an HTMLTemplate element from the DOM."}},reflectToAttribute:!1,type:"object"},readonly:{value:!1,type:"boolean"},rightToLeft:{value:!1,type:"boolean"},theme:{value:window[u].Theme,type:"string"},visibility:{value:"visible",allowedValues:["visible","collapsed","hidden"],type:"string"},wait:{value:!1,type:"boolean"}}}static get requires(){return{}}static get listeners(){return{"theme-changed":function(t){this.theme=t.detail.newValue}}}static get methods(){return{}}get classNamesMap(){return{animation:"smart-animate",rippleAnimation:"smart-ripple"}}get hasAnimation(){const t=this;return"none"!==t.animation}get hasRippleAnimation(){const t=this;return"none"!==t.animation&&!("advanced"!==t.animation)}static get modules(){return window[u].Modules}get properties(){const t=this;return t._properties||(t._properties=[]),t._properties}get parents(){const t=this;let n=[],a=t.parentNode;for(;a&&9!==a.nodeType;)!0==a instanceof HTMLElement&&n.push(a),a=a.parentNode;return n}get focused(){return this.contains(document.activeElement)}template(){return"<div></div>"}registered(){const t=this;t.onRegistered&&t.onRegistered()}created(){const t=this;t.isReady=!1,t._initElement(t),t._setModuleState("created"),t.onCreated&&t.onCreated()}completed(){const t=this;t.isCompleted=!0,t._onCompleted&&t._onCompleted(),t.onCompleted&&t.onCompleted()}whenReady(t){const n=this;return n.isCompleted?void t():void(!n.whenReadyCallbacks&&(n.whenReadyCallbacks=[]),n.whenReadyCallbacks.push(t))}addThemeClass(){const t=this;""!==t.theme&&t.classList.add("smart-"+t.theme)}addDefaultClass(){const t=this;t.classList.add(t.nodeName.toLowerCase()+"-element")}ready(){const t=this;t.addThemeClass(),t.addDefaultClass(),"collapsed"===t.visibility?t.classList.add("smart-hidden"):"hidden"===t.visibility&&t.classList.add("smart-visibility-hidden");const n=()=>{let n=[];const a=t.getStaticMember("requires");for(let t in a){const i=t.split(".");2<i.length?!window[u].Utilities[i[2]]&&n.push(a[t]):!window[u][i[1]]&&n.push(a[t])}if(0<n.length){const t=this;t.error(t.localize("missingReference",{elementType:t.nodeName.toLowerCase(),files:n.join(", ")}))}};if(n(),t.dataContext&&t.applyDataContext(),t.onReady&&t.onReady(),t.shadowRoot&&Smart(t._selector)){if(Smart(t._selector).styleUrls){const n=Smart(t._selector).styleUrls;for(let a=0;a<n.length;a++)t.importStyle(n[a])}if(Smart(t._selector).styles){const n=document.createElement("style");n.innerHTML=Smart(t._selector).styles,t.shadowRoot.insertBefore(n,t.shadowRoot.firstChild)}}Smart(t._selector)&&Smart(t._selector).ready&&Smart(t._selector).ready()}get _selector(){const t=this;return t.id?"#"+t.id:0<t.classList.length?"."+t.classList[0]:void 0}applyDataContext(t){const n=this;let a="string"==typeof n.dataContext?window[n.dataContext]||document[n.dataContext]:n.dataContext;if(t&&(a=t,n.dataContext=t),!a){n.dataContextProperties=null;const t=function(){const a="string"==typeof n.dataContext?window[n.dataContext]||document[n.dataContext]:n.dataContext;a&&(n.applyDataContext(),window.removeEventListener("load",t))};return void window.addEventListener("load",t)}if(!a._uid)for(let t in a._uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),a._properties=[],a){const i=a[t];"function"!=typeof i&&"_properties"!=t&&"_uid"!=t&&(a._properties[t]=i,Object.defineProperty(a,t,{configurable:!1,enumerable:!0,get(){return a._properties[t]},set(i){const o=a._properties[t];a._properties[t]=i;let r=[];r[t]={oldValue:o,value:i},r.length++,n.updatingDataContext=!0,y.fireEvent("dataContextPropertyChanged",{dataContext:a,properties:r},{bubbles:!1,cancelable:!0}),n.updatingDataContext=!1}}))}if(n.dataContextProperties=n.parseAttributes(n),n.dataContextPropertiesMap={},n.dataContextListeners={},!n.dataContextProperties)return void(n.dataContextProperties=null);for(let i in n.updatingDataContext=!0,n.dataContextProperties){const t=n.dataContextProperties[i],o=t.name;if(t.propertyName=i,n.dataContextPropertiesMap[o]=i,BindingModule.cache["toDash"+i]||(BindingModule.cache["toDash"+i]=Utilities.Core.toDash(o)),t.isEvent){const i=t.value;n.dataContextListeners[o]&&n.removeEventListener(o,n.dataContextListeners[o]),n.dataContextListeners[o]=function(t){a[i](t)},n.addEventListener(o,n.dataContextListeners[o])}if(0<=o.indexOf(".")){const t=o.split(".");let r=a[t[0]];for(let n=1;n<t.length;n++)r=r[t[n]];void 0!==r&&(n[i]=r)}else n[i]=a[o]}n.dataContextPropertyChangedHandler=function(t){const a=t.detail.properties,i=t.detail.dataContext,o="string"==typeof n.dataContext?window[n.dataContext]||document[n.dataContext]:n.dataContext;if(i===o)for(let t in a){const i=n.dataContextPropertiesMap[t],o=n.context;i&&(n.context=document,n[i]=a[t].value,n.context=o)}},y.listen("dataContextPropertyChanged",n.dataContextPropertyChangedHandler),n.updatingDataContext=!1}updateDataContextProperty(t){const n=this,a="string"==typeof n.dataContext?window[n.dataContext]||document[n.dataContext]:n.dataContext,i=n.dataContextProperties[t];if(!n.updatingDataContext&&i.twoWay){const o=i.name;if(0<=o.indexOf(".")){const r=o.split(".");let l=a[r[0]];for(let t=1;t<r.length;t++)l=l[r[t]];void 0!==l&&(l=n[t],h[a._uid]&&(h[a._uid][t]=l))}else a[o]=n[t],h[a._uid]&&(h[a._uid][t]=a[o])}}static get version(){return window[u].Version}initProperties(){const t=this;if(Smart(t._selector)&&Smart(t._selector).properties&&(t._initProperties=Smart(t._selector).properties),t._initProperties){const n=Object.keys(t._initProperties);for(let a=0;a<n.length;a++){const i=n[a],o=t._initProperties[i];if(o.constructor===Smart.DataAdapter||"object"!=typeof o||Utilities.Types.isArray(o)){t[i]=o;continue}if("object"==typeof o){const n=function(a,o){const r=Object.keys(a);for(let l=0;l<r.length;l++){const i=r[l],s=a[i];"object"!=typeof s||Utilities.Types.isArray(s)||s.constructor===Date?t[o+"_"+i]=s:n(s,o+"_"+i)}};n(o,i)}}}}setup(){const t=this;if(t.context=this,t.isReady&&!t.isCompleted)return;if(t.isReady)return t._setModuleState("attached"),t.isAttached=!0,t.attached(),t._handleListeners("listen"),void(t.context=document);t.ownerElement&&0<=t.ownerElement.detachedChildren.indexOf(t)&&t.ownerElement.detachedChildren.splice(t.ownerElement.detachedChildren.indexOf(t),1),t.isReady=!0,t.methods=t.getStaticMember("methods"),t.initProperties();const n=Core.isMobile;n&&t.classList.add("smart-mobile");for(let n=0;n<t.attributes.length;n+=1){const a=t.propertyByAttributeName[t.attributes[n].name];if(!a)continue;let i=t.$.getAttributeValue(a.attributeName,a.type);const o=i?i.toString():"";if(!(0<=o.indexOf("{{")||0<=o.indexOf("[["))&&!("object"!==a.type&&"array"!==a.type&&(0<=t.attributes[n].value.indexOf("{{")||0<=t.attributes[n].value.indexOf("[[")))&&void 0!==i&&a.value!==i){const o=Utilities.Types.getType(i),r=t.attributes[n].value;if(("any"===a.type||"object"===a.type)&&""+t[a.name]===i)continue;if("array"===a.type&&t[a.name]&&JSON.stringify(t[a.name])===i)continue;if("number"===o&&isNaN(i)&&"NaN"!==r&&"Infinity"!==r&&"-Infinity"!==r){const n=t.localize("propertyInvalidValueType",{name:a.name,actualType:"string",type:a.type});t.log(n)}a.isUpdatingFromAttribute=!0,t[a.name]=i,a.isUpdatingFromAttribute=!1}}for(let n in t._properties){const a=t._properties[n];if("innerHTML"==n&&a.value===a.defaultValue&&(a.value=a.defaultValue=Utilities.Core.html(t)),("boolean"===a.type||"bool"===a.type)&&"false"===t.getAttribute(a.attributeName)&&(a.isUpdating=!0,t.setAttribute(a.attributeName,""),a.isUpdating=!1),a.defaultReflectToAttribute&&a.reflectToAttribute){if(a.defaultReflectToAttribute&&a.defaultReflectToAttributeConditions){let n=!0;for(let o=0;o<a.defaultReflectToAttributeConditions.length;o++){const i=a.defaultReflectToAttributeConditions[o];let r,l;for(let t in i)r=t,l=i[t];t._properties[r]&&t._properties[r].value!==l&&(n=!1)}if(!n)continue}a.isUpdating=!0,t.$.setAttributeValue(a.attributeName,a.value,a.type),a.isUpdating=!1}}const a=[];if(0<t.children.length)for(let n=0;n<t.children.length;n++){const i=t.children[n];Utilities.Extend(i).isCustomElement&&a.push(i)}t.applyTemplate(),t.complete=function(){if(!t.templateBindingsReady){const n=t=>{t.templateBindingsReady||(t.templateBindingsReady=!0,t.updateTextNodes(),t.updateBoundNodes())};if(!t.ownerElement)n(t);else{let a=t.ownerElement,o=[];for(;a;)o.push(a),a=a.ownerElement;for(let t=o.length-1;0<=t;t--)n(o[t]);n(t)}}const n=()=>{if(t._setModuleState("ready"),t.ready(),t.isAttached=!0,t._setModuleState("attached"),t.attached(),t._handleListeners("listen"),requestAnimationFrame(()=>{t.isHidden||0!==t.offsetWidth&&0!==t.offsetHeight||(t.isHidden=!0)}),t.completed(),t.context=document,t.whenReadyCallbacks){for(let n=0;n<t.whenReadyCallbacks.length;n++)t.whenReadyCallbacks[n]();t.whenReadyCallbacks=[]}};t.wait?t.classList.add("smart-visibility-hidden"):t.classList.contains("smart-async")?requestAnimationFrame(()=>{n()}):n()};let o=[].slice.call(t.querySelectorAll("[smart-id]")).concat(a);if(window[u].EnableShadowDOM&&t.enableShadowDOM&&(o=[].slice.call(t.shadowRoot.querySelectorAll("[smart-id]")).concat(a)),0===o.length)t.complete();else{t._completeListeners=0;for(let n=0;n<o.length;n++){const a=o[n];if(Utilities.Extend(a).isCustomElement){const n=function(){t._completeListeners--,0===t._completeListeners&&(t.complete(),delete t._completeListeners)}.bind(t);a.isCompleted||a.isUtilityElement||!1!==a.wait||(t._completeListeners++,!a._onCompleted&&(a.completeHandlers=[],a._onCompleted=function(){for(let t=0;t<a.completeHandlers.length;t++)a.completeHandlers[t]()}),a.completeHandlers.push(n))}}0===t._completeListeners&&t.complete()}}visibilityChangedHandler(){const t=this;t.isReady&&requestAnimationFrame(()=>{(t.isHidden||0!==t.offsetWidth)&&0!==t.offsetHeight?t.isHidden&&(t.$.fireEvent("resize",t,{bubbles:!1,cancelable:!0}),t.isHidden=!1):t.isHidden=!0})}attributeChangedCallback(t,n,a){const i=this,o=i.propertyByAttributeName[t];if(("class"===t||"style"===t)&&i.visibilityChangedHandler(),o||i.attributeChanged(t,n,a),!(!o||o&&o.isUpdating)){let t=i.$.getAttributeValue(o.attributeName,o.type);void 0!==a&&i[o.name]!==t&&(o.isUpdatingFromAttribute=!0,i[o.name]=void 0===t?i._properties[o.name].defaultValue:t,o.isUpdatingFromAttribute=!1)}}attributeChanged(t,n,a){}set hasStyleObserver(t){const n=this;n._hasStyleObserver===void 0&&(n._hasStyleObserver=t),t?StyleObserver.watch(n):StyleObserver.unwatch(n)}get hasStyleObserver(){const t=this;return!(void 0!==t._hasStyleObserve)||t._hasStyleObserver}attached(){const t=this;t.hasStyleObserver&&StyleObserver.watch(t),t.onAttached&&t.onAttached(),Smart(t._selector)&&Smart(t._selector).attached&&Smart(t._selector).attached()}detached(){const t=this;t.hasStyleObserver&&StyleObserver.unwatch(t),t._setModuleState("detached"),t.isAttached=!1,t.ownerElement&&-1===t.ownerElement.detachedChildren.indexOf(t)&&t.ownerElement.detachedChildren.push(t),t._handleListeners("unlisten"),t.onDetached&&t.onDetached(),Smart(t._selector)&&Smart(t._selector).detached&&Smart(t._selector).detached()}propertyChangedHandler(t,n,a){const i=this;n===a||("theme"===t&&(""!==n&&i.classList.remove("smart-"+n),""!==a&&i.classList.add("smart-"+a)),"visibility"===t&&("collapsed"===n?i.classList.remove("smart-hidden"):"hidden"==n&&i.classList.remove("smart-visibility-hidden"),"collapsed"===a?i.classList.add("smart-hidden"):"hidden"==a&&i.classList.add("smart-visibility-hidden")),i.propertyChanged&&i.propertyChanged(t,n,a))}_handleListeners(t){const n=this,a=n.tagName.toLowerCase(),i=n.getStaticMember("listeners"),o=i=>{for(let o in i){const r=o.split(".");let l=r[0],s=n.$;if(!r[1])n.smartId&&(l=l+"."+n.smartId);else if(l=r[1],s=n["$"+r[0]],"document"===r[0]){let t=n.smartId;""===t&&(t=Utilities.Core.toCamelCase(a)),l=l+"."+t}else n.smartId&&(l=l+"."+n.smartId+"_"+n.parents.length);const d=i[o];s&&s[t](l,function(t){const a=n.context;n.context=n,n[d]&&n[d].apply(n,[t]),n.context=a})}};o(i),o(n.templateListeners),Smart(n._selector)&&Smart(n._selector).properties&&o(Smart(n._selector).listeners)}parseTemplate(){const t=this,n=t.template(),a=document.createDocumentFragment();if(p[t.nodeName])return p[t.nodeName].cloneNode(!0);if(""===n)return null;let i=document.createElement("div");a.appendChild(i),i.innerHTML=n;let o=i.childNodes;i.parentNode.removeChild(i);for(let t=0;t<o.length;t++)a.appendChild(o[t]);return p[t.nodeName]=a,a.cloneNode(!0)}applyTemplate(){const t=this,n=t.parseTemplate();if(!n)return;if(!n.hasChildNodes)return;const a=n.childNodes[0],o=(n,a)=>{t["$"+n]=a.$=Utilities.Extend(a),t.$[n]=a,a.ownerElement=t};let i=a;if(0<a.getElementsByTagName("content").length){let t=a.getElementsByTagName("content")[0];i=t.parentNode,i.removeChild(t)}else{const t=n.querySelectorAll("[inner-h-t-m-l]");t&&0<t.length&&(i=t[0])}t.$.template="template"===a.nodeName.toLowerCase()?a:a.querySelector("template");let r=n.querySelectorAll("[id]");0===r.length&&(r=n.querySelectorAll("*")),o("root",a),o("content",i),t.$.html=t.innerHTML.toString().trim();for(let n=0,a;n<r.length;n+=1)a=r[n],""===a.id&&(a.id="child"+n),o(a.id,a),a.setAttribute("smart-id",a.id),t.shadowRoot||a.removeAttribute("id");for(t.bindings=!1===t.hasTemplateBindings?[]:t.getBindings(n),t.$root.addClass("smart-container");t.childNodes.length;)i.appendChild(t.firstChild);if(t.appendTemplate(n),t.$.template){const n=document.createElement("div");n.classList.add("smart-template-container"),t.$.templateContainer=n,t.$.template.parentNode.insertBefore(n,t.$.template),t.refreshTemplate()}}refreshTemplate(){const t=this;if(!t.$.templateContainer)return;t.templateDetached(t.$.templateContainer);const n=t.$.template.content.cloneNode(!0);t.templateBindings=t.getBindings(n),t.templateProperties=[];let a=document.createDocumentFragment();const o=function(n,a,i){for(let r in n){const l=n[r],s=l.node.cloneNode();a.appendChild(s);let d=[],c=!1;if(l.data)for(let n in l.data){const o=l.data[n],r=o.name;if(t.templateProperties[r]=!0,s.removeAttribute(Utilities.Core.toDash(n)),"*items"==n)d=t[r],c=!0;else if(0<=r.indexOf("item.")&&i)o.value=i[r.substring(5)],s[n]=o.value;else if(0<=r.indexOf("item")&&i)o.value=i,s[n]=o.value;else if("*if"!=n)t.updateBoundNode(s,l,t,r);else if(0<=r.indexOf("(")){let n=r.substring(r.indexOf("(")),i;const o=r.substring(0,r.indexOf("("));if(n=n.substring(1,n.length-1),n=n.replace(/ /ig,""),n=n.split(","),0<n.length&&""!==n[0]){let a=[];for(let o=0;o<n.length;o++)a.push(t[n[o]]);i=t[o].apply(t,a)}else i=t[o]();!1===i&&a.removeChild(s)}else t[r]||a.removeChild(s)}if(0<d.length||c)for(let t=0;t<d.length;t++)l.children&&o(l.children,s,d[t]);else l.children&&o(l.children,s,i)}};o(t.templateBindings.children,a),t.$.templateContainer.innerHTML="",t.$.templateContainer.appendChild(a),t.templateAttached(t.$.templateContainer)}templateAttached(){}templateDetached(){}appendTemplate(t){const n=this;n.appendChild(t)}defineElementModules(){const t=this,n=t.constructor.prototype;if("BaseElement"===n.elementName){n.modules=t.constructor.modules;const a=n.modules;for(let n=0;n<a.length;n+=1)t.addModule(a[n])}else{const a=n.modules;for(let n=0;n<a.length;n+=1){const i=a[n],o=i.prototype;t.defineElementMethods(o.methodNames,o),t.defineElementProperties(i.properties)}}}watch(t,n){const a=this;return null===t||null===n?void(a._watch=null):void(a._watch={properties:t,propertyChangedCallback:n})}unwatch(){const t=this;t._watch=null}set(t,n,a){const i=this,o=i.context;i.context=!0===a?document:i,i[t]=n,i.context=o}get(t){const n=this;return n[t]}_setModuleState(t,n){const a=this,o="is"+t.substring(0,1).toUpperCase()+t.substring(1),r="on"+t.substring(0,1).toUpperCase()+t.substring(1);for(let l=0;l<a.modulesList.length;l++){const i=a.modulesList[l];i[o]=!0,i[t]&&i[t](n),i[r]&&i[r](n)}}addModule(t,n){const a=this;if(!t)return;const i=a.modules.slice(0),o=t.prototype;!t.moduleName&&t.name&&(t.moduleName=t.name),-1===i.findIndex(n=>t.moduleName===n.moduleName)&&i.push(t),a.defineModule(t),a.defineElementMethods(o.methodNames,o),a.defineElementProperties(t.properties);const r=a.constructor.prototype;if(r.modules=i,n)for(let n in Smart.Elements.tagNames){const i=Smart.Elements.tagNames[n];let o=Object.getPrototypeOf(i),r=[];for(;o!==HTMLElement;)r.push(o.prototype),o=Object.getPrototypeOf(o);0<=r.indexOf(a)&&i!==a&&i.prototype.addModule(t)}}defineModule(t){if(t.isDefined)return;t.prototype._initModule=function(t){const n=this;n.ownerElement=t};const n=t.properties||{},a=Object.keys(n),i=Object.getOwnPropertyNames(t.prototype);t.prototype.methodNames=i;for(let i=0;i<a.length;i+=1){const o=a[i],r=n[o];Object.defineProperty(t.prototype,o,{configurable:!1,enumerable:!0,get(){const t=this;return t.ownerElement?t.ownerElement[o]:r.value},set(t){const n=this;n.ownerElement[o]=t}})}t.isDefined=!0}getStaticMember(t,n){const a=this,i=window[u][a.elementName],o=i[t];n||(n="");let r="array"===n?[]:"string"===n?"":{},l=Object.getPrototypeOf(i),s=[];for(;l[t];)s.push(l[t]),l=Object.getPrototypeOf(l);for(let a=s.length-1;0<=a;a--)if("array"===n)for(let t=0;t<s[a].length;t++)-1===r.indexOf(s[a][t])&&r.push(s[a][t]);else"string"===n?-1===r.indexOf(s[a])&&(r+=s[a]):r=Utilities.Core.assign(r,s[a]);if("array"===n){for(let t=0;t<o.length;t++)-1===r.indexOf(o[t])&&r.push(o[t]);return r}return"string"===n?(-1===r.indexOf(o)&&(r+=o),r):Utilities.Core.assign(r,o)}defineElementHierarchicalProperties(t,n){const a=this,i=[];(function(t){const a=Object.keys(t);for(let o=0;o<a.length;o++){const r=a[o];if("messages"===r)continue;const l=t[r],s=Object.keys(l),d=0<=s.indexOf("value")&&0<=s.indexOf("type")&&"object"==typeof l.value;if("propertyObject"===l.type||d){const t=function(a,o){if(a.value){const r=Object.keys(a.value);for(let l=0;l<r.length;l++){const s=r[l],d=a.value[s],c=o+"_"+s;if("object"!=typeof d||null===d)break;const m=Object.keys(d),p=0<=m.indexOf("value")&&0<=m.indexOf("type");if(!p)break;if(d.parentPropertyName=o,n){const t=n._properties[c];if(a.value.hasOwnProperty(s))if(!t.isDefined)delete a.value[s];else continue;t.isDefined=!0,Object.defineProperty(a.value,s,{configurable:!1,enumerable:!0,get(){return n._properties[c].value},set(t){n.updateProperty(n,n._properties[c],t)}})}i[c]||(i[c]=d,i.length++),("propertyObject"===d.type||"object"==typeof d.value&&"array"!==d.type)&&(n?t(n._properties[c],c):t(d,c))}}};t(l,r)}}})(t),0<i.length&&!n&&a.defineElementProperties(i)}defineElement(){const t=this,n=t.constructor.prototype,a=t.getStaticMember("properties"),i=Object.getOwnPropertyNames(n);n.extendedProperties={},n.boundProperties={},n.templateListeners={},t.defineElementModules(),t.defineElementMethods(i,n),t.defineElementProperties(a),t.defineElementHierarchicalProperties(t.extendedProperties),n._initElement=function(){const t=this,a=n.extendedProperties,o=Object.keys(a),r=t.modules;t.$=Utilities.Extend(t),t.$document=y,t.smartId=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),t.isCreated||(t.modulesList=[],t._properties=[],t._beforeCreatedProperties&&(t._properties=t._beforeCreatedProperties,delete t._beforeCreatedProperties),t.detachedChildren=[],t.propertyByAttributeName=[]);for(let n=0;n<r.length;n+=1){const a=r[n];let i=new a;i._initModule(t),t.modulesList.push(i)}for(let n=0;n<o.length;n+=1){const i=o[n],r=a[i];let l=r.value;if(t._properties[i])if(void 0!==t._properties[i].notify)continue;else delete t._properties[i];if(C&&"innerHTML"===i&&delete t[i],-1===window.navigator.userAgent.indexOf("PhantomJS")&&t.hasOwnProperty(i)&&(l=t[i],delete t[i]),"array"===r.type&&void 0!==l&&null!==l&&(l=l.slice(0)),"object"===r.type&&void 0!==l&&null!==l&&(Array.isArray(l)?l=l.slice(0):l=Object.assign({},l)),t._properties[i]={name:i,notify:r.notify,allowedValues:r.allowedValues,type:r.type,nullable:r.nullable,reflectToAttribute:r.reflectToAttribute,defaultReflectToAttribute:r.defaultReflectToAttribute,defaultReflectToAttributeConditions:r.defaultReflectToAttributeConditions,value:l,readOnly:r.readOnly,defaultValue:l,attributeName:r.attributeName,observer:r.observer,inherit:r.inherit,extend:r.extend,validator:r.validator},t.propertyByAttributeName[r.attributeName]=t._properties[i],!r.hasOwnProperty("type")){const n=t.localize("propertyUnknownType",{name:i});t.log(n)}if("any"===r.type||"propertyObject"===r.type)continue;const s=Utilities.Types.getType(l);if(void 0!==l&&null!==l&&r.type!==s&&!r.validator){if("object"===r.type&&"array"===s)continue;if("number"===s){const t=["integer","int","float"].findIndex(t=>t===r.type);if(0<=t)continue}const n=t.localize("propertyInvalidValueType",{name:i,actualType:s,type:r.type});t.log(n)}}t.defineElementHierarchicalProperties(t._properties,t),t.isCreated=!0},n.registered()}defineElementMethods(t,n){const a=this,i=a.constructor.prototype,o=function(t,n){const a=Array.prototype.slice.call(arguments,2),i=function(){if(!this.isReady&&"localize"!==n&&"log"!==n&&"parseAttributes"!==n){const t=this.localize("elementNotInDOM");this.log(t)}let i=this;for(let t=0,a;t<this.modulesList.length;t++)if(a=this.modulesList[t],n in a){i=a;break}const o=this.context,r=a.concat(Array.prototype.slice.call(arguments));let l=null;const s=function(t,n){return t===n||"number"===t&&("int"===n||"integer"===n||"float"===n)||"bool"===t&&"boolean"===n||"boolean"===t&&"bool"===n||"object"===t&&"any"===n||void 0};if(this.methods){const t=this.methods[n];if(t){const a=t.split(":");l=a[a.length-1].trim();const i=t.substring(1+t.indexOf("("),t.lastIndexOf(")")),o=[],d=i.split(",");let c="";for(let t=0;t<d.length;t++){const n=d[t];c+=n,0<=n.indexOf(":")?(o.push(c),c=""):c+=","}let p=o.length;for(let t=0;t<o.length;t++){const a=o[t].trim(),i=a.split(":"),l=i[0].split("=")[0].trim(),d=0<=l.indexOf("?"),c=0<=i[1].indexOf("?"),m=i[1].replace(/\?/ig,"").trim(),u=m.split("|");let g=i[0].split("=")[1];const h=Utilities.Types.getType(r[t]);if(void 0===r[t]&&g){switch(g=g.trim(),m[0]){case"date":{let t=g.substring(g.indexOf("(")+1,g.lastIndexOf(")"));t=0<t.length?t.split(",").map(t=>parseInt(t)):[],g=0===t.length?new Date:new Date(t[0],t[1],t[2]);break}case"bool":case"boolean":g="true"===g||"1"===g;break;case"int":case"integer":g=parseInt(g);break;case"float":case"number":g=parseFloat(g);break;case"any":case"object":g=0<=g.indexOf("{")?JSON.parse(g):g;}r.push(g)}else d&&p--;if(m!==h&&h){let a=!0;for(let t=0;t<u.length;t++)if(s(h,u[t])){a=!1;break}if(a&&!(null===r[t]&&c)){const a=this.localize("methodInvalidValueType",{name:n,actualType:h,type:m,argumentIndex:t});this.log(a)}}if(r.length<p){const t=this.localize("methodInvalidArgumentsCount",{name:n,actualArgumentsCount:r.length,argumentsCount:p});this.log(t)}}}}this.context=this;const d=t.apply(i,r);if(l){const t=void 0===Utilities.Types.getType(d)?"void":Utilities.Types.getType(d);if(!s(t,l)){const a=this.localize("methodInvalidReturnType",{name:n,actualType:t,type:l});this.log(a)}}return this.context=o,d};return i},r=["constructor","ready","created","attached","detached","appendChild","insertBefore","removeChild","connect","disconnectedCallback","connectedCallback","attributeChangedCallback","propertyChangedHandler"];for(let a in t){let l=t[a];l.startsWith("_")||void 0!==r.find(t=>t===l)||!i.extendedProperties[l]&&Utilities.Types.isFunction(n[l])&&(i[l]=o(n[l],l))}}defineElementProperties(t){if(!t)return;const n=this,a=n.constructor.prototype,o=Object.keys(t),r=n.getStaticMember("properties");Object.assign(a.extendedProperties,t),n.updateProperty=function(t,n,a){const i=t;if(!n||n.readOnly)return;if(n.allowedValues){let t=!1;for(let o=0;o<n.allowedValues.length;o++)if(n.allowedValues[o]===a){t=!0;break}if(!t){const t=JSON.stringify(n.allowedValues).replace(/\[|\]/gi,"").replace(",",", ").replace(/"/gi,"'"),o="'"+a+"'",r=i.localize("propertyInvalidValue",{name:n.name,actualValue:o,value:t});return void i.log(r)}}const o=n.name,r=i._properties[o].value;if(n.validator&&i[n.validator]){const t=i.context;i.context=i;const o=i[n.validator](r,a);void 0!==o&&(a=o),i.context=t}if(r!==a){if(i.propertyChanging){const t=i.propertyChanging(o,r,a);if(!1===t||null===t)return}if(!n.hasOwnProperty("type")){const t=i.localize("propertyUnknownType",{name:o});i.log(t)}if("array"!==n.type||JSON.stringify(r)!==JSON.stringify(a)){if(void 0!==a&&null!==a&&"any"!==n.type&&"propertyObject"!==n.type&&n.type!==Utilities.Types.getType(a)&&!n.validator||null===a&&!n.nullable){let t=!0;if("object"===n.type&&"array"===Utilities.Types.getType(a)&&(t=!1),"number"===Utilities.Types.getType(a)){const a=["integer","int","float"].findIndex(t=>t===n.type);0<=a&&(t=!1)}if(t){const t=i.localize("propertyInvalidValueType",{name:o,actualType:Utilities.Types.getType(a),type:n.type});return void i.error(t)}}n.isUpdating=!0,i._properties[o].value=a,!n.isUpdatingFromAttribute&&n.reflectToAttribute&&i.$.setAttributeValue(n.attributeName,a,n.type);const t=i.isReady&&(!i.ownerElement||i.ownerElement&&i.ownerElement.isReady);if(t){if("wait"!==o||a||!r||i.isCompleted||(i.classList.remove("smart-visibility-hidden"),i.complete()),i.context!==i&&!i.wait){const t=i.context;i.context=i,i.propertyChangedHandler(o,r,a),i.context=t,n.observer&&i[n.observer]&&(i.context=i,i[n.observer](r,a),i.context=document),i._watch&&0<=i._watch.properties.indexOf(o)&&i._watch.propertyChangedCallback(o,r,a)}const t=n.notify||i.boundProperties[o];t&&(i.$.fireEvent(n.attributeName+"-changed",{context:i.context,oldValue:r,value:i[o]}),i.boundProperties[o]&&i.updateBoundNodes(o)),t&&i.templateProperties&&i.templateProperties[o]&&i.refreshTemplate(),i.dataContextProperties&&("dataContext"===o?i.applyDataContext():i.dataContextProperties[o]&&i.updateDataContextProperty(o))}n.isUpdating=!1}}};for(let n=0;n<o.length;n+=1){const i=o[n],l=t[i],s=Utilities.Core.toDash(i),d=l.type||"any",c=0<=d.indexOf("?")||"any"===d;(c&&"any"!==d&&(l.type=d.substring(0,d.length-1)),l.nullable=c,l.attributeName=s.toLowerCase(),l.name=i,l.reflectToAttribute=void 0===l.reflectToAttribute||l.reflectToAttribute,l.inherit&&r[i]&&(l.value=r[i].value),l.extend&&r[i]&&Utilities.Core.assign(l.value,r[i].value),!a.hasOwnProperty(i))&&Object.defineProperty(a,i,{configurable:!1,enumerable:!0,get(){const t=this;return t._properties[i]?t._properties[i].value:void 0},set(t){const n=this;n.updateProperty(n,n._properties[i],t)}})}}}let b=[],v=[],x=[],C=!1;const w=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(w){const t=parseInt(w[2],10);50>=t&&(C=!0)}const S=function(){if("complete"===document.readyState){x.sort(function(t,n){let a=t.element.parents.length,i=n.element.parents.length;return a<i?-1:a>i?1:0});for(let t=0;t<x.length;t++)x[t].element.isLoading=!1,x[t].callback();x=[],document.removeEventListener("readystatechange",S)}};document.addEventListener("readystatechange",S);class BaseCustomElement extends BaseElement{static get observedAttributes(){let t=this,n=["external-style"];for(let a in t.prototype.extendedProperties){const i=t.prototype.extendedProperties[a];n.push(i.attributeName)}return n}static get styleUrls(){return["smart.variables.css","smart.common.css"]}static get styles(){return""}get styleUrl(){return this._styleUrl}set styleUrl(t){this._styleUrl=t}get enableShadowDOM(){return window[u].EnableShadowDOM}importStyle(t,n){const a=this;if(a.shadowRoot&&t){const i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=t,i.onload=n,a.shadowRoot.insertBefore(i,a.shadowRoot.firstChild)}}attributeChanged(t,n,a){"style-url"===t&&(this.styleUrl=a)}attributeChangedCallback(t,n,a){const i=this;i.isReady&&super.attributeChangedCallback(t,n,a)}constructor(t,n){super();const a=this;if(t&&(n&&(a._initProperties=n),document.querySelector(t))){const n=document.querySelector(t);return n instanceof HTMLDivElement&&(n.__proto__=a.__proto__,n.created(),n.connectedCallback()),n}a._styleUrl="",window[u].EnableShadowDOM&&a.enableShadowDOM&&a.attachShadow({mode:"open"});a.isUtilityElement||a.created()}connect(){const t=this,n=t.isReady;let a;if(!n&&0<t.children.length&&t.children[0]instanceof HTMLStyleElement&&(a=t.children[0],t.removeChild(a)),(!t.shadowRoot||n&&t.shadowRoot)&&t.setup(),!n&&t.shadowRoot){a&&t.shadowRoot.insertBefore(a,t.shadowRoot.firstChild),t.importStyle(t._styleUrl);const n=t.getStaticMember("styleUrls","array"),i=t.getStaticMember("styles","string");let o=0;t.classList.add("smart-element-init");for(let a=0;a<n.length;a++)t.importStyle(Utilities.Core.getScriptLocation()+window[u].StyleBaseUrl+n[a],function(){o++,o===n.length&&(t.whenReady(function(){t.classList.remove("smart-element-init")}),t.setup())});if(i){const n=document.createElement("style");n.innerHTML=i,t.shadowRoot.insertBefore(n,t.shadowRoot.firstChild)}}}connectedCallback(){const t=this;if(t.isLoading||t.isUtilityElement)return;t.classList.add("smart-element-init");const n=function(){t.classList.remove("smart-element-init")};"complete"===document.readyState?(n(),t.connect()):(t.isLoading=!0,x.push({element:this,callback:function(){this.isReady||(n(),this.connect())}.bind(t)}))}disconnectedCallback(){const t=this;t.isAttached&&t.detached()}adoptedCallback(){const t=this;t.setup()}appendTemplate(t){const n=this;n.shadowRoot?n.shadowRoot.appendChild(t):n.appendChild(t)}}class ElementRegistry{static register(t,n){const a=n.prototype;let i=Core.toCamelCase(t).replace(/[a-z]+/,""),o=n.version||window[u].Version;if(!(window.customElements.get(t)&&window.customElements.get(t).version===o)){let r=t;for(o=o.split(".");window.customElements.get(t);)t=r+"-"+o.join("."),o[2]=parseInt(o[2])+1;b[t]||(b[t]=window[u][i]=n,a.elementName=i,a.defineElement(),v[t]&&v[t](a),window.customElements.define(t,n))}}static registerElements(){const t=this;if(t.toRegister){t.isRegistering=!0;for(let n=0;n<t.toRegister.length;n++){const a=t.toRegister[n];t.register(a.tagName,a.element)}t.isRegistering=!1}}static get(t){return b[t]?b[t]:void 0}static whenRegistered(t,n){if(!t)throw new Error("Syntax Error: Invalid tag name");const a=this,i=v[t],o=a.get(t),r=o?o.modules.length:3;try{i||o?!i&&o?(n(o.prototype),v[t]=void 0):i&&!o?v[t]=function(t){i(t),n(t)}:i&&o&&(o.proto&&(i(o.proto),n(o.proto)),v[t]=void 0):v[t]=function(t){try{n(t)}catch(t){const n=t instanceof Error?t.message:t.toString();console.log(n)}}}catch(t){const n=t instanceof Error?t.message:t.toString();console.log(n)}if(o&&r!==o.prototype.modules.length){const n=document.querySelectorAll(t);for(let t=0;t<n.length;t++){const a=n[t];a.isCreated&&a._initElement()}}}}ElementRegistry.lazyRegister=!1,ElementRegistry.tagNames=[];class Observable{constructor(t,n){const a=this;this.name="observable",t&&Object.assign(a,t);(function(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>"constructor"===n||!!n.startsWith("_")||void(a[n]=t[n]))})(t);const i=new Proxy(a,{deleteProperty:function(t,n){return delete t[n],!0},get:function(t,n){return t[n]},set:function(t,i,o){const r=t[i];return!(r!==o)||!(t[i]=o,!("notifyFn"===i||i.startsWith("_")||"canNotify"===i))||!!(n&&-1===n.indexOf(i))||!a.canNotify||(a._notify({target:t,propertyName:i,oldValue:r,newValue:o}),!0)}});return i}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){const n=this;n._canNotify=t}_notify(t){const n=this;if(n.canNotify&&n.notifyFn)for(let a=0;a<n.notifyFn.length;a++)n.notifyFn[a](t)}notify(t){const n=this;t&&(!n.notifyFn&&(n.notifyFn=[]),n.notifyFn.push(t))}}class ObservableArray{constructor(){const t=this;t.name="observableArray",t.observables=3>arguments.length?null:arguments[2];const n=new Proxy(t,{deleteProperty:function(t,n){return delete t[n],!0},apply:function(t,n,a){return t.apply(n,a)},get:function(n,a){return n[a]||isNaN(parseInt(a))?n[a]:t.getItem(parseInt(a))},set:function(n,a,i){return n[a]||isNaN(parseInt(a))?(n[a]=i,!0):(t.setItem(parseInt(a),i),!0)}});if(t._addArgs={eventName:"change",object:n,action:"add",index:null,removed:[],addedCount:1},t._removeArgs={eventName:"change",object:n,action:"remove",index:null,removed:null,addedCount:0},1<=arguments.length&&Array.isArray(arguments[0])){t._array=[];const n=arguments[0];for(let a=0,i=n.length;a<i;a++){const i=t._getItem(t._array.length,n[a]);t._array.push(i)}}else t._array=Array.apply(null,arguments);return 2===arguments.length&&(t.notifyFn=arguments[1]),n}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){const n=this;n._canNotify=t}_notify(t){const n=this;!n.canNotify||n.notifyFn&&n.notifyFn(t)}notify(t){const n=this;t&&(n.notifyFn=t)}toArray(){const t=this;return t._array}_getItem(t,n){const a=this;if("string"==typeof n)return n;if("number"==typeof n)return n;if(void 0===n)return n;const i=new Proxy(n,{deleteProperty:function(t,n){delete t[n]},set:function(n,i,o){const r=n[i];return!(n[i]=o,!!a._canNotify)||!(!a.observables||a.observables[i])||(a._notify({eventName:"change",object:a,target:n,action:"update",index:t,path:t+"."+i,oldValue:r,newValue:o,propertyName:i}),!0)}});return i}getItem(t){return this._array[t]}setItem(t,n){const a=this,i=a._array[t];a._array[t]=a._getItem(t,n),a._notify({eventName:"change",object:this,action:"update",index:t,removed:[i],addedCount:1})}get length(){return this._array.length}set length(t){const n=this;Types.isNumber(t)&&n._array&&n._array.length!==t&&n.splice(t,n._array.length-t)}toString(){const t=this;return t._array.toString()}toLocaleString(){const t=this;return t._array.toLocaleString()}concat(){const t=this;t._addArgs.index=t._array.length;const n=t._array.concat.apply(t._array,arguments);return new Smart.ObservableArray(n)}join(t){const n=this;return n._array.join(t)}pop(){const t=this;t._removeArgs.index=t._array.length-1,delete t[t._array.length-1];const n=t._array.pop();return t._removeArgs.removed=[n],t._notify(t._removeArgs),t._notifyLengthChange(),n}push(){const t=this;if(t._addArgs.index=t._array.length,1===arguments.length&&Array.isArray(arguments[0])){const n=arguments[0];for(let a=0,i=n.length;a<i;a++){const i=t._getItem(t._array.length,n[a]);t._array.push(i)}}else{const n=t._getItem(t._addArgs.index,arguments[0]);t._array.push.apply(t._array,[n])}return t._addArgs.addedCount=t._array.length-t._addArgs.index,t._notify(t._addArgs),t._notifyLengthChange(),t._array.length}_notifyLengthChange(){const t=this;if(t.canNotify){const n=t._createPropertyChangeData("length",t._array.length);t._notify(n)}}_createPropertyChangeData(t,n,a){return{eventName:"change",object:this,propertyName:t,value:n,oldValue:a}}reverse(){const t=this;return t._array.reverse()}shift(){const t=this,n=t._array.shift();return t._removeArgs.index=0,t._removeArgs.removed=[n],t._notify(t._removeArgs),t._notifyLengthChange(),n}slice(t,n){const a=this;return a._array.slice(t,n)}sort(t){const n=this;return n._array.sort(t)}splice(t,n,a){const i=this,o=i._array.length,r=i._array.splice.apply(i._array,arguments);return a?i._notify({eventName:"change",object:this,action:"add",index:t,added:r,addedCount:i._array.length>o?i._array.length-o:0}):i._notify({eventName:"change",object:this,action:"remove",index:t,removed:r,addedCount:i._array.length>o?i._array.length-o:0}),i._array.length!==o&&i._notifyLengthChange(),r}unshift(){const t=this,n=t._array.length,a=t._array.unshift.apply(t._array,arguments);return t._addArgs.index=0,t._addArgs.addedCount=a-n,t._notify(this._addArgs),t._notifyLengthChange(),a}indexOf(t,n){const a=this,o=n?n:0;for(let r=o,i=a._array.length;r<i;r++)if(a._array[r]===t)return r;return-1}lastIndexOf(t,n){const a=this,o=n?n:a._array.length-1;for(let r=o;0<=r;r--)if(a._array[r]===t)return r;return-1}find(t,n){const a=this;return a._array.find(t,n)}findIndex(t,n){const a=this;return a._array.findIndex(t,n)}every(t,n){const a=this;return a._array.every(t,n)}some(t,n){const a=this;return a._array.some(t,n)}forEach(t,n){const a=this;a._array.forEach(t,n)}map(t,n){const a=this;return a._array.map(t,n)}filter(t,n){const a=this,i=a._array.filter(t,n);return i}reduce(t,n){const a=this;return n===void 0?a._array.reduce(t):a._array.reduce(t,n)}reduceRight(t,n){const a=this;return n===void 0?a._array.reduceRight(t):a._array.reduceRight(t,n)}}let T={};window[u]&&(T=window[u]),window[u]=function(n,a){let i=n;if(n){if(0<=n.indexOf("#")||0<=n.indexOf("."))return _[n]?_[n]:a?(_[n]=new a,t(n,_[n]),_[n]):void 0;if(a){if(ElementRegistry.tagNames[n]=a,ElementRegistry.lazyRegister){ElementRegistry.toRegister||(ElementRegistry.toRegister=[]);const t=Core.toCamelCase(i).replace(/[a-z]+/,"");return window[u][t]=a,void ElementRegistry.toRegister.push({tagName:i,element:a})}ElementRegistry.register(i,a)}}},window.addEventListener("load",function(){const t=window[u].Elements.tagNames;for(let n in t){const a=t[n];let i=document.querySelectorAll("["+n+"]");for(let t=0;t<i.length;t++){const n=i[t];n instanceof HTMLDivElement&&(n.__proto__=a.prototype,n.created(),n.connectedCallback()),n.classList.add("smart-element-ready")}}});class App{constructor(t){const n=this;n._template=t.template||{},n._id=t.id||window[u].Utilities.Core.createGUID(),n._data=t.data,n._appRoot=document.getElementById(n._id),n._appRoot||(n._appRoot=document.body),n._addAttributeBindings(),n._renderForBindings(),n._addModelBindings(),n._observeData(),n.render()}_addAttributeBindings(t,a){const i=this,o=new BindingModule,r=t?o.getBindings(t):o.getBindings(i._appRoot);a||(a="");const l=function(){return n(65536*(1+Math.random())).toString(16).substring(1)},s=function(t){const n=function(t){if(t.data){let n=t.node.id;for(let o in n||(t.node.id=n="id"+l()),t.data){const r=t.data[o];if("textContent"==o&&(t.node.parentNode.id?n=t.node.parentNode.id:(t.node.id="",t.node.parentNode.id=n)),r.isEvent){const t={};t[r.name]=r.value,i._addListenerBinding(n,t)}else{const t={};t[o]=a+r.name,i._addTemplateBinding(n,t)}}}};for(let a in n(t),t.children){const i=t.children[a];i.node&&i.node.getAttribute&&i.node.getAttribute("smart-for")&&null===i.node.getAttribute("smart-for-rendered")||(n(i),i.children&&s(i))}};s(r)}get template(){return this._template}set template(t){this._template=t,this.render()}get id(){return this._id}set id(t){this._id=t}get data(){return this._data}set data(t){const n=this;n._data=t,n._observeData(),n.render()}_addTemplateBinding(t,n){const a=this;a.template["#"+t]?a.template["#"+t].bind?Object.assign(a.template["#"+t].bind,n):a.template["#"+t].bind=n:a.template["#"+t]={bind:n}}_addListenerBinding(t,n){const a=this;a.template["#"+t]?a.template["#"+t].listeners?Object.assign(a.template["#"+t].listeners,n):a.template["#"+t].listeners=n:a.template["#"+t]={listeners:n}}_updateDataFromBooleanElement(t,n){const a=this,i=n.checked,o=a.data[i];if(!(t.value&&"on"!==t.value))a.data[i]=t.checked;else if(!(Array.isArray(o)||"observableArray"===o.name))"radio"===t.type?t.checked&&(a.data[i]=t.value):t.checked?a.data[i]=t.value:a.data[i]="";else if(t.checked)o.push(t.value);else{const n=o.indexOf(t.value);0<=n&&o.splice(n,1)}}_updateDataFromNativeElement(t,n){const a=this;if("SELECT"===t.tagName&&t.addEventListener("change",function(){const i=n.value;let o=a.data[i];if(t.__updating=!0,Array.isArray(o)||"observableArray"===o.name){if(o=new ObservableArray,t.selectedOptions)for(let n=0;n<t.selectedOptions.length;n++){const a=t.selectedOptions[n];o.push(a.value)}a.data[i]=o}else a.data[i]=t.value;t.__updating=!1}),"INPUT"===t.tagName||"TEXTAREA"===t.tagName){t.addEventListener("change",function(){t.__updating=!0,i?a._updateDataFromBooleanElement(t,n):a.data.value=t.value,t.__updating=!1});let i="checkbox"===t.type||"radio"===t.type;i||t.addEventListener("keyup",function(){const i=n.value;a.data[i]=t.value})}}_addModelBindings(t){const n=this,a=t?t.querySelectorAll("[smart-model]"):n._appRoot.querySelectorAll("[smart-model]");for(let o=0;o<a.length;o++){const t=a[o];let i={value:t.getAttribute("smart-model")};"list"===t.type&&(i={selectedValues:t.getAttribute("smart-model")}),("checkbox"===t.type||"radio"===t.type)&&(i={checked:t.getAttribute("smart-model")}),t.id||(t.id="id"+Smart.Utilities.Core.createGUID().replace(/-/ig,"")),n._updateDataFromNativeElement(t,i),n._addTemplateBinding(t.id,i)}}_renderForBindings(t){const n=this,a=n._appRoot.querySelectorAll("[smart-for]");for(let o=0;o<a.length;o++){const t=a[o],i=t.getAttribute("smart-for"),r=n.data[i];t.id||(t.id="id"+Smart.Utilities.Core.createGUID().replace(/-/ig,"")),t.setAttribute("smart-for-rendered","");const l=null!==t.getAttribute("smart-for-self"),s=l?t.parentNode.querySelectorAll(".smart-for-item-"+t.id):t.querySelectorAll(".smart-for-item-"+t.id);for(let t=0;t<s.length;t++)n.template[s[t].id]&&delete n.template[s[t].id],s[t].remove();const d=l?t:t.firstElementChild,c=document.createDocumentFragment();for(let n=0;n<r.length;n++){const a=d.cloneNode(!0);a.style.display="",a.id=t.id+"_"+n,a.classList.add("smart-for-item"),a.classList.add("smart-for-item-"+t.id),a.removeAttribute("smart-for"),c.appendChild(a)}d.style.display="none",l?t.parentNode.insertBefore(c,t.nextSibling):t.appendChild(c);let m=n._appRoot.querySelectorAll(".smart-for-item-"+t.id);for(let t=0;t<m.length;t++){const a=m[t];n._addAttributeBindings(a,i+"."+t+".")}}t&&0<a.length&&n.render()}notify(t){const n=this;n.notifyFn=t}_notify(t){const n=this;if("length"===t.propertyName)return;n.notifyFn&&n.notifyFn(t);let a=t.propertyName;for(let i in t.object&&(a=t.object.propertyName),n.template){const t=n.template[i];let o=null;for(let n in t.bind)if(0<=t.bind[n].indexOf(a)){o=n;break}o&&n._setPropertyFromData(t,o)}n._renderForBindings(!0)}_observeData(){const t=this;for(let n in t._data=new window[u].Observable(t._data),t._data.canNotify=!1,t._data.notify(t._notify.bind(t)),t.data){if("function"==typeof t.data[n])continue;if(n.startsWith("_")||"notifyFn"==n||"canNotify"==n||"name"==n)continue;const a=t.data[n];Array.isArray(a)?(t.data[n]=new Smart.ObservableArray(t.data[n]),t.data[n].canNotify=!1,t.data[n].notify(t._notify.bind(t)),t.data[n].canNotify=!0,t.data[n].propertyName=n):"object"==typeof a&&(t.data[n]=new Smart.Observable(t.data[n]),t.data[n].canNotify=!1,t.data[n].notify(t._notify.bind(t)),t.data[n].canNotify=!0,t.data[n].propertyName=n)}t._data.canNotify=!0}_setPropertyFromData(t,n){const a=this;if(t.element.__updating)return;const i=t.bind[n],o=i?i.split("."):[];let r=a.data;for(let a=0;a<o.length;a++){const t=o[a];if("string"==typeof r)break;if(void 0===r[t])break;r=r[t]}t.element.__updatingProperties=!0,i&&r!==void 0?"observableArray"===r.name?"checkbox"===t.element.type?t.element[n]=0<=r.indexOf(t.element.value):t.element[n]=r.toArray().slice(0):"radio"===t.element.type?t.element.value===r?t.element[n]=!0:t.element[n]=!1:t.element[n]=r:t.properties&&(t.element[n]=t.properties[n]),t.element.__updatingProperties=!1}render(){const t=this;for(let n in t.template){const a=t.template[n],i=a.element?a.element:document.querySelector(n),o=a.properties,r=a.listeners,l=a.bind;if(!i)continue;for(let n in a.element=i,o){const o=i._properties[n];o.notify=!0,t._setPropertyFromData(a,n)}for(let n in l){const o=i._properties?i._properties[n]:null;o&&(o.notify=!0),t._setPropertyFromData(a,n)}const s=function(n){for(let a in r)i.$||(i.$=Smart.Utilities.Extend(i)),i.$[n](a,function(n){const i=r[a];t.data[i]&&t.data[i](n)});for(let a in l){const o=i._properties?i._properties[a]:null;if(o){const r=function(n){if(!i.__updatingProperties){i.__updating=!0;const o=function(t){if("radio"===i.type){const n=i.parentNode.querySelectorAll("[type=\"radio\"]");for(let a=0;a<n.length;a++)n[a].__updating=t}};o(!0);const r=l[a];if("radio"===i.type||"toggle"===i.type||"checkbox"===i.type)t._updateDataFromBooleanElement(i,l);else{(function(t,n,a){var o;for(o=0;o<n.length-1;o++)t=t[n[o]];t[n[o]]=a})(t.data,r.split("."),n.detail.value)}i.__updating=!1,o(!1)}};"textarea"===i.type&&i.$[n]("input.keyup",function(t){const n=new CustomEvent("keyup",{detail:{originalEvent:t,value:i.$.input.value}});r(n)}),i.$[n](o.attributeName+"-changed",function(t){r(t)})}else;}};s("unlisten"),s("listen"),i.onAttached=function(){s("listen")},i.onDetached=function(){s("unlisten")}}}}Object.assign(window[u],{Elements:ElementRegistry,Modules:[ErrorModule,LocalizationModule,BindingModule],BaseElement:BaseCustomElement,Utilities:Utilities,Import:function(t,n){let a=0;const o=function(t,n){return new Promise(a=>{const i=document.createElement("script");i.src=t,i.onload=a;for(let t=0;t<document.head.children.length;t++){const i=document.head.children[t];if(i.src&&0<=i.src.toString().indexOf(n))return void a()}document.head.appendChild(i)})};return new Promise(i=>{const r=Utilities.Core.getScriptLocation(),l=function(n){if(t[n]){const s=r+"/"+t[n];o(s,t[n]).then(function(){a++,a===t.length&&i(),l(n+1)})}};if(n)for(let n=0;n<t.length;n++){const l=r+"/"+t[n];o(l,t[n]).then(function(){a++,a===t.length&&i()})}else l(0)})},ObservableArray:ObservableArray,Observable:Observable,App:App,Component:class{constructor(t,n,a){let i=document.querySelector(t);return i||(i=document.querySelector(n)),window[u](t,class{get properties(){return a}}),i}},Theme:T.Theme||"",EnableShadowDOM:!1,StyleBaseUrl:"/styles/default/scoped/",Version:"3.0.0"});let D=window[u].Theme;Object.defineProperty(window[u],"Theme",{configurable:!1,enumerable:!0,get(){return D},set(t){const n=D;D=t,y.fireEvent("theme-changed",{oldValue:n,newValue:t},{bubbles:!0,cancelable:!0})}}),window[u]("smart-base-element",window[u].BaseElement),window[u]("smart-content-element",class extends window[u].BaseElement{static get properties(){return{content:{type:"any",reflectToAttribute:!1},innerHTML:{type:"string",reflectToAttribute:!1}}}template(){return"<div inner-h-t-m-l='[[innerHTML]]'></div>"}ready(){super.ready();const t=this;t.applyContent()}clearContent(){for(const t=this;t.$.content.firstChild;)t.$.content.removeChild(t.$.content.firstChild)}applyContent(){const t=this;if(void 0===t.content)return void(t.content=t.$.content);if(""===t.content||null===t.content)return void t.clearContent();if(t.content instanceof HTMLElement)return t.clearContent(),void t.$.content.appendChild(t.content);const n=document.createDocumentFragment();let a=document.createElement("div");n.appendChild(a),t.content instanceof HTMLElement?a.appendChild(t.content):a.innerHTML=t.content;let o=Array.from(a.childNodes);a.parentNode.removeChild(a);for(let t=0;t<o.length;t++)n.appendChild(o[t]);t.clearContent(),t.$.content.appendChild(n)}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;n===a||("innerHTML"===t&&(i.content=a,i.applyContent(),i.innerHTML=i.content=Utilities.Core.html(i.$.content)),"content"===t&&i.applyContent())}}),window[u]("smart-scroll-viewer",class extends window[u].ContentElement{static get properties(){return{horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{"horizontalScrollBar.change":"_horizontalScrollbarHandler","verticalScrollBar.change":"_verticalScrollbarHandler",wheel:"_mouseWheelHandler"}}template(){return`<div id="container" class="smart-container">
                    <div id="scrollViewerContainer" class ="smart-scroll-viewer-container">
                      <div id="scrollViewerContentContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-scroll-viewer-content-container">
                          <content></content>
                      </div>
                    </div>
                    <smart-scroll-bar id="verticalScrollBar" animation="[[animation]]" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>
                    <smart-scroll-bar id="horizontalScrollBar" animation="[[animation]]" disabled="[[disabled]]"></smart-scroll-bar>
                </div>`}appendChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t&&n.$.scrollViewerContentContainer.appendChild(t)}removeChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t&&n.$.scrollViewerContentContainer.removeChild(t)}removeAll(){const t=this;t.isCompleted&&(t.$.scrollViewerContentContainer.innerHTML="")}_horizontalScrollbarHandler(t){const n=this;n.$.scrollViewerContentContainer.style.left=-n.scrollLeft+"px",t.stopPropagation(),n.onHorizontalChange&&n.onHorizontalChange()}_verticalScrollbarHandler(t){const n=this;n.$.scrollViewerContentContainer.style.top=-n.scrollTop+"px",t.stopPropagation(),n.onVerticalChange&&n.onVerticalChange()}_mouseWheelHandler(t){const n=this;!n.disabled&&(n.computedHorizontalScrollBarVisibility||n.computedVerticalScrollBarVisibility)&&(n.computedVerticalScrollBarVisibility?(t.stopPropagation(),t.preventDefault(),0<n.scrollHeight&&n.scrollTo(n.scrollTop+(0>t.deltaY?-n.offsetHeight:n.offsetHeight))):n.computedHorizontalScrollBarVisibility&&(t.stopPropagation(),t.preventDefault(),0<n.scrollWidth&&n.scrollTo(void 0,n.scrollLeft+(0>t.deltaY?-n.offsetWidth:n.offsetWidth))))}applyContent(){const t=this;super.applyContent(),t.refresh()}get computedHorizontalScrollBarVisibility(){const t=this;return t._scrollView&&t._scrollView.hScrollBar?!t._scrollView.hScrollBar.$.hasClass("smart-hidden"):null}get computedVerticalScrollBarVisibility(){const t=this;return t._scrollView&&t._scrollView.vScrollBar?!t._scrollView.vScrollBar.$.hasClass("smart-hidden"):null}scrollTo(t,n){const a=this;a._scrollView&&(t!==void 0&&a._scrollView.scrollTo(t),n!==void 0&&a._scrollView.scrollTo(n,!1))}refreshScrollBarsVisibility(){const t=this;t._scrollView&&(t._scrollView.hScrollBar.disabled=t.disabled,t._scrollView.vScrollBar.disabled=t.disabled,"disabled"===t.horizontalScrollBarVisibility&&(t._scrollView.hScrollBar.disabled=!0),"disabled"===t.verticalScrollBarVisibility&&(t._scrollView.vScrollBar.disabled=!0),0<t.scrollWidth?t._scrollView.hScrollBar.$.removeClass("smart-hidden"):"visible"!==t.horizontalScrollBarVisibility&&t._scrollView.hScrollBar.$.addClass("smart-hidden"),0<t.scrollHeight?t._scrollView.vScrollBar.$.removeClass("smart-hidden"):"visible"!==t.verticalScrollBarVisibility&&t._scrollView.vScrollBar.$.addClass("smart-hidden"),"hidden"===t.horizontalScrollBarVisibility&&t._scrollView.hScrollBar.$.addClass("smart-hidden"),"hidden"===t.verticalScrollBarVisibility&&t._scrollView.vScrollBar.$.addClass("smart-hidden"),"visible"===t.horizontalScrollBarVisibility&&t._scrollView.hScrollBar.$.removeClass("smart-hidden"),"visible"===t.verticalScrollBarVisibility&&(t._scrollView.vScrollBar.$.removeClass("smart-hidden"),!t.disabled&&(t._scrollView.vScrollBar.disabled=0>=t.scrollHeight)),t.computedHorizontalScrollBarVisibility&&t.computedVerticalScrollBarVisibility?(t._scrollView.hScrollBar.$.addClass("bottom-corner"),t._scrollView.vScrollBar.$.addClass("bottom-corner")):(t._scrollView.hScrollBar.$.removeClass("bottom-corner"),t._scrollView.vScrollBar.$.removeClass("bottom-corner")))}ready(){super.ready();const t=this;t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar),t.refresh()}refresh(){function t(){return i=a.$.scrollViewerContentContainer.offsetWidth-a.$.scrollViewerContainer.offsetWidth,0<i&&"hidden"!==a.horizontalScrollBarVisibility||"visible"===a.horizontalScrollBarVisibility?a.$.scrollViewerContainer.classList.add("hscroll"):a.$.scrollViewerContainer.classList.remove("hscroll"),i}function n(){return o=a.$.scrollViewerContentContainer.offsetHeight-a.$.scrollViewerContainer.offsetHeight,0<o&&"hidden"!==a.verticalScrollBarVisibility||"visible"===a.verticalScrollBarVisibility?a.$.scrollViewerContainer.classList.add("vscroll"):a.$.scrollViewerContainer.classList.remove("vscroll"),o}const a=this;if(!a.$.scrollViewerContentContainer)return;let i,o;a.scrollWidth=t(),a.scrollHeight=n(),a.scrollHeight||(a.scrollWidth=t()),a.scrollWidth||(a.scrollHeight=n()),a.computedVerticalScrollBarVisibility&&(a.scrollHeight+=a._scrollView.hScrollBar.offsetHeight),a.computedHorizontalScrollBarVisibility&&(a.scrollWidth+=a._scrollView.vScrollBar.offsetWidth)}attached(){const t=this;super.attached(),t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar))}detached(){const t=this;super.detached(),t._scrollView&&(t._scrollView.unlisten(),delete t._scrollView)}get scrollWidth(){const t=this;return t._scrollView&&t._scrollView.hScrollBar?1===t._scrollView.hScrollBar.max&&"visible"===t.horizontalScrollBarVisibility?0:t._scrollView.hScrollBar.max:-1}set scrollWidth(t){const n=this;0>t&&(t=0),n._scrollView&&n._scrollView.hScrollBar&&(n._scrollView.hScrollBar.max=0===t&&"visible"===n.horizontalScrollBarVisibility?0:t,n.refreshScrollBarsVisibility())}get scrollHeight(){const t=this;return t._scrollView&&t._scrollView.vScrollBar?1===t._scrollView.vScrollBar.max&&"visible"===t.verticalScrollBarVisibility?0:t._scrollView.vScrollBar.max:0}set scrollHeight(t){const n=this;0>t&&(t=0),n._scrollView&&n._scrollView.vScrollBar&&(n._scrollView.vScrollBar.max=0===t&&"visible"===n.verticalScrollBarVisibility?1:t,n.refreshScrollBarsVisibility())}get scrollLeft(){const t=this;return t._scrollView&&t._scrollView.hScrollBar?t._scrollView.hScrollBar.value:0}set scrollLeft(t){const n=this;0>t&&(t=0),n._scrollView&&n._scrollView.hScrollBar&&(n._scrollView.hScrollBar.value=t)}get scrollTop(){const t=this;return t._scrollView&&t._scrollView.vScrollBar?t._scrollView.vScrollBar.value:0}set scrollTop(t){const n=this;0>t&&(t=0),n._scrollView&&n._scrollView.vScrollBar&&(n._scrollView.vScrollBar.value=t)}propertyChangedHandler(t,n,a){const i=this;super.propertyChangedHandler(t,n,a),i.refresh()}}),window[u].Utilities.Assign("PositionDetection",class{constructor(t,a,i,o){const r=this;if(a){const i="dropDown"+n(65536*(1+Math.random())).toString(16).substring(1);a.id=i,t.setAttribute("aria-controls",i)}r.context=t,r.dropDown=a,r.defaultParent=i,r.closeMethod=o}handleAutoPositioning(){function t(){r=i(t),("auto"!==a.dropDownPosition||a.disabled||null===a.parentElement)&&cancelAnimationFrame(r);const l=Date.now();200<=l-o&&(n.scrollHandler(),o=Date.now())}const n=this,a=n.context;if("auto"!==a.dropDownPosition||a.disabled)return;const i=(()=>window.requestAnimationFrame)();let o=Date.now(),r;return r=i(t)}checkBrowserBounds(t){const n=this.context;"auto"!==n.dropDownPosition||n.disabled||("vertically"===t?this.checkBrowserBoundsVertically():"horizontally"===t?this.checkBrowserBoundsHorizontally():(this.checkBrowserBoundsVertically(),this.checkBrowserBoundsHorizontally()))}checkBrowserBoundsHorizontally(){const t=this.context,n=this.dropDown;let a=0,i;null===t._dropDownParent?n.style.left="":(i=!0,window.innerWidth!==document.documentElement.clientWidth&&(a=window.innerWidth-document.documentElement.clientWidth));let r=t.getBoundingClientRect().left;if(0>r&&(n.style.left=(i?0:o(r))+"px",r=parseFloat(n.style.left)),r+n.offsetWidth>document.documentElement.clientWidth){const t=r-o(document.documentElement.clientWidth-r-n.offsetWidth);n.style.left=(i?t:t-r)+"px",window.innerWidth===document.documentElement.clientWidth&&(n.style.left=parseFloat(n.style.left)+a+"px"),i&&window.innerHeight===document.documentElement.clientHeight&&this.positionDropDown(!0)}}checkBrowserBoundsVertically(t){const n=this.context,a=this.dropDown,i=n._dropDownListPosition;t||(t=n.getBoundingClientRect());0===t.height||(n._dropDownListPosition=0<=document.documentElement.clientHeight-o(t.top+t.height+a.offsetHeight)?"bottom":0<=t.top-a.offsetHeight?"top":"overlay-center",this.updatePositionAttribute(i,n._dropDownListPosition))}scrollHandler(){const t=this.context;if(t.parentElement){const n=t.getBoundingClientRect();if(n.top!==t._positionTop){const a=t._dropDownListPosition;this.checkBrowserBoundsVertically(n),t._dropDownListPosition!==a&&this.positionDropDown(),t._positionTop=n.top}}}getDropDownParent(t){const n=this.context,a=this.dropDown;let i=n.dropDownAppendTo;n._positionedParent=null,null===i?n._dropDownParent=null:"body"===i||i===document.body?n._dropDownParent=document.body:i instanceof HTMLElement?n._dropDownParent=i:"string"==typeof i?(i=document.getElementById(i),i instanceof HTMLElement?n._dropDownParent=i:(n.dropDownAppendTo=null,n._dropDownParent=null)):(n.dropDownAppendTo=null,n._dropDownParent=null);let o=n._dropDownParent;if(null!==o){for(;"static"===window.getComputedStyle(o).position&&o!==document.body;)o=o.parentElement;n._positionedParent=o===document.body?null:o,a&&(a.setAttribute("animation",n.animation),""!==n.theme&&a.$.addClass(n.theme),t&&(n._dropDownParent.appendChild(a),a.$.addClass("smart-drop-down-repositioned")),-1===n.detachedChildren.indexOf(a)&&n.detachedChildren.push(a))}}dropDownAppendToChangedHandler(){const t=this.context,n=this.dropDown,a=t._dropDownParent;this.getDropDownParent();t._dropDownParent===a||(t[this.closeMethod](),["left","top","font-size","font-family","font-style","font-weight"].forEach(t=>n.style[t]=null),null===t._dropDownParent?(this.defaultParent.appendChild(n),n.$.removeClass("smart-drop-down-repositioned")):(t._dropDownParent.appendChild(n),n.$.addClass("smart-drop-down-repositioned")))}dropDownPositionChangedHandler(){const t=this;t.dropDown.style.transition="none",t.context[t.closeMethod](),t.setDropDownPosition(),t.handleAutoPositioning()}dropDownAttached(t){const n=this.context;null===n._dropDownParent||(n._dropDownParent.appendChild(this.dropDown),this.handleAutoPositioning(),t&&n[t]())}dropDownDetached(){const t=this.context;null!==t._dropDownParent&&t._dropDownParent.removeChild(this.dropDown)}setDropDownPosition(){const t=this.context,n=t.dropDownPosition,a=t._dropDownListPosition;"auto"===n?this.checkBrowserBounds():t._dropDownListPosition=n,this.updatePositionAttribute(a,t._dropDownListPosition)}updatePositionAttribute(t,n){const a=this.context,i=this.dropDown;a.$.dropDownButton&&!a.$.dropDownButton.hasAttribute(n)&&(a.$.dropDownButton.removeAttribute(t),a.$.dropDownButton.setAttribute(n,"")),i.hasAttribute(n)||(i.style.transition="none",i.removeAttribute(t),i.setAttribute(n,""),requestAnimationFrame(function(){i.style.transition=null}))}positionDropDown(t){const n=this.context,a=this.dropDown;if(!n.opened||null===n._dropDownParent)return;const i=n.getBoundingClientRect();let o,r;if(this.customPositionDropDown){const t=this.customPositionDropDown(i);o=t.left,r=t.top}else switch(o=i.left,r=i.top,n._dropDownListPosition){case"bottom":r+=n.$.container.offsetHeight-1;break;case"center-bottom":r+=n.$.container.offsetHeight-1,o+=n.offsetWidth-a.offsetWidth/2;break;case"center-top":r-=a.offsetHeight-1,o+=n.offsetWidth-a.offsetWidth/2;break;case"top":r-=a.offsetHeight-1;break;case"overlay-bottom":break;case"overlay-center":r-=a.offsetHeight/2-n.offsetHeight/2;break;case"overlay-top":r-=a.offsetHeight-n.offsetHeight;}const l=this.getDropDownOffset();a.style.top=r+l.y+"px";t||(a.style.left=o+l.x+"px")}getDropDownOffset(){const t=this.context._positionedParent;let n,a;if(t){const i=t.getBoundingClientRect();n=-i.left,a=-i.top}else n=window.pageXOffset,a=window.pageYOffset;return{x:n,y:a}}placeOverlay(){const t=this.context;if(t.dropDownOverlay&&!t._overlay){const n=document.createElement("div");n.classList.add("smart-drop-down-overlay"),n.style.width=document.documentElement.scrollWidth+"px",n.style.height=document.documentElement.scrollHeight+"px",document.body.appendChild(n),t._overlay=n}}removeOverlay(t){function n(){0<a.dropDown.getBoundingClientRect().height?requestAnimationFrame(n):(document.body.removeChild(i._overlay),delete i._overlay)}const a=this,i=a.context;i._overlay&&(i.hasAnimation&&t?requestAnimationFrame(n):(document.body.removeChild(i._overlay),delete i._overlay))}})})(),Smart.Utilities.Assign("Complex",class{constructor(t,n){if("string"==typeof t)this.complexNumber=this.parseComplexNumber(t),this.realPart=this.complexNumber.realPart,this.imaginaryPart=this.complexNumber.imaginaryPart;else if("number"==typeof t){if(this.realPart=t,"number"==typeof n)this.imaginaryPart=n;else if("undefined"==typeof n)this.imaginaryPart=0;else throw new Error("Can't create complex number: invalid imaginary part");this.complexNumber=this.parseComplexNumber(this.realPart,this.imaginaryPart)}else throw new Error("Can't create complex number")}valueOf(){return 0===this.imaginaryPart?this.realPart:null}isNaN(){return isNaN(this.realPart)||isNaN(this.imaginaryPart)}isZero(){return(0===this.realPart||-0===this.realPart)&&(0===this.imaginaryPart||-0===this.imaginaryPart)}isFinite(){return isFinite(this.realPart)&&isFinite(this.imaginaryPart)}isInfinite(){return!(this.isNaN()||this.isFinite())}parseComplexNumber(t,n){const a={realPart:0,imaginaryPart:0};if(t===void 0||null===t)a.realPart=a.imaginaryPart=0;else if(n!==void 0)a.realPart=t,a.imaginaryPart=n;else switch(typeof t){case"object":if("imaginaryPart"in t&&"realPart"in t)a.realPart=t.realPart,a.imaginaryPart=t.imaginaryPart;else if(2===t.length)a.realPart=t[0],a.imaginaryPart=t[1];else throw SyntaxError("Invalid Complex Number Parameter");break;case"string":{a.imaginaryPart=a.realPart=0;const n=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let o=1,r=0;if(null===n)throw SyntaxError("Invalid Complex Number Parameter");for(let t=0;t<n.length;t++){const i=n[t];if(" "===i||"\t"===i||"\n"===i);else if("+"===i)o++;else if("-"===i)r++;else if("i"===i||"I"===i){if(0===o+r)throw SyntaxError("Invalid Complex Number Parameter");" "===n[t+1]||isNaN(n[t+1])?a.imaginaryPart+=parseFloat((r%2?"-":"")+"1"):(a.imaginaryPart+=parseFloat((r%2?"-":"")+n[t+1]),t++),o=r=0}else{if(0===o+r||isNaN(i))throw SyntaxError("Invalid Complex Number Parameter");"i"===n[t+1]||"I"===n[t+1]?(a.imaginaryPart+=parseFloat((r%2?"-":"")+i),t++):a.realPart+=parseFloat((r%2?"-":"")+i),o=r=0}}if(0<o+r)throw SyntaxError("Invalid Complex Number Parameter");break}case"number":a.imaginaryPart=0,a.realPart=t;break;default:throw SyntaxError("Invalid Complex Number Parameter");}return a}compare(t,n){var a=Math.abs;const i=this.parseComplexNumber(t,n),o=this.parseComplexNumber("1e-16");return a(i.realPart-this.realPart)<=o&&a(i.imaginaryPart-this.imaginaryPart)<=o}toString(){let t=this.realPart,n=this.imaginaryPart,a="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==t&&(a+=t),0!==n&&(0===t?0>n&&(a+="-"):a+=0>n?" - ":" + ",n=Math.abs(n),1!==n&&(a+=n),a+="i"),a?a:"0")}});class DataAdapter{constructor(t){t||(t={});const n=Object.assign(this,t);if(n.$document=Smart.Utilities.Extend(document),n.boundSource=!1===n.observable?[]:new Smart.ObservableArray,n.dataItemById=[],void 0===n.allowAdd&&(n.allowAdd=!0),void 0===n.allowRemove&&(n.allowRemove=!0),void 0===n.allowUpdate&&(n.allowUpdate=!0),void 0===t.observable&&(n.observable=!0),t.dataSource||(n.dataSource=[]),t.dataFields||(n.dataFields=[]),t.dataSourceType||(n.dataSourceType="array"),t.id||(n.id=null),n.dataFields){let t=[];if("number"==typeof n.dataFields)for(let a=0;a<n.dataFields;a++)t.push({name:a,dataType:"string"});else for(let a=0;a<n.dataFields.length;a++){const i=n.dataFields[a];if("string"==typeof i){const n=i.split(":"),a=n[0].trim(),o=1<n.length?n[1].trim():"string";t.push({name:a,dataType:o})}else t.push(i)}n.dataFields=t}t&&!1!==t.autoBind&&n.dataBind(),n.isInitialized=!0}get dataSource(){const t=this;return t._dataSource||(t._dataSource=[]),t._dataSource}set dataSource(t){const n=this;n._dataSource=t,n.isInitialized&&(n.boundSource=!1===n.observable?[]:new Smart.ObservableArray,n.dataItemById=[],n.bindingCompleted=!1,n.dataBind())}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){const n=this;n._canNotify=t}_notify(t){const n=this;!n.canNotify||n.notifyFn&&n.notifyFn(t)}notify(t){const n=this;t&&(n.notifyFn=t)}dataBind(){const t=this;t.clear(),"array"===t.dataSourceType&&(t._bindToArray(),t.boundSource.notify(function(n){"update"===n.type&&0<=n.path.indexOf(".")&&t._notify&&t._notify({action:"update",data:n.item,index:n.index})}),t._onBindingComplete())}_onBindingComplete(){const t=this;t._buildHierarchy(),t.onBindingComplete&&t.onBindingComplete({data:t.boundSource}),t._notify&&t._notify({action:"bindingComplete",data:t.boundSource}),t.bindingCompleted=!0}refreshHierarchy(){const t=this;t._buildHierarchy()}find(){const t=this;return t.boundSource.find(arguments)}toArray(){const t=this;return t.boundSource.toArray()}onVirtualDataSourceRequested(t,n){const a=this;let o=n?n.first:1/0,r=n?n.last:1/0;if(void 0===o&&(o=1/0),void 0===r&&(r=1/0),a.virtualFirstIndex=o,a.virtualLastIndex=r,a.virtualDataSource){let i=!1;const l=t=>0===Object.entries(t).length&&t.constructor===Object,s=l(n.sorting)&&l(n.filtering)&&l(n.grouping);if(a.virtualDataSourceCache&&o!==1/0&&s){let t=0;for(let n=o;n<r;n++)a[n].isEmpty||t++;t==r-o&&(i=!0)}i?t():a.virtualDataSource(function(i){i.virtualDataSourceLength&&(a.virtualDataSourceLength=i.virtualDataSourceLength),new Smart.DataAdapter({dataSource:i.dataSource,dataFields:i.dataFields||a.dataFields,data:n,onBindingComplete(n){if(o===1/0)a.add(n.data);else{let t=[],l=[];for(let a=0;a<n.data.length;a++){const i=n.data[a];o+a<=r&&(t.push(i),l.push(o+a))}a.update(l,t)}a.onFilter&&a.onFilter(),t()}})},{first:o,last:r,sorting:n.sorting,filtering:n.filtering,grouping:n.grouping,action:n.action})}else t()}add(t){const n=this;if(!t)return;let a=!0;const o=function(t){const i=!t.$||t.$&&void 0===t.$.id?n._getDataItem(t,n.boundSource.length):t;n[n.boundSource.length]=i,n.dataItemById[i.$.id]=i;const o=n.boundSource.push(i);return o||(a=!1),i};if(t.length){let a=[];for(let n=0;n<t.length;n++){const i=o(t[n]);a.push(i)}n._notify({action:"add",data:a})}else{const a=o(t);n._notify({action:"add",data:a})}return n.refreshHierarchy(),a}removeLast(){const t=this,n=t.boundSource.pop();return t._notify({action:"removeLast",data:n}),t.refreshHierarchy(),n}remove(t){const n=this,a=n.boundSource[t];if(!a)throw new Error("Invalid Item Index");n.boundSource.splice(t,1),n._notify({action:"remove",index:t,data:a}),n.refreshHierarchy()}update(t,n){const a=this;if(!(Smart.Utilities.Types.isArray(t)&&Smart.Utilities.Types.isArray(n)&&0===t.length&&0===n.length)){if(n.length&&t.length){let o=[];for(let r=0;r<t.length;r++){const i=a._getDataItem(n[r],t[r]),l=t[r];o.push(i),a.boundSource[l]=i,a[l]=a.boundSource[l],a.dataItemById[i.$.id]=a[l]}return a._notify({action:"update",index:t,data:o}),void a.refreshHierarchy()}const i=a._getDataItem(n,t);return a.boundSource[t]=i,a[t]=a.boundSource[t],a.dataItemById[i.$.id]=a[t],a._notify({action:"update",index:t,data:i}),a.refreshHierarchy(),i}}insert(t,n){const a=this,i=a.boundSource.splice(t,0,n);return a._notify({action:"insert",index:t,data:n}),a.refreshHierarchy(),i}indexOf(t){const n=this,a=n.boundSource.indexOf(t);return a}get length(){const t=this;return t.virtualDataSourceLength?t.virtualDataSourceLength:"number"==typeof t.dataSource?t.dataSource:t.bindingCompleted?t.boundSource.length:t.dataSource&&t.dataSource.length?t.dataSource.length:t.boundSource.length}clear(){const t=this;for(let n=0;n<t.boundSource.length;n++)delete t[n];t._cachedValues=[],t.boundSource=t.observable?new Smart.ObservableArray:[],t.dataItemById=[],t.refreshHierarchy()}_getId(t,n,a){if(null!==t&&t.name!==void 0&&t.name){let i=n.getAttribute(t.name);if(null!==i&&0<i.toString().length)return i;if(t.map)try{let a=n.getAttribute(t.map);if(null!==a&&0<a.toString().length)return a}catch(t){return a}return}if(t&&0<t.toString().length){let a=n.getAttribute(t);if(null!==a&&0<a.toString().length)return a.trim().split(" ").join("").replace(/([ #;?%&,.+*~\':'!^$[\]()=>|\/@])/g,"");else{let a=t.split(this.mapChar);if(1<a.length){let t=n;for(let n=0;n<a.length;n++)void 0!==t&&(t=t[a[n]]);if(void 0!==t)return t}else if(void 0!==n[t])return n[t]}}return a}_buildHierarchy(){const t=this;if(!t.reservedNames)t.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};else{const n=t.reservedNames;n.leaf||(n.leaf="leaf"),n.parent||(n.parent="parent"),n.expanded||(n.expanded="expanded"),n.checked||(n.checked="checked"),n.selected||(n.selected="selected"),n.level||(n.level="level"),n.data||(n.data="data")}const n=t.reservedNames;if(t.childrenDataField){for(let a=0;a<this.boundSource.length;a++){const i=this.boundSource[a];if(!i)continue;const o=function(a){if(t.item)a.boundSource=a[t.childrenDataField][t.item];else{const n=t.childrenDataField.split(t.mapChar);let i=null;if(1<n.length){let t=a;for(let a=0;a<n.length;a++)void 0!==t&&(t=t[n[a]]);i=t}else i=a[t.childrenDataField];a.boundSource=i}(null===a.boundSource||a.boundSource&&0===a.boundSource.length)&&(a[n.leaf]=!0)};o(i),i[n.level]=0;let r=this._getId(t.id,i,a);i.$||(i.$={}),i.$.id=r,i[n.parent]=null,i[n.data]=i,i[n.expanded]===void 0&&(i[n.expanded]=!1);const l=function(a,r){if(!r)return void(a.boundSource=[]);for(let s=0,i;s<r.length;s++){if(i=r[s],!i)continue;o(i),i[n.level]=a[n.level]+1,i[n.parent]=a,i[n.data]=i;let d=t._getId(t.id,i,s);i.$.id=d===s&&null===t.id?a.$.id+"_"+d:d,void 0===i[n.expanded]&&(i[n.expanded]=!1),l(i,i.boundSource)}};l(i,i.boundSource)}this.itemHierarchy=t.boundSource}t.xmlRoot&&"xml"===t.dataSourceType&&(this.itemHierarchy=this._getDataItemHierarchy("uid","_parentuid","boundSource",null,t.boundSource)),t.keyDataField&&t.parentDataField&&(this.itemHierarchy=this._getDataItemHierarchy(t.keyDataField.name,t.parentDataField.name,"boundSource",null,t.boundSource)),t.groupBy&&(this.itemHierarchy=this._getGroupDataItemHierarchy(t.groupBy,"boundSource","label",null,"data",null,"parent",t.boundSource))}_getGroupDataItemHierarchy(t,n,a,i,o,r,l,s,d){let c=this;d||(d=0);let m=c.reservedNames;const p=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()};let u=[];for(let c=0;c<t.length;c++)u[c]=p();n||(n="items"),a||(a="group"),o||(o="item"),l||(l="parent"),void 0===r&&(r="value");const g=[],h=[];let _=0;const f=function(t){let n=t;if(i)for(let t in i){const a=i[t];a.name&&a.map&&(n[a.map]=n[a.name])}return n};for(let c=0,y;c<s.length;c++){y=Object.assign({},f(s[c])),y[m.leaf]=!1;let i=[],b=0;for(let n=0;n<t.length;n++){const a=t[n],o=y[a];null!==o&&(i[b++]={value:o,group:a,hash:u[n]})}if(i.length!==t.length)break;let v=null,x="";for(let t=0;t<i.length;t++){const s=i[t].value,c=i[t].group,p=i[t].hash;if(x=x+"_"+p+"_"+s,void 0!==h[x]&&null!==h[x]){v=h[x];continue}if(null===v){v={},v[m.level]=0,v[m.leaf]=!1,v[l]=null,v[a]=s,v[o]=y,v.groupDataField=c,v[m.expanded]=void 0!==y[m.expanded]&&y[m.expanded],r&&(v[r]=y[r]),v[n]=[];let t=g.length+d;(!this.id||"number"==typeof y.$.id||isFinite(y.$.id))&&(t="Item"+t),void 0===v.$.id&&(v.$.id=t),g[_++]=v}else{const t={};t[m.level]=v[m.level]+1,t[l]=v,t[a]=s,t[n]=[],t[o]=y,t.groupDataField=c,t[m.leaf]=!1,t[m.expanded]=void 0!==y[m.expanded]&&y[m.expanded],r&&(t[r]=y[r]),void 0===t.$.id&&(t.$.id=v.$.id+"_"+v[n].length),v[n][v[n].length]=t,v=t}h[x]=v}y&&(y[m.leaf]=!0),null===v?void 0===y.$.id&&(y.$.id=p()):(null===this.id?void 0===y.$.id&&(y.$.id=v.$.id+"_"+v[n].length):void 0===y.$.id&&-1===y.$.id.toString().indexOf(v.$.id)&&(y.$.id=v.$.id+"_"+y.$.id),y[l]=v,y[m.level]=v[m.level]+1,v[n][v[n].length]=y)}return g}_getDataItemHierarchy(t,n,a,i,o){const r=this;let l=[],s=this.boundSource;if(o&&(s=o),0===this.boundSource.length)return null;let d=null===a?"items":a,c=[],m=s,p=m.length,u=r.reservedNames,g=function(t){let n=t;if(i)for(let t in i){const a=i[t];a.name&&a.map&&(n[a.map]=n[a.name])}return n};for(let r=0;r<p;r++){let a=Object.assign({},m[r]),i=a[n],o=a[t];c[o]={parentId:i,item:a}}for(let r=0;r<p;r++){let a=Object.assign({},m[r]),i=a[n],o=a[t];if(void 0!==c[i]){let t={parentId:i,item:c[o].item},n=c[i].item;n[d]||(n[d]=[]);let a=n[d].length;t=t.item,u?void 0===t[u.parent]&&(t[u.parent]=n):void 0===t.parent&&(t.parent=n);let r=g(t);n[d][a]=r,c[i].item=n,c[o]=t}else{let t=c[o].item;u?void 0===t[u.parent]&&(t[u.parent]=null):void 0===t.parent&&(t.parent=null);let n=g(t);u?n[u.level]=0:n.level=0,l[l.length]=n}}if(0!==l.length){let t=function(n,a){for(let o=0;o<a.length;o++){u?a[o][u.level]=n:a[o].level=n;let i=a[o][d];i?0<i.length?t(n+1,i):u?a[o][u.leaf]=!0:a[o].leaf=!0:u?a[o][u.leaf]=!0:a[o].leaf=!0}};t(0,l)}return l}summarize(t,n){const a=this;Array.isArray(t)||(t=[t]);let i=[];for(let a=0;a<t.length;a++){const n=t[a];for(let t in n){const a=n[t];i.push({dataField:t,functions:a})}}t=i;let o={},r=[];n||(n=a.boundSource);let l=n.length;if(0!==l&&void 0!==l){for(let a=0,i;a<l;a++){i=n[a];for(let n=0;n<t.length;n++){const l=t[n];let s=i[l.dataField];if(l.functions){o[l.dataField]=o[l.dataField]||{},r[l.dataField]=r[l.dataField]||0,r[l.dataField]++;const t=function(t){for(let n in t){let a=o[l.dataField][n];null===a&&(o[l.dataField][n]=0,a=0),"function"==typeof t[n]&&(a=t[n](a,s,l.dataField,i)),o[l.dataField][n]=a}};let n=parseFloat(s);n=!isNaN(n),n&&(s=parseFloat(s)),"number"==typeof s&&isFinite(s)?l.functions.forEach(function(n){let i=o[l.dataField][n];if(null===i&&(i=0,"min"===this&&(i=9999999999999),"max"===this&&(i=-9999999999999)),"sum"===n||"avg"===n||"stdev"===n||"stdevp"===n||"var"===n||"varp"===n)i+=parseFloat(s);else if("product"===n)0==a?i=parseFloat(s):i*=parseFloat(s);else if("min"===n)i=Math.min(i,parseFloat(s));else if("max"===n)i=Math.max(i,parseFloat(s));else if("count"===n)i++;else if("object"==typeof n)return void t(n);o[l.dataField][n]=i}):l.functions.forEach(function(n){if("min"===n||"max"===n||"count"===n||"product"===n||"sum"===n||"avg"===n||"stdev"===n||"stdevp"===n||"var"===n||"varp"===n){if(null===s)return!0;let t=o[l.dataField][n];return null===t&&(t=0),o[l.dataField][n]=t,!0}"object"==typeof n&&t(n)})}}}for(let a=0;a<t.length;a++){const s=t[a];if(s.functions){if(o[s.dataField]||(o[s.dataField]={},s.functions.forEach(function(t){o[s.dataField][t]=0})),void 0!==o[s.dataField].avg){const t=o[s.dataField].avg,n=r[s.dataField];o[s.dataField].avg=0===n||void 0===n?0:t/n}else void 0!==o[s.dataField].count&&(o[s.dataField].count=l);(o[s.dataField].stdev||o[s.dataField].stdevp||o[s.dataField]["var"]||o[s.dataField].varp)&&s.functions.forEach(function(t){if("stdev"===t||"var"===t||"varp"===t||"stdevp"===t){const a=o[s.dataField][t],i=l,r=a/l;let d=0;for(let t=0;t<l;t++){let a=n[t],i=a[s.dataField];d+=(i-r)*(i-r)}let c="stdevp"===t||"varp"===t?i:i-1;0===c&&(c=1),"var"===t||"varp"===t?o[s.dataField][t]=d/c:("stdevp"===t||"stdev"===t)&&(o[s.dataField][t]=Math.sqrt(d/c))}})}}return o}}_getDataItem(t,n){const a=this,i={},o="number"==typeof a.dataSource;if(!t)return{$:{id:n},isEmpty:!0,index:n};if(o){for(let t=0;t<a.dataFields.length;t++){const n=a.dataFields?a.dataFields[t]:{};i[n.name]=""}return i.$={},i.$.id=n,i.$.index=n,i}const r=t;for(let o=0;o<a.dataFields.length;o++){const n=a.dataFields?a.dataFields[o]:{};let l="";if(void 0===n||null===n)continue;if(n.map){let t=n.map.split(a.mapChar);if(0<t.length){let n=r;for(let a=0;a<t.length;a++)r&&(n=n[t[a]]);l=n}else l=r[n.map]}void 0!==l&&null!==l?l=l.toString():void 0===l&&null!==l&&(l="");let s=!1;""===l&&(s=!0,l=t[n.name],void 0!==l&&null!==l?"array"!==n.dataType&&"date"!==n.dataType&&(l=l.toString()):l=""),"[object Object]"===l&&n.map&&s&&(l=""),a._cachedValues[l+"_"+n.dataType]?l=a._cachedValues[l+"_"+n.dataType]:("bool"===n.dataType||"boolean"===n.dataType?"true"===l||"1"===l?l=!0:("false"===l||"0"===l)&&(l=!1):l=a.$document.deserialize(""+l,n.dataType,!0),a._cachedValues[l+"_"+n.dataType]=l),"string"!==n.dataType&&"boolean"!==n.dataType&&"bool"!==n.dataType&&(isNaN(l)||l===-Infinity||l===1/0)&&(l=0),i[n.name]=l}let l=n;return a.id&&(l=r[a.id],"object"==typeof l&&(l=n)),i.$||(i.$={}),i.$.id=l,i.$.index=n,Object(i)}_bindToArray(){const t=this,n="number"==typeof t.dataSource,a=[];t.boundSource.canNotify=!1;for(let o=0;o<t.length;o++){const i=n?{}:t.dataSource[o],r=t._getDataItem(i,o);a.push(r)}t.boundSource=!1===t.observable?a:new Smart.ObservableArray(a);for(let n=0;n<t.length;n++)t[n]=t.boundSource[n],t.dataItemById[t[n].$.id]=t[n];t.boundSource.canNotify=!0}sortBy(t,n,a){const o=this;if(!n)for(let a=0;a<o.dataFields.length;a++){const i=o.dataFields[a];if(i.name===t){n=i.dataType;break}}o._sort(o.boundSource,t,a,n)}_createFilter(t,n){const a={"=":"EQUAL","<>":"NOT_EQUAL","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",equal:"EQUAL","not equal":"NOT_EQUAL","less than":"LESS_THAN","greater than":"GREATER_THAN","greater than or equal":"GREATER_THAN_OR_EQUAL","less than or equal":"LESS_THAN_OR_EQUAL","starts with":"STARTS_WITH","ends with":"ENDS_WITH",null:"null","":"EMPTY",isblank:"EMPTY",isnotblank:"NOT_EMPTY",contains:"CONTAINS",notcontains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"};let o=[];for(let a=0;a<n.length;a++){const t=n[a],i=t.split(" ");o.push(i)}const r=new Smart.FilterGroup,l=[],s=[];for(let r=0;r<o.length;r++){const n=o[r];if(1<n.length){const i=new Smart.FilterGroup;let o="and",r=0;for(let l=0;l<n.length;l++){const s=n[l];if("and"===s||"or"===s){o=s;continue}if(r++,2===r){const d=i.createFilter(t,s,a[n[l-1]]);r=0,o&&i.addFilter(o,d)}}s.push(i)}else{const t=n[0];if("and"!==t&&"or"!==t)throw new Error("Filter Exprresion expects \"AND\" or \"OR\", but the token is: "+t);l.push(t)}}let d=0;if(1===s.length)return s[0];for(let a=0,i;a<s.length;a++)i=l[d],0==(a+1)%2&&d++,i||(i="and"),r.addFilter(i,s[a]);return r}filterBy(t,...n){const a=this,i=(()=>{for(let n=0;n<a.dataFields.length;n++){const i=a.dataFields[n];if(i.name===t)return i.dataType}})(),o=a._createFilter(i,n);let r=a.boundSource.filter(n=>{const a=o.evaluate(n[t]);return a});return r}_filter(t){const n=this,a=[],o=[];if(0===t.length)return void n.clearFilter();const r=t=>{for(let a=0;a<n.dataFields.length;a++){const i=n.dataFields[a];if(i.name===t)return i.dataType}};for(let l=0;l<t.length;l++){const i=t[l],s=i[0];let d=null;d=i[1]instanceof Smart.FilterGroup?i[1]:n._createFilter(r(s),i.splice(1)),d&&(o.push(s),d.dataField=s,a.push(d))}for(let o=0;o<n.boundSource.length;o++){const t=n.boundSource[o];let i=!0;for(let n=0;n<a.length;n++){const o=a[n];i=i&&o.evaluate(t[o.dataField])}t.$.filtered=i}n.onFilter&&n.onFilter()}clearFilter(){const t=this;for(let n=0;n<t.boundSource.length;n++){const a=t.boundSource[n];a.$.filtered=!0}t.onFilter&&t.onFilter()}clearSort(){const t=this;t._sort(t.boundSource,[],[],[])}_sort(t,n,a,o,i){const r=this;let l=!1;if(t&&t.constructor&&"ObservableArray"===t.constructor.name&&(l=!0),(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)&&!l)throw new Error("sort: Missing or Invalid arguments!");"string"==typeof n&&(n=[n]);const s=[],d=[];void 0===a&&(a=[]);const c=function(t,n){let a;switch(n||typeof t){case"string":a=new Intl.Collator().compare;break;case"number":a=function(t,n){return t-n};break;case"boolean":a=function(t,n){return t===n?0:!1===t?-1:1};break;case"object":if(t instanceof Date)a=function(t,n){return t.getTime()-n.getTime()};else if(t instanceof Smart.Utilities.DateTime||t instanceof Smart.Utilities.BigNumber)a=function(t,n){return t.compare(n)};else if(t instanceof Smart.Utilities.Complex||window.NIComplex&&t instanceof window.NIComplex){const t=new Smart.Utilities.ComplexNumericProcessor;a=function(n,a){return t.compareComplexNumbers(n,a)}}}return a};for(let r=0;r<n.length;r++){s[r]=void 0===a[r]||"asc"===a[r]||"ascending"===a[r]?1:-1;const i=t[0][n[r]];d[r]=c(i,o[r])}if(i)return void i(t,n,a,d);t.sort(function(t,a){for(let o=0;o<n.length;o++){const i=d[o](t[n[o]],a[n[o]]);if(0===i){if(n[o+1])continue;else if(void 0!==t._index)return(t._index-a._index)*s[o];return 0}return i*s[o]}if(0===n.length)return t.$.index<a.$.index?-1:t.$.index>a.$.index?1:0});for(let l=0;l<t.length;l++)r[l]=t[l]}static Filter(t,n,a,o){const i=t.filter(t=>{let r=!0;for(let l=0;l<a.length;l++){const i=a[l],s=n[l];r=o?r&&o(t,s,i):r&&i.evaluate(t[s])}return r});return i}filter(t,n,a){Smart.DataAdapter.Filter(that.boundSource,t,n,a)}sort(t,n,a){Smart.DataAdapter.Sort(that.boundSource,t,n,a)}static Sort(t,n,a,i){const o=function(t){let n;switch(typeof t){case"string":n=new Intl.Collator().compare;break;case"number":n=function(t,n){return t-n};break;case"boolean":n=function(t,n){return t===n?0:!1===t?-1:1};break;case"object":if(t instanceof Date)n=function(t,n){return t.getTime()-n.getTime()};else if(t instanceof Smart.Utilities.DateTime||t instanceof BigNumberNG)n=function(t,n){return t.compare(n)};else if(t instanceof Smart.Utilities.Complex||window.NIComplex&&t instanceof window.NIComplex){const t=new Smart.Utilities.ComplexNumericProcessor;n=function(n,a){return t.compareComplexNumbers(n,a)}}}return n};if(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)return;"string"==typeof n&&(n=[n]);const r=[],l=[];void 0===a&&(a=[]);for(let s=0;s<n.length;s++)r[s]=void 0===a[s]||"asc"===a[s]||"ascending"===a[s]?1:-1,l[s]=o(t[0][n[s]]);if(i)return void i(t,n,a,l);const s=t.slice(0);return s.sort(function(t,a){for(let o=0;o<n.length;o++){const i=l[o](t[n[o]],a[n[o]]);if(0===i){if(n[o+1])continue;else if(void 0!==t._index)return(t._index-a._index)*r[o];return 0}return i*r[o]}}),s}}Smart.DataAdapter=DataAdapter;const localTimezoneOffset=-1*new Date().getTimezoneOffset(),__timeZones=[{id:"Local",offset:localTimezoneOffset,offsetHours:localTimezoneOffset/60,displayName:"",supportsDaylightSavingTime:!1},{id:"Dateline Standard Time",offset:-720,offsetHours:-12,displayName:"(UTC-12:00) International Date Line West",supportsDaylightSavingTime:!1},{id:"UTC-11",offset:-660,offsetHours:-11,displayName:"(UTC-11:00) Coordinated Universal Time-11",supportsDaylightSavingTime:!1},{id:"Hawaiteratoran Standard Time",offset:-600,offsetHours:-10,displayName:"(UTC-10:00) Hawaiterator",supportsDaylightSavingTime:!1},{id:"Alaskan Standard Time",offset:-540,offsetHours:-9,displayName:"(UTC-09:00) Alaska",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time (Mexico)",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Baja California",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Pacific Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Arizona",supportsDaylightSavingTime:!1},{id:"Mountain Standard Time (Mexico)",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",supportsDaylightSavingTime:!0},{id:"Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Mountain Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central America Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central America",supportsDaylightSavingTime:!1},{id:"Canada Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Saskatchewan",supportsDaylightSavingTime:!1},{id:"Central Standard Time (Mexico)",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",supportsDaylightSavingTime:!0},{id:"SA Pacific Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Bogota, Lima, Quito, Rio Branco",supportsDaylightSavingTime:!1},{id:"Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Eastern Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Indiana (East)",supportsDaylightSavingTime:!0},{id:"Venezuela Standard Time",offset:-270,offsetHours:-4.5,displayName:"(UTC-04:30) Caracas",supportsDaylightSavingTime:!1},{id:"Atlantic Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Atlantic Time (Canada)",supportsDaylightSavingTime:!0},{id:"Paraguay Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Asuncion",supportsDaylightSavingTime:!0},{id:"Central Brazilian Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Cuiaba",supportsDaylightSavingTime:!0},{id:"Pacific SA Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Santiago",supportsDaylightSavingTime:!0},{id:"SA Western Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",supportsDaylightSavingTime:!1},{id:"Newfoundland Standard Time",offset:-210,offsetHours:-3.5,displayName:"(UTC-03:30) Newfoundland",supportsDaylightSavingTime:!0},{id:"SA Eastern Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Cayenne, Fortaleza",supportsDaylightSavingTime:!1},{id:"Argentina Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Buenos Aires",supportsDaylightSavingTime:!0},{id:"E. South America Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Brasilia",supportsDaylightSavingTime:!0},{id:"Bahia Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Salvador",supportsDaylightSavingTime:!0},{id:"Montevideo Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Montevideo",supportsDaylightSavingTime:!0},{id:"Greenland Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Greenland",supportsDaylightSavingTime:!0},{id:"UTC-02",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Coordinated Universal Time-02",supportsDaylightSavingTime:!1},{id:"Mid-Atlantic Standard Time",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Mid-Atlantic - Old",supportsDaylightSavingTime:!0},{id:"Azores Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Azores",supportsDaylightSavingTime:!0},{id:"Cape Verde Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Cape Verde Is.",supportsDaylightSavingTime:!1},{id:"Morocco Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Casablanca",supportsDaylightSavingTime:!0},{id:"UTC",offset:0,offsetHours:0,displayName:"(UTC) Coordinated Universal Time",supportsDaylightSavingTime:!1},{id:"GMT Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Dublin, Edinburgh, Lisbon, London",supportsDaylightSavingTime:!0},{id:"Greenwich Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Monrovia, Reykjavik",supportsDaylightSavingTime:!1},{id:"Central European Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",supportsDaylightSavingTime:!0},{id:"Namibia Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Windhoek",supportsDaylightSavingTime:!0},{id:"W. Central Africa Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) West Central Africa",supportsDaylightSavingTime:!1},{id:"W. Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",supportsDaylightSavingTime:!0},{id:"Central Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",supportsDaylightSavingTime:!0},{id:"Romance Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",supportsDaylightSavingTime:!0},{id:"FLE Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",supportsDaylightSavingTime:!0},{id:"South Africa Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Harare, Pretoria",supportsDaylightSavingTime:!1},{id:"Turkey Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Istanbul",supportsDaylightSavingTime:!0},{id:"GTB Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Athens, Bucharest",supportsDaylightSavingTime:!0},{id:"Libya Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Tripoli",supportsDaylightSavingTime:!0},{id:"E. Europe Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) E. Europe",supportsDaylightSavingTime:!0},{id:"Jordan Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Amman",supportsDaylightSavingTime:!0},{id:"Middle East Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Beirut",supportsDaylightSavingTime:!0},{id:"Egypt Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Cairo",supportsDaylightSavingTime:!0},{id:"Syria Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Damascus",supportsDaylightSavingTime:!0},{id:"Israel Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Jerusalem",supportsDaylightSavingTime:!0},{id:"Arab Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kuwait, Riyadh",supportsDaylightSavingTime:!1},{id:"E. Africa Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Nairobi",supportsDaylightSavingTime:!1},{id:"Arabic Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Baghdad",supportsDaylightSavingTime:!0},{id:"Kaliningrad Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kaliningrad, Minsk",supportsDaylightSavingTime:!0},{id:"Iran Standard Time",offset:210,offsetHours:3.5,displayName:"(UTC+03:30) Tehran",supportsDaylightSavingTime:!0},{id:"Mauritius Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Port Louis",supportsDaylightSavingTime:!0},{id:"Georgian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Tbilisi",supportsDaylightSavingTime:!1},{id:"Caucasus Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Yerevan",supportsDaylightSavingTime:!0},{id:"Arabian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Abu Dhabi, Muscat",supportsDaylightSavingTime:!1},{id:"Azerbaijan Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Baku",supportsDaylightSavingTime:!0},{id:"Russian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",supportsDaylightSavingTime:!0},{id:"Afghanistan Standard Time",offset:270,offsetHours:4.5,displayName:"(UTC+04:30) Kabul",supportsDaylightSavingTime:!1},{id:"Pakistan Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Islamabad, Karachi",supportsDaylightSavingTime:!0},{id:"West Asia Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Ashgabat, Tashkent",supportsDaylightSavingTime:!1},{id:"India Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",supportsDaylightSavingTime:!1},{id:"Sri Lanka Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Sri Jayawardenepura",supportsDaylightSavingTime:!1},{id:"Nepal Standard Time",offset:345,offsetHours:5.75,displayName:"(UTC+05:45) Kathmandu",supportsDaylightSavingTime:!1},{id:"Central Asia Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Astana",supportsDaylightSavingTime:!1},{id:"Bangladesh Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Dhaka",supportsDaylightSavingTime:!0},{id:"Ekaterinburg Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Ekaterinburg",supportsDaylightSavingTime:!0},{id:"Myanmar Standard Time",offset:390,offsetHours:6.5,displayName:"(UTC+06:30) Yangon (Rangoon)",supportsDaylightSavingTime:!1},{id:"SE Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Bangkok, Hanoi, Jakarta",supportsDaylightSavingTime:!1},{id:"N. Central Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Novosibirsk",supportsDaylightSavingTime:!0},{id:"Ulaanbaatar Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Ulaanbaatar",supportsDaylightSavingTime:!1},{id:"China Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",supportsDaylightSavingTime:!1},{id:"Singapore Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Kuala Lumpur, Singapore",supportsDaylightSavingTime:!1},{id:"North Asia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Krasnoyarsk",supportsDaylightSavingTime:!0},{id:"Taipei Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Taipei",supportsDaylightSavingTime:!1},{id:"W. Australia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Perth",supportsDaylightSavingTime:!0},{id:"Korea Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Seoul",supportsDaylightSavingTime:!1},{id:"North Asia East Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Irkutsk",supportsDaylightSavingTime:!0},{id:"Tokyo Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Osaka, Sapporo, Tokyo",supportsDaylightSavingTime:!1},{id:"AUS Central Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Darwin",supportsDaylightSavingTime:!1},{id:"Cen. Australia Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Adelaide",supportsDaylightSavingTime:!0},{id:"West Pacific Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Guam, Port Moresby",supportsDaylightSavingTime:!1},{id:"Tasmania Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Hobart",supportsDaylightSavingTime:!0},{id:"E. Australia Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Brisbane",supportsDaylightSavingTime:!1},{id:"AUS Eastern Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Canberra, Melbourne, Sydney",supportsDaylightSavingTime:!0},{id:"Yakutsk Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Yakutsk",supportsDaylightSavingTime:!0},{id:"Vladivostok Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Vladivostok",supportsDaylightSavingTime:!0},{id:"Central Pacific Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Solomon Is., New Caledonia",supportsDaylightSavingTime:!1},{id:"Magadan Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Magadan",supportsDaylightSavingTime:!0},{id:"Kamchatka Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old",supportsDaylightSavingTime:!0},{id:"Fiji Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Fiji",supportsDaylightSavingTime:!0},{id:"New Zealand Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Auckland, Wellington",supportsDaylightSavingTime:!0},{id:"UTC+12",offset:720,offsetHours:12,displayName:"(UTC+12:00) Coordinated Universal Time+12",supportsDaylightSavingTime:!1},{id:"Tonga Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Nuku'alofa",supportsDaylightSavingTime:!1},{id:"Samoa Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Samoa",supportsDaylightSavingTime:!0}],__daysToMonth365=[0,31,59,90,120,151,181,212,243,273,304,334,365],__daysToMonth366=[0,31,60,91,121,152,182,213,244,274,305,335,366],__daysPer4Years=1461,__daysPer100Years=36524,__daysPer400Years=146097,__daysTo1601=584388,__daysTo1899=693593,__daysTo10000=3652059,__minTicks=0,__maxTicks=3155378976000000000,__maxMillis=315537897600000;Smart.Utilities.Assign("TimeSpan",class{constructor(){const t=this;if(t.ticksPerMillisecond=1e4,t.millisecondsPerTick=1/1e4,t.ticksPerSecond=10000000,t.secondsPerTick=1/10000000,t.ticksPerMinute=600000000,t.minutesPerTick=1/600000000,t.ticksPerHour=36000000000,t.hoursPerTick=1/36000000000,t.ticksPerDay=864000000000,t.daysPerTick=1/864000000000,t.millisPerSecond=1e3,t.millisPerMinute=60000,t.millisPerHour=3600000,t.millisPerDay=86400000,t._ticks=0,1===arguments.length){if(isNaN(arguments[0]))throw new Error("Argument must be a number.");t._ticks=arguments[0]}else if(3===arguments.length)t._ticks=t.timeToMS(arguments[0],arguments[1],arguments[2],0);else if(4===arguments.length){const n=arguments[0],a=arguments[1],i=arguments[2],o=arguments[3];t._ticks=(1e3*(24*(3600*n)+3600*a+60*i+o)+0)*t.ticksPerMillisecond}else if(5===arguments.length){const n=arguments[0],a=arguments[1],i=arguments[2],o=arguments[3],r=arguments[4];t._ticks=(1e3*(24*(3600*n)+3600*a+60*i+o)+r)*t.ticksPerMillisecond}}ticks(){return this._ticks}days(){const t=this;return parseInt(t._ticks/t.ticksPerDay)}timeToMS(t,n,a,i){return parseInt((3600*t+60*n+a+i/1e3)*this.ticksPerSecond)}hours(){const t=this;return parseInt(t._ticks/t.ticksPerHour)%24}milliseconds(){const t=this;return parseInt(t._ticks/t.ticksPerMillisecond)%1e3}minutes(){const t=this;return parseInt(t._ticks/t.ticksPerMinute)%60}seconds(){const t=this;return parseInt(t._ticks/t.ticksPerSecond)%60}totalDays(){const t=this;return parseInt(t._ticks*t.daysPerTick)}totalHours(){const t=this;return parseInt(t._ticks*t.hoursPerTick)}totalMilliseconds(){const t=this,n=t._ticks*t.millisecondsPerTick;return parseInt(n)}totalMinutes(){const t=this;return parseInt(t._ticks*t.minutesPerTick)}totalSeconds(){const t=this;return parseInt(t._ticks*t.secondsPerTick)}add(t){const n=this._ticks+t._ticks,a=new Smart.Utilities.TimeSpan(n);return a}subtract(t){const n=this._ticks-t._ticks;return new Smart.Utilities.TimeSpan(n)}duration(){const t=this;return 0<=t._ticks?new Smart.Utilities.TimeSpan(t._ticks):new Smart.Utilities.TimeSpan(-t._ticks)}equals(t){return this._ticks===t._ticks}valueOf(){return this._ticks}compare(t,n){return t._ticks>n._ticks?1:t._ticks<n._ticks?-1:0}interval(t,n){const a=t*n+(0<=t?.5:-.5);return new Smart.Utilities.TimeSpan(a*this.ticksPerMillisecond)}fromDays(t){const n=this;return n.interval(t,n.millisPerDay)}fromHours(t){const n=this;return n.interval(t,n.millisPerHour)}fromMilliseconds(t){return this.interval(t,1)}fromMinutes(t){const n=this;return n.interval(t,n.millisPerMinute)}fromSeconds(t){const n=this;return n.interval(t,n.millisPerSecond)}fromTicks(t){return new Smart.Utilities.TimeSpan(t)}toString(){return this.totalMilliseconds().toString()}negate(){return new Smart.Utilities.TimeSpan(-this._ticks)}}),Smart.Utilities.Assign("DateTime",class{constructor(){function t(t){const i=n.regexISOString.exec(t);a=new Smart.Utilities.DateTime(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4]),parseFloat(i[5]),parseFloat(i[6]),parseFloat(i[7]),0,0,0,0,0,0,0,"UTC")}const n=this;let a;if(n.ticksPerMillisecond=1e4,n.millisecondsPerTick=1/1e4,n.ticksPerSecond=10000000,n.secondsPerTick=1/10000000,n.ticksPerMinute=600000000,n.minutesPerTick=1/600000000,n.ticksPerHour=36000000000,n.hoursPerTick=1/36000000000,n.ticksPerDay=864000000000,n.daysPerTick=1/864000000000,n.millisPerSecond=1e3,n.millisPerMinute=60000,n.millisPerHour=3600000,n.millisPerDay=86400000,n.daysPerYear=365,n.daysPer4Years=__daysPer4Years,n.daysPer100Years=__daysPer100Years,n.daysPer400Years=__daysPer400Years,n.daysTo1601=__daysTo1601,n.daysTo1899=__daysTo1899,n.daysTo10000=__daysTo10000,n.minTicks=0,n.maxTicks=__maxTicks,n.maxMillis=__maxMillis,n.datePartYear=0,n.datePartDayOfYear=1,n.datePartMonth=2,n.datePartDay=3,n.daysToMonth365=__daysToMonth365,n.daysToMonth366=__daysToMonth366,n.minValue=new Date(0),n.maxValue=new Date(3155378976000000000),n.ticksMask=0x3FFFFFFFFFFFFFFF,n.flagsMask=0xC000000000000000,n.localMask=0x8000000000000000,n.ticksCeiling=0x4000000000000000,n.kindUnspecified=0,n.kindUtc=0x4000000000000000,n.kindLocal=0x8000000000000000,n.kindLocalAmbiguousDst=0xC000000000000000,n.kindShift=62,n.regexTrim=/^\s+|\s+$/g,n.regexInfinity=/^[+-]?infinity$/i,n.regexHex=/^0x[a-f0-9]+$/i,n.regexParseFloat=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,n.regexISOString=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/,n.calendar={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",FP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",FPA:"yyyy/MM/dd HH:mm:ss:fffuunnppeeaaxxoo",FPA2:"yyyy-MM-dd HH:mm:ss:fffuunnppeeaaxxoo",FT:"HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",PP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp",PT:"HH:mm:ss:fff:uu:nn:pp"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","},n.dateData=0,n.timeZone=null,n.timeZones=__timeZones,n._codeToUnit={u:"_microsecond",uu:"_microsecond",n:"_nanosecond",nn:"_nanosecond",p:"_picosecond",pp:"_picosecond",e:"_femtosecond",ee:"_femtosecond",a:"_attosecond",aa:"_attosecond",x:"_zeptosecond",xx:"_zeptosecond",o:"_yoctosecond",oo:"_yoctosecond"},n._smallUnits=["_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"],n._microsecond=0,n._nanosecond=0,n._picosecond=0,n._femtosecond=0,n._attosecond=0,n._zeptosecond=0,n._yoctosecond=0,0===arguments.length){const t=new Date;n.dateData=n.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+n.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else if(1===arguments.length){void 0===arguments[0]&&(arguments[0]="todayDate");const a="number"==typeof arguments[0]&&isFinite(arguments[0]);if(!a&&"string"==typeof arguments[0]){let a;"today"===arguments[0]?a=new Date:"todayDate"===arguments[0]?(a=new Date,a.setHours(0,0,0,0)):n.regexISOString.test(arguments[0])?t(arguments[0]):a=n.tryparseDate(arguments[0]),a&&(n.dateData=n.dateToMS(a.getFullYear(),a.getMonth()+1,a.getDate())+n.timeToMS(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()))}else if("number"==typeof arguments[0])n.dateData=arguments[0];else if(arguments[0]instanceof Date){const t=arguments[0];n.dateData=n.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+n.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else n.dateData=arguments[0]}else if(2===arguments.length){void 0===arguments[0]&&(arguments[0]="todayDate");const a="number"==typeof arguments[0]&&isFinite(arguments[0]);if(!a&&"string"==typeof arguments[0]){let a;"today"===arguments[0]?a=new Date:"todayDate"===arguments[0]?(a=new Date,a.setHours(0,0,0,0)):n.regexISOString.test(arguments[0])?t(arguments[0]):a=n.tryparseDate(arguments[0]),a&&(n.dateData=n.dateToMS(a.getFullYear(),a.getMonth()+1,a.getDate())+n.timeToMS(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()))}else if("number"==typeof arguments[0])n.dateData=arguments[0];else if(arguments[0]instanceof Date){const t=arguments[0];n.dateData=n.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+n.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else n.dateData=arguments[0];n.validateTimeZone(arguments[1])}else if(2<arguments.length)if("string"==typeof arguments[0]){const t=n.tryparseDate(arguments[0],arguments[2],arguments[1]);n.dateData=n.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+n.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else{const t=arguments[0],a=arguments[1]-1,i=arguments[2],o=arguments[3]||0,r=arguments[4]||0,l=arguments[5]||0,s=arguments[6]||0,d=arguments[7]||0,c=arguments[8]||0,m=arguments[9]||0,p=arguments[10]||0,u=arguments[11]||0,g=arguments[12]||0,h=arguments[13]||0,_=new Date(t,a,i,o,r,l,s);1970>t&&_.setFullYear(t),n.dateData=n.dateToMS(_.getFullYear(),_.getMonth()+1,_.getDate())+n.timeToMS(_.getHours(),_.getMinutes(),_.getSeconds(),_.getMilliseconds()),n._microsecond=d,n._nanosecond=c,n._picosecond=m,n._femtosecond=p,n._attosecond=u,n._zeptosecond=g,n._yoctosecond=h,arguments[14]&&n.validateTimeZone(arguments[14])}if(n.timeZone||n.validateTimeZone("Local"),a){const t=a.toTimeZone(n.timeZone);n.dateData=t.dateData}}static validateDate(t,n,a){if(t instanceof Smart.Utilities.DateTime)return t;if(t instanceof Date)return new Smart.Utilities.DateTime(t);try{if(new RegExp(/^\d{1,2}\/\d{1,2}\/\d{4}(, \d{1,2}:\d{2}:\d{1,2} [A|P]M)?$/).test(t)){const n=new Date(t);if(!isNaN(n.getTime()))return new Smart.Utilities.DateTime(n)}if("string"==typeof t)return this.parseDateString(t,n,a);if("number"==typeof t)return new Smart.Utilities.DateTime(new Date(t))}catch(t){}return n}static parseDateString(t,n,a){const i=t.indexOf("Date("),o=t.indexOf("DateTime("),r=t.lastIndexOf(")");let l=t;if((-1!==i||-1!==o)&&-1!==r){if(l=-1===i?t.slice(o+9,r):t.slice(i+5,r),l=l.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),""===l.trim())return new Smart.Utilities.DateTime;if(new RegExp(/(^(\d+)(\s*,\s*\d+)+(\s*,\s*[a-zA-Z ]+)?$)/g).test(l))return l=l.split(","),l.map(function(t,n){l[n]=isNaN(l[n])?t.trim():parseInt(t)}),-1!==i&&l[1]++,l.unshift(null),l=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,l)),l}else{const n=new Smart.Utilities.DateTime,i=n.parseDate(t,a);if(i)return l=new Smart.Utilities.DateTime(i),n.copySmallTimePartValues(l),l}if(""===l.trim())return n;if(!isNaN(l))return l=new Date(parseInt(l,10)),new Smart.Utilities.DateTime(l);try{const t=l.split(",");2===t.length?(t[1]=t[1].trim(),t.unshift(null),l=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,t))):l=new Smart.Utilities.DateTime(l)}catch(t){l=n}return l}static fromFullTimeStamp(t){t=t.toString();const n=new Smart.Utilities.DateTime(parseFloat(t.slice(0,t.length-21)));for(let a=t.slice(t.length-21),i=0;0<a.length;)n[n._smallUnits[i]]=parseInt(a.slice(0,3),10),a=a.slice(3),i++;return n}static getConstructorParameters(t){return[t.year(),t.month(),t.day(),t.hour(),t.minute(),t.second(),t.millisecond(),t._microsecond,t._nanosecond,t._picosecond,t._femtosecond,t._attosecond,t._zeptosecond,t._yoctosecond,t.timeZone]}static detectDisplayMode(t,n,a){if(t.calendar.patterns[n])return-1===["d","D","M","Y","d1","d2"].indexOf(n)?-1===["t","T","FT","PT"].indexOf(n)?"default":"timePicker":"calendar";const o=["d","M","y"],r=["h","H","m","s","t","f","u","n","p","e","a","x","o"],l=a.groups;let s=!1,d=!1;for(let c=0;c<l.length;c++){const t=l[c].charAt(0);if(-1===o.indexOf(t)?-1!==r.indexOf(t)&&(d=!0):s=!0,s&&d)break}return s==d?"default":s?"calendar":"timePicker"}static getLocalizedNames(t){const n={names:[],namesAbbr:[],namesShort:[]},a={names:[],namesAbbr:[]};if(this[t])return this[t];for(let a=23;30>a;a++){const i=new Date(2017,6,a),o=i.toLocaleString(t,{weekday:"long"});n.names.push(o),n.namesAbbr.push(i.toLocaleString(t,{weekday:"short"})),n.namesShort.push(o.substring(0,2))}for(let n=0;12>n;n++){const i=new Date(2017,n,1),o=i.toLocaleString(t,{month:"long"});a.names.push(o),a.namesAbbr.push(o.substring(0,3))}return a.names.push(""),a.namesAbbr.push(""),this[t]={days:n,months:a},this[t]}internalMS(){return this.dateData}getDatePart(t){const a=this,i=a.internalMS();let o=parseInt(i/a.millisPerDay);const r=parseInt(o/a.daysPer400Years);o-=r*a.daysPer400Years;let l=parseInt(o/a.daysPer100Years);4===l&&(l=3),o-=l*a.daysPer100Years;const s=parseInt(o/a.daysPer4Years);o-=s*a.daysPer4Years;let d=parseInt(o/a.daysPerYear);if(4===d&&(d=3),t===a.datePartYear)return parseInt(400*r+100*l+4*s+d+1);if(o-=d*a.daysPerYear,t===a.datePartDayOfYear)return parseInt(o+1);const c=3===d&&(24!==s||3===l),p=c?a.daysToMonth366:a.daysToMonth365;let u=o>>6;for(;o>=p[u];)u++;return t===a.datePartMonth?parseInt(u):parseInt(o-p[u-1]+1)}dayOfWeek(){const t=this,n=t.dateData,a=parseInt(n/t.millisPerDay+1)%7;return a}dayOfYear(){const t=this;return t.getDatePart(t.datePartDayOfYear)}weekOfYear(t){var n=Math.floor;const a=this,i=a.toDate(),o=t||a.calendar.firstDay,r=new Date(i.getFullYear(),0,1),l=n((i.getTime()-r.getTime()-6e4*(i.getTimezoneOffset()-r.getTimezoneOffset()))/864e5)+1;let s=r.getDay()-o;s=0<=s?s:s+7;let d;if(!(4>s))d=n((l+s-1)/7);else if(d=n((l+s-1)/7)+1,52<d){const t=new Date(i.getFullYear()+1,0,1);let n=t.getDay()-o;n=0<=n?n:n+7,d=4>n?1:53}return d}subtract(t){const n=this;return new Smart.Utilities.TimeSpan(n.dateData*n.ticksPerMillisecond-t.dateData*n.ticksPerMillisecond)}dateToMS(t,a,i){const o=this;if(1<=t&&9999>=t&&1<=a&&12>=a){t=parseInt(t);const r=o.isLeapYear(t)?o.daysToMonth366:o.daysToMonth365;if(1<=i&&i<=r[a]-r[a-1]){const l=t-1,s=365*l+parseInt(l/4)-parseInt(l/100)+parseInt(l/400)+r[a-1]+i-1;return s*o.millisPerDay}}}isLeapYear(t){if(1>t||9999<t)throw new Error("Year out of Range");return 0==t%4&&(0!=t%100||0==t%400)}timeToMS(t,n,a,i){const o=this;if(0<=t&&24>t&&0<=n&&60>n&&0<=a&&60>a){const r=parseInt(3600*t+60*n+a);return 0<i&&1e3>i?r*o.millisPerSecond+i:r*o.millisPerSecond}}daysInMonth(t,n){if(1>n||12<n)throw new Error("Month out of Range");const a=this,i=a.isLeapYear(t)?a.daysToMonth366:a.daysToMonth365;return i[n]-i[n-1]}arrayIndexOf(t,n){return t.indexOf(n)}startsWith(t,n){return 0===t.indexOf(n)}endsWith(t,n){return t.substr(t.length-n.length)===n}trim(t){return(t+"").replace(this.regexTrim,"")}expandFormat(t,n){n=n||"F";let a=t.patterns,i=n.length,o;if(a[n])return a[n];if(1===i){if(o=a[n],!o)throw"Invalid date format string '"+n+"'.";n=o}else 2===i&&"%"===n.charAt(0)&&(n=n.charAt(1));return n}getEra(t,n){if(!n)return 0;if("string"==typeof t)return 0;let a=t.getTime(),o;for(let r=0,i=n.length;r<i;r++)if(o=n[r].start,null===o||a>=o)return r;return 0}toUpper(t){return t.split("\xA0").join(" ").toUpperCase()}toUpperArray(t){const n=[];for(let a=0,i=t.length;a<i;a++)n[a]=this.toUpper(t[a]);return n}getEraYear(t,n,a,i){let o=t.getFullYear();return!i&&n.eras&&(o-=n.eras[a].offset),o}getDayIndex(t,n,a){const i=this,o=t.days;let r=t._upperDays,l;return r||(t._upperDays=r=[i.toUpperArray(o.names),i.toUpperArray(o.namesAbbr),i.toUpperArray(o.namesShort)]),n=n.toUpperCase(),a?(l=i.arrayIndexOf(r[1],n),-1===l&&(l=i.arrayIndexOf(r[2],n))):l=i.arrayIndexOf(r[0],n),l}getMonthIndex(t,n,a){const o=this;let r=t.months,l=t.monthsGenitive||t.months,s=t._upperMonths,d=t._upperMonthsGen;s||(t._upperMonths=s=[o.toUpperArray(r.names),o.toUpperArray(r.namesAbbr)],t._upperMonthsGen=d=[o.toUpperArray(l.names),o.toUpperArray(l.namesAbbr)]),n=o.toUpper(n);let c=o.arrayIndexOf(a?s[1]:s[0],n);return 0>c&&(c=o.arrayIndexOf(a?d[1]:d[0],n)),c}appendPreOrPostMatch(t,n){let a=0,i=!1;for(let o=0,r=t.length;o<r;o++){const r=t.charAt(o);switch(r){case"'":i?n.push("'"):a++,i=!1;break;case"\\":i&&n.push("\\"),i=!i;break;default:n.push(r),i=!1;}}return a}getTokenRegExp(){return /\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyyy|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|uu|u|nn|n|pp|p|ee|e|aa|a|xx|x|oo|o|i{1,24}|zzz|zz|z|gg|g/g}tryparseDate(t,n,a){const o=this;if((void 0===n||null===n)&&(n=o.calendar),void 0!==a){if(Array.isArray(a))for(let r=0;r<a.length;r++){const i=o.parseDate(t,a[r],n);if(i)return i}const i=o.parseDate(t,a,n);if(i)return i}if(""===t)return null;if(null===t||void 0===t||t.substring||(t=t.toString()),null!==t&&void 0!==t&&"/Date("===t.substring(0,6)){const n=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/;let a=new Date(+t.replace(/\/Date\((\d+)\)\//,"$1"));if("Invalid Date"===a){const n=t.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/);a=null,n&&(a=new Date(1*n[1]+36e5*n[2]+6e4*n[3]))}if(null===a||void 0===a||"Invalid Date"===a||isNaN(a)){const a=n.exec(t);if(a){const t=new Date(parseInt(a[1]));if(a[2]){let n=parseInt(a[3]);"-"===a[2]&&(n=-n);const i=t.getUTCMinutes();t.setUTCMinutes(i-n)}if(!isNaN(t.valueOf()))return t}}return a}const i={smartdate:"yyyy-MM-dd HH:mm:ss",d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",ISO8601:"yyyy-MM-ddTHH:mm:ss.sssZ",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"MM-dd-yyyy",d4:"MM.dd.yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",iso:"yyyy-MM-ddTHH:mm:ssZ",iso_date1:"yyyy-MM-dd",iso_date2:"yyyy-MM-dd",iso_date3:"yyyy-ddd",iso_date4:"yyyy-MM-dd HH:mm",iso_date5:"yyyy-MM-dd HH:mm Z",iso_date6:"yyyy-MMM-dd",iso_date7:"yyyy-MM",iso_date8:"yyyy-MMM",iso_date9:"yyyy-MMMM",iso_date10:"yyyy-MMMM-dd",iso_time1:"HH:mm:ss.tttt",iso_time2:"HH:mm:ss",iso_time3:"HH:mm",iso_time4:"HH",iso_time5:"yyyyyy-MM-dd",iso_time6:"yyyyyy-MM-dd"};for(let r in i){const a=o.parseDate(t,i[r],n);if(a)return a}const r=n.patterns;for(let i in r){const a=o.parseDate(t,r[i],n);if(a){if("ISO"==i){const a=o.parseDate(t,r.ISO2,n);if(a)return a}return a}}let l;if("string"==typeof t){t=o.trim(t);const a=[":","/","-"," ",","];t=function(t,n,a){return a.replace(new RegExp(t,"g"),n)}(", ",",",t);let i="",r=t;0<=t.indexOf(":")?(i=t.substring(t.indexOf(":")-2),i=o.trim(i),r=t.substring(0,t.indexOf(":")-2)):0<=t.toUpperCase().indexOf("AM")?(i=t.substring(t.toUpperCase().indexOf("AM")-2),i=o.trim(i),r=t.substring(0,t.toUpperCase().indexOf("AM")-2)):0<=t.toUpperCase().indexOf("PM")&&(i=t.substring(t.toUpperCase().indexOf("PM")-2),i=o.trim(i),r=t.substring(0,t.toUpperCase().indexOf("PM")-2));let s=new Date,d=!1;if(r){for(let t=0;t<a.length;t++)if(0<=r.indexOf(a[t])){l=r.split(a[t]);break}let t=[],c=[],p=[],m=null,u=null;for(let a=0;a<l.length;a++){const i=l[a],r=o.parseDate(i,"d",n)||o.parseDate(i,"dd",n)||o.parseDate(i,"ddd",n)||o.parseDate(i,"dddd",n);if(r&&(t.push(r.getDate()),2<i.length)){m=a;break}}for(let t=0;t<l.length;t++){const a=l[t],i=o.parseDate(a,"M",n)||o.parseDate(a,"MM",n)||o.parseDate(a,"MMM",n)||o.parseDate(a,"MMMM",n);if(i){if(null!==m&&void 0!==m&&m===t)continue;if(c.push(i.getMonth()),2<a.length){u=t;break}}}for(let t=0;t<l.length;t++){const a=l[t],i=o.parseDate(a,"yyyy",n);if(i){if(null!==m&&void 0!==m&&m===t)continue;if(null!==u&&void 0!==u&&u===t)continue;p.push(i.getFullYear())}}const i=[];for(let n=0;n<t.length;n++)for(let a=0;a<c.length;a++)for(let o=0;o<p.length;o++){const r=new Date(p[o],c[a],t[n]);1970>p[o]&&r.setFullYear(p[o]),isNaN(r.getTime())||i.push(r)}0<i.length&&(s=i[0],d=!0)}if(i){const t=0<=i.indexOf(":")?i.split(":"):i,a=o.parseDate(i,"h:mm tt",n)||o.parseDate(i,"HH:mm:ss.fff",n)||o.parseDate(i,"HH:mm:ss.ff",n)||o.parseDate(i,"h:mm:ss tt",n)||o.parseDate(i,"HH:mm:ss.tttt",n)||o.parseDate(i,"HH:mm:ss",n)||o.parseDate(i,"HH:mm",n)||o.parseDate(i,"HH",n);let r=0,l=0,c=0,m=0;a&&!isNaN(a.getTime())?(r=a.getHours(),l=a.getMinutes(),c=a.getSeconds(),m=a.getMilliseconds()):(1===t.length&&(r=parseInt(t[0])),2===t.length&&(r=parseInt(t[0]),l=parseInt(t[1])),3===t.length&&(r=parseInt(t[0]),l=parseInt(t[1]),0<=t[2].indexOf(".")?(c=parseInt(t[2].toString().split(".")[0]),m=parseInt(t[2].toString().split(".")[1])):c=parseInt(t[2])),4===t.length&&(r=parseInt(t[0]),l=parseInt(t[1]),c=parseInt(t[2]),m=parseInt(t[3]))),!s||isNaN(r)||isNaN(l)||isNaN(c)||isNaN(m)||(s.setHours(r,l,c,m),d=!0)}if(d)return s}if(null!==t&&void 0!==t){l=[":","/","-"];let n=!0;for(let a=0;a<l.length;a++)-1!==t.indexOf(l[a])&&(n=!1);if(n){const n=new Number(t);if(!isNaN(n))return new Date(n)}}return null}getParseRegExp(t,n){const a=this;let i=t._parseRegExp;if(!i)t._parseRegExp=i={};else{const t=i[n];if(t)return t}let o=a.expandFormat(t,n).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],l=[],s=0,d=0,c=a.getTokenRegExp(),p;for(;null!==(p=c.exec(o));){const t=o.slice(s,p.index);if(s=c.lastIndex,d+=a.appendPreOrPostMatch(t,r),d%2){r.push(p[0]);continue}let n=p[0],i=n.length,m;switch(n){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":m="(\\D+)";break;case"tt":case"t":m="(\\D*)";break;case"yyyyy":m="(\\d{1,4})";break;case"yyyy":m="(\\d{"+i+"})";break;case"fff":case"ff":case"f":m="(\\d{1,"+i+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":m="(\\d\\d?)";break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":m="(\\d{1,3})";break;case"zzz":m="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":m="([+-]?\\d\\d?)";break;case"/":m="/";break;default:if(/i{1,24}/.test(n))m="(\\d{"+n.length+"})";else throw"Invalid date format pattern '"+n+"'.";}(m&&r.push(m),"/"!==n)&&l.push(p[0])}a.appendPreOrPostMatch(o.slice(s),r),r.push("$");const m=r.join("").replace(/\s+/g,"\\s+");return i[n]={regExp:m,groups:l}}outOfRange(t,n,a){return t<n||t>a}expandYear(t,n){const a=this,i=new Date,o=a.getEra(i);if(100>n){let r=t.twoDigitYearMax;r="string"==typeof r?new Date().getFullYear()%100+parseInt(r,10):r;const l=a.getEraYear(i,t,o);n+=l-l%100,n>r&&(n-=100)}return n}padZeros(t,n){let a=t+"",i;return 1<n&&a.length<n?(i=["0","00","000"][n-2]+a,i.substr(i.length-n,n)):(i=a,i)}parseDate(t,n,a){const i=this;(void 0===a||null===a)&&(a=i.calendar),t=i.trim(t);const o=a,r=i.getParseRegExp(o,n),l=new RegExp(r.regExp).exec(t);if(null===l)return null;let s=r.groups,d=null,c=null,m=null,p=null,u=null,g=0,h=0,_=0,f=0,y=null,b=!1,v;for(let r=0,x=s.length;r<x;r++){const t=l[r+1];if(t){const n=s[r],a=n.length,l=parseInt(t,10);switch(n){case"dd":case"d":if(p=l,i.outOfRange(p,1,31))return null;break;case"MMM":case"MMMM":case"MMMMM":case"MMMMMM":case"MMMMMMM":case"MMMMMMMM":if(m=i.getMonthIndex(o,t,3===a),i.outOfRange(m,0,11))return null;break;case"M":case"MM":if(m=l-1,i.outOfRange(m,0,11))return null;break;case"y":case"yy":case"yyyy":if(c=4>a?i.expandYear(o,l):l,i.outOfRange(c,0,9999))return null;break;case"h":case"hh":if(g=l,12===g&&(g=0),i.outOfRange(g,0,11))return null;break;case"H":case"HH":if(g=l,i.outOfRange(g,0,23))return null;break;case"m":case"mm":if(h=l,i.outOfRange(h,0,59))return null;break;case"s":case"ss":if(_=l,i.outOfRange(_,0,59))return null;break;case"tt":case"t":if(b=o.PM&&(t===o.PM[0]||t===o.PM[1]||t===o.PM[2]),!b&&(!o.AM||t!==o.AM[0]&&t!==o.AM[1]&&t!==o.AM[2]))return null;break;case"f":case"ff":case"fff":if(f=l*Math.pow(10,3-a),i.outOfRange(f,0,999))return null;break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":if(i.outOfRange(l,0,1e3))return null;i[i._codeToUnit[n]]=l;break;case"ddd":case"dddd":if(u=i.getDayIndex(o,t,3===a),i.outOfRange(u,0,6))return null;break;case"zzz":{const n=t.split(/:/);if(2!==n.length)return null;if(v=parseInt(n[0],10),i.outOfRange(v,-12,13))return null;const a=parseInt(n[1],10);if(i.outOfRange(a,0,59))return null;y=60*v+(i.startsWith(t,"-")?-a:a);break}case"z":case"zz":if(v=l,i.outOfRange(v,-12,13))return null;y=60*v;break;case"g":case"gg":{let n=t;if(!n||!o.eras)return null;n=this.trim(n.toLowerCase());for(let t=0,a=o.eras.length;t<a;t++)if(n===o.eras[t].nathat.toLowerCase()){d=t;break}if(null===d)return null;break}default:{let n=t;1==n.length%3?n+="00":2==n.length%3&&(n+="0"),f=parseInt(n.slice(0,3),10),n=n.slice(3);for(let t=0;0<n.length;)i[i._smallUnits[t]]=parseInt(n.slice(0,3),10),n=n.slice(3),t++}}}}let x=new Date,C=o.convert,w;if(w=x.getFullYear(),null===c?c=w:o.eras&&(c+=o.eras[d||0].offset),null===m&&(m=0),null===p&&(p=1),!C){if(x.setFullYear(c,m,p),x.getDate()!==p)return null;if(null!==u&&x.getDay()!==u)return null}else if(x=C.toGregorian(c,m,p),null===x)return null;if(b&&12>g&&(g+=12),x.setHours(g,h,_,f),null!==y){const t=x.getMinutes()-(y+x.getTimezoneOffset());x.setHours(x.getHours()+parseInt(t/60,10),t%60)}return x}toString(t,n){function a(t,n){if(h)return h[n];if(void 0!==t.getMonth)switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();}}var i=Math.floor,o=Math.abs;const r=this;void 0===t&&(t="yyyy-MM-dd HH:mm:ss");const l=r.dateData.toString()+r.getFractionsOfSecondStamp()+t+(r.timeZone||"");if(Smart.Utilities.DateTime.cache&&Smart.Utilities.DateTime.cache[l])return Smart.Utilities.DateTime.cache[l];const s=r.toDate();if((void 0===n||null===n)&&(n=r.calendar),"string"==typeof s)return s;if(!t||!t.length||"i"===t){let t;return t=r.formatDate(s,n.patterns.F,n),t}const d=n.eras,c="s"===t;t=r.expandFormat(n,t);const m=[];let p=0,u=r.getTokenRegExp(),g,h;for(;;){const l=u.lastIndex,h=u.exec(t),_=t.slice(l,h?h.index:t.length);if(p+=r.appendPreOrPostMatch(_,m),!h)break;if(p%2){m.push(h[0]);continue}const f=h[0],y=f.length;let b;if(/i{1,24}/.test(f)){m.push(r.getFirstNDigitsOfPrecision(f.length));continue}switch(f){case"ddd":case"dddd":{const t=3===y?n.days.namesAbbr:n.days.names;m.push(t[s.getDay()]);break}case"d":case"dd":m.push(r.padZeros(a(s,2),y));break;case"MMM":case"MMMM":b=a(s,1),m.push(n.months[3===y?"namesAbbr":"names"][b]);break;case"M":case"MM":m.push(r.padZeros(a(s,1)+1,y));break;case"y":case"yy":case"yyyy":b=r.getEraYear(s,n,r.getEra(s,d),c),4>y&&(b%=100),m.push(r.padZeros(b,y));break;case"h":case"hh":g=s.getHours()%12,0===g&&(g=12),m.push(r.padZeros(g,y));break;case"H":case"HH":m.push(r.padZeros(s.getHours(),y));break;case"m":case"mm":m.push(r.padZeros(s.getMinutes(),y));break;case"s":case"ss":m.push(r.padZeros(s.getSeconds(),y));break;case"t":case"tt":b=12>s.getHours()?n.AM?n.AM[0]:" ":n.PM?n.PM[0]:" ",m.push(1===y?b.charAt(0):b);break;case"f":case"ff":case"fff":m.push(r.padZeros(s.getMilliseconds(),3).substr(0,y));break;case"u":case"n":case"p":case"e":case"a":case"x":case"o":m.push(r[r._codeToUnit[f]]);break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":m.push(r.padZeros(r[r._codeToUnit[f]],3));break;case"z":case"zz":m.push((0<=r.timeZoneOffsetHours?"+":"-")+r.padZeros(i(o(r.timeZoneOffsetHours)),y));break;case"zzz":m.push((0<=r.timeZoneOffsetHours?"+":"-")+r.padZeros(i(o(r.timeZoneOffsetHours)),2)+":"+r.padZeros(60*o(r.timeZoneOffsetHours%1),2));break;case"g":case"gg":n.eras&&m.push(n.eras[r.getEra(s,d)].name);break;case"/":m.push(n["/"]);break;default:throw"Invalid date format pattern '"+f+"'.";}}const _=m.join("");return Smart.Utilities.DateTime.cache||(Smart.Utilities.DateTime.cache=[]),Smart.Utilities.DateTime.cache[l]=_,_}getFractionsOfSecondStamp(){const t=this;return t._microsecond.toString()+t._nanosecond+t._picosecond+t._femtosecond+t._attosecond+t._zeptosecond+t._yoctosecond}getFirstNDigitsOfPrecision(t,n){const a=this,i=""+(!0===n?"":a.padZeros(a.millisecond(),3))+a.padZeros(a._microsecond,3)+a.padZeros(a._nanosecond,3)+a.padZeros(a._picosecond,3)+a.padZeros(a._femtosecond,3)+a.padZeros(a._attosecond,3)+a.padZeros(a._zeptosecond,3)+a.padZeros(a._yoctosecond,3);return i.slice(0,t)}copySmallTimePartValues(t){const n=this;t._microsecond=n._microsecond,t._nanosecond=n._nanosecond,t._picosecond=n._picosecond,t._femtosecond=n._femtosecond,t._attosecond=n._attosecond,t._zeptosecond=n._zeptosecond,t._yoctosecond=n._yoctosecond}add(t,n,a){const i=this,o=i.internalMS();if(void 0===n){if(!1===a)return i.dateData=o+parseInt(t._ticks/i.ticksPerMillisecond),i;const n=new Smart.Utilities.DateTime(o+parseInt(t._ticks/i.ticksPerMillisecond));return i.copyTimeZone(n),i.copySmallTimePartValues(n),n}const r=t*n;if(r<=-i.maxMillis||r>=i.maxMillis)throw new Error("Out of Range");if(!1===a)return i.dateData=o+r,i;const l=new Smart.Utilities.DateTime(o+r);return i.copyTimeZone(l),i.copySmallTimePartValues(l),l}addDays(t,n){const a=this;return a.add(t,a.millisPerDay,n)}clone(){const t=this,n=new Smart.Utilities.DateTime(t.dateData);return t.copyTimeZone(n),t.copySmallTimePartValues(n),n}clearTime(){const t=this,n=t.month(),a=t.year(),i=t.day(),o=new Smart.Utilities.DateTime(a,n,i,0,0,0,0);return t.copyTimeZone(o),o}addHours(t,n){const a=this;return a.add(t,a.millisPerHour,n)}addDeciseconds(t,n){return this.add(100*t,1,n)}addCentiseconds(t,n){return this.add(10*t,1,n)}addMilliseconds(t,n){return this.add(t,1,n)}addMinutes(t,n){const a=this;return a.add(t,a.millisPerMinute,n)}addMonths(t,n){const a=this;if(-12e4>t||12e4<t)throw new Error("Invalid Months Value");let o=parseInt(a.getDatePart(a.datePartYear)),r=parseInt(a.getDatePart(a.datePartMonth)),i=parseInt(a.getDatePart(a.datePartDay));if(0==t%12)o+=t/12;else{const n=r-1+t;0<=n?(r=n%12+1,o+=n/12):(r=12+(n+1)%12,o+=(n-11)/12),o=parseInt(o)}if(1>o||9999<o)throw new Error("Year out of range");const l=a.daysInMonth(o,r);if(i>l&&(i=l),!1===n)return a.dateData=a.dateToMS(o,r,i)+a.internalMS()%a.millisPerDay,a;const s=new Smart.Utilities.DateTime(a.dateToMS(o,r,i)+a.internalMS()%a.millisPerDay);return a.copyTimeZone(s),a.copySmallTimePartValues(s),s}addSeconds(t,n){const a=this;return a.add(t,a.millisPerSecond,n)}addYears(t,n){return this.addMonths(12*t,n)}addMicroseconds(t,n){if(0===t)return;const a=this;let i,o;0>t&&0===a.hour()&&0===a.minute()&&0===a.second()&&0===a.millisecond()&&0===a._microsecond&&(i=parseInt(t/1e3,10)-1,o=1e3+t%1e3);const r=1e3*a.timeToMS(a.hour(),a.minute(),a.second(),a.millisecond())+a._microsecond,l=r+t;void 0==i&&(i=parseInt(l/1e3,10)-parseInt(r/1e3,10)),void 0===o&&(o=parseInt(l%1e3,10));let s;return 0!==i&&(s=a.addMilliseconds(i,n)),!1===n?void(a._microsecond=o):(s||(s=a.clone()),s._microsecond=o,s)}addFractionsOfSecond(t,n,a,i,o){if(0===t)return;const r=this,l=1e3*r[i]+r[a],s=t+l;let d=parseInt(s/1e3,10)-parseInt(l/1e3,10),c=parseInt(s%1e3,10),m;return 0>t&&0>s&&0>c&&(d--,c=1e3+c),0!=d&&(m=r[o](d,n)),!1===n?void(r[a]=c):(m||(m=r.clone()),m[a]=c,m)}addNanoseconds(t,n){return this.addFractionsOfSecond(t,n,"_nanosecond","_microsecond","addMicroseconds")}addPicoseconds(t,n){return this.addFractionsOfSecond(t,n,"_picosecond","_nanosecond","addNanoseconds")}addFemtoseconds(t,n){return this.addFractionsOfSecond(t,n,"_femtosecond","_picosecond","addPicoseconds")}addAttoseconds(t,n){return this.addFractionsOfSecond(t,n,"_attosecond","_femtosecond","addFemtoseconds")}addZeptoseconds(t,n){return this.addFractionsOfSecond(t,n,"_zeptosecond","_attosecond","addAttoseconds")}addYoctoseconds(t,n){return this.addFractionsOfSecond(t,n,"_yoctosecond","_zeptosecond","addZeptoseconds")}getTimeZoneOffset(){const t=new Date,n=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),6,1),i=t.getTimezoneOffset()<Math.max(n.getTimezoneOffset(),a.getTimezoneOffset());return{offset:-(t.getTimezoneOffset()/60),dst:+i}}isInDaylightSavingTime(){const t=new Date,n=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),6,1);return this.date().getTimezoneOffset()<Math.max(n.getTimezoneOffset(),a.getTimezoneOffset())}supportsDaylightSavingTime(){const t=new Date,n=new Date(t.getFullYear(),0,1),a=new Date(t.getFullYear(),6,1);return n.getTimezoneOffset()!==a.getTimezoneOffset()}date(){const t=this,n=t.month(),a=t.year(),i=t.day(),o=new Smart.Utilities.DateTime(a,n,i);return t.copyTimeZone(o),o}isWeekend(){const t=this;return 0===t.dayOfWeek()||6===t.dayOfWeek()}toDate(t){const n=this,a=n.month(),i=n.year(),o=n.day(),r=n.hour(),l=n.minute(),s=n.second(),d=n.millisecond();let c=new Date(i,a-1,o);if(1970>i&&c.setFullYear(i),c.setHours(r,l,s,d),t){const a=n.timeZones.filter(function(n){return n.id===t});if(a.length){let t=a[0].offset;const i=c.getTime();let o=1e3*(60*c.getTimezoneOffset());if(n.timeZone){const t=n.timeZones.filter(function(t){return t.id===n.timeZone});t.length&&(o=1e3*(60*-t[0].offset))}const r=i+o;c=new Date(r+60000*t)}}return c}toTimeZone(t){const n=this;let a=t;if((null===a||void 0===a)&&(a="Local"),n.timeZone===a)return n.clone();const i=n.timeZones.filter(function(t){return t.id===a});if(0===i.length)return n.clone();const o=this.toDate(a),r=new Smart.Utilities.DateTime(o);return r.timeZone=a,r.timeZoneOffset=i[0].offset,r.timeZoneOffsetHours=i[0].offsetHours,n.copySmallTimePartValues(r),r}day(){const t=this;return t.getDatePart(t.datePartDay)}month(){const t=this;return t.getDatePart(t.datePartMonth)}year(){const t=this;return t.getDatePart(t.datePartYear)}millisecond(){return parseInt(this.internalMS()%1e3)}hour(){const t=this;return parseInt(Math.floor(t.internalMS()/t.millisPerHour)%24)}minute(){const t=this;return parseInt(t.internalMS()/t.millisPerMinute%60)}second(){const t=this;return parseInt(t.internalMS()/t.millisPerSecond%60)}microsecond(){return this._microsecond}nanosecond(){return this._nanosecond}picosecond(){return this._picosecond}femtosecond(){return this._femtosecond}attosecond(){return this._attosecond}zeptosecond(){return this._zeptosecond}yoctosecond(){return this._yoctosecond}valueOf(){return this.dateData}equals(t){const n=this;return n.dateData===t.dateData&&n._microsecond===t._microsecond&&n._nanosecond===t._nanosecond&&n._picosecond===t._picosecond&&n._femtosecond===t._femtosecond&&n._attosecond===t._attosecond&&n._zeptosecond===t._zeptosecond&&n._yoctosecond===t._yoctosecond}equalDateParts(t){const n=this;return!(n.year()!==t.year()||n.month()!==t.month()||n.day()!==t.day())}compare(t){const n=this;if(n.equals(t))return 0;const a=["dateData","_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"];for(let o=0;o<a.length;o++){const i=a[o];if(n[i]>t[i])return 1;if(n[i]<t[i])return-1}return 0}toDateString(){return this.toDate().toDateString()}toLocaleDateString(){const t=this;return t.toDate().toLocaleDateString(t.calendar.locale)}toLocaleString(){const t=this;return t.toDate().toLocaleString(t.calendar.locale)}toLocaleTimeString(){const t=this;return t.toDate().toLocaleTimeString(t.calendar.locale)}validateTimeZone(t){const n=this;if("string"==typeof t){const a=n.timeZones.filter(function(n){return n.id===t});0===a.length||(n.timeZone=t,n.timeZoneOffset=a[0].offset,n.timeZoneOffsetHours=a[0].offsetHours)}}copyTimeZone(t){const n=this;t.timeZone=n.timeZone,t.timeZoneOffset=n.timeZoneOffset,t.timeZoneOffsetHours=n.timeZoneOffsetHours}getTimeStamp(){const t=this,n=new Smart.Utilities.BigNumber(t.dateData.toString()+t.getFirstNDigitsOfPrecision(void 0,!0));return n}}),Smart.Utilities.Assign("Draw",class{constructor(t,n){const a=this;a.host=t,a.renderEngine=n||"",a.refresh();const o=["clear","removeElement","attr","getAttr","line","circle","rect","path","pieslice","pieSlicePath","text","measureText"];for(let r in o)a._addFn(Smart.Utilities.Draw.prototype,o[r])}_addFn(t,n){t[n]||(t[n]=function(){return this.renderer[n].apply(this.renderer,arguments)})}_initRenderer(t){return this.createRenderer(this,t)}_internalRefresh(){const t=this;if(t.renderer||(t.host.innerHTML="",t._initRenderer(t.host)),"none"!==window.getComputedStyle(t.host).display){const n=t.renderer;if(n){const a=n.getRect();t._render({x:1,y:1,width:a.width,height:a.height})}}}_render(t){this._plotRect=t}refresh(){this._internalRefresh()}getSize(){const t=this._plotRect;return{width:t.width,height:t.height}}toGreyScale(t){if(-1===t.indexOf("#"))return t;const n=this.cssToRgb(t);n[0]=n[1]=n[2]=Math.round(.3*n[0]+.59*n[1]+.11*n[2]);const a=this.rgbToHex(n[0],n[1],n[2]);return"#"+a[0]+a[1]+a[2]}decToHex(t){return t.toString(16)}hexToDec(t){return parseInt(t,16)}rgbToHex(t,n,a){return[this.decToHex(t),this.decToHex(n),this.decToHex(a)]}hexToRgb(t,n,a){return[this.hexToDec(t),this.hexToDec(n),this.hexToDec(a)]}cssToRgb(t){return-1>=t.indexOf("rgb")?this.hexToRgb(t.substring(1,3),t.substring(3,5),t.substring(5,7)):t.substring(4,t.length-1).split(",")}hslToRgb(t){let n,a,i;const o=parseFloat(t[0]),d=parseFloat(t[1]),s=parseFloat(t[2]);if(0===d)n=a=i=s;else{const t=.5>s?s*(1+d):s+d-s*d,r=2*s-t;n=this.hueToRgb(r,t,o+1/3),a=this.hueToRgb(r,t,o),i=this.hueToRgb(r,t,o-1/3)}return[255*n,255*a,255*i]}hueToRgb(n,a,i){return(0>i&&(i+=1),1<i&&(i-=1),i<1/6)?n+6*(a-n)*i:i<1/2?a:i<2/3?n+6*((a-n)*(2/3-i)):n}rgbToHsl(t){const n=parseFloat(t[0])/255,a=parseFloat(t[1])/255,i=parseFloat(t[2])/255,o=Math.max(n,a,i),r=Math.min(n,a,i);let d=(o+r)/2,l,c;if(o===r)l=c=0;else{const t=o-r;c=.5<d?t/(2-o-r):t/(o+r);o===n?l=(a-i)/t+(a<i?6:0):o===a?l=(i-n)/t+2:o===i?l=(n-a)/t+4:void 0;l/=6}return[l,c,d]}swap(t,n){const a=t;t=n,n=a}getNum(t){if(!(t.constructor!==Array)){for(let n=0;n<t.length;n++)if(!isNaN(t[n]))return t[n];}else if(isNaN(t))return 0;return 0}_ptRotate(t,n,a,i,o){var r=Math.abs,l=Math.pow;const s=Math.sqrt(l(r(t-a),2)+l(r(n-i),2)),d=Math.asin((t-a)/s),c=d+o;return t=a+Math.cos(c)*s,n=i+Math.sin(c)*s,{x:t,y:n}}log(t,n){var a=Math.log;return a(t)/(n?a(n):1)}_mod(t,n){const i=Math.abs(t>n?n:t);let o=1;if(0!==i)for(;100>i*o;)o*=10;return t*=o,n*=o,t%n/o}createRenderer(t,n){const a=t;let i=a.renderer=null;return document.createElementNS&&"HTML5"!==a.renderEngine&&(i=new Smart.Utilities.SvgRenderer(this)),null===i&&("HTML5"===a.renderEngine||void 0===a.renderEngine)&&(i=new Smart.Utilities.HTML5Renderer(this)),i.init(n),a.renderer=i,i}getByPriority(t){let n;for(let a=0;a<t.length;a++){const i=t[a];if(i!==void 0&&null!==i&&""!==i){n=i;break}}return n}get(t,n,a){return a===void 0?t[n]:t[n][a]}min(t,n){let a=NaN;for(let o=0;o<t.length;o++){const i=this.get(t,o,n);(isNaN(a)||i<a)&&(a=i)}return a}max(t,n){let a=NaN;for(let o=0;o<t.length;o++){const i=this.get(t,o,n);(isNaN(a)||i>a)&&(a=i)}return a}sum(t,n){let a=0;for(let o=0;o<t.length;o++){const i=this.get(t,o,n);isNaN(i)||(a+=i)}return a}count(t,n){let a=0;for(let o=0;o<t.length;o++){const i=this.get(t,o,n);isNaN(i)||a++}return a}avg(t,n){return this.sum(t,n)/Math.max(1,this.count(t,n))}filter(t,n){if(!n)return t;const a=[];for(let o=0;o<t.length;o++)n(t[o])&&a.push(t[o]);return a}scale(t,n,a,i){var o=Math.min,r=Math.abs,l=Math.pow,s=Math.max;if(isNaN(t))return NaN;if((t<o(n.min,n.max)||t>s(n.min,n.max))&&(!i||!0!==i.ignore_range))return NaN;let d=NaN,c=1;if(n.type===void 0||"logarithmic"!==n.type){let a=r(n.max-n.min);a||(a=1),c=r(t-o(n.min,n.max))/a}else if("logarithmic"===n.type){let a=n.base;isNaN(a)&&(a=10);let i=o(n.min,n.max);0>=i&&(i=1);let d=s(n.min,n.max);0>=d&&(d=1);const m=this.log(d,a);d=l(a,m);const p=this.log(i,a);i=l(a,p);const u=this.log(t,a);c=r(u-p)/(m-p)}if("logarithmic"===a.type){let t=a.base;isNaN(t)&&(t=10);const n=this.log(a.max,t),i=this.log(a.min,t);a.flip&&(c=1-c);const s=o(i,n)+c*r(n-i);d=l(t,s)}else d=o(a.min,a.max)+c*r(a.max-a.min),a.flip&&(d=s(a.min,a.max)-d+a.min);return d}axis(t,n,a){var o=Math.round,r=Math.floor,l=Math.pow;if(1>=a)return[n,t];(isNaN(a)||2>a)&&(a=2);let s=0;for(;o(t)!==t&&o(n)!==n&&10>s;)t*=10,n*=10,s++;let d=(n-t)/a;for(;10>s&&o(d)!==d;)t*=10,n*=10,d*=10,s++;const c=[1,2,5];let m=0,p;for(;;){let t=m%c.length,n=r(m/c.length),a=l(10,n)*c[t];if(t=(m+1)%c.length,n=r((m+1)/c.length),p=l(10,n)*c[t],d>=a&&d<p)break;m++}const u=p,g=[];let h=this.renderer._rnd(t,u,!1);for(const i=0>=s?1:l(10,s);h<n+u;)g.push(h/i),h+=u;return g}_widgetToImage(t,n,a,i,o){let r=t;if(!r)return!1;(void 0===a||""===a)&&(a="image."+n);let l=r.renderEngine,s=r.animation;if(r.animation="none",r.renderEngine="HTML5",r.renderEngine!==l)try{r.refresh()}catch(t){return r.renderEngine=l,r.refresh(),r.animation=s,!1}let d=r.renderer.getContainer().firstElementChild,c=!0;"function"==typeof i&&(c=i(t,d));let m=!0;return c&&(m=this.exportImage(d,n,a,o)),r.renderEngine!==l&&(r.renderEngine=l,r.refresh(),r.animation=s),m}_saveAsImage(t,n){return this._widgetToImage(this,t,n)}saveAsPNG(t){return this._saveAsImage("png",t)}saveAsJPEG(t){return this._saveAsImage("jpeg",t)}exportImage(t,n,a,i){if(!t)return!1;let o="pdf"===n.toLowerCase();o&&(n="jpeg"),(a===void 0||""===a)&&(a="image."+n);let r=!0;try{if(t)if(o){i=i||"portrait";const o=t.toDataURL("image/"+n),r={content:{image:o,width:Math.min(t.width/1.35,"portrait"===i?515:762)},pageOrientation:i};pdfMake.createPdf(r).download(a)}else{const i=new Smart.Utilities.DataExporter;t.toBlob(function(t){i.downloadFile(t,n,a)})}}catch(t){r=!1}return r}}),Smart.Utilities.Assign("Renderer",class{constructor(t){const n=this;n.draw=t,n._gradients={},n._toRadiansCoefficient=2*Math.PI/360}pieSlicePath(t,n,a,i,o,r,l){var s=Math.abs,d=Math.sin,c=Math.cos;i||(i=1);const m=s(o-r),p=180<m?1:0;360<=m&&(r=o+359.99);const u=o*this._toRadiansCoefficient,g=r*this._toRadiansCoefficient;let h=t,_=t,f=n,b=n;const v=!isNaN(a)&&0<a;v&&(l=0);const C=c(u),w=d(u),S=c(g),T=d(g);if(0<l+a){if(0<l){const a=(m/2+o)*this._toRadiansCoefficient;t+=l*c(a),n-=l*d(a)}v&&(h=t+a*C,f=n-a*w,_=t+a*S,b=n-a*T)}const D=t+i*C,M=t+i*S,I=n-i*w,$=n-i*T;let B="";const N=.02<s(s(r-o)-360);return v?(B="M "+_+","+b,B+=" a"+a+","+a,B+=" 0 "+p+",1 "+(h-_)+","+(f-b),B+=N?" L"+D+","+I:" M"+D+","+I,B+=" a"+i+","+i,B+=" 0 "+p+",0 "+(M-D)+","+($-I),N&&(B+=" Z")):(B="M "+M+","+$,B+=" a"+i+","+i,B+=" 0 "+p+",1 "+(D-M)+","+(I-$),N&&(B+=" L"+t+","+n,B+=" Z")),B}measureText(t,n,a,i){var o=Math.abs;const r=this._getTextParts(t,n,a),l=r.width;let s=r.height;!1===i&&(s/=.6);let d={};if(isNaN(n)&&(n=0),0===n)d={width:this._rup(l),height:this._rup(s)};else{const t=2*(n*Math.PI)/360,a=o(Math.sin(t)),i=o(Math.cos(t)),r=o(l*a+s*i),c=o(l*i+s*a);d={width:this._rup(c),height:this._rup(r)}}return i&&(d.textPartsInfo=r),d}alignTextInRect(t,n,a,i,o,r,l,s,d,c){const m=2*(d*Math.PI)/360,p=Math.sin(m),u=Math.cos(m),g=o*p,h=o*u;"center"===l||""===l||"undefined"===l?t+=a/2:"right"===l&&(t+=a),"center"===s||"middle"===s||""===s||"undefined"===s?n+=i/2:"bottom"===s?n+=i-r/2:"top"==s&&(n+=r/2),c=c||"";let _="middle";-1===c.indexOf("top")?-1!==c.indexOf("bottom")&&(_="bottom"):_="top";let f="center";return-1===c.indexOf("left")?-1!==c.indexOf("right")&&(f="right"):f="left","center"==f?(t-=h/2,n-=g/2):"right"==f&&(t-=h,n-=g),"top"==_?(t-=r*p,n+=r*u):"middle"==_&&(t-=r*p/2,n+=r*u/2),t=this._rup(t),n=this._rup(n),{x:t,y:n}}adjustColor(t,n){var a=Math.min;if("string"!=typeof t)return"#000000";if(-1===t.indexOf("#"))return t;const o=this.draw;let r=o.cssToRgb(t);const i=o.rgbToHsl(r);i[2]=a(1,i[2]*n),i[1]=a(1,1.1*(i[1]*n)),r=o.hslToRgb(i),t="#";for(let a=0,i;3>a;a++)i=Math.round(r[a]),i=o.decToHex(i),1===i.toString().length&&(t+="0"),t+=i;return t.toUpperCase()}_rup(t){let n=Math.round(t);return t>n&&n++,n}_ptdist(t,n,a,i){return Math.sqrt((a-t)*(a-t)+(i-n)*(i-n))}_rnd(t,n,i,o){if(isNaN(t))return t;void 0===o&&(o=!0);let r=t-(!0===o?t%n:this._mod(t,n));return t===r?r:(i?t>r&&(r+=n):r>t&&(r-=n),1===n?Math.round(r):r)}_ptrnd(t){var n=Math.round;if(!document.createElementNS)return n(t)===t?t:this._rnd(t,1,!1,!0);const a=this._rnd(t,.5,!1,!0);return .5===Math.abs(a-n(a))?a:a>t?a-.5:a+.5}_getContrastColor(t){if(void 0!==t){let n=this.draw.hexToRgb(t.slice(1,3),t.slice(3,5),t.slice(5,7)),a=(.299*n[0]+.587*n[1]+.114*n[2])/255;return .6<a?"#000000":"#FFFFFF"}}}),Smart.Utilities.Assign("SvgRenderer",class extends Smart.Utilities.Renderer{constructor(t){super(t);const n=this;n._svgns="http://www.w3.org/2000/svg",n._openGroups=[],n._clipId=0}init(t){const n=document.createElement("div");n.className="drawContainer",n.onselectstart=function(){return!1},t.appendChild(n),this.host=t,this.container=n;try{const t=document.createElementNS(this._svgns,"svg");t.setAttribute("version","1.1"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("overflow","hidden"),n.appendChild(t),this.canvas=t}catch(t){return!1}return this._id=new Date().getTime(),this.clear(),!0}getType(){return"SVG"}refresh(){}getRect(){var t=Math.max;return{x:0,y:0,width:t(this._rup(this.host.offsetWidth)-1,0),height:t(this._rup(this.host.offsetHeight)-1,0)}}getContainer(){return this.container}clear(){for(;0<this.canvas.childNodes.length;)this.removeElement(this.canvas.firstElementChild);this._defaultParent=void 0,this._defs=document.createElementNS(this._svgns,"defs"),this._gradients={},this.canvas.appendChild(this._defs)}removeElement(t){if(void 0!==t)try{for(;t.firstChild;)this.removeElement(t.firstChild);t.parentNode?t.parentNode.removeChild(t):this.canvas.removeChild(t)}catch(t){}}beginGroup(){const t=this._activeParent(),n=document.createElementNS(this._svgns,"g");return t.appendChild(n),this._openGroups.push(n),n}endGroup(){0===this._openGroups.length||this._openGroups.pop()}_activeParent(){return 0===this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]}createClipRect(t){const n=document.createElementNS(this._svgns,"clipPath"),a=document.createElementNS(this._svgns,"rect");return this.attr(a,{x:t.x,y:t.y,width:t.width,height:t.height,fill:"none"}),this._clipId=this._clipId||0,n.id="cl"+this._id+"_"+(++this._clipId).toString(),n.appendChild(a),this._defs.appendChild(n),n}getWindowHref(){let t=window.location.href;return t?(t=t.replace(/([\('\)])/g,"\\$1"),t=t.replace(/#.*$/,""),t):t}setClip(t,n){const a="url("+this.getWindowHref()+"#"+n.id+")";return this.attr(t,{"clip-path":a})}addHandler(t,n,a){t.addEventListener(n,a)}removeHandler(){}on(t,n,a){this.addHandler(t,n,a)}off(t,n,a){this.removeHandler(t,n,a)}shape(t,n){const a=document.createElementNS(this._svgns,t);if(a){for(let t in n)a.setAttribute(t,n[t]);return this._activeParent().appendChild(a),a}}_getTextParts(t,n,a){const o={width:0,height:0,parts:[]};if(void 0===t)return o;const r=t.toString().split("<br>"),l=this._activeParent(),s=document.createElementNS(this._svgns,"text");this.attr(s,a);for(let d=0;d<r.length;d++){const t=r[d],n=s.ownerDocument.createTextNode(t);s.appendChild(n),l.appendChild(s);let a;try{a=s.getBBox()}catch(t){}const i=this._rup(a.width),c=this._rup(a.height*.6);s.removeChild(n),o.width=Math.max(o.width,i),o.height+=c+(0<d?4:0),o.parts.push({width:i,height:c,text:t})}return l.removeChild(s),o}_measureText(t,n,a,i){return super.measureText(t,n,a,i)}measureText(t,n,a){return this._measureText(t,n,a,!1)}text(t,n,a,i,o,r,l,s,d,c,m){const p=this._measureText(t,r,l,!0,this),u=p.textPartsInfo,g=u.parts,_=this._getContrastColor(arguments[11]);let f;if(d||(d="center"),c||(c="center"),(1<g.length||s)&&(f=this.beginGroup()),s){const t=this.createClipRect({x:this._rup(n)-1,y:this._rup(a)-1,width:this._rup(i)+2,height:this._rup(o)+2});this.setClip(f,t)}let b=this._activeParent(),v=0,C=0;v=u.width,C=u.height,(isNaN(i)||0>=i)&&(i=v),(isNaN(o)||0>=o)&&(o=C);const S=i||0,w=o||0;let h=0;if(!r||0===r){a+=C,"center"===c||"middle"===c?a+=(w-C)/2:"bottom"===c&&(a+=w-C),i||(i=v),o||(o=C),b=this._activeParent();let t;for(let o=g.length-1;0<=o;o--){t=document.createElementNS(this._svgns,"text"),this.attr(t,l),this.attr(t,{cursor:"default"});const i=t.ownerDocument.createTextNode(g[o].text);t.appendChild(i);let r=n;const s=g[o].width,c=g[o].height;"center"===d?r+=(S-s)/2:"right"==d&&(r+=S-s),this.attr(t,{x:this._rup(r),y:this._rup(a+h),width:this._rup(s),height:this._rup(c)}),void 0!==_&&(t.style.fill=_),b.appendChild(t),h-=g[o].height+4}return f?(this.endGroup(),f):t}const T=this.alignTextInRect(n,a,i,o,v,C,d,c,r,m);n=T.x,a=T.y;const D=this.shape("g",{transform:"translate("+n+","+a+")"}),M=this.shape("g",{transform:"rotate("+r+")"});D.appendChild(M),h=0;for(let p=g.length-1;0<=p;p--){const t=document.createElementNS(this._svgns,"text");this.attr(t,l),this.attr(t,{cursor:"default"});const n=t.ownerDocument.createTextNode(g[p].text);t.appendChild(n);let a=0;const i=g[p].width,o=g[p].height;"center"===d?a+=(u.width-i)/2:"right"==d&&(a+=u.width-i),this.attr(t,{x:this._rup(a),y:this._rup(h),width:this._rup(i),height:this._rup(o)}),M.appendChild(t),h-=o+4}return b.appendChild(D),f&&this.endGroup(),D}line(t,n,a,i,o){const r=this.shape("line",{x1:t,y1:n,x2:a,y2:i});return this.attr(r,o),r}path(t,n){const a=this.shape("path");return a.setAttribute("d",t),n&&this.attr(a,n),a}rect(t,n,a,i,o){var r=Math.max;t=this._ptrnd(t),n=this._ptrnd(n),a=r(1,this._rnd(a,1,!1)),i=r(1,this._rnd(i,1,!1));const l=this.shape("rect",{x:t,y:n,width:a,height:i});return o&&this.attr(l,o),l}circle(t,n,a,i){const o=this.shape("circle",{cx:t,cy:n,r:a});return i&&this.attr(o,i),o}pieslice(t,n,a,i,o,r,l,d){const c=this.pieSlicePath(t,n,a,i,o,r,l),m=this.shape("path");return m.setAttribute("d",c),d&&this.attr(m,d),m}attr(t,n){if(t&&n)for(let a in n)"textContent"==a?t.textContent=n[a]:t.setAttribute(a,n[a])}removeAttr(t,n){if(t&&n)for(let a in n)"textContent"==a?t.textContent="":t.removeAttribute(n[a])}getAttr(t,n){return t.getAttribute(n)}_toLinearGradient(t,n,a){const i="grd"+this._id+t.replace("#","")+(n?"v":"h"),o="url("+this.getWindowHref()+"#"+i+")";if(this._gradients[o])return o;const r=document.createElementNS(this._svgns,"linearGradient");this.attr(r,{x1:"0%",y1:"0%",x2:n?"0%":"100%",y2:n?"100%":"0%",id:i});for(let o=0;o<a.length;o++){const n=a[o],i=document.createElementNS(this._svgns,"stop"),l="stop-color:"+this.adjustColor(t,n[1]);this.attr(i,{offset:n[0]+"%",style:l}),r.appendChild(i)}return this._defs.appendChild(r),this._gradients[o]=!0,o}_toRadialGradient(t,n,a){const i="grd"+this._id+t.replace("#","")+"r"+(void 0===a?"":a.key),o="url("+this.getWindowHref()+"#"+i+")";if(this._gradients[o])return o;const r=document.createElementNS(this._svgns,"radialGradient");void 0===a?this.attr(r,{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:i}):this.attr(r,{cx:a.x,cy:a.y,r:a.outerRadius,id:i,gradientUnits:"userSpaceOnUse"});for(let o=0;o<n.length;o++){const a=n[o],i=document.createElementNS(this._svgns,"stop"),l="stop-color:"+this.adjustColor(t,a[1]);this.attr(i,{offset:a[0]+"%",style:l}),r.appendChild(i)}return this._defs.appendChild(r),this._gradients[o]=!0,o}}),Smart.Utilities.Assign("HTML5Renderer",class extends Smart.Utilities.Renderer{constructor(t){super(t);const n=this;n._renderers=new Smart.Utilities.HTML5RenderHelpers(n)}init(t){try{this.host=t;const n=document.createElement("div"),a=document.createElement("canvas");n.className="chartContainer",n.style.position="relative",n.onselectstart=function(){return!1},a.id="__smartCanvasWrap",a.style.width="100%",a.style.height="100%",n.appendChild(a),t.appendChild(n),this.canvas=a,a.width=t.offsetWidth,a.height=t.offsetHeight,this.ctx=a.getContext("2d"),this._elements={},this._maxId=0,this._gradientId=0,this._gradients={},this._currentPoint={x:0,y:0},this._lastCmd="",this._pos=0}catch(t){return!1}return!0}getType(){return"HTML5"}getContainer(){let t=this.host.getElementsByClassName("chartContainer")[0];return t}getRect(){return{x:0,y:0,width:this.canvas.width-1,height:this.canvas.height-1}}beginGroup(){}endGroup(){}setClip(){}createClipRect(){}addHandler(){}removeHandler(){}on(t,n,a){this.addHandler(t,n,a)}off(t,n,a){this.removeHandler(t,n,a)}clear(){this._elements={},this._maxId=0,this._renderers._gradients={},this._gradientId=0}removeElement(t){void 0===t||this._elements[t.id]&&delete this._elements[t.id]}shape(t,n){let a={type:t,id:this._maxId++};for(let i in n)a[i]=n[i];return this._elements[a.id]=a,a}attr(t,n){for(let a in n)t[a]=n[a]}removeAttr(t,n){for(let a in n)delete t[n[a]]}rect(t,n,a,i,o){if(isNaN(t))throw"Invalid value for \"x\"";if(isNaN(n))throw"Invalid value for \"y\"";if(isNaN(a))throw"Invalid value for \"width\"";if(isNaN(i))throw"Invalid value for \"height\"";let r=this.shape("rect",{x:t,y:n,width:a,height:i});return o&&this.attr(r,o),r}path(t,n){let a=this.shape("path",n);return this.attr(a,{d:t}),a}line(t,n,a,i,o){return this.path("M "+t+","+n+" L "+a+","+i,o)}circle(t,n,a,i){let o=this.shape("circle",{x:t,y:n,r:a});return i&&this.attr(o,i),o}pieslice(t,n,a,i,o,r,l,s){let d=this.path(this.pieSlicePath(t,n,a,i,o,r,l),s);return this.attr(d,{x:t,y:n,innerRadius:a,outerRadius:i,angleFrom:o,angleTo:r}),d}_getCSSStyle(t){const n=document.createElement("div");n.className=t,n.style.position="absolute",n.style.visibility="hidden",this.host.appendChild(n);let a=window.getComputedStyle(n);return a={fontFamily:a.fontFamily,fontSize:a.fontSize,fontWeight:a.fontWeight},this.host.removeChild(n),a}_getTextParts(t,n,a){let i="Arial",o="10pt",r="";if(a&&a["class"]){let t=this._getCSSStyle(a["class"]);t.fontSize&&(o=t.fontSize),t.fontFamily&&(i=t.fontFamily),t.fontWeight&&(r=t.fontWeight)}this.ctx.font=r+" "+o+" "+i;let l={width:0,height:0,parts:[]},s=t.toString().split("<br>");for(let o=0;o<s.length;o++){let t=s[o],n=this.ctx.measureText(t).width,a=document.createElement("span");a.className="smartchart",a.font=this.ctx.font,a.textContent=t,this.host.appendChild(a);let i=a.offsetHeight*.6;this.host.removeChild(a),l.width=Math.max(l.width,this._rup(n)),l.height+=i+(0<o?4:0),l.parts.push({width:n,height:i,text:t})}return l}_measureText(t,n,a,i){return super.measureText(t,n,a,i)}measureText(t,n,a){return this._measureText(t,n,a,!1)}text(n,a,i,o,r,l,s,d,c,m,p){let u=this.shape("text",{text:n,x:a,y:i,width:o,height:r,angle:l,clip:d,halign:c,valign:m,rotateAround:p});if(s&&this.attr(u,s),u.fontFamily="Arial",u.fontSize="10pt",u.fontWeight="",u.color=this._getContrastColor(arguments[11])||"#000000",s&&s["class"]){let t=this._getCSSStyle(s["class"]);u.fontFamily=t.fontFamily||u.fontFamily,u.fontSize=t.fontSize||u.fontSize,u.fontWeight=t.fontWeight||u.fontWeight,u.color=t.color||u.color}let t=this._measureText(n,0,s,!0);return this.attr(u,{textPartsInfo:t.textPartsInfo,textWidth:t.width,textHeight:t.height}),(0>=o||isNaN(o))&&this.attr(u,{width:t.width}),(0>=r||isNaN(r))&&this.attr(u,{height:t.height}),u}_toLinearGradient(t,n,a){if(this._renderers._gradients[t])return t;let o=[];for(let r=0;r<a.length;r++)o.push({percent:a[r][0]/100,color:this.adjustColor(t,a[r][1])});let i="gr"+this._gradientId++;return this.createGradient(i,n?"vertical":"horizontal",o),i}_toRadialGradient(t,n){if(this._renderers._gradients[t])return t;let a=[];for(let o=0;o<n.length;o++)a.push({percent:n[o][0]/100,color:this.adjustColor(t,n[o][1])});let i="gr"+this._gradientId++;return this.createGradient(i,"radial",a),i}createGradient(t,n,a){this._renderers.createGradient(this,t,n,a)}refresh(){for(let t in this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._elements){let n=this._elements[t];this._renderers.setFillStyle(this,n),this._renderers.setStroke(this,n),this._renderers[this._elements[t].type](this.ctx,n)}}}),Smart.Utilities.Assign("HTML5RenderHelpers",class{constructor(t){this.HTML5Renderer=t,this._cmds="mlcazq"}ptrnd(t){var n=Math.round;if(.5===Math.abs(n(t)-t))return t;let a=n(t);return a<t&&--a,a+.5}createGradient(t,n,a,i){t._gradients[n]={orientation:a,colorStops:i}}setStroke(t,n){let a=t.ctx,i=n["stroke-width"];a.strokeStyle=n.stroke||"transparent",a.lineWidth=0===i?.01:void 0===i?1:i,a.globalAlpha=void 0===n["fill-opacity"]?void 0===n.opacity?1:n.opacity:n["fill-opacity"],a.setLineDash&&(n["stroke-dasharray"]?a.setLineDash(n["stroke-dasharray"].split(",")):a.setLineDash([]))}setFillStyle(t,n){let a=t.ctx;if(a.fillStyle="transparent",a.globalAlpha=void 0===n["fill-opacity"]?void 0===n.opacity?1:n.opacity:n["fill-opacity"],n.fill&&-1===n.fill.indexOf("#")&&t._gradients[n.fill]){let i="horizontal"!==t._gradients[n.fill].orientation,o="radial"===t._gradients[n.fill].orientation,r=this.ptrnd(n.x),l=this.ptrnd(n.y),s=this.ptrnd(n.x+(i?0:n.width)),d=this.ptrnd(n.y+(i?n.height:0)),c;if(("circle"===n.type||"path"===n.type||"rect"===n.type)&&o){let t=this.ptrnd(n.x),i=this.ptrnd(n.y);const o=n.innerRadius||0,r=n.outerRadius||n.r||0;"rect"===n.type&&(t+=n.width/2,i+=n.height/2),c=a.createRadialGradient(t,i,o,t,i,r)}o||((isNaN(r)||isNaN(s)||isNaN(l)||isNaN(d))&&(r=0,l=0,s=i?0:a.canvas.width,d=i?a.canvas.height:0),c=a.createLinearGradient(r,l,s,d));let m=t._gradients[n.fill].colorStops;for(let t=0;t<m.length;t++)c.addColorStop(m[t].percent,m[t].color);a.fillStyle=c}else n.fill&&(a.fillStyle=n.fill)}rect(t,n){0===n.width||0===n.height||(t.fillRect(this.ptrnd(n.x),this.ptrnd(n.y),n.width,n.height),t.strokeRect(this.ptrnd(n.x),this.ptrnd(n.y),n.width,n.height))}circle(t,n){0===n.r||(t.beginPath(),t.arc(this.ptrnd(n.x),this.ptrnd(n.y),n.r,0,2*Math.PI,!1),t.closePath(),t.fill(),t.stroke())}_parsePoint(t){let n=this._parseNumber(t),a=this._parseNumber(t);return{x:n,y:a}}_parseNumber(t){let n=!1,a;for(a=this._pos;a<t.length;a++){if("0"<=t[a]&&"9">=t[a]||"."===t[a]||"e"===t[a]||"-"===t[a]&&!n||"-"===t[a]&&1<=a&&"e"===t[a-1]){n=!0;continue}if(!n&&(" "===t[a]||","===t[a])){this._pos++;continue}break}let o=parseFloat(t.substring(this._pos,a));if(!isNaN(o))return this._pos=a,o}_isRelativeCmd(t){return-1!==this._cmds.indexOf(t)}_parseCmd(t){for(let n=this._pos;n<t.length;n++){if(-1!==this._cmds.toLowerCase().indexOf(t[n].toLowerCase()))return this._pos=n+1,this._lastCmd=t[n],this._lastCmd;if(" "===t[n]){this._pos++;continue}if("0"<=t[n]&&"9">=t[n])if(this._pos=n,""===this._lastCmd)break;else return this._lastCmd}}_toAbsolutePoint(t){return{x:this._currentPoint.x+t.x,y:this._currentPoint.y+t.y}}path(t,n){var i=Math.sqrt,o=Math.pow,l=Math.sin,d=Math.cos,c=Math.PI;let p=n.d;this._pos=0,this._lastCmd="";let a;for(this._currentPoint={x:0,y:0},t.beginPath();this._pos<p.length;){let n=this._parseCmd(p);if(n===void 0)break;if("M"===n||"m"===n){let n=this._parsePoint(p);if(void 0===n)break;t.moveTo(n.x,n.y),this._currentPoint=n,void 0===a&&(a=n);continue}if("L"===n||"l"===n){let n=this._parsePoint(p);if(void 0===n)break;t.lineTo(n.x,n.y),this._currentPoint=n;continue}if("A"===n||"a"===n){let g=this._parseNumber(p),h=this._parseNumber(p),_=this._parseNumber(p)*(c/180),f=this._parseNumber(p),y=this._parseNumber(p),b=this._parsePoint(p);if(this._isRelativeCmd(n)&&(b=this._toAbsolutePoint(b)),0===g||0===h)continue;let x=this._currentPoint,C={x:d(_)*(x.x-b.x)/2+l(_)*(x.y-b.y)/2,y:-l(_)*(x.x-b.x)/2+d(_)*(x.y-b.y)/2},w=o(C.x,2)/o(g,2)+o(C.y,2)/o(h,2);1<w&&(g*=i(w),h*=i(w));let S=(f===y?-1:1)*i((o(g,2)*o(h,2)-o(g,2)*o(C.y,2)-o(h,2)*o(C.x,2))/(o(g,2)*o(C.y,2)+o(h,2)*o(C.x,2)));isNaN(S)&&(S=0);let s={x:S*g*C.y/h,y:S*-h*C.x/g},T={x:(x.x+b.x)/2+d(_)*s.x-l(_)*s.y,y:(x.y+b.y)/2+l(_)*s.x+d(_)*s.y},D=function(t){return i(o(t[0],2)+o(t[1],2))},m=function(t,n){return(t[0]*n[0]+t[1]*n[1])/(D(t)*D(n))},r=function(t,n){return(t[0]*n[1]<t[1]*n[0]?-1:1)*Math.acos(m(t,n))},a=r([1,0],[(C.x-s.x)/g,(C.y-s.y)/h]),M=[(C.x-s.x)/g,(C.y-s.y)/h],u=[(-C.x-s.x)/g,(-C.y-s.y)/h],v=r(M,u);-1>=m(M,u)&&(v=c),1<=m(M,u)&&(v=0),0===y&&0<v&&(v-=2*c),1===y&&0>v&&(v+=2*c);let I=g>h?g:h,$=g>h?1:g/h,B=g>h?h/g:1;t.translate(T.x,T.y),t.rotate(_),t.scale($,B),t.arc(0,0,I,a,a+v,1-y),t.scale(1/$,1/B),t.rotate(-_),t.translate(-T.x,-T.y);continue}if(("Z"===n||"z"===n)&&void 0!==a){t.lineTo(a.x,a.y),this._currentPoint=a;continue}if("C"===n||"c"===n){let n=this._parsePoint(p),a=this._parsePoint(p),i=this._parsePoint(p);t.bezierCurveTo(n.x,n.y,a.x,a.y,i.x,i.y),this._currentPoint=i;continue}if("Q"===n||"q"===n){let n=this._parsePoint(p),a=this._parsePoint(p);t.quadraticCurveTo(n.x,n.y,a.x,a.y),this._currentPoint=a;continue}}t.fill(),t.stroke(),t.closePath()}text(t,n){let a=this.ptrnd(n.x),o=this.ptrnd(n.y),i=this.ptrnd(n.width),r=this.ptrnd(n.height),l=n.halign,s=n.valign,d=n.angle,c=n.rotateAround,m=n.textPartsInfo,p=m.parts,u=n.clip;void 0===u&&(u=!0),t.save(),l||(l="center"),s||(s="center"),u&&(t.rect(a,o,i,r),t.clip());let g=n.textWidth,_=n.textHeight,f=i||0,b=r||0;if(t.fillStyle=n.color,t.font=n.fontWeight+" "+n.fontSize+" "+n.fontFamily,!d||0===d){o+=_,"center"===s||"middle"===s?o+=(b-_)/2:"bottom"===s&&(o+=b-_),i||(i=g),r||(r=_);let n=0;for(let r=p.length-1;0<=r;r--){let i=p[r],s=a,d=p[r].width;"center"===l?s+=(f-d)/2:"right"===l&&(s+=f-d),t.fillText(i.text,s,o+n),n-=i.height+(0<r?4:0)}return void t.restore()}let h=this.HTML5Renderer.alignTextInRect(a,o,i,r,g,_,l,s,d,c);a=h.x,o=h.y;let v=2*(d*Math.PI)/360;t.translate(a,o),t.rotate(v);let C=0,w=m.width;for(let a=p.length-1,i;0<=a;a--)i=0,"center"===l?i+=(w-p[a].width)/2:"right"===l&&(i+=w-p[a].width),t.fillText(p[a].text,i,C),C-=p[a].height+4;t.restore()}}),Smart.Utilities.Assign("Plot",class{constructor(t){this.renderer=t}get(t,n,a){return a===void 0?t[n]:t[n][a]}min(t,n){let a=NaN;for(let o=0,i;o<t.length;o++)i=this.get(t,o,n),(isNaN(a)||i<a)&&(a=i);return a}max(t,n){let a=NaN;for(let o=0,i;o<t.length;o++)i=this.get(t,o,n),(isNaN(a)||i>a)&&(a=i);return a}sum(t,n){let a=0;for(let o=0,i;o<t.length;o++)i=this.get(t,o,n),isNaN(i)||(a+=i);return a}count(t,n){let a=0;for(let o=0,i;o<t.length;o++)i=this.get(t,o,n),isNaN(i)||a++;return a}avg(t,n){return this.sum(t,n)/Math.max(1,this.count(t,n))}filter(t,n){if(!n)return t;let a=[];for(let o=0;o<t.length;o++)n(t[o])&&a.push(t[o]);return a}scale(t,n,a,i){var o=Math.log,r=Math.min,l=Math.abs,s=Math.pow,d=Math.max;if(isNaN(t))return NaN;if((t<r(n.min,n.max)||t>d(n.min,n.max))&&(!i||!0!==i.ignore_range))return NaN;let c=NaN,m=1;if(n.type===void 0||"logarithmic"!==n.type){let a=l(n.max-n.min);a||(a=1),m=l(t-r(n.min,n.max))/a}else if("logarithmic"===n.type){let a=n.base;isNaN(a)&&(a=10);let i=r(n.min,n.max);0>=i&&(i=1);let c=d(n.min,n.max);0>=c&&(c=1);let p=o(c)/o(a);c=s(a,p);let u=o(i)/o(a);i=s(a,u);let g=o(t)/o(a);m=l(g-u)/(p-u)}if("logarithmic"===a.type){let t=a.base;isNaN(t)&&(t=10);let n=o(a.max)/o(t),i=o(a.min)/o(t);a.flip&&(m=1-m);let d=r(i,n)+m*l(n-i);c=s(t,d)}else c=r(a.min,a.max)+m*l(a.max-a.min),a.flip&&(c=d(a.min,a.max)-c+a.min);return c}axis(t,n,a){var o=Math.round,r=Math.floor,l=Math.pow;if(1>=a)return[n,t];(isNaN(a)||2>a)&&(a=2);let s=0;for(;o(t)!==t&&o(n)!==n&&10>s;)t*=10,n*=10,s++;let d=(n-t)/a;for(;10>s&&o(d)!==d;)t*=10,n*=10,d*=10,s++;let c=[1,2,5],m=0,p;for(;;){let t=m%c.length,n=r(m/c.length),a=l(10,n)*c[t];if(t=(m+1)%c.length,n=r((m+1)/c.length),p=l(10,n)*c[t],d>=a&&d<p)break;m++}let u=p,g=[],h=this.renderer._rnd(t,u,!1),_=0>=s?1:l(10,s);for(;h<n+u;)g.push(h/_),h+=u;return g}}),Smart.Utilities.Assign("DataExporter",class{constructor(t,n,a,i){const o=this;t||(t={}),o.style=t.style,o.header=t.header,o.exportHeader=t.exportHeader||!0,o.hierarchical=t.hierarchical,o.expandChar=t.expandChar||"+",o.collapseChar=t.collapseChar||"-",o.pageOrientation=t.pageOrientation,!o.hierarchical&&n&&0<n.length?o.groupBy=n:o.mergedCells=t.mergedCells,!o.groupBy&&a&&0<Object.keys(a).length&&(o.filterBy=a),i&&(o.conditionalFormatting=i),o.timeBetween1900And1970=new Date(1970,0,1).getTime()-new Date(1900,0,1).getTime()}downloadFile(t,n,i){let o;if(o=t instanceof Blob?t:new Blob([t],{type:n}),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,i);else{const t=document.createElement("a"),n=URL.createObjectURL(o);t.href=n,t.download=i,t.style.position="absolute",t.style.visibility="hidden",document.body.appendChild(t),t.click(),setTimeout(function(){document.body.removeChild(t),window.URL.revokeObjectURL(n)},0)}}exportData(t,n,a){const i=this;return(i.actualHierarchy=i.hierarchical,n=n.toLowerCase(),i.exportHeader&&(i.header?(t=t.slice(0),0===t.length&&(i.actualHierarchy=!1),i.processComplexHeader(i.header,t,n)):1===t.length&&(i.actualHierarchy=!1)),0===t.length)?void console.warn("No data to export."):void("xlsx"===n&&(i.xlsxStartIndex=i.complexHeader?i.complexHeader.length:+i.exportHeader),i.actualHierarchy&&(t=i.processHierarchicalData(t,n)),i.getDatafields(t),a.slice(a.length-n.length-1,a.length)!=="."+n&&(a+="."+n),"csv"===n?i.exportToCSVAndTSV(t,{delimiter:", ",MIME:"text/csv",toRemove:2},a):"html"===n?i.exportToHTML(t,a):"json"===n?i.exportToJSON(t,a):"pdf"===n?i.exportToPDF(t,a):"tsv"===n?i.exportToCSVAndTSV(t,{delimiter:"\t",MIME:"text/tab-separated-values",toRemove:1},a):"xlsx"===n?i.exportToXLSX(t,a):"xml"===n?i.exportToXML(t,a):void 0,delete i.complexHeader)}exportToCSVAndTSV(t,n,a){const i=this,o=i.datafields;let r="";for(let l=0;l<t.length;l++){const a=t[l];let s="";for(let t=0;t<o.length;t++){if(i.actualHierarchy&&0==t){s+=("\"\""+n.delimiter).repeat(a._level-1)+"\""+a[o[t]]+"\""+n.delimiter+("\"\""+n.delimiter).repeat(i.maxLevel-a._level);continue}s+="\""+a[o[t]]+"\""+n.delimiter}s=s.slice(0,s.length-n.toRemove)+"\n",r+=s}this.downloadFile(r,n.MIME,a)}exportToHTML(t,n){const a=this,i=a.datafields,o=a.style;let r="",l=0;t=a.processGroupingInformation(t),a.data=t,a.exportHeader&&(r=a.getHTMLHeader(i,t),l=1);let s=`<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style type="text/css">
${a.getRowStyle()}${a.getColumnStyle()}
    </style>${a.toggleableFunctionality()}
</head>
<body>
    <table${a.getTableStyle()}>${r}
        <tbody>\n`;const d={},c={},m=[];a.getMergedCellsInfo(d,c);mainLoop:for(let r=l;r<t.length;r++){const p=t[r],u=r-l;let g=a.getAlternationIndex(u," rowN"),n="",h="",_="",f=0;if(a.actualHierarchy)p._collapsed&&(n=" collapsed"),h=` level="${p._level}"`;else if(a.groupBy)for(let t=0;t<a.groupBy.length;t++){const n=a.groupBy[t],i=p[n],o=a.groups[n][i];if(_+=i,-1===m.indexOf(_)){s+=`            <tr class="row">
                <td class="column group" style="padding-left: ${25*f}px;" colspan="${a.datafields.length}">${o}</td>
            </tr>`,m.push(_),r--;continue mainLoop}f++}let y=`            <tr class="row row${u}${g}${n}"${h}>\n`;for(let t=0;t<i.length;t++){const n=t+","+u;let r=1,l=1;if(d[n])r=d[n].colspan,l=d[n].rowspan;else if(c[n])continue;const s=i[t];let m=p[s],g="";if(a.actualHierarchy&&0==t){let t="";p._expanded?t=a.collapseChar:!1===p._expanded&&(t=a.expandChar),g=`<div class="toggle-element" style="margin-left: ${25*(p._level-1)+5}px;" expanded>${t}</div>`}m=a.getFormattedValue(m,s);let h="";if(o&&o.columns&&o.columns[s]&&o.columns[s][u]){const t=o.columns[s][u];h+=`border-color: ${t.border}; background-color: ${t.background}; color: ${t.color};"`}0==t&&1<f&&(h+=`padding-left: ${25*(f-1)}px;"`),h&&(h=` style="${h}"`),y+=`                <td class="column column${s}"${h} colspan="${r}" rowspan="${l}">${g+m}</td>\n`}s+=y+"            </tr>\n"}s+=`        </tbody>
    </table>
</body>
</html>`,this.downloadFile(s,"text/html",n)}getMergedCellsInfo(t,n,a){const o=this;if(o.mergedCells){const r=a&&0!==a[o.datafields.length-1];o.mergedCellsPDF=o.mergedCells.slice(0);for(let l=0;l<o.mergedCellsPDF.length;l++){const i=o.mergedCellsPDF[l];let s=i.colspan,d=i.rowspan;if(2>d&&2>s)continue;const c=i.cell[1];let m=i.cell[0];if(r&&1<s){const t=a[m],n=a[m+s-1],r=[];if(n>t){let i=t,l=m,p=0;mainLoop:for(let o=t;o<=n;o++){let t=l,n=0;for(;a[l]===i;)if(l++,p++,n++,p===s){r.push({start:t,span:n});break mainLoop}r.push({start:t,span:n}),i=a[l]}s=r[0].span;for(let t=1;t<r.length;t++)o.mergedCellsPDF.push({cell:[r[t].start,c],colspan:r[t].span,rowspan:d,originalCell:m})}}for(let a=m;a<m+s;a++)for(let o=c;o<c+d;o++){const r=a+","+o;if(a===m&&o===c){t[r]={colspan:s,rowspan:d,originalCell:i.originalCell};continue}n[r]=!0}}}}getAlternationIndex(t,n){const a=this;if(!a.style)return"";const i=a.style.rows,o=i&&i.alternationCount;return!o||i.alternationStart&&t<i.alternationStart||i.alternationEnd&&t>i.alternationEnd?"":n+t%i.alternationCount}getFormattedValue(t,n){const a=this,i=a.style;if(n&&i&&i.columns&&i.columns[n]&&i.columns[n].format){if("number"==typeof t)return a.formatNumber(t,i.columns[n].format);if(t instanceof Date)return a.formatDate(t,i.columns[n].format)}else if(t instanceof Date)return a.formatDate(t,"d");return t}exportToJSON(t,n){this.downloadFile(JSON.stringify(t,this.datafields.concat("rows")),"application/json",n)}exportToPDF(t,n){function a(){let t=[];for(let n=0;n<h.length;n++)t.push([]);return t}const o=this,i=o.datafields,r=+o.exportHeader,l=[],s={},d={},c={},m=r?o.complexHeader?o.complexHeader.length:1:0,p={pageOrientation:o.pageOrientation||"portrait"};let u=[],g=[],h;t=o.processGroupingInformation(t),o.data=t,o.headerRows=m,o.getPDFStyle();const _=o.styleInfo;h=_?o.wrapPDFColumns(p,c):[{body:u,datafields:i}],r&&(u=o.getPDFHeader(i,h,c)),o.getMergedCellsInfo(s,d,c);mainLoop:for(let m=r;m<t.length;m++){const p=t[m];let u="",g=0;if(o.groupBy)for(let t=0;t<o.groupBy.length;t++){const n=o.groupBy[t],a=p[n],i=o.groups[n][a];if(u+=a,-1===l.indexOf(u)){o.createGroupHeaderRow(h,{text:i,style:["row","cell","group"],marginLeft:7.5*g}),l.push(u),m--;continue mainLoop}g++}const _=a(),f=m-r;let y=o.getAlternationIndex(f,"");for(let t=0;t<i.length;t++){const n=i[t],a={style:["row","row"+f,"cell","cell"+n]},r=c[t]||0;if(void 0!==y&&a.style.splice(1,0,"rowN"+y),o.mergedCellsPDF){const n=t+","+f,o=s[n];if(o){if(a.colSpan=o.colspan,a.rowSpan=o.rowspan,void 0!==o.originalCell){a.text="",a.style[a.style.length-1]="cell"+i[o.originalCell],_[r].push(a);continue}}else if(d[n]){_[r].push({});continue}}const l=o.getFormattedValue(p[n],n);a.text=l.toString(),o.getUniqueStylePDF(a,n,f),o.setIndentation(a,{j:t,currentRecord:p,value:l,outlineLevel:g}),_[r].push(a)}for(let t=0;t<h.length;t++)h[t].body.push(_[t])}if(_){for(let t=0;t<h.length;t++){const n=h[t].body;for(let a=m-1;0<=a;a--)n.unshift(u[t][a]);g.push({table:{headerRows:m,widths:h[t].widths,heights:function(t){return _.heights[t]?_.heights[t]:_.defaultHeight?_.defaultHeight:void 0},body:n},pageBreak:"after"})}delete g[h.length-1].pageBreak,p.styles=_.styles}else{const t=h[0].body;for(let n=m-1;0<=n;n--)t.unshift(u[0][n]);g=[{table:{headerRows:m,body:t}}],p.styles={header:{bold:!0},group:{bold:!0}}}p.content=g,pdfMake.createPdf(p).download(n),delete o.mergedCellsPDF,delete o.styleInfo}getPDFStyle(){function t(t,a){if(t)for(let o in t)if(t.hasOwnProperty(o))if(void 0!==i[o])for(let i in t[o]){if(!isNaN(i)||!t[o].hasOwnProperty(i))continue;const r=t[o][i],l=n.datafields.indexOf(o);"width"==i&&"*"===s.widths[l]?s.widths[l]=parseFloat(r):n.storePDFStyle({prop:i,value:r,toUpdate:a+o})}else if("height"==o&&"header"===a)for(let a=0;a<n.headerRows;a++)s.heights[a]=parseInt(t[o],10)/n.headerRows/1.57;else n.storePDFStyle({prop:o,value:t[o],toUpdate:a})}const n=this,a=n.style;if(!a)return"";const i=n.data[0],o=a.header,r=a.columns,l=a.rows,s={heights:[],widths:Array(n.datafields.length).fill("*"),styles:{header:{},row:{},cell:{},group:{fillColor:"#FFFFFF",color:"#000000",bold:!0}}};if(n.styleInfo=s,t(o,"header"),t(r,"cell"),!!l){for(let t in l){if(!l.hasOwnProperty(t)||-1!==t.indexOf("alt"))continue;const a=l[t];if(!isNaN(t)){for(let i in a)a.hasOwnProperty(i)&&("height"==i?s.heights[parseFloat(t)+n.headerRows]=parseFloat(a[i])/1.57:n.storePDFStyle({prop:i,value:a[i],toUpdate:"row"+t}));continue}"height"==t?s.defaultHeight=parseFloat(a)/1.57:n.storePDFStyle({prop:t,value:a,toUpdate:"row"})}if(l.alternationCount)for(let t=0;t<l.alternationCount;t++){const n={};l[`alternationIndex${t}Color`]&&(n.color=l[`alternationIndex${t}Color`]),l[`alternationIndex${t}BackgroundColor`]&&(n.fillColor=l[`alternationIndex${t}BackgroundColor`]),s.styles["rowN"+t]=n}}}storePDFStyle(t){const n=this;let a=n.styleInfo.styles[t.toUpdate];a||(a={},n.styleInfo.styles[t.toUpdate]=a);let i=t.value;switch(t.prop){case"backgroundColor":a.fillColor=i;break;case"color":a.color=i;break;case"fontSize":a.fontSize=parseFloat(i);break;case"fontStyle":"italic"===i&&(a.italics=!0);break;case"fontWeight":"bold"===i&&(a.bold=!0);break;case"textAlign":a.alignment=i;}}wrapPDFColumns(t,n){const a=this,o=this.styleInfo,r="portrait"===t.pageOrientation?775:1155,l=[];let s=0;for(let d=0;d<o.widths.length;d++){let t=o.widths[d],i=t;if("*"===t?i=150:t>=r?(i=r,t="*"):t/=1.57,void 0===l[s]){l[s]={body:[],width:i,widths:[t],datafields:[a.datafields[d]]},n[d]=s;continue}const c=l[s];if(c.width+i>r){s++,d--;continue}n[d]=s,c.width+=i,c.widths.push(t),c.datafields.push(a.datafields[d])}return l}getPDFHeader(t,n,a){function o(t,n,a){for(let i=0;i<l;i++){const o=t[i],r=[];for(let n=0;n<o.length;n++){const s=o[n];let d=1,c=1;if(o[n-1]&&o[n-1]===s||t[i-1]&&t[i-1][n]===s){r.push({});continue}let m=n+1;for(;o[m]&&o[m]===o[m-1];)d++,m++;for(m=i+1;t[m]&&t[m][n]===s;)c++,m++;const p=i==l-1||c+i===l?a.datafields[n]:null,u={text:s,colSpan:d,rowSpan:c};p?u.style=["header","header"+p]:(u.alignment="center",u.style="header"),r.push(u)}n.push(r)}}const i=this,r=[],l=i.headerRows,s=i.complexHeader?i.complexHeader:[Object.values(i.data[0])],d=[];let c=[];for(let o=0;o<l;o++){const t=s[o];for(let n=0,i;n<t.length;n++)i=a[n]||0,d[i]||(d[i]=[]),d[i][o]||(d[i][o]=[]),d[i][o].push(t[n])}for(let l=0;l<n.length;l++)c=[],o(d[l],c,n[l]),r.push(c);return r}createGroupHeaderRow(t,n){for(let a=0;a<t.length;a++){const i=Object.assign({},n),o=t[a].datafields.length,r=[i];i.colSpan=o,r.length=o,r.fill({},1,o-1),t[a].body.push(r)}}getUniqueStylePDF(t,n,a){function i(t){const n=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(t.replace(/\s/g,"")),a=parseFloat(n[1]).toString(16).toUpperCase(),i=parseFloat(n[2]).toString(16).toUpperCase(),o=parseFloat(n[3]).toString(16).toUpperCase();return"#"+"0".repeat(2-a.length)+a+"0".repeat(2-i.length)+i+"0".repeat(2-o.length)+o}const o=this.style;if(o&&o.columns&&o.columns[n]){const r=o.columns[n][a];r&&(t.fillColor=i(r.background),t.color=r.color.toLowerCase())}}setIndentation(t,n){if(0===n.j){const a=this;if(a.actualHierarchy){const i=n.currentRecord;void 0===i._expanded?t.marginLeft=25*(i._level-1)+6:(t.marginLeft=25*(i._level-1),t.text=a.collapseChar+" "+n.value)}else 1<n.outlineLevel&&(t.marginLeft=7.5*(n.outlineLevel-1))}}exportToXLSX(t,n){const a=this;let i=a.style;if(t=a.processGroupingInformation(t,!0),a.data=t,a.getColumnsArray(),a.complexHeaderMergedCells=[],a.complexHeaderMergeInfo)for(let t in a.complexHeaderMergeInfo)if(a.complexHeaderMergeInfo.hasOwnProperty(t)){const n=a.complexHeaderMergeInfo[t];if(n.from[0]===n.to[0]&&n.from[1]===n.to[1])continue;a.complexHeaderMergedCells.push({from:a.columnsArray[n.from[1]]+(n.from[0]+1),to:a.columnsArray[n.to[1]]+(n.to[0]+1)})}a.getConditionalFormatting(),i||(i=a.generateDefaultStyle(t));const o=a.generateSharedStrings(t),r=o.collection,l=o.xml,s=a.generateStyles(i),d=a.groupBy?a.generateSheet1WithGrouping(t,r):a.generateSheet1(t,r),c=a.generateAuxiliaryFiles(),m=new JSZip,p=m.folder("_rels"),u=m.folder("docProps"),g=m.folder("xl"),h=g.folder("_rels"),_=g.folder("theme"),f=g.folder("worksheets");p.file(".rels",c._relsRels),u.file("app.xml",c.docPropsAppXml),u.file("core.xml",c.docPropsCoreXml),h.file("workbook.xml.rels",c.xl_relsWorkbookXmlRels),_.file("theme1.xml",c.xlThemeTheme1Xml),f.file("sheet1.xml",d),g.file("sharedStrings.xml",l),g.file("styles.xml",s),g.file("workbook.xml",c.xlWorkbookXml),m.file("[Content_Types].xml",c.Content_TypesXml),m.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}).then(function(t){a.downloadFile(t,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",n)}),delete a.conditionalFormattingXLSX,delete a.complexHeaderMergeInfo,delete a.defaultRowHeight,delete a.rowHeight}processGroupingInformation(t,n){const a=this;if(!a.groupBy)return t;let i;return t=t.slice(0),a.exportHeader&&(n&&a.complexHeader?(i=t.slice(0,a.complexHeader.length),t.splice(0,a.complexHeader.length)):(i=[t[0]],t.splice(0,1))),1<t.length&&sortByMultipleColumns(t,a.groupBy),i&&(t=i.concat(t)),a.getGroupLabels(t),t}exportToXML(t,n){function a(t,n){let o="";for(let r=0;r<t.length;r++){const l=t[r];o+=n+"<row>\n";for(let t=0;t<i.length;t++){const r=i[t];if("rows"===r){if(!l.rows)continue;o+=`${n}    <rows>\n${a(l.rows,n+"        ")}${n}    </rows>\n`;continue}o+=n+`    <${r}>${l[r]}</${r}>\n`}o+=n+"</row>\n"}return o}const i=this.datafields.slice(0);let o="<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<table>\n";-1===i.indexOf("rows")&&i.push("rows"),o+=a(t,"    ")+"</table>",this.downloadFile(o,"application/xml",n)}formatDate(t,n){if(!Smart.Utilities.DateTime)return t;try{return new Smart.Utilities.DateTime(t).toString(n)}catch(n){return t}}formatNumber(t,n){if(!Smart.Utilities.NumberRenderer)return t;const a=new Smart.Utilities.NumberRenderer,i=a.formatNumber(t,n);return void 0===i?t:i}generateAuxiliaryFiles(){const t=new Date().toISOString();return{_relsRels:"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/><Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/></Relationships>",docPropsAppXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="1" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr></vt:vector></TitlesOfParts><Company></Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>`,docPropsCoreXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>Smart HTML Elements</dc:creator><cp:lastModifiedBy>Smart HTML Elements</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${t}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${t}</dcterms:modified></cp:coreProperties>`,xl_relsWorkbookXmlRels:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId4" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/></Relationships>`,xlThemeTheme1Xml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="44546A"/></a:dk2><a:lt2><a:srgbClr val="E7E6E6"/></a:lt2><a:accent1><a:srgbClr val="4472C4"/></a:accent1><a:accent2><a:srgbClr val="ED7D31"/></a:accent2><a:accent3><a:srgbClr val="A5A5A5"/></a:accent3><a:accent4><a:srgbClr val="FFC000"/></a:accent4><a:accent5><a:srgbClr val="5B9BD5"/></a:accent5><a:accent6><a:srgbClr val="70AD47"/></a:accent6><a:hlink><a:srgbClr val="0563C1"/></a:hlink><a:folHlink><a:srgbClr val="954F72"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Calibri Light" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" Light"/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=" Light"/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=""/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:lumMod val="110000"/><a:satMod val="105000"/><a:tint val="67000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="103000"/><a:tint val="73000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="109000"/><a:tint val="81000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:satMod val="103000"/><a:lumMod val="102000"/><a:tint val="94000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:satMod val="110000"/><a:lumMod val="100000"/><a:shade val="100000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="99000"/><a:satMod val="120000"/><a:shade val="78000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="6350" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="12700" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="19050" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="57150" dist="19050" dir="5400000" algn="ctr" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="63000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:solidFill><a:schemeClr val="phClr"><a:tint val="95000"/><a:satMod val="170000"/></a:schemeClr></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="93000"/><a:satMod val="150000"/><a:shade val="98000"/><a:lumMod val="102000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:tint val="98000"/><a:satMod val="130000"/><a:shade val="90000"/><a:lumMod val="103000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="63000"/><a:satMod val="120000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri="{05A4C25C-085E-4340-85A3-A5531E510DB2}"><thm15:themeFamily xmlns:thm15="http://schemas.microsoft.com/office/thememl/2012/main" name="Office Theme" id="{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}" vid="{4A3C46E8-61CC-4603-A589-7422A47A8E4A}"/></a:ext></a:extLst></a:theme>`,xlWorkbookXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15 xr xr6 xr10 xr2" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr6="http://schemas.microsoft.com/office/spreadsheetml/2016/revision6" xmlns:xr10="http://schemas.microsoft.com/office/spreadsheetml/2016/revision10" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2"><fileVersion appName="xl" lastEdited="7" lowestEdited="7" rupBuild="20325"/><workbookPr defaultThemeVersion="166925"/><mc:AlternateContent xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"><mc:Choice Requires="x15"><x15ac:absPath url="C:\Users\jqwidgets\Desktop\" xmlns:x15ac="http://schemas.microsoft.com/office/spreadsheetml/2010/11/ac"/></mc:Choice></mc:AlternateContent><xr:revisionPtr revIDLastSave="0" documentId="13_ncr:1_{0DEDCB6D-5403-4CD8-AAA5-59B6D238A8B6}" xr6:coauthVersionLast="34" xr6:coauthVersionMax="34" xr10:uidLastSave="{00000000-0000-0000-0000-000000000000}"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="19200" windowHeight="6950" xr2:uid="{0CB664E6-3800-4A88-B158-B46A682E7484}"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets><calcPr calcId="179021"/><extLst><ext uri="{140A7094-0E35-4892-8432-C4D2E57EDEB5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:workbookPr chartTrackingRefBase="1"/></ext></extLst></workbook>`,Content_TypesXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="bin" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings"/><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/></Types>`}}generateDefaultStyle(t){const n=this,a={},o=n.datafields,r=n.complexHeader?t[n.complexHeader.length]:t[+n.exportHeader];if(!r)return a;for(let n=0;n<o.length;n++){const t=r[o[n]];t instanceof Date&&(!a.columns&&(a.columns=[]),a.columns[o[n]]={format:"d"})}return a}generateGroupRow(t){const n=t.rowNumber,a="A"+n,i=`        <row r="${n}" outlineLevel="${t.outlineLevel}" spans="1:${t.numberOfColumns}"${this.getCustomRowHeight(n-1)} x14ac:dyDescent="0.45">
            <c r="${a}" t="s">
                <v>${t.sharedStringIndex}</v>
            </c>
        </row>\n`;return t.mergedCells.push({from:a,to:this.columnsArray[t.numberOfColumns-1]+n}),i}generateSharedStrings(t){function n(t){l++,-1===o.indexOf(t)&&(s++,o.push(t),r+=`<si><t>${t}</t></si>`)}const a=this,i=a.datafields,o=[];let r="",l=0,s=0;for(let a=0;a<t.length;a++){const o=t[a];for(let t=0,a;t<i.length;t++)(a=o[i[t]],"string"==typeof a)&&n(a)}if(a.groupLabels)for(let t=0;t<a.groupLabels.length;t++)n(a.groupLabels[t]);return r=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${l}" uniqueCount="${s}">${r}</sst>`,{collection:o,xml:r}}generateSheet1(t,n){function a(t,n){return o.columnsArray[t]+n}const o=this,r=o.columnsArray.length,i=t.length,l=o.columnsArray[r-1]+i,d=o.datafields,s=o.getFilters(),c=[].concat(o.complexHeaderMergedCells);let m=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">
    <sheetPr filterMode="${""!==s}" />
    <dimension ref="A1:${l}" />
    <sheetViews>
        <sheetView tabSelected="1" workbookViewId="0" />
    </sheetViews>
    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${o.getCustomColumnWidths()}
    <sheetData>\n`;for(let l=0;l<=t.length;l++){const i=t[l],c=l+1;let s="";if(o.actualHierarchy){const n=t[l-1];n&&n._collapsed&&(!i||n._level>i._level)&&(s=" collapsed=\"true\"")}if(l===t.length){s&&(m+=`        <row r="${c}" outlineLevel="${Math.max(t[l-1]._level-2,0)}" hidden="false" collapsed="true" />\n`);break}let p=`        <row r="${c}"${o.getOutlineLevel(i)} hidden="${i._hidden||i._collapsed||!1}"${s} spans="1:${r}"${o.getCustomRowHeight(c-1)} x14ac:dyDescent="0.45">\n`;for(let t=0;t<d.length;t++){const r=o.getXLSXCellStyle(a(t,c));p+=o.getActualCellData(i[d[t]],{r:a(t,c),s:r},n)}p+="        </row>\n",m+=p}return m+=`    </sheetData>${o.conditionalFormattingXLSX.conditions}${s}${o.getMergedCells(c)}
    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />
    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />
</worksheet>`,m}generateSheet1WithGrouping(t,n){function a(t,n){return o.columnsArray[t]+n}const o=this,r=o.columnsArray.length,i=t.length,l=o.columnsArray[r-1]+i,d=o.datafields,s=[].concat(o.complexHeaderMergedCells);let c=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">
    <dimension ref="A1:${l}" />
    <sheetViews>
        <sheetView tabSelected="1" workbookViewId="0" />
    </sheetViews>
    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${o.getCustomColumnWidths()}
    <sheetData>\n`,m=0,p=[];mainLoop:for(let l=0;l<t.length;l++){const i=t[l],u=l+1+m;let g=0,h="";if(!o.exportHeader||!o.complexHeader&&0!=l||o.complexHeader&&l>=o.complexHeader.length){let t="";for(let a=0;a<o.groupBy.length;a++){const d=o.groupBy[a],h=i[d],_=o.groups[d][h];if(t+=h,-1===p.indexOf(t)){let a=n.indexOf(_);c+=o.generateGroupRow({rowNumber:u,outlineLevel:g,numberOfColumns:r,sharedStringIndex:a,mergedCells:s}),p.push(t),l--,m++;continue mainLoop}g++}h=` outlineLevel="${g}"`}let _=`        <row r="${u}"${h} spans="1:${r}"${o.getCustomRowHeight(u-1)} x14ac:dyDescent="0.45">\n`;for(let t=0;t<d.length;t++){const r=o.getXLSXCellStyle(a(t,l+1));_+=o.getActualCellData(i[d[t]],{r:a(t,u),s:r},n)}_+="        </row>\n",c+=_}return c+=`    </sheetData>${o.getMergedCells(s)}
    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />
    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />
</worksheet>`,c}getActualCellData(t,n,a){const i=n.r,o=n.s;if("string"==typeof t)return`            <c r="${i}" t="s"${o}>
                <v>${a.indexOf(t)}</v>
            </c>\n`;if("boolean"==typeof t)return`            <c r="${i}" t="b"${o}>
                <v>${+t}</v>
            </c>\n`;if(t instanceof Date){const n=(t.getTime()+this.timeBetween1900And1970)/864e5+2;return`            <c r="${i}"${o}>
                <v>${n}</v>
            </c>\n`}return`            <c r="${i}"${o}>
                <v>${t}</v>
            </c>\n`}getColumnsArray(){function t(t){return 26>t?"":n(64+Math.floor(t/26))}var n=String.fromCharCode;const a=this,o=a.datafields.length,r=[];for(let a=0;a<o;a++)r.push(t(a)+n(65+(26>a?a:a%26)));a.columnsArray=r}getColumnStyle(){const t=this,n=t.style;if(!n)return`        .header { border: 1px solid black; padding: 5px; }
        .column { border: 1px solid black; padding: 5px; }
        .group { background-color: #FFFFFF; color: #000000; font-weight: bold; }`;const a={header:"border: 1px solid black; padding: 5px; ",column:"white-space: nowrap; overflow: hidden; border: 1px solid black; padding: 5px; ",group:"background-color: #FFFFFF; color: #000000; font-weight: bold; "},i=t.data[0];let o="";const r=n.header||{};for(let n in r){if(!r.hasOwnProperty(n))continue;const o=r[n];if(i[n]){for(let t in a["header"+n]||(a["header"+n]=""),o)if(o.hasOwnProperty(t)){const i=Smart.Utilities.Core.toDash(t)+": "+o[t]+"; ";a["header"+n]+=i,"width"==t&&(!a["column"+n]&&(a["column"+n]=""),a["column"+n]+=i)}continue}a.header+="height"==n&&t.complexHeader?"height: "+parseInt(r[n],10)/t.complexHeader.length+"px; ":Smart.Utilities.Core.toDash(n)+": "+r[n]+"; "}const l=n.columns||{};for(let t in l){if(!l.hasOwnProperty(t))continue;const n=l[t];if(i[t]){for(let i in a["column"+t]||(a["column"+t]=""),n)isNaN(i)&&n.hasOwnProperty(i)&&"format"!=i&&(a["column"+t]+=Smart.Utilities.Core.toDash(i)+": "+n[i]+"; ");continue}a.column+=Smart.Utilities.Core.toDash(t)+": "+n+"; "}for(let t in a)a.hasOwnProperty(t)&&(o+=`        .${t} { ${a[t]}}\n`);return o}getCustomColumnWidths(){const t=this;if(!t.style||!t.columnWidth||0===t.columnWidth.length)return"";let n="\n    <cols>\n";for(let a=0,i;a<t.columnWidth.length;a++)i=t.columnWidth[a],void 0!==i&&(i=Math.round(parseFloat(i))/11,n+=`        <col min="${a+1}" max="${a+1}" width="${i}" customWidth="1" />\n`);return n+="    </cols>",n}getCustomFilter(t,n){let a="equal",i;return t instanceof Date&&(t=(t.getTime()+this.timeBetween1900And1970)/864e5+2),n=n.toUpperCase(),("EMPTY"===n?i="":"NOT_EMPTY"===n?(i="",a="notEqual"):"CONTAINS"===n||"CONTAINS_CASE_SENSITIVE"===n?i=`*${t}*`:"DOES_NOT_CONTAIN"===n||"DOES_NOT_CONTAIN_CASE_SENSITIVE"===n?(i=`*${t}*`,a="notEqual"):"STARTS_WITH"===n||"STARTS_WITH_CASE_SENSITIVE"===n?i=`${t}*`:"ENDS_WITH"===n||"ENDS_WITH_CASE_SENSITIVE"===n?i=`*${t}`:"EQUAL"===n||"EQUAL_CASE_SENSITIVE"===n?i=t:"NULL"===n?i=null:"NOT_NULL"===n?(i=null,a="notEqual"):"NOT_EQUAL"===n?(i=t,a="notEqual"):"LESS_THAN"===n?(i=t,a="lessThan"):"LESS_THAN_OR_EQUAL"===n?(i=t,a="lessThanOrEqual"):"GREATER_THAN"===n?(i=t,a="greaterThan"):"GREATER_THAN_OR_EQUAL"===n?(i=t,a="greaterThanOrEqual"):void 0,`                <customFilter val="${i}" operator="${a}"/>\n`)}getCustomRowHeight(t){const n=this;return n.style?n.rowHeight[t]||n.defaultRowHeight||"":""}getDatafields(t){const n=this,a=t[0],i=[];for(let n in a)a.hasOwnProperty(n)&&"_"!==n.charAt(0)&&i.push(n);n.datafields=i}getFilters(){const t=this,n=t.filterBy;if(!n)return"";let a="";for(let i in n)if(n.hasOwnProperty(i)){const o=t.datafields.indexOf(i);if(-1===o)continue;const r=n[i],l=r.filters;a+=`        <filterColumn colId="${o}">
            <customFilters and="${!r.operator}">\n`;for(let n=0;n<l.length;n++)a+=t.getCustomFilter(l[n].value,l[n].condition);a+=`            </customFilters>
        </filterColumn>`}return a?(a=`\n    <autoFilter ref="A1:${t.columnsArray[t.columnsArray.length-1]+t.data.length}">\n${a}\n    </autoFilter>`,a):""}getGroupLabels(t){const n=this,a=n.xlsxStartIndex===void 0?+n.exportHeader:n.xlsxStartIndex,i={},o=[];for(let r=a;r<t.length;r++){const l=t[r];for(let r=0;r<n.groupBy.length;r++){const s=n.groupBy[r],d=l[s];let c=i[s];c===void 0&&(i[s]={},c=i[s]),c[d]===void 0&&(c[d]=(n.exportHeader?t[a-1][s]:s)+": "+d,o.push(c[d]))}}n.groups=i,n.groupLabels=o}getHTMLHeader(t,n){const a=this;let i="\n        <thead>\n";if(!a.complexHeader){i+="            <tr>\n";for(let a=0;a<t.length;a++){const o=t[a];i+=`                <th class="header header${o}">${n[0][o]}</th>\n`}return i+="            </tr>\n        </thead>",i}for(let o=0;o<a.complexHeader.length;o++){const n=a.complexHeader[o];i+="            <tr>\n";for(let r=0;r<n.length;r++){const l=n[r];let s=1,d=1;if(n[r-1]&&n[r-1]===l||a.complexHeader[o-1]&&a.complexHeader[o-1][r]===l)continue;let c=r+1;for(;n[c]&&n[c]===n[c-1];)s++,c++;for(c=o+1;a.complexHeader[c]&&a.complexHeader[c][r]===l;)d++,c++;const m=o==a.complexHeader.length-1||d+o===a.complexHeader.length?" header"+t[r]:"";i+=`                <th class="header${m}" colspan="${s}" rowspan="${d}">${l}</th>\n`}i+="            </tr>\n"}return i+="        </thead>",i}getConditionalFormatting(){const t=this,n=t.conditionalFormatting;if(!n)return void(t.conditionalFormattingXLSX={conditions:"",styles:""});const a=[];let o="",i="";for(let r=n.length-1;0<=r;r--){const l=n[r],s=t.columnsArray[t.datafields.indexOf(l.column)],d=s+(t.xlsxStartIndex+1),c=d+":"+s+t.data.length,m=l.background+l.color,p=t.getConditionalAttributes(l,d);let u=a.indexOf(m);if(-1===u){const n=`        <dxf>
            <font>
                <b val="0"/>
                <i val="0"/>
                <color rgb="${"White"===l.color?"FFFFFFFF":"FF000000"}"/>
                <sz val="10"/>
            </font>
            <fill>
                <patternFill>
                    <bgColor rgb="${t.toARGB(l.background)}"/>
                </patternFill>
            </fill>
        </dxf>\n`;i+=n,u=a.length,a.push(m)}o+=`    <conditionalFormatting sqref="${c}">
        <cfRule dxfId="${u}" text="${p.text}" rank="${p.rank}" percent="${p.percent}" bottom="${p.bottom}" equalAverage="${p.equalAverage}" aboveAverage="${p.aboveAverage}"${p.operator}${p.timePeriod} priority="${r+2}" type="${p.type}">
${p.formula}        </cfRule>
    </conditionalFormatting>\n`}i=`    <dxfs count="${a.length}">\n${i}    </dxfs>`,t.conditionalFormattingXLSX={conditions:o,styles:i}}getConditionalAttributes(t,n){let a=t.condition,i=t.comparator,o="",r=0,l=0,s=0,d=0,c="",m="",p="",u="";return"equal"===a?(c="equal",p="cellIs",u=`            <formula>${i}</formula>\n`):"lessThan"===a?(c="lessThan",p="cellIs",u=`            <formula>${i}</formula>\n`):"greaterThan"===a?(c="greaterThan",p="cellIs",u=`            <formula>${i}</formula>\n`):"notEqual"===a?(c="notEqual",p="cellIs",u=`            <formula>${i}</formula>\n`):"between"===a?(c="between",p="cellIs",u=`            <formula>${t.min}</formula>
            <formula>${t.max}</formula>\n`):"duplicate"===a?(p="duplicateValues",u=`            <formula>0</formula>\n`):"topNItems"===a?(r=i,p="top10"):"bottomNItems"===a?(r=i,s=1,p="top10"):"topNPercent"===a?(r=i,l=1,p="top10"):"bottomNPercent"===a?(r=i,l=1,s=1,p="top10"):"aboveAverage"===a?(d=1,p="aboveAverage",u=`            <formula>0</formula>\n`):"belowAverage"===a?(p="aboveAverage",u=`            <formula>0</formula>\n`):"contains"===a?(o=i,c="containsText",p="containsText",u=`            <formula>NOT(ISERROR(SEARCH("${i}",${n})))</formula>\n`):"doesNotContain"===a?(o=i,c="notContains",p="notContainsText",u=`            <formula>ISERROR(SEARCH("${i}",${n}))</formula>\n`):"dateOccur"===a?(m=` timePeriod="${i}"`,p="timePeriod"):void 0,c&&(c=` operator="${c}" `),{text:o,rank:r,percent:l,bottom:s,equalAverage:0,aboveAverage:d,operator:c,timePeriod:m,type:p,formula:u}}getMergedCells(t){const n=this;let a="";for(let n=0;n<t.length;n++)t[n].from!==t[n].to&&(a+=`\n        <mergeCell ref="${t[n].from}:${t[n].to}" />\n`);if(n.mergedCells)for(let t=0;t<n.mergedCells.length;t++){const i=n.mergedCells[t];if(2>i.rowspan&&2>i.colspan)continue;const o=n.columnsArray[i.cell[0]]+(i.cell[1]+n.xlsxStartIndex+1),r=n.columnsArray[i.cell[0]+i.colspan-1]+(i.cell[1]+n.xlsxStartIndex+i.rowspan);a+=`\n        <mergeCell ref="${o}:${r}" />\n`}return a&&(a=`\n    <mergeCells count="${t.length}">${a}    </mergeCells>`),a}getNumFmtIndex(t,n){let a=n.collection.indexOf(t);return-1===a?(a=n.collection.length+100,n.collection.push(t),n.xml+=`<numFmt numFmtId="${a}" formatCode="${t}"/>`):a+=100,a}getOutlineLevel(t){return this.actualHierarchy&&1!==t._level?` outlineLevel="${t._level-1}"`:""}getRowStyle(){const t=this,n=t.style;if(!n)return"";const a=n.rows;if(!a)return"";const o={row:""};let r="";for(let t in a){if(!a.hasOwnProperty(t)||"alternationCount"==t||"alternationStart"==t||"alternationEnd"==t)continue;const n=a[t];if(-1!==t.indexOf("alt")){const a=t.slice(16,17),i=t.slice(17);o["rowN"+a]||(o["rowN"+a]=""),o["rowN"+a]+="Color"===i?"color : "+n+"; ":"BorderColor"===i?"border-color : "+n+"; ":"background-color : "+n+"; ";continue}if(!isNaN(t)){for(let a in o["row"+t]||(o["row"+t]=""),n)n.hasOwnProperty(a)&&(o["row"+t]+=Smart.Utilities.Core.toDash(a)+": "+n[a]+"; ");continue}o.row+=Smart.Utilities.Core.toDash(t)+": "+a[t]+"; "}let l=Object.keys(o);l.sort(function(t,n){if("row"===t)return-1;if("row"===n)return 1;const a=!isNaN(t.slice(3)),i=!isNaN(n.slice(3));return a&&!i?1:!a&&i?-1:+(t<n)});for(let t=0;t<l.length;t++)r+=`        .${l[t]} { ${o[l[t]]}}\n`;return r}getTableStyle(){const t=this,n=t.style;if(!n)return" style=\"table-layout: fixed; border: 1px solid black; border-collapse: collapse;\"";let a="table-layout: fixed; ";for(let t in n)n.hasOwnProperty(t)&&-1===["header","columns","rows"].indexOf(t)&&(a+=Smart.Utilities.Core.toDash(t)+": "+n[t]+"; ");return a&&(a=" style=\""+a+"\""),a}getXLSXCellStyle(t){const n=this;return void 0===n.cellStyleMapping[t]?"":` s="${n.cellStyleMapping[t]}"`}getXLSXFormat(t,n){if("number"==typeof n){let n=parseFloat(t.slice(1))||0,a=0<n?"."+"0".repeat(n):"";return t=t.slice(0,1),"C"===t||"c"===t?"$#,0"+a:"D"===t||"d"===t?n?"0".repeat(n):"0":"E"===t||"e"===t?"0"+a+t+"000":"F"===t||"f"===t?"0"+a:"N"===t||"n"===t?"#,0"+a:"P"===t||"p"===t?"#,0"+a+" %":void 0}return n instanceof Date?"d"===t?"m/d/yyyy":"D"===t?"nnnnmmmm dd, yyyy":"t"===t?"h:m AM/PM":"T"===t?"h:mm:ss AM/PM":"f"===t?"nnnnmmmm dd, yyyy h:m AM/PM":"F"===t?"nnnnmmmm dd, yyyy h:mm:ss AM/PM":"M"===t?"mmmm d":"Y"===t?"yyyy mmmm":"FP"===t||"PP"===t?"yyyy-mm-dd hh:mm:ss":"FT"===t||"PT"===t?"hh:mm:ss":(t=t.replace(/f|u|n|p|e|a|x|o/gi,""),t=t.replace(/tt/gi,"AM/PM"),t=t.replace(/:{2,}|:\s|:$|\.$/g,""),t=t.trim(),t):void 0}processColumnStyle(t){const n=this,a=t.header,o=t.columns,i=n.data[0],r=n.xlsxStartIndex;if(n.columnWidth=[],r&&a)for(let t=0;t<n.columnsArray.length;t++){const o=n.columnsArray[t],l=o+r,s=a[n.datafields[t]];for(let t in a)if(a.hasOwnProperty(t)&&void 0===i[t])if(n.complexHeader){for(let i=0;i<n.complexHeader.length;i++)if("height"==t){n.rowHeight[i]=` ht="${parseFloat(a.height)/n.complexHeader.length/2}"`;continue}else n.storeCellStyle(o+(i+1),t,a[t]);}else{if("height"==t){n.rowHeight[0]=` ht="${parseFloat(a.height)/2}"`;continue}n.storeCellStyle(l,t,a[t])}if(s)for(let a in s)if(s.hasOwnProperty(a)){if("width"==a){n.columnWidth[t]=s.width;continue}n.storeCellStyle(l,a,s[a])}}else if(a)for(let t=0;t<n.columnsArray.length;t++){const i=a[n.datafields[t]];i&&void 0!==i.width&&(n.columnWidth[t]=i.width)}if(!o)return"";for(let a=r;a<n.data.length;a++)for(let t=0;t<n.columnsArray.length;t++){const r=n.columnsArray[t],l=r+(a+1),s=n.datafields[t],d=o[s];for(let t in o)o.hasOwnProperty(t)&&void 0===i[t]&&n.storeCellStyle(l,t,o[t]);if(d)for(let t in d)isNaN(t)&&d.hasOwnProperty(t)&&n.storeCellStyle(l,t,d[t],n.data[a][s])}}processComplexHeader(t,n,a){function i(n){for(let a=0;a<t.columngroups.length;a++){const i=t.columngroups[a];if(i.name===n)return i}}function o(t){for(const n=[];t;)if(n.unshift(t.label),t.parentGroup)t=i(t.parentGroup);else return n}const r=this,l={},s=-1!==["html","pdf","xlsx"].indexOf(a)&&t.columngroups,d=[],c={},m=[];let p=0;if(s){for(let n=0;n<t.columngroups.length;n++){const a=t.columngroups[n],i=o(a);c[a.name]=i,p=Math.max(p,i.length)}p++;for(let t=0;t<p;t++)m[t]=[]}for(let o=0;o<t.columns.length;o++){const n=t.columns[o];if(l[n.dataField]=n.label,!s)continue;if(d[o]=n.dataField,m[p-1][o]=n.label,!n.columnGroup)continue;const a=c[n.columnGroup];for(let t=0;t<a.length;t++)m[t][o]=a[t]}if(1<m.length){const t=Object.keys(l).length;for(let o=0;o<p-1;o++){const i={};for(let n=0;n<t;n++){if(void 0===m[o][n]){let t=o+1;for(;void 0===m[t][n];)t++;m[o][n]=m[t][n]}i[d[n]]=m[o][n]}"xlsx"===a&&n.splice(o,0,i)}if(r.complexHeader=m,"xlsx"!==a)n.unshift(l);else{n.splice(p-1,0,l);const a={};for(let n=0;n<p;n++)for(let i=0;i<t;i++){const t=m[n][i];a[t]?a[t].to=[n,i]:(a[t]={from:[n,i]},a[t].to=a[t].from)}r.complexHeaderMergeInfo=a}}else n.unshift(l)}processHierarchicalData(t,n){function a(t,n,o){const r=s[t];if(c=i(c,n),void 0!==r)for(let t=0;t<r.length;t++){const i=r[t],l=i._keyDataField;i._collapsed=o,i._level=n,d.push(i),s[l]&&(m=!0,i._expanded=void 0===i._expanded||i._expanded,a(l,n+1,o||!i._expanded))}}function o(t,a,r){const l=s[t];if(c=i(c,a),void 0!==l)for(let t=0;t<l.length;t++){const i=l[t],d=i._keyDataField;let c;if("json"===n)for(let t in c={},i)i.hasOwnProperty(t)&&"_"!==t.charAt(0)&&(c[t]=i[t]);else c=Object.assign({},i);r.push(c),s[d]&&(m=!0,c.rows=[],o(d,a+1,c.rows))}}var i=Math.max;const r=this,l="xlsx"===n?r.xlsxStartIndex:+r.exportHeader,s={},d=[];let c=0,m=!1;if(void 0===t[l]._keyDataField)return r.processNestedData(t,n,l);for(let a=l;a<t.length;a++){const n=Object.assign({},t[a]),i=n._parentDataField;void 0===s[i]?s[i]=[n]:s[i].push(n)}if(l)for(let a=0;a<l;a++)d.push(Object.assign({},t[a])),-1===["json","pdf","xml"].indexOf(n)&&(d[a]._level=1);return"json"!==n&&"xml"!==n?a(null,1,!1):o(null,1,d),m||(r.actualHierarchy=!1),r.maxLevel=c,d}processNestedData(t,n,a){function o(t,n,a,r){d=i(d,a);for(let l=t;l<n.length;l++){const t=Object.assign({},n[l]);t._collapsed=r,t._level=a,s.push(t),t.children&&0<t.children.length&&(c=!0,t._expanded=void 0===t._expanded||t._expanded,o(0,t.children,a+1,r||!t._expanded)),delete t.children}}function r(t,n,a,o){d=i(d,o);for(let l=t;l<n.length;l++){const t=Object.assign({},n[l]);1===o?s[l]=t:a[l]=t,t.children&&0<t.children.length&&(c=!0,t.rows=[],r(0,t.children,t.rows,o+1)),delete t.children}}var i=Math.max;const l=this,s=[];let d=0,c=!1;if(a)for(let o=0;o<a;o++)s.push(Object.assign({},t[o])),-1===["json","pdf","xml"].indexOf(n)&&(s[o]._level=1);return"json"!==n&&"xml"!==n?o(a,t,1,!1):r(a,t,void 0,1),c||(l.actualHierarchy=!1),l.maxLevel=d,s}processRowStyle(t){function n(t,n,i){for(let o=0;o<a.columnsArray.length;o++){const l=a.columnsArray[o]+(t+1+r);a.storeCellStyle(l,n,i)}}const a=this,o=t.rows;if(a.rowHeight=[],!o)return;const r=a.xlsxStartIndex;o.height&&(a.defaultRowHeight=` ht="${parseFloat(o.height)/2}"`);for(let l=r;l<a.data.length;l++){const t=l-r;for(let a in o)o.hasOwnProperty(a)&&-1===a.indexOf("alt")&&isNaN(a)&&"height"!=a&&n(t,a,o[a]);if(o.alternationCount&&!(o.alternationStart&&t<o.alternationStart)&&!(o.alternationEnd&&t>o.alternationEnd)){const a=o.alternationStart||0,r=(t-a)%o.alternationCount;o[`alternationIndex${r}Color`]&&n(t,"color",o[`alternationIndex${r}Color`]),o[`alternationIndex${r}BorderColor`]&&n(t,"borderColor",o[`alternationIndex${r}BorderColor`]),o[`alternationIndex${r}BackgroundColor`]&&n(t,"backgroundColor",o[`alternationIndex${r}BackgroundColor`])}if(o[t])for(let i in o[t])if(o[t].hasOwnProperty(i)){if("height"==i){a.rowHeight[l]=` ht="${parseFloat(o[t].height)/2}"`;continue}n(t,i,o[t][i])}}}storeCellStyle(t,n,a){const i=this,o=i.styleMap[t];switch(n){case"backgroundColor":o.fills.fgColor=a;break;case"color":o.fonts.color=a;break;case"fontFamily":o.fonts.name=a;break;case"fontSize":o.fonts.sz=parseFloat(a);break;case"fontStyle":"italic"===a?o.fonts.i=!0:delete o.fonts.i;break;case"fontWeight":"bold"===a?o.fonts.b=!0:delete o.fonts.b;break;case"numFmt":{o.numFmt=a;break}case"textAlign":o.alignment.horizontal=a;break;case"textDecoration":"underline"===a?o.fonts.u=!0:delete o.fonts.u;break;case"verticalAlign":"middle"===a&&(a="center"),o.alignment.vertical=a;}}toARGB(t){t=t.replace(/\s/g,"");const n=/rgb\((\d+),(\d+),(\d+)\)/gi.exec(t);if(null!==n){const t=parseFloat(n[1]).toString(16).toUpperCase(),a=parseFloat(n[2]).toString(16).toUpperCase(),i=parseFloat(n[3]).toString(16).toUpperCase();return"FF"+"0".repeat(2-t.length)+t+"0".repeat(2-a.length)+a+"0".repeat(2-i.length)+i}const i=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(t);if(null!==i){const t=Math.round(255*parseFloat(i[4])).toString(16).toUpperCase(),n=parseFloat(i[1]).toString(16).toUpperCase(),a=parseFloat(i[2]).toString(16).toUpperCase(),o=parseFloat(i[3]).toString(16).toUpperCase();return"0".repeat(2-t.length)+t+"0".repeat(2-n.length)+n+"0".repeat(2-a.length)+a+"0".repeat(2-o.length)+o}const a=/^#(.)(.)(.)$/gi.exec(t);if(null!==a){const t=a[1].toUpperCase(),n=a[2].toUpperCase(),i=a[3].toUpperCase();return"FF"+t+t+n+n+i+i}return"FF"+t.toUpperCase().slice(1)}toggleableFunctionality(){const t=this;return t.actualHierarchy?`\n    <style type="text/css">
        .toggle-element {
            width: 5px;
            height: 1px;
            padding-right: 5px;
            float: left;
            text-align: right;
            cursor: pointer;
            user-select: none;
        }

        .collapsed {
            display: none;
        }
    </style>
    <script type="text/javascript">
        window.onload = function () {
            var expandChar = '${t.expandChar}',
                collapseChar = '${t.collapseChar}',
                toggleElements = document.getElementsByClassName('toggle-element');

            function getParent(child) {
                var prevSibling = child.previousElementSibling;

                while (prevSibling) {
                    if (child.getAttribute('level') > prevSibling.getAttribute('level')) {
                        return prevSibling;
                    }

                    prevSibling = prevSibling.previousElementSibling;
                }

            }

            function getFirstCollapsedAncestor(child) {
                var parent = getParent(child);

                while (parent) {
                    if (parent.firstElementChild.firstElementChild.innerHTML === expandChar) {
                        return parent;
                    }

                    parent = getParent(parent);
                }
            }

            for (var i = 0; i < toggleElements.length; i++) {
                toggleElements[i].addEventListener('click', function (event) {
                    var expanded = this.innerHTML === collapseChar,
                        row = this.parentElement.parentElement,
                        sibling = row.nextElementSibling;

                    if (expanded) {
                        this.innerHTML = expandChar;
                    }
                    else {
                        this.innerHTML = collapseChar;
                    }

                    while (sibling && row.getAttribute('level') < sibling.getAttribute('level')) {
                        if (expanded) {
                            sibling.style.display = 'none';
                        }
                        else {
                            var firstCollapsedAncestor = getFirstCollapsedAncestor(sibling);

                            if (!firstCollapsedAncestor || firstCollapsedAncestor === row) {
                                sibling.classList.remove('collapsed');
                                sibling.style.display = null;
                            }

                        }

                        sibling = sibling.nextElementSibling;
                    }
                });
            }
        }
    </script>`:""}generateStyles(t){const n=this;if(n.cellStyleMapping={},0===Object.keys(t).length&&!n.complexHeader)return`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision"><fonts count="1" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><charset val="204"/><scheme val="minor"/></font></fonts><fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${n.conditionalFormattingXLSX.styles||"<dxfs count=\"0\"/>"}<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`;n.styleMap={};for(let a=0;a<n.data.length;a++)for(let t=0;t<n.columnsArray.length;t++)n.styleMap[n.columnsArray[t]+(a+1)]={numFmts:{},fonts:{},fills:{},borders:{},alignment:{}};if(t&&t.columns)for(let a=0;a<n.columnsArray.length;a++){const i=n.datafields[a];if(!t.columns[i]||!t.columns[i].format)continue;const o=n.getXLSXFormat(t.columns[i].format,n.data[n.data.length-1][i]);o&&(t.columns[i].numFmt=o)}n.processRowStyle(t),n.processColumnStyle(t);const a={};for(let o=0;o<n.complexHeaderMergedCells.length;o++){const t=n.complexHeaderMergedCells[o];if(parseFloat(t.to[1])===n.complexHeader.length){a[t.to]=t.from;continue}n.styleMap[t.from].alignment.horizontal="center",n.styleMap[t.from].alignment.vertical="center"}const i={xml:"<font><sz val=\"11\" /><color theme=\"1\" /><name val=\"Calibri\" /><family val=\"2\" /><charset val=\"204\" /><scheme val=\"minor\" /></font>",collection:["default"]},o={xml:"<fill><patternFill patternType=\"none\" /></fill><fill><patternFill patternType=\"gray125\" /></fill>",collection:["default","gray125"]},r={xml:"",collection:[]},l={xml:"<xf fontId=\"0\" fillId=\"0\" />",collection:["default"]};for(let s=0;s<n.data.length;s++)for(let t=0;t<n.columnsArray.length;t++){const d=n.columnsArray[t]+(s+1),c=n.styleMap[d];let m="",p="",u="",g=[],h=[],_=[],f=[];for(let t in c.fonts)if(c.fonts.hasOwnProperty(t)){const a=c.fonts[t];"color"==t?(g[0]=a,m+=`<color rgb="${n.toARGB(a)}" />`):"name"==t?(g[1]=a,m+=`<name val="${a}" />`):"sz"==t?(g[2]=a,m+=`<sz val="${a}" />`):"i"==t?(g[3]=a,m+="<i />"):"b"==t?(g[4]=a,m+="<b />"):"u"==t?(g[5]=a,m+="<u />"):void 0}for(let t in c.fills)if(c.fills.hasOwnProperty(t)){const a=c.fills[t];"fgColor"==t?(h[0]=a,p+=`<fgColor rgb="${n.toARGB(a)}" />`):void 0}for(let t in c.alignment)if(c.alignment.hasOwnProperty(t)){const n=c.alignment[t];"horizontal"==t?(_[0]=n,u+=`horizontal="${n}" `):"vertical"==t?(_[1]=n,u+=`vertical="${n}" `):void 0}if(g=g.toString(),h=h.toString(),""!=m){let t=i.collection.indexOf(g);-1===t&&(t=i.collection.length,i.xml+="<font>"+m+"</font>",i.collection.push(g)),f[0]=t}if(""!=p){let t=o.collection.indexOf(h);-1===t&&(t=o.collection.length,o.xml+="<fill><patternFill patternType=\"solid\">"+p+"</patternFill></fill>",o.collection.push(h)),f[1]=t}0<_.length&&(f[2]=u),void 0!==c.numFmt&&(f[3]=n.getNumFmtIndex(c.numFmt,r));const y=f.toString();if(""!==y){let t=l.collection.indexOf(y);if(-1===t){let n="<xf ";t=l.collection.length,void 0!==f[0]&&(n+=`fontId="${f[0]}" `),void 0!==f[1]&&(n+=`fillId="${f[1]}" `),void 0!==f[3]&&(n+=`numFmtId="${f[3]}" `),n+=void 0===f[2]?"/>":`applyAlignment="1"><alignment ${u}/></xf>`,l.xml+=n,l.collection.push(y)}n.cellStyleMapping[a[d]||d]=t}}return r.collection.length&&(r.xml=`<numFmts count="${r.collection.length}">${r.xml}</numFmts>`),`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision">${r.xml}<fonts count="${i.collection.length}" x14ac:knownFonts="1">${i.xml}</fonts><fills count="${o.collection.length}">${o.xml}</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="${l.collection.length}">${l.xml}</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${n.conditionalFormattingXLSX.styles}<dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`}});let bigIntNativeSupport;try{BigInt,bigIntNativeSupport=!0}catch(t){bigIntNativeSupport=!1}Smart.Utilities.Assign("BigNumber",class{constructor(t,a,l){var s=Math.abs,d=this,o;if(Smart.Utilities.BigNumber.bigIntSupport){if(t instanceof Smart.Utilities.BigNumber)if(Array.isArray(t._d))t=(t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0")+(t._f==t._d.length?"":"."+t._d.slice(t._f).join(""));else return new Smart.Utilities.BigNumber(t._d);try{d._d=BigInt(t)}catch(n){d._d=BigInt(Math.round(t))}return d._f=d._d.toString().replace("-","").length,void(d._s=0>d._d)}if(t instanceof Smart.Utilities.BigNumber){if("bigint"==typeof t._d)return new Smart.Utilities.BigNumber(t._d.toString());for(o in{precision:0,roundType:0,_s:0,_f:0})d[o]=t[o];return d._d=t._d.slice(),void(t._s&&1===t._d.length&&0===t._d[0]&&(d._s=!1))}if(void 0!==t&&("-0"===t&&(t="0"),new RegExp(/e/i).test(t))){var c=t.toString().toLowerCase(),m=c.indexOf("e"),u=new Smart.Utilities.BigNumber(c.slice(0,m)),g=c.slice(m+2),h=c.slice(m+1,m+2),_=new Smart.Utilities.BigNumber(10),f=_.pow(h+g),y=u.multiply(f);t=y.toString()}for(d.precision=isNaN(a=s(a))?Smart.Utilities.BigNumber.defaultPrecision:a,d.roundType=isNaN(l=s(l))?Smart.Utilities.BigNumber.defaultRoundType:l,d._s="-"==(t+="").charAt(0),d._f=((t=t.replace(/[^\d.]/g,"").split(".",2))[0]=t[0].replace(/^0+/,"")||"0").length,o=(t=d._d=(t.join("")||"0").split("")).length;o;t[--o]=+t[o]);d.round()}static get defaultPrecision(){return 40}static get defaultRoundType(){return 4}static get bigIntSupport(){return bigIntNativeSupport&&!0!==Smart.Utilities.BigNumber.ignoreBigIntNativeSupport}add(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d+new Smart.Utilities.BigNumber(t)._d);let l=this.normalizeOperand(this);if(t=l.normalizeOperand(t),l.isZero()&&l._s&&(l._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(l);if(l._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,l.subtract(t);var s=new Smart.Utilities.BigNumber(l),o=s._d,a=t._d,d=s._f,c=t._f,m,p;for(t=Math.max(d,c),d!=c&&(0<(c=d-c)?s._zeroes(a,c,1):s._zeroes(o,-c,1)),m=(d=o.length)==(c=a.length)?o.length:(0<(c=d-c)?s._zeroes(a,c):s._zeroes(o,-c)).length,p=0;m;p=(o[--m]=o[m]+a[m]+p)/10>>>0,o[m]%=10);return p&&++t&&o.unshift(p),s._f=t,s.round()}subtract(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d-new Smart.Utilities.BigNumber(t)._d);let r=this.normalizeOperand(this);if(t=r.normalizeOperand(t),r.isZero()&&r._s&&(r._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(r);if(r._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,r.add(t);var l=new Smart.Utilities.BigNumber(r),o=l.abs().compare(t.abs())+1,s=o?l:t,c=o?t:l,m=s._f,p=c._f,u=m,d,g;for(s=s._d,c=c._d,m!=p&&(0<(p=m-p)?l._zeroes(c,p,1):l._zeroes(s,-p,1)),d=(m=s.length)==(p=c.length)?s.length:(0<(p=m-p)?l._zeroes(c,p):l._zeroes(s,-p)).length;d;){if(s[--d]<c[d]){for(g=d;g&&!s[--g];s[g]=9);--s[g],s[d]+=10}c[d]=s[d]-c[d]}return o||(l._s^=1),l._f=u,l._d=c,l.round()}multiply(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*new Smart.Utilities.BigNumber(t)._d);let l=this.normalizeOperand(this);t=l.normalizeOperand(t);var d=new Smart.Utilities.BigNumber(l),o=d._d.length>=(t=new Smart.Utilities.BigNumber(t))._d.length,c=(o?d:t)._d,a=(o?t:d)._d,m=c.length,p=a.length,u=new Smart.Utilities.BigNumber,g,h,_;for(g=p;g;o&&_.unshift(o),u.set(u.add(new Smart.Utilities.BigNumber(_.join("")))))for(_=Array(p- --g).join("0").split(""),o=0,h=m;h;o+=c[--h]*a[g],_.unshift(o%10),o=o/10>>>0);return d._s=d._s!=t._s,d._f=((o=m+p-d._f-t._f)>=(h=(d._d=u._d).length)?l._zeroes(d._d,o-h+1,1).length:h)-o,d.round()}divide(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d/new Smart.Utilities.BigNumber(t)._d);let d=this.normalizeOperand(this);if(t=d.normalizeOperand(t),"0"==(t=new Smart.Utilities.BigNumber(t)))throw new Error("Division by 0");else if("0"==d)return new Smart.Utilities.BigNumber;var m=new Smart.Utilities.BigNumber(d),o=m._d,a=t._d,p=o.length-m._f,u=a.length-t._f,g=new Smart.Utilities.BigNumber,r=0,h=1,_=0,v=0,x,C,w;for(g._s=m._s!=t._s,g.precision=Math.max(m.precision,t.precision),g._f=+g._d.pop(),p!=u&&m._zeroes(p>u?a:o,Math.abs(p-u)),t._f=a.length,a=t,a._s=!1,a=a.round(),t=new Smart.Utilities.BigNumber;"0"==o[0];o.shift());out:do{for(w=_=0,"0"==t&&(t._d=[],t._f=0);r<o.length&&-1==t.compare(a);++r){if((w=r+1==o.length,!h&&1<++_||(v=w&&"0"==t&&"0"==o[r]))&&(g._f==g._d.length&&++g._f,g._d.push(0)),"0"==o[r]&&"0"==t||(t._d.push(o[r]),++t._f),v)break out;if(w&&-1==t.compare(a)&&(g._f==g._d.length&&++g._f,1)||(w=0))for(;g._d.push(0),t._d.push(0),++t._f,-1==t.compare(a););}if(h=0,-1==t.compare(a)&&!(w=0))for(;w?g._d.push(0):w=1,t._d.push(0),++t._f,-1==t.compare(a););var S;for(C=new Smart.Utilities.BigNumber,x=0;t.compare(S=C.add(a))+1&&++x;C.set(S));t.set(t.subtract(C)),w||g._f!=g._d.length||++g._f,g._d.push(x)}while((r<o.length||"0"!=t)&&g._d.length-g._f<=g.precision);return g.round()}mod(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d%new Smart.Utilities.BigNumber(t)._d);let a=this.normalizeOperand(this);t=a.normalizeOperand(t);var i=a.subtract(a.divide(t).intPart().multiply(t));return i.isZero()&&i._s&&(i._s=!i._s),i}pow(t){if(Smart.Utilities.BigNumber.bigIntSupport){let n=BigInt(1);for(let a=BigInt(0);a<new Smart.Utilities.BigNumber(t)._d;a+=BigInt(1))n*=this._d;return new Smart.Utilities.BigNumber(n)}let a=this.normalizeOperand(this);t=a.normalizeOperand(t);var r=new Smart.Utilities.BigNumber(a),o;if(0==(t=new Smart.Utilities.BigNumber(t).intPart()))return r.set(1);for(o=Math.abs(t);--o;r.set(r.multiply(a)));return 0>t?r.set(new Smart.Utilities.BigNumber(1).divide(r)):r}set(t){return t=new Smart.Utilities.BigNumber(t),this._d=t._d,this._f=t._f,this._s=t._s,this}compare(t){if(Smart.Utilities.BigNumber.bigIntSupport){const n=new Smart.Utilities.BigNumber(t)._d;return this._d===n?0:this._d>n?1:-1}let o=this.normalizeOperand(this);t=o.normalizeOperand(t);var s=o,a=o._f,d=new Smart.Utilities.BigNumber(t),c=d._f,m=[-1,1],r,p,u;if(s.isZero()&&d.isZero())return 0;if(s._s!=d._s)return s._s?-1:1;if(a!=c)return m[a>c^s._s];for(a=(u=s._d).length,c=(d=d._d).length,r=-1,p=Math.min(a,c);++r<p;)if(u[r]!=d[r])return m[u[r]>d[r]^s._s];return a==c?0:m[a>c^s._s]}negate(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*BigInt(-1));let t=this.normalizeOperand(this);var a=new Smart.Utilities.BigNumber(t);return a._s^=1,a}abs(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(0>this._d?this._d*BigInt(-1):this._d);let t=this.normalizeOperand(this);var a=new Smart.Utilities.BigNumber(t);return a._s=0,a}intPart(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d);let t=this.normalizeOperand(this);return new Smart.Utilities.BigNumber((t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0"))}valueOf(t,n){let a=this.normalizeOperand(this);return a.toString(t,n)}toString(t,n){function a(t,n,a){var i="";if(String.prototype.repeat){var o="0".repeat(a-t.length);t=o+t}for(;t.length<a;)t="0"+t;i=t.replace(/0/g,"a"),i=i.replace(/1/g,"b"),i=i.replace(/a/g,"1"),i=i.replace(/b/g,"0");for(var r=!0,s="",d=i.length-1;0<=d;d--){var c=i.charAt(d),m;"0"===c?!0===r?(m="1",r=!1):m="0":!0===r?m="0":m="1",s=m+""+s}switch(n){case 2:return s;case 8:var p,u;8===a?(p=3,u="0"):16===a?(p=6,u="00"):32===a?(p=11,u="0"):64===a?(p=22,u="00"):void 0,s=u+s;for(var g="",h=p,_;1<=h;h--)_=s[3*h-3]+""+s[3*h-2]+""+s[3*h-1],g=parseInt(_,2).toString(8)+""+g;return g;case 16:var f;8===a?f=2:16===a?f=4:32===a?f=8:64===a?f=16:void 0;for(var y="",b=f,v;1<=b;b--)v=s[4*b-4]+""+s[4*b-3]+""+s[4*b-2]+""+s[4*b-1],y=parseInt(v,2).toString(16)+""+y;return y.toUpperCase();}}function i(t){var n=new Smart.Utilities.BigNumber(2),a=[],i,o;o=void 0===t?s:t;do i=o.mod(n),a.push(i.toString()),o=o.subtract(i).divide(n).intPart();while(1===o.compare(new Smart.Utilities.BigNumber(0)));return a.reverse().join("")}function r(t){for(var n="";0!=t.length%3;)t="0"+t;for(var a=t.length/3,i;1<=a;a--)i=t[3*a-3]+""+t[3*a-2]+""+t[3*a-1],n=parseInt(i,2).toString(8)+""+n;return n}function l(t){for(var n="";0!=t.length%4;)t="0"+t;for(var a=t.length/4,i;1<=a;a--)i=t[4*a-4]+""+t[4*a-3]+""+t[4*a-2]+""+t[4*a-1],n=parseInt(i,2).toString(16)+""+n;return n}let s,d;if(Smart.Utilities.BigNumber.bigIntSupport?(s=this,d=Array.isArray(s._d)?(s._s?"-":"")+(s._d.slice(0,s._f).join("")||"0")+(s._f==s._d.length?"":"."+s._d.slice(s._f).join("")):this._d.toString()):(s=this.normalizeOperand(this),d=(s._s?"-":"")+(s._d.slice(0,s._f).join("")||"0")+(s._f==s._d.length?"":"."+s._d.slice(s._f).join(""))),void 0===t||10===t)return d;let c;if(-1<s.compare(0))2===t?c=i():8===t?c=r(i()):16===t?c=l(i()).toUpperCase():void 0;else{var m=s.negate(),p=i(m);c=a(p,t,n)}return c}_zeroes(a,n,i){var t=["push","unshift"][i||0];for(++n;--n;a[t](0));return a}round(){if("_rounding"in this)return this;var t=Smart.Utilities.BigNumber,a=this.roundType,i=this._d,o,r,l,s;for(this._rounding=!0;1<this._f&&!i[0];--this._f,i.shift());for(o=this._f,r=this.precision+o,l=i[r];i.length>o&&!i[i.length-1];i.pop());return s=(this._s?"-":"")+(r-o?"0."+this._zeroes([],r-o-1).join(""):"")+1,i.length>r&&(l&&a!=t.DOWN&&(a==t.UP||(a==t.CEIL?!this._s:a==t.FLOOR?this._s:a==t.HALF_UP?5<=l:a==t.HALF_DOWN?5<l:a==t.HALF_EVEN&&5<=l&&1&i[r-1]))&&this.add(s),i.splice(r,i.length-r)),(delete this._rounding,this)}isZero(){return 1===this._d.length&&0===this._d[0]}normalizeOperand(t){return t instanceof Smart.Utilities.BigNumber&&"bigint"==typeof t._d?new Smart.Utilities.BigNumber(t._d.toString()):t}}),Smart.Utilities.Assign("NumericProcessor",class{constructor(t,n){switch(t[n]){case"integer":return new Smart.Utilities.IntegerNumericProcessor(t,n);case"floatingPoint":return new Smart.Utilities.DecimalNumericProcessor(t,n);case"complex":return new Smart.Utilities.ComplexNumericProcessor(t,n);}}}),Smart.Utilities.Assign("BaseNumericProcessor",class{constructor(t,n){const a=this;a.context=t,a._longestLabelSize=0,a.numericFormatProperty=n,a.regexScientificNotation=new RegExp(/^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)(Y|Z|E|P|T|G|M|k|c|m|u|n|p|f|a|z|y){1}$/),a.regexNoLeadingZero=new RegExp(/^(-)?[.]\d+$/),a.regexLeadingZero=new RegExp(/^[+\-]?(0+)[1-9]+|^[+\-]?(0{2,})[.]|^(0{2,})$/),a.prefixesToPowers={Y:24,Z:21,E:18,P:15,T:12,G:9,M:6,k:3,c:-2,m:-3,u:-6,n:-9,p:-12,f:-15,a:-18,z:-21,y:-24},a.complexConstructor=window.NIComplex?window.NIComplex:Smart.Utilities.Complex}prepareForValidation(t,n,a){const i=this.context,o=t||void 0!==n;if(a=a.toString(),a=a.replace(/\s/g,""),a=i._discardDecimalSeparator(a),this.regexLeadingZero.test(a)){const t=this.regexLeadingZero.exec(a);a=t[1]?a.replace(t[1],""):t[2]?a.replace(t[2],"0"):a.replace(t[3],"0")}this.regexNoLeadingZero.test(a)?"-"===a.charAt(0)?a="-0"+a.slice(1):a="0"+a:("integer"===i[this.numericFormatProperty]&&(10===i._radixNumber||o)||"floatingPoint"===i[this.numericFormatProperty])&&this.regexScientificNotation.test(a)&&(a=this.scientificToDecimal(a));let r=!1,l;if("complex"===i[this.numericFormatProperty]&&!1===i._regexSpecial.nonNumericValue.test(a))try{if(i._regexSpecial.exaValue.test(a)){const t=a.indexOf("E"),n=1000000000000000000*parseFloat(a.slice(0,t)),i=parseFloat(a.slice(t+1,-1));l=new this.complexConstructor(n,i)}else l=new this.complexConstructor(a);r=!0}catch(t){r=!1}return!1==r&&(!o&&!1===i._regex[i._radixNumber].test(a)||o&&!1===i._regex[10].test(a))?void i._handleNonNumericValue(t,n,a):{value:a,enteredComplexNumber:l}}isENotation(t){const n=new RegExp(/e/i);return n.test(t.toString())}scientificToDecimal(t){const n=this.regexScientificNotation.exec(t),a=n[1],i=n[2],o=parseFloat(a)*Math.pow(10,this.prefixesToPowers[i]);return o}_createMeasureLabel(){const t=this.context,n=document.createElement("div");return n.className="smart-label",n.style.position="absolute",n.style.visibility="hidden",t._measureLabelScale="far"===t.scalePosition?t.$.scaleFar:t.$.scaleNear,t._measureLabelScale.appendChild(n),n}_addMajorTickAndLabel(t,n,a,i,o){const r=this.context,l=r._settings.leftOrTop,s=this.valueToPx(i);let d="",c="";if(parseInt(s)>parseInt(r._measurements.trackLength))return{tick:d,label:c};if(r.logarithmicScale&&(t=r._formatLabel(Math.pow(10,i))),"smart-tank"===r.nodeName.toLowerCase()||r._intervalHasChanged){let n=r._tickIntervalHandler.labelsSize;if(o){r._labelDummy.innerHTML=t;let o=this.valueToPx(i),l=this.valueToPx(r._drawMax),s=this.valueToPx(r._drawMin),d=r._labelDummy[r._settings.size],c="vertical"===r.orientation?r._labelDummy.offsetWidth:r._labelDummy.offsetHeight,m=(d+n.minLabelSize)/2,p=(d+n.maxLabelSize)/2;a=r._normalLayout?o+p<l&&o-m>s:o-p>l&&o+m<s,c>this._longestLabelSize&&(this._longestLabelSize=c)}else this._longestLabelSize=Math.max(n.minLabelOtherSize,n.maxLabelOtherSize,this._longestLabelSize)}if(r._tickValues.push(i),d="<div style=\""+l+": "+s+"px;\" class=\"smart-tick\"></div>",!1!==a){void 0===n&&(r._labelDummy.innerHTML=t,n=r._labelDummy[r._settings.size]);const a=s-n/2;c+="<div class=\"smart-label"+(o?" smart-label-middle":"")+"\" style=\""+l+": "+a+"px;\">"+t+"</div>"}return{tick:d,label:c}}getWordLength(t){return this.context._unsigned="u"===t.charAt(0),"int8"===t||"uint8"===t?8:"int16"===t||"uint16"===t?16:"int32"===t||"uint32"===t?32:"int64"===t||"uint64"===t?64:void 0}getAngleByValue(t,n,a){var i=Math.PI;const o=this.context;!1!==n&&o.logarithmicScale&&(t=Math.log10(t));const r=(t-o._drawMin)*o._angleRangeCoefficient;let l;return l=o.inverted?o.startAngle+r:o.endAngle-r,a?l:l*i/180+i/2}getValueByAngle(t,n){var a=Math.pow;const i=this.context;let o,r,l;for(i.inverted?(o=t,r=i._normalizedStartAngle):(o=i.endAngle,r=t);o<r;)o+=360;if(l=(o-r)/i._angleDifference*i._range+parseFloat(i._drawMin),i.logarithmicScale){if(i.customInterval)return parseFloat(a(10,this.getCoercedValue(l,!0)).toFixed(12));l=a(10,l)}return n&&!i.coerce?Math.round(l):(l=this.createDescriptor(l,void 0,!0,!0),this.getCoercedValue(l,!1))}updateGaugeValue(t){const n=this.context,a=n.value;n.value=t,n._drawValue=n.logarithmicScale?Math.log10(t).toString():t,n._number=this.createDescriptor(n.value),n.$.digitalDisplay.value=t,n.$.fireEvent("change",{value:t,oldValue:a}),delete n._valueBeforeCoercion}validateColorRange(t){const n=this.context;return Math.min(Math.max(t,n.min),n.max)}getActualValue(t){return this.context.logarithmicScale?Math.pow(10,t):t}drawGaugeLogarithmicScaleMinorTicks(t,n,a){var o=Math.pow;const r=this.context;let l;for(let o in n instanceof Smart.Utilities.BigNumber&&(n=parseFloat(n.toString())),t)if(l=o,0<=o&&0==o%1)break;for(let s=parseFloat(l);s<r._drawMax;s+=n)for(let t=2;9>=t;t++){const i=t*o(10,s+n-1);i<r.max&&a(i)}for(let s=parseFloat(l);s>r._drawMin;s-=n)for(let t=2;9>=t;t++){const n=t*o(10,s-1);n>r.min&&a(n)}}_getAngleDifference(t,n){const a=Math.abs(n-t)%360,i=180<a?360-a:a;return i}addCustomTicks(){function t(t){const i=a.customTicks[t],s=o?n.createDescriptor(i):Math.log10(i),d=0<t&&t<a.customTicks.length-1,c=n._addMajorTickAndLabel(a._formatLabel(i),void 0,!0,s,d);r+=c.tick,l+=c.label}const n=this,a=n.context,o=!a.logarithmicScale;let r="",l="";if(n._longestLabelSize=0,a._tickValues=[],a._labelDummy=n._createMeasureLabel(),!a._normalLayout)for(let n=a.customTicks.length-1;0<=n;n--)t(n);else for(let n=0;n<a.customTicks.length;n++)t(n);"smart-tank"===a.nodeName.toLowerCase()&&a._updateScaleWidth(n._longestLabelSize),a._appendTicksAndLabelsToScales(r,l)}addGaugeCustomTicks(){function t(t){const i=a.customTicks[t],o=n.createDescriptor(i),s=n.getAngleByValue(o,!0),d=0<t&&t<a.customTicks.length-1;r(s),l(s,i,d)}const n=this,a=n.context,i=a._distance,o=a._measurements.radius-i.majorTickDistance;let r,l;r="none"!==a.ticksVisibility&&!1!==a._plotTicks?function(t){a._drawTick(t,o,"major")}:function(){},l="none"!==a.labelsVisibility&&!1!==a._plotLabels?function(t,n,o){a._drawLabel(t,n,i.labelDistance,o)}:function(){};for(let n=a.customTicks.length-1;0<=n;n--)t(n)}}),Smart.Utilities.Assign("IntegerNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(t,n){super(t,n);const a=this;a.context=t,a.defaultMins={int8:"-128",uint8:"0",int16:"-32768",uint16:"0",int32:"-2147483648",uint32:"0",int64:"-9223372036854775808",uint64:"0"},a.defaultMaxs={int8:"127",uint8:"255",int16:"32767",uint16:"65535",int32:"2147483647",uint32:"4294967295",int64:"9223372036854775807",uint64:"18446744073709551615"}}createDescriptor(t,n,a,i,o){const r=this.context;let l;if(t.constructor!==Smart.Utilities.BigNumber){let a=!o&&r._radixNumber?r._radixNumber:10;10===a&&n&&t.constructor!==Smart.Utilities.BigNumber&&this.isENotation(t)&&(t=new Smart.Utilities.NumberRenderer(t).largeExponentialToDecimal()),l=r._toBigNumberDecimal?r._toBigNumberDecimal(t.toString(a,r._wordLengthNumber),a):new Smart.Utilities.BigNumber(t)}else l=new Smart.Utilities.BigNumber(t);return a&&(r._unsigned&&-1===l.compare(0)&&(l=l.set(0)),i&&(l=this.validate(l,r._minObject,r._maxObject)),l=this.round(l)),l}round(t){const n=this.context;if(t instanceof window.Smart.Utilities.BigNumber&&"bigint"==typeof t._d)return t;if(!1==t instanceof window.Smart.Utilities.BigNumber||!n._wordLengthNumber||64>n._wordLengthNumber)return new Smart.Utilities.BigNumber(Math.round(t.toString()));const a=t.mod(1);return 1===a._d.length&&0===a._d[0]||(t=t.intPart(),t._s?(5<a._d[1]||5===a._d[1]&&a._d[2])&&(t=t.add(-1)):4<a._d[1]&&(t=t.add(1))),t}validate(t,n,a){let i;return i=-1===t.compare(n)?n:1===t.compare(a)?a:t,i}validateMinMax(t,n){const a=this.context;let i=this.defaultMins[a.wordLength],o=new Smart.Utilities.BigNumber(i),r=this.defaultMaxs[a.wordLength],l=new Smart.Utilities.BigNumber(r),s="date"!==a.mode;if(void 0===a._numberRenderer&&(a._numberRenderer=new Smart.Utilities.NumberRenderer),t&&s){null!==a.min&&(a.min=a.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(a.min)&&(a.min=this.scientificToDecimal(a.min)));let t=this.round(new Smart.Utilities.BigNumber(a.min));null===a.min||a._minIsNull&&a._initialized||!(0<=t.compare(o))?(a._minIsNull=!0,a.min=i,a._minObject=o):a._minObject=t}if(n&&s){null!==a.max&&(a.max=a.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(a.max)&&(a.max=this.scientificToDecimal(a.max)));let t=this.round(new Smart.Utilities.BigNumber(a.max));null===a.max||a._maxIsNull&&a._initialized||!(0>=t.compare(l))?(a._maxIsNull=!0,a.max=r,a._maxObject=l):a._maxObject=t}s||(a._minObject=new Smart.Utilities.BigNumber(a.min),a._maxObject=new Smart.Utilities.BigNumber(a.max)),this.compare(a._minObject,a._maxObject)||(a._minObject=o,a._maxObject=l,a._drawMin=a.logarithmicScale?0:i,a._drawMax=a.logarithmicScale?10:r,a.min=i,a.max=r),s||(a._minDate=Smart.Utilities.DateTime.fromFullTimeStamp(a.min),a._maxDate=Smart.Utilities.DateTime.fromFullTimeStamp(a.max))}valueToPx(t){const n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const a=this.context,i=new Smart.Utilities.BigNumber(a._measurements.trackLength).divide(new Smart.Utilities.BigNumber(a._range));let o;if(a._normalLayout){const n=a._drawMin instanceof Smart.Utilities.BigNumber?a._drawMin:new Smart.Utilities.BigNumber(a._drawMin);t=new Smart.Utilities.BigNumber(t),o=parseFloat(i.multiply(t.subtract(n)).toString())}else{const n=a._drawMax instanceof Smart.Utilities.BigNumber?a._drawMax:new Smart.Utilities.BigNumber(a._drawMax);o=parseFloat(this.round(n.subtract(t).multiply(i)).toString())}return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,o}pxToValue(t){const n=this.context,a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let i;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,i=n._normalLayout?n._valuePerPx.multiply(t-n._trackStart):n._valuePerPx.multiply(n._trackEnd-t),i=this.round(i).toString(),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,n.logarithmicScale){let t=parseFloat(i)+parseFloat(n._drawMin);return new Smart.Utilities.BigNumber(Math.round(Math.pow(10,t)))}let o=this.createDescriptor(n._minObject.add(i),!1,!0,!0);return o}compare(t,n,a){if((null===t||null===n)&&t!==n)return!0;t.constructor!==Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t));const i=t.compare(n);return!0===a?i:0!==i}incrementDecrement(t,n,a){const i=this.context;let o;if(t.constructor!==Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t)),"add"===n){if(o=t.add(a),void 0!==i._drawMax)return 0<o.compare(i._drawMax)?new Smart.Utilities.BigNumber(i._drawMax):o;}else if(o=t.subtract(a),void 0!==i._drawMin)return 0>o.compare(i._drawMin)?new Smart.Utilities.BigNumber(i._drawMin):o;return o}render(t,n){const a=this.context;if(!a.scientificNotation&&!0===n)return new Smart.Utilities.NumberRenderer(new Smart.Utilities.BigNumber(t)).bigNumberToExponent(a.significantDigits);let i=t;return a.scientificNotation&&!0===n?i=new Smart.Utilities.NumberRenderer(i).toScientific(a.significantDigits,a.precisionDigits):"string"!=typeof t&&(i=t.toString(a._radixNumber,a._wordLengthNumber)),i}addTicksAndLabels(){const t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const n=this.context,a=n._measurements.trackLength,i=n._normalLayout,o=n._majorTicksInterval,r=this.round(new Smart.Utilities.BigNumber(n._range).divide(o)),l=a/r,s=new Smart.Utilities.BigNumber(n._drawMin),d=new Smart.Utilities.BigNumber(n._drawMax);let c="",m="",p,u,g,h,_,f,y,b,v;n._tickValues=[],this._longestLabelSize=0,i?(p=s,u=o.add(p.subtract(p.mod(o))),g=u.subtract(p),_=n._formatLabel(s),f=n._tickIntervalHandler.labelsSize.minLabelSize,h=d,y=n._formatLabel(d),b=n._tickIntervalHandler.labelsSize.maxLabelSize):(p=d,u=p.subtract(p.mod(o)),g=p.subtract(u),_=n._formatLabel(d),f=n._tickIntervalHandler.labelsSize.maxLabelSize,h=s,y=n._formatLabel(s),b=n._tickIntervalHandler.labelsSize.minLabelSize),n._labelDummy=this._createMeasureLabel(),v=this._addMajorTickAndLabel(_,f,!0,p),c+=v.tick,m+=v.label;const x=g.divide(o).multiply(l);if(0!==u.compare(n.max)&&0>x.compare(a)){const t=n._formatLabel(u.toString()),a=0<x.compare(f);v=this._addMajorTickAndLabel(t,void 0,a,u,!0),c+=v.tick,m+=v.label}v=this.addMiddleMajorTicks(r,l,x,g,i,o),c+=v.tick,m+=v.label,v=this._addMajorTickAndLabel(y,b,!0,h),c+=v.tick,m+=v.label,"date"!==n.mode&&(c+=this.addMinorTicks(i)),n._measureLabelScale.removeChild(n._labelDummy),delete n._labelDummy,delete n._measureLabelScale,"smart-tank"===n.nodeName.toLowerCase()&&n._updateScaleWidth(this._longestLabelSize),n._appendTicksAndLabelsToScales(c,m),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t}addMiddleMajorTicks(t,n,a,o,r,l){const s=this.context;let i="",d="",c;for(let m=1;m<t;m++){let p=a.add(m*n),u;if(r?u=l.multiply(m).add(o.add(new Smart.Utilities.BigNumber(s._drawMin))):(u=new Smart.Utilities.BigNumber(s._drawMax).subtract(o).subtract(l.multiply(m)),m==t-1&&0===u.compare(0)&&(s._numberRenderer.numericValue=s._tickIntervalHandler.nearestPowerOfTen,c=s._numberRenderer.bigNumberToExponent(1))),0!==u.compare(s._drawMax)){let a=s._formatLabel(u.toString()),o=!0;s._labelDummy.innerHTML=c?c:a;let r=s._labelDummy[s._settings.size];0<=p.add(r).compare(t*n)&&(o=!1);const l=this._addMajorTickAndLabel(a,void 0,o,u,!0);i+=l.tick,d+=l.label}}return{tick:i,label:d}}addMinorTicks(t){function n(t){-1===r.indexOf(t)&&0==t%s&&(c+="<div style=\""+d+": "+o._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function a(){let t=o._measurements.trackLength,n=t/r.length,a=.1;20>n?a=1:20<=n&&40>n?a=1<p-m?1:.5:40<=n&&80>n&&(a=.2);let l=Math.floor(o._drawMax),s=o._drawMax-l,u=o._drawMax-o._drawMin>r.length;for(let t=o._drawMax;0<t;--t){let n=0<s?i(10,t-s+1):i(10,t),r=n*a;for(let t=n;0<t;t-=r)if(t<o.max&&t>o.min){let n=new Smart.Utilities.BigNumber(Math.log10(t));(0==n%1&&u||!u)&&(c+="<div style=\""+d+": "+o._numericProcessor.valueToPx(n)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var i=Math.pow;const o=this.context,r=o._tickValues,l=o._tickIntervalHandler.nearestPowerOfTen,s=o._minorTicksInterval,d=o._settings.leftOrTop;let c="",m,p,u;if(t?(m=r[0],p=r[1],u=r[r.length-1]):(m=r[r.length-1],p=r[r.length-2],u=r[0]),o.logarithmicScale)a();else{for(let t=p;0>m.compare(t);t=t.subtract(l))n(t);for(let t=p.add(l);0<u.compare(t);t=t.add(l))n(t)}return c}validateCustomTicks(){const t=this.context,n="date"!==t.mode;let a=[];for(let o=0,i;o<t.customTicks.length;o++)i=t.customTicks[o],n?i=this.createDescriptor(i,!1,!0):void 0===i._d&&(i=Smart.Utilities.DateTime.validateDate(i).getTimeStamp()),0<=i.compare(t._minObject)&&0>=i.compare(t._maxObject)&&a.push(i);if(a.sort(function(t,n){return t.compare(n)}),n){for(let t=0;t<a.length;t++)a[t]=a[t].toString();a=a.filter(function(t,n,a){return!n||t!==a[n-1]})}t.customTicks=a.slice(0)}addGaugeTicksAndLabels(){var t=Math.PI;const n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const a=this.context,o=this,r=Math.max(a._tickIntervalHandler.labelsSize.minLabelSize,a._tickIntervalHandler.labelsSize.maxLabelSize),l=a._majorTicksInterval,s=a._minorTicksInterval,d={},c=a._distance,m=a._measurements.radius,p=m-c.majorTickDistance,u=m-c.minorTickDistance,g=new Smart.Utilities.BigNumber(a._drawMin),h=new Smart.Utilities.BigNumber(a._drawMax);let _,f,y,b,v,x;"none"!==a.ticksVisibility&&!1!==a._plotTicks?(_=function(t){a._drawTick(t,p,"major")},f=function(t){a._drawTick(o.getAngleByValue(t,!0),u,"minor")}):(_=function(){},f=function(){}),y="none"!==a.labelsVisibility&&!1!==a._plotLabels?function(t,n,i){a._drawLabel(t,n,c.labelDistance,i)}:function(){},a.inverted?(v=a.startAngle,x=a.endAngle):(v=a.endAngle,x=a.startAngle),b=o.getAngleByValue(g,!1),_(b),d[a._drawMin.toString()]=!0,y(b,a.min,!1);let C=g.subtract(g.mod(l)),w;-1!==g.compare(0)&&(C=C.add(l));for(let t=new Smart.Utilities.BigNumber(C);-1!==t.compare(g);t=t.subtract(s))w=t;b=o.getAngleByValue(C,!1),_(b),d[C.toString()]=!0,2*t*a._measurements.innerRadius*(this._getAngleDifference(v,o.getAngleByValue(C,!1,!0))/360)>r&&y(b,this.getActualValue(C),-1===C.compare(h));let S;for(S=C.add(l);-1===S.compare(h.subtract(l));S=S.add(l))b=o.getAngleByValue(S,!1),_(b),d[S.toString()]=!0,y(b,this.getActualValue(S),!0);if(void 0===d[S.toString()]&&1!==S.compare(h)&&(b=o.getAngleByValue(S,!1),_(b),d[S.toString()]=!0,2*t*a._measurements.innerRadius*(this._getAngleDifference(x,o.getAngleByValue(S,!1,!0))/360)>=r&&y(b,this.getActualValue(S),!0),a._normalizedStartAngle!==a.endAngle&&(b=o.getAngleByValue(h,!1),_(b),2*t*a._measurements.innerRadius*(this._getAngleDifference(x,v)/360)>=r&&y(b,a.max,!1))),"date"===a.mode)return void(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n);if(!a.logarithmicScale)for(let t=w;-1===t.compare(h);t=t.add(s))d[t.toString()]||f(t);else this.drawGaugeLogarithmicScaleMinorTicks(d,l,f);Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n}updateToolTipAndValue(t,n,a){const i=this.context,o=i.logarithmicScale;i._updateTooltipValue(t.toString()),o&&(t=parseFloat(Math.pow(10,parseFloat(t)).toFixed(11))),t=t instanceof Smart.Utilities.BigNumber?t:new Smart.Utilities.BigNumber(t);const r=t.toString();i._number=t,i._drawValue=o?Math.log10(r):t,0!==t.compare(n)&&a&&("numeric"===i.mode?(i.value=r,t=r):(n=i._valueDate,i._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(r),i.value=t,t=i._valueDate),!i._programmaticValueIsSet&&i.$.fireEvent("change",{value:t,oldValue:n}),i.$.hiddenInput&&(i.$.hiddenInput.value=t))}validateInterval(t){const n=this.context,a=n._maxObject.subtract(n._minObject);n._validInterval=new Smart.Utilities.BigNumber(t),n._validInterval=this.round(n._validInterval),1===n._validInterval.compare(a)&&(n._validInterval=a),n.interval=n._validInterval.toString()}getCoercedValue(t,n,a){var o=Math.abs;const i=this.context;if(!i.coerce)return t;const r=!i.logarithmicScale;t=t instanceof Smart.Utilities.BigNumber?t:new Smart.Utilities.BigNumber(t);let l,s;if(i.customInterval){const n=i.customTicks;if(0===n.length)return t;let s,d;if(r||a){l=i._minObject,s=l.subtract(t).abs(),d=l;for(let a=0;a<n.length;a++){const i=this.createDescriptor(n[a]),o=i.subtract(t).abs();-1===o.compare(s)&&(s=o,d=i)}}else{l=i._drawMin,s=o(l-parseFloat(t.toString())),d=l;for(let a=0;a<n.length;a++){const i=Math.log10(n[a]),r=o(i-t);r<s&&(s=r,d=i)}d=new Smart.Utilities.BigNumber(d)}return d}let d=i._validInterval;if("date"===i.mode){if("addYears"===i._dateIncrementMethod)return this.coerceYear(t);if("addMonths"===i._dateIncrementMethod)return this.coerceMonth(t);d=new Smart.Utilities.BigNumber(i._dateIntervalNumber).multiply(d)}!1===n?(l=new Smart.Utilities.BigNumber(i.min),s=new Smart.Utilities.BigNumber(i.max)):(l=new Smart.Utilities.BigNumber(i._drawMin),s=new Smart.Utilities.BigNumber(i._drawMax));let c=t.subtract(l),m=c.mod(d);if(0===m.compare(0))return t;let p=c.subtract(m),u=p.add(d);if(0>c.subtract(p).abs().compare(c.subtract(u).abs()))return p.add(l);else{const t=u.add(l);return 0>=t.compare(s)?t:p.add(l)}}coerceMonth(t){const n=this.context,a=parseFloat(n._validInterval),i=Smart.Utilities.DateTime.fromFullTimeStamp(t),o=i.year(),r=i.month(),l=i.day(),s=n._minDate.year(),d=n._minDate.month(),c=12*(n._maxDate.year()-s-1)+12-d+n._maxDate.month();let m=12*(o-1-s)+(12-d)+r;1===a&&(-1===[1,3,5,7,8,10,12].indexOf(r)?2===r?i.isLeapYear(o)?(15<l||15===l&&11<i.hour())&&m++:14<l&&m++:15<l&&m++:(16<l||16===l&&11<i.hour())&&m++),m=this.getCoercedTimePart(0,c,m,a);let p=n._minDate.addMonths(m,!0);return 1===p.compare(n._maxDate)&&(p=n._minDate.addMonths(m-a,!0)),n._drawValue=new Smart.Utilities.BigNumber(p.getTimeStamp()),n._drawValue}coerceYear(t){const n=this.context,a=parseFloat(n._validInterval),i=Smart.Utilities.DateTime.fromFullTimeStamp(t),o=n._maxDate.year(),r=Smart.Utilities.DateTime.getConstructorParameters(n._minDate);let l=i.year();6<i.month()&&l++;let s=this.getCoercedTimePart(n._minDate.year(),o,l,a);s>o&&(s-=a),r[0]=s,r.unshift(null);const d=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,r));return n._drawValue=new Smart.Utilities.BigNumber(d.getTimeStamp()),n._drawValue}getCoercedTimePart(t,n,a,i){var o=Math.abs;let r=a-t,l=r%i;if(0==l)return a;let s=parseFloat((r-l).toFixed(12)),d=s+i;if(n-t<=i)return a>=t+(n-t)/2?n:t;if(o(r-s)<o(r-d))return s+t;else{const a=d+t;return a>n?s+t:a}}updateValue(t){const n=this.context;t=t instanceof Smart.Utilities.BigNumber?t:new Smart.Utilities.BigNumber(t);const a=this.validate(t,n._minObject,n._maxObject);let i=n._number;n._number=a,n._drawValue=n.logarithmicScale?Math.log10(a):a,"numeric"===n.mode?n.value=t.toString():(i=n._valueDate,n._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(t),n.value=t,t=n._valueDate),!n._programmaticValueIsSet&&(this.compare(t,n._number)||n._scaleTypeChangedFlag)&&n.$.fireEvent("change",{value:t,oldValue:i}),n.$.hiddenInput&&(n.$.hiddenInput.value=t),n._moveThumbBasedOnValue(n._drawValue)}getValuePerPx(t,n){const a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const i=new Smart.Utilities.BigNumber(t).divide(n);return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,i}restrictValue(t){t[1].constructor===Smart.Utilities.BigNumber?-1===t[1].compare(t[0])&&t[1].set(t[0]):t[1]<t[0]&&(t[1]=t[0])}getAngleByValue(t,n,a){var i=Math.PI;const o=this.context,r=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,64>o._wordLengthNumber)return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=r,super.getAngleByValue(parseFloat(t.toString()),n,a);!1==t instanceof Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t)),!1!==n&&o.logarithmicScale&&(t=new Smart.Utilities.BigNumber(Math.log10(t.toString())));const l=t.subtract(o._drawMin).multiply(o._angleRangeCoefficient);let s;return s=o.inverted?l.add(o.startAngle):l.multiply(-1).add(o.endAngle),s=parseFloat(s.toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=r,a?s:s*i/180+i/2}getValueByAngle(t){const n=this.context;if(64>n._wordLengthNumber)return super.getValueByAngle(t,!0);const a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let i,o,r;for(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,n.inverted?(i=t,o=n._normalizedStartAngle):(i=n.endAngle,o=t);i<o;)i+=360;r=new Smart.Utilities.BigNumber((i-o)/n._angleDifference).multiply(n._range).add(n._drawMin),n.logarithmicScale&&(r=new Smart.Utilities.BigNumber(Math.pow(10,r.toString())));let l;return l=n.coerce?this.getCoercedValue(r,!1):this.round(r),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,new Smart.Utilities.BigNumber(l)}updateGaugeValue(t){!1==t instanceof Smart.Utilities.BigNumber&&super.updateGaugeValue(t);const n=this.context,a=n._getEventValue();"numeric"===n.mode?(n.value=t.toString(),n.$.digitalDisplay.value=n.value):(n._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(t),n.value=t,n.$.digitalDisplay.$.input.value=n._valueDate),n._drawValue=n.logarithmicScale?Math.log10(n.value).toString():n.value,n._number=t,n.$.fireEvent("change",{value:n._getEventValue(),oldValue:a})}validateColorRange(t){const n=this.context;if(64>n._wordLengthNumber)return super.validateColorRange(t);"numeric"===n.mode?t=new Smart.Utilities.BigNumber(t):(t=Smart.Utilities.DateTime.validateDate(t),t=t.getTimeStamp());const a=new Smart.Utilities.BigNumber(n.min),i=new Smart.Utilities.BigNumber(n.max);return-1===t.compare(a)&&(t=a),1===t.compare(i)&&(t=i),t}lockRotation(t,n){const a=this.context;if(!1==n instanceof Smart.Utilities.BigNumber&&(n=new Smart.Utilities.BigNumber(n)),t&&-1===n.compare(a._number)){if(a._lockCW=!0,-1===n.compare(a._maxObject))return new Smart.Utilities.BigNumber(a._maxObject);}else if(!t&&1===n.compare(a._number)&&(a._lockCCW=!0,1===n.compare(a._minObject)))return new Smart.Utilities.BigNumber(a._minObject)}getAngleRangeCoefficient(){const t=this.context,n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,t._angleRangeCoefficient=new Smart.Utilities.BigNumber(t._angleDifference).divide(t._range),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n}}),Smart.Utilities.Assign("DecimalNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(t,n){super(t,n),this.context=t}getPreciseModulo(t,n,a){var i=Math.round,o=Math.abs;const r=0<=t?1:-1;if(t=o(t),n=o(n),"undefined"==typeof a){const a=t.toExponential(),i=n.toExponential(),l=parseInt(a.slice(a.indexOf("e")+1),10),s=parseInt(i.slice(i.indexOf("e")+1),10),d=0>l?o(l):0,c=0>s?o(s):0,m=Math.max(d,c);if(this.roundCoefficient=m,t<n)return r*t;if(t===n)return 0;if((-1>t||1<t)&&(-1>n||1<n||1===n))if(0==t%1&&0==n%1)return r*(t%n);else{const a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const i=r*parseFloat(new Smart.Utilities.BigNumber(t).mod(n).toString());return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,i}const p=Math.pow(10,m);return r*(t*p%(n*p)/p)}return r*(i(t*a)%i(n*a))}createDescriptor(t,n,a,i){let o=parseFloat(t);return i&&(o=this.validate(o,this.context._minObject,this.context._maxObject)),o}round(t){return Math.round(t)}validate(t,n,a){let i;return i=t<n?n:t>a?a:t,i}validateMinMax(t,n){const a=this.context,i="undefined"!=typeof a._regexSpecial&&a._regexSpecial.inf.test(a.min),o="undefined"!=typeof a._regexSpecial&&a._regexSpecial.inf.test(a.max);t&&(null===a.min||i?(a.min=-Infinity,a._minObject=-Infinity):(a.min=a.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(a.min)&&(a.min=this.scientificToDecimal(a.min)),a._minObject=a._discardDecimalSeparator(a.min))),n&&(null===a.max||o?(a.max=1/0,a._maxObject=1/0):(a.max=a.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(a.max)&&(a.max=this.scientificToDecimal(a.max)),a._maxObject=a._discardDecimalSeparator(a.max))),this.compare(a._minObject,a._maxObject)||(a._maxObject=parseFloat(a._maxObject)+1,a.max=a._maxObject)}valueToPx(t){const n=this.context,a=n._measurements.trackLength/n._range;let i;return i=n._normalLayout?a*(t-n._drawMin):a*(n._drawMax-t),Math.round(i)}pxToValue(t){const n=this.context;let a;if(a=n._normalLayout?(t-n._trackStart)*n._valuePerPx:(n._trackEnd-t)*n._valuePerPx,n.logarithmicScale){const t=a+parseFloat(n._drawMin);return Math.pow(10,t)}return this.validate(a+n._minObject,n._minObject,n._maxObject)}compare(t,n,a){return!0===a?(t=parseFloat(t),n=parseFloat(n),t<n?-1:t>n?1:0):t!==n}incrementDecrement(t,n,a){const i=this.context;let o;if("add"===n){if(o=parseFloat(t)+parseFloat(a),void 0!==i._drawMax)return o>parseFloat(i._drawMax)?i._drawMax:o;}else if(o=parseFloat(t)-parseFloat(a),void 0!==i._drawMin)return o<parseFloat(i._drawMin)?i._drawMin:o;return o}render(t){const n=this.context,a="undefined"!=typeof n._regexSpecial&&n._regexSpecial.nonNumericValue.test(t);if(a)return t;else{const a=new Smart.Utilities.NumberRenderer(t);return n.scientificNotation?a.toScientific(n.significantDigits,n.precisionDigits):a.toDigits(n.significantDigits,n.precisionDigits)}}addTicksAndLabels(){const t=this.context,n=t._measurements.trackLength,a=t._normalLayout,i=t._majorTicksInterval,o=Math.round(t._range/parseFloat(i.toString())),r=n/o,l=parseFloat(t._drawMin),s=parseFloat(t._drawMax);let d="",c="",m,p,u,g,h,_,f,y,b;t._tickValues=[],this._longestLabelSize=0,a?(m=l,p=t.logarithmicScale&&0>l&&-1!==l?parseFloat(m-this.getPreciseModulo(m,i)):parseFloat(m-this.getPreciseModulo(m,i)+parseFloat(i)),u=p-m,h=t._formatLabel(l),_=t._tickIntervalHandler.labelsSize.minLabelSize,g=s,f=t._formatLabel(s),y=t._tickIntervalHandler.labelsSize.maxLabelSize):(m=s,p=parseFloat(m-this.getPreciseModulo(m,i)),u=m-p,h=t._formatLabel(s),_=t._tickIntervalHandler.labelsSize.maxLabelSize,g=l,f=t._formatLabel(l),y=t._tickIntervalHandler.labelsSize.minLabelSize),t._labelDummy=this._createMeasureLabel(),b=this._addMajorTickAndLabel(h,_,!0,m),d+=b.tick,c+=b.label;const v=u/i*r;if(p.toString()!==t._drawMax.toString()&&v<n){const n=t._formatLabel(p.toString()),a=_<v;b=this._addMajorTickAndLabel(n,void 0,a,p,!0),d+=b.tick,c+=b.label}b=this.addMiddleMajorTicks(o,r,v,u,a,i),d+=b.tick,c+=b.label,b=this._addMajorTickAndLabel(f,y,!0,g),d+=b.tick,c+=b.label,d+=this.addMinorTicks(a),t._measureLabelScale.removeChild(t._labelDummy),delete t._labelDummy,delete t._measureLabelScale,"smart-tank"===t.nodeName.toLowerCase()&&t._updateScaleWidth(this._longestLabelSize),t._appendTicksAndLabelsToScales(d,c)}addMiddleMajorTicks(t,n,a,o,r,l){const s=this.context;let i="",d="";for(let c=1;c<t;c++){let m=c*n+a,p;if(p=r?parseFloat(s._drawMin)+l*c+o:parseFloat(s._drawMax)-l*c-o,p.toString()!==s._drawMax.toString()){let a=s._formatLabel(p.toString()),o=!0;s._labelDummy.innerHTML=a;let r=s._labelDummy[s._settings.size];m+r>=t*n&&(o=!1);const l=this._addMajorTickAndLabel(a,void 0,o,p,!0);i+=l.tick,d+=l.label}}return{tick:i,label:d}}addMinorTicks(t){function n(t){return parseFloat(t.toFixed(m))}function a(t){-1===s.indexOf(t)&&0===l._numericProcessor.getPreciseModulo(t,c,p)&&(g+="<div style=\""+u+": "+l._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function i(){let t=l._measurements.trackLength,n=t/s.length,a=.1;20>n?a=1:20<=n&&40>n?a=1<_-h?1:.5:40<=n&&80>n&&(a=.2);let i=Math.floor(l._drawMax),d=l._drawMax-i,c=l._drawMax-l._drawMin>s.length;for(let t=l._drawMax;t>l._drawMin-1;--t){let n=0<d?r(10,t-d+1):r(10,t),s=n*a;for(let t=n;0<t;t-=s)if(t<l.max&&t>l.min){let n=new Smart.Utilities.BigNumber(o(t));(0==n%1&&c||!c)&&(g+="<div style=\""+u+": "+l._numericProcessor.valueToPx(n)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var o=Math.log10,r=Math.pow;const l=this.context,s=l._tickValues,d=l._tickIntervalHandler.nearestPowerOfTen,c=l._minorTicksInterval,m=0>o(d)?Math.round(Math.abs(o(d))):0,p=r(10,m),u=l._settings.leftOrTop;let g="",h,_,f;if(t?(h=s[0],_=s[1],f=s[s.length-1]):(h=s[s.length-1],_=s[s.length-2],f=s[0]),l.logarithmicScale)i();else{for(let t=_;t>h;t=n(t-d))a(t);for(let t=n(_+d);t<f;t=n(t+d))a(t)}return g}validateCustomTicks(){const t=this.context;let n=[];for(let a=0;a<t.customTicks.length;a++){const i=t.customTicks[a],o=this.createDescriptor(i);o>=t._minObject&&o<=t._maxObject&&n.push(o.toString())}n.sort(function(t,n){return t-n}),n=n.filter(function(t,n,a){return!n||t!==a[n-1]}),t.customTicks=n.slice(0)}addGaugeTicksAndLabels(){var t=Math.PI;const n=this.context,a=this,o=Math.max(n._tickIntervalHandler.labelsSize.minLabelSize,n._tickIntervalHandler.labelsSize.maxLabelSize),r=n._majorTicksInterval,l=n._minorTicksInterval,s={},d=n._distance,c=n._measurements.radius,m=c-d.majorTickDistance,p=c-d.minorTickDistance;let u,g,h,_,f,y;"none"!==n.ticksVisibility&&!1!==n._plotTicks?(u=function(t){n._drawTick(t,m,"major")},g=function(t){n._drawTick(a.getAngleByValue(t,!0),p,"minor")}):(u=function(){},g=function(){}),h="none"!==n.labelsVisibility&&!1!==n._plotLabels?function(t,a,i){n._drawLabel(t,a,d.labelDistance,i)}:function(){},n.inverted?(f=n.startAngle,y=n.endAngle):(f=n.endAngle,y=n.startAngle),_=a.getAngleByValue(n._drawMin,!1),u(_),s[n._drawMin]=!0,h(_,n.min,!1);let b=n._drawMin-a.getPreciseModulo(n._drawMin,r),v;0<=n._drawMin&&(b+=r);for(let t=b;t>=n._drawMin;t-=l)v=t;_=a.getAngleByValue(b,!1),u(_),s[b]=!0,2*t*n._measurements.innerRadius*(this._getAngleDifference(f,a.getAngleByValue(b,!1,!0))/360)>o&&h(_,this.getActualValue(b),b<n._drawMax);let x;for(x=b+r;x<n._drawMax-r;x+=r)_=a.getAngleByValue(x,!1),u(_),s[x]=!0,h(_,this.getActualValue(x),!0);if(void 0===s[x]&&x<=n._drawMax&&(_=a.getAngleByValue(x,!1),u(_),s[x]=!0,2*t*n._measurements.innerRadius*(this._getAngleDifference(y,a.getAngleByValue(x,!1,!0))/360)>=o&&h(_,this.getActualValue(x),!0),n._normalizedStartAngle!==n.endAngle&&(_=a.getAngleByValue(n._drawMax,!1),u(_),s[n._drawMax]=!0,2*t*n._measurements.innerRadius*(this._getAngleDifference(y,f)/360)>=o&&h(_,n.max,!1))),!n.logarithmicScale)for(let t=v;t<n._drawMax;t+=l)s[t]||g(t);else this.drawGaugeLogarithmicScaleMinorTicks(s,r,g)}updateToolTipAndValue(t,n,a){const i=this.context,o=i.logarithmicScale;i._updateTooltipValue(t),o&&(t=parseFloat(Math.pow(10,parseFloat(t)).toFixed(11)));const r=t.toString();i._number=t,i._drawValue=o?Math.log10(r):t,r!==n&&a&&(i.value=i._discardDecimalSeparator(r),!i._programmaticValueIsSet&&i.$.fireEvent("change",{value:i.value,oldValue:n}),i.$.hiddenInput&&(i.$.hiddenInput.value=i.value))}validateInterval(t){const n=this.context,a=n._maxObject-n._minObject;n._validInterval=Math.min(parseFloat(t),a),n.interval=n._validInterval}getCoercedValue(t,n,a){var o=Math.abs;const i=this.context;if(!i.coerce)return t;let r=!i.logarithmicScale,l,s;if(i.customInterval){const s=i.customTicks;if(0===s.length)return t;r=r||a,l=!1===n?i._minObject:parseFloat(i._drawMin);let d=o(l-t),c=l;for(let n=0;n<s.length;n++){const a=this.createDescriptor(s[n]),i=r?a:Math.log10(a),l=o(i-t);l<d&&(d=l,c=i)}return c}!1===n?(l=parseFloat(i.min),s=parseFloat(i.max)):(l=parseFloat(i._drawMin),s=parseFloat(i._drawMax));let d=t-l,c=this.getPreciseModulo(d,parseFloat(i.interval)),m=this.roundCoefficient;if(0===c)return t;0===this.roundCoefficient&&(m=12);let p=parseFloat((d-c).toFixed(m)),u=p+parseFloat(i.interval);if(i.max-i.min<=parseFloat(i.interval)&&r){let n=l,a=s;return t>=n+(a-n)/2?a:n}if(o(d-p)<o(d-u))return p+l;else{const t=u+l;return t>s?p+l:t}}updateValue(t){const n=this.context,a=this.validate(t,n._minObject,n._maxObject),i=n._number.toString();t.toString()!==i.toString()||n._scaleTypeChangedFlag?(n.value=t.toString(),n._number=a,!n._programmaticValueIsSet&&n.$.fireEvent("change",{value:n.value,oldValue:i})):n.value="string"==typeof t?t:t.toString(),n._drawValue=n.logarithmicScale?Math.log10(a).toString():a.toString(),n._moveThumbBasedOnValue(n._drawValue),n.$.hiddenInput&&(n.$.hiddenInput.value=n.value)}getValuePerPx(t,n){return parseFloat(t)/n}restrictValue(t){t[1]<t[0]&&(t[1]=t[0])}lockRotation(t,n){const a=this.context;if(t&&n<a._number){if(a._lockCW=!0,n<a._maxObject)return a._maxObject;}else if(!t&&n>a._number&&(a._lockCCW=!0,n>a._minObject))return a._minObject}getAngleRangeCoefficient(){const t=this.context;t._angleRangeCoefficient=t._angleDifference/t._range}}),Smart.Utilities.Assign("ComplexNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(t,n){super(t,n),this.context=t}createDescriptor(t,n,a,i,o,r){let l;return l=r?r:t.constructor===this.complexConstructor?new this.complexConstructor(t.realPart,t.imaginaryPart):new this.complexConstructor(t),i&&(l=this.validate(l,this.context._minObject,this.context._maxObject)),l}validate(t,n,a){let i=t;return n===-Infinity?a!==1/0&&1===this.compareComplexNumbers(t,a)&&(i=new this.complexConstructor(a.realPart,a.imaginaryPart)):-1===this.compareComplexNumbers(t,n)&&(i=new this.complexConstructor(n.realPart,n.imaginaryPart)),i}compare(t,n,a){return!0===a?this.compareComplexNumbers(t,n):0!==this.compareComplexNumbers(t,n)}validateMinMax(t,n){const a=this.context;t&&(null===a.min||a._regexSpecial.inf.test(a.min)?(a.min=-Infinity,a._minObject=-Infinity):a._minObject=new this.complexConstructor(a.min)),n&&(null===a.max||a._regexSpecial.inf.test(a.max)?(a.max=1/0,a._maxObject=1/0):a._maxObject=new this.complexConstructor(a.max))}incrementDecrement(t,n){let a=new this.complexConstructor(t.realPart,t.imaginaryPart),i=this.context._spinButtonsStepObject;return"add"===n?(a.realPart+=i.realPart,a.imaginaryPart+=i.imaginaryPart):(a.realPart-=i.realPart,a.imaginaryPart-=i.imaginaryPart),a}render(t){let n=t;if(!1===this.context._regexSpecial.nonNumericValue.test(t)){let t=n.realPart,a=n.imaginaryPart,i=this.context.significantDigits,o=this.context.precisionDigits,r;0<=a?r="+":(r="-",a=Math.abs(a));const l=new Smart.Utilities.NumberRenderer(t),s=new Smart.Utilities.NumberRenderer(a);this.context.scientificNotation?(t=l.toScientific(i,o),a=s.toScientific(i,o)):(t=l.toDigits(i,o),a=s.toDigits(i,o)),n=`${t} ${r} ${a}i`}return n}compareComplexNumbers(t,n){if(!1==t instanceof this.complexConstructor||!1==n instanceof this.complexConstructor)return-1;const a=t.realPart,i=n.realPart;if(a<i)return-1;if(a>i)return 1;else{const a=t.imaginaryPart,i=n.imaginaryPart;return a<i?-1:a>i?1:0}}}),Smart.Utilities.Assign("NumberRenderer",class{constructor(t){const n=this;n.numericValue=t,n.powersToPrefixes={24:"Y",21:"Z",18:"E",15:"P",12:"T",9:"G",6:"M",3:"k",0:"","-2":"c","-3":"m","-6":"u","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},n.localizationObject={currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",defaultPrecision:2}}isENotation(t){return new RegExp(/e/i).test(t)}largeExponentialToDecimal(t){let n;t===void 0&&(t=this.numericValue,n=!0);let a=t.toString().toLowerCase(),i=a.indexOf("e"),o=new Smart.Utilities.BigNumber(a.slice(0,i)),r=a.slice(i+1,i+2);"+"!==r&&"-"!==r&&(a=a.slice(0,i)+"e+"+a.slice(i+1),r="+");let l=a.slice(i+2),s=new Smart.Utilities.BigNumber(10),d=s.pow(r+(n?Math.min(20,l):l)),c=o.multiply(d);return c.toString()}bigNumberToExponent(t,n){let a=this.numericValue;a.constructor!==Smart.Utilities.BigNumber&&(a=new Smart.Utilities.BigNumber(a));const i=a._f;let o=a.toString();if(10>=i)return n?parseFloat(o).toExponential(null===t?void 0:t-1):new Smart.Utilities.NumberRenderer(parseFloat(o)).toDigits(t);if(t>=i&&!n)return o;else{let r;!1===a._s?r="":(r="-",o=o.slice(1));const l=parseFloat(o.slice(t,t+1));5<=l&&(o=new Smart.Utilities.BigNumber(o.slice(0,t)).add(1).toString());let s=o.slice(1,t);if(n)t--,0<s.length&&t>s.length?s+="0".repeat(t-s.length):0===s.length&&(s="0".repeat(t));else for(;0<s.length&&"0"===s.charAt(s.length-1);)s=s.slice(0,s.length-1);const d=0<s.length?".":"";return r+o.slice(0,1)+d+s+"E+"+(i-1)}}toScientific(){const t=this;let n=t.numericValue._d?t.bigNumberToExponent(null===arguments[0]?arguments[1]+1:arguments[0],!0).toLowerCase():(+t.numericValue.toString()).toExponential();const a=n.indexOf("e"),i=n.slice(a+1);let o=parseFloat(n.slice(0,a));if("-2"===i)return o+"c";const r=parseInt(i,10)%3;if(0<r)for(let t=0;t<r;t++)o*=10;else 0>r&&(o=parseFloat(new Smart.Utilities.BigNumber(o).multiply(Math.pow(10,r)).toString()));if(0<i){const t=0<=o?0:1,i=n.slice(t,a).length-r-2;0<=i&&(o=o.toFixed(i))}const l=new Smart.Utilities.NumberRenderer(o);o=l.toDigits(arguments[0],arguments[1]);const s=parseInt(i,10)-r,d=o+t.powersToPrefixes[s.toString()];return d}bigNumberToScientific(){const t=this,n=t.numericValue._f-1,a=parseInt(n,10)%3,i=parseInt(n,10)-a;let o=t.numericValue.toString(),r,l;if("-"===o.charAt(0)?(r="-",o=o.slice(1)):r="",null!==arguments[0])for(l=o.slice(0,arguments[0]),5<=parseFloat(o.slice(arguments[0],arguments[0]+1))&&(l=new Smart.Utilities.BigNumber(l).add(1).toString());l.length>1+a&&"0"===l.charAt(l.length-1);)l=l.slice(0,l.length-1);else null!==arguments[1]&&(l=o.slice(0,arguments[1]+1),5<=parseFloat(o.slice(arguments[1]+1,arguments[1]+2))&&(l=new Smart.Utilities.BigNumber(l).add(1).toString()),arguments[1]+a>l.length-1&&(l+="0".repeat(arguments[1]+a-l.length+1)));return l.length>1+a&&(l=l.slice(0,1+a)+"."+l.slice(1+a)),r+l+t.powersToPrefixes[i.toString()]}toDigits(t,n){const a=this;let i;return i=null===t?null===n?a.applySignificantDigits(8):a.applyPrecisionDigits(n):a.applySignificantDigits(t),i}applySignificantDigits(t){function n(t){for(;"0"===t.charAt(t.length-1);)t=t.slice(0,-1);return"."===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t}const a=this;t=Math.max(1,Math.min(t,21));let i=parseFloat(a.numericValue).toPrecision(t).toUpperCase();if(-1!==i.indexOf("."))if(a.isENotation(i)){const t=i.indexOf("."),a=i.indexOf("E");let o=i.slice(t,a);o=n(o),i=i.slice(0,t)+o+i.slice(a)}else i=n(i);return i}applyPrecisionDigits(t){const n=this;t=Math.max(0,Math.min(t,20));let a=parseFloat(n.numericValue).toFixed(t);return n.isENotation(a)&&(a=n.largeExponentialToDecimal(a)+"."+"0".repeat(t)),a}getLogarithm(t){var n=Math.log;const a=this.numericValue;let i;if(void 0===t&&(t=10),10===t)try{i=Math.log10(a)}catch(t){i=n(a)/2.302585092994046}else i=n(a)/n(t);return i}applySeparators(t,n){const a=this;t=t.toString();const i=t.indexOf(".");if(-1!==i){const o=t.slice(0,i),r=t.slice(i+1);return a.applyThousandsSeparator(o,n)+a.localizationObject.decimalseparator+r}return a.applyThousandsSeparator(t,n)}applyThousandsSeparator(t,n){if(n)return t;let a="";t=t.toString(),"-"===t.charAt(0)&&(a="-",t=t.slice(1));let o=t.split("").reverse();for(let a=2;a<o.length-1;a+=3)o[a]=this.localizationObject.thousandsseparator+o[a];return o.reverse(),o=o.join(""),a+o}formatNumber(t,n,a){var i=Math.round;const o=this;if(void 0===arguments[3]&&delete o._ignoreMinus,delete o._wordLengthNumber,!/^([a-zA-Z]\d*)$/g.test(n))try{const a=o.applyCustomFormat(t,n);return a}catch(n){return t.toString()}const r=n.slice(0,1);let l=n.slice(1);if(""!==l&&(isNaN(parseFloat(l))||0>parseFloat(l)||99<parseFloat(l)?l="":0!=parseFloat(l)%1&&(l=i(l))),t._d)o.inputFormat="integer";else{if(t.imaginaryPart)return o.formatComplexNumber(t,n,r,l);o.inputFormat="floatingPoint"}let s=new Smart.Utilities.NumericProcessor(o,"inputFormat"),d=s.createDescriptor(t),c;switch(o._wordLengthNumber=s.getWordLength(a?a:"int32"),"integer"===o.inputFormat&&(d=s.round(d)),o.numericValue=d,r){case"C":case"c":return""===l&&(l=o.localizationObject.defaultPrecision),l=parseFloat(l),c="floatingPoint"===o.inputFormat?o.applyPrecisionDigits(l):d.toString()+(0<l?"."+"0".repeat(l):""),c=o.applySeparators(c),"before"===o.localizationObject.currencysymbolposition?"-"===c.charAt(0)?"-"+o.localizationObject.currencysymbol+c.slice(1):o.localizationObject.currencysymbol+c:c+" "+o.localizationObject.currencysymbol;case"D":case"d":{if(c=d,"floatingPoint"===o.inputFormat&&(c=i(d)),c=c.toString(),""===l)return c;let t="";"-"===c.charAt(0)&&(t="-",c=c.slice(1));const n=l-c.length;return 0<n&&(c="0".repeat(n)+c),t+c}case"E":case"e":case"U":case"u":{""===l&&(l=6),c="floatingPoint"===o.inputFormat?d.toExponential(l):o.bigNumberToExponent(parseFloat(l)+1,!0).toLowerCase();const t=c.indexOf("e"),n=c.slice(t+2).length;return(3>n&&(c=c.slice(0,t+2)+"0".repeat(3-n)+c.slice(t+2)),"u"===r.toLowerCase())?o.exponentialToSuperscript(o.applySeparators(c,!0)):("E"===r&&(c=c.toUpperCase()),o.applySeparators(c,!0))}case"F":case"f":case"N":case"n":return""===l&&(l=o.localizationObject.defaultPrecision),l=parseFloat(l),c="floatingPoint"===o.inputFormat?o.applyPrecisionDigits(l):d.toString()+(0<l?"."+"0".repeat(l):""),o.applySeparators(c,"f"===r.toLowerCase());case"G":case"g":{(""===l||"0"===l)&&(l="floatingPoint"===o.inputFormat?15:"int8"===a||"uint8"===a?3:"int16"===a||"uint16"===a?5:"int64"===a?19:"uint64"===a?20:10),l=parseFloat(l);let n=o.formatNumber(t,"E"+l,a),i=n.indexOf("E");const s=parseInt(n.slice(i+1),10);if(-5<s&&s<l)return"floatingPoint"===o.inputFormat?o.applySeparators(o.applySignificantDigits(l),!0):d.toString();if(-100<s&&100>s&&(n=n.slice(0,i+2)+n.slice(i+3)),-1!==n.indexOf(o.localizationObject.decimalseparator)){for(;"0"===n.charAt(i-1);)n=n.slice(0,i-1)+n.slice(i),i=n.indexOf("E");n.charAt(i-1)===o.localizationObject.decimalseparator&&(n=n.slice(0,i-1)+n.slice(i))}return"g"===r&&(n=n.toLowerCase()),n}case"P":case"p":return""===l&&(l=o.localizationObject.defaultPrecision),l=parseFloat(l),"floatingPoint"===o.inputFormat?(o.numericValue=100*d,c=o.applyPrecisionDigits(l)):c=d.multiply(100).toString()+(0<l?"."+"0".repeat(l):""),o.applySeparators(c)+" %";case"B":case"b":case"O":case"o":case"X":case"x":{"integer"!==o.inputFormat&&(o.inputFormat="integer",s=new Smart.Utilities.NumericProcessor(o,"inputFormat"),d=s.round(s.createDescriptor(t)));let n;if(n="B"===r||"b"===r?2:"O"===r||"o"===r?8:16,c=d.toString(n,o._wordLengthNumber),""!==l){const t=parseFloat(l)-c.length;0<t&&(c="0".repeat(t)+c)}return"x"===r&&(c=c.toLowerCase()),c}case"S":case"s":return""===l&&(l=o.localizationObject.defaultPrecision),l=parseFloat(l),o.toScientific(null,l).replace(".",o.localizationObject.decimalseparator);default:return t.toString();}}formatComplexNumber(t,n,a){const i=this;return"E"===a||"e"===a||"U"===a||"u"===a||"F"===a||"f"===a||"G"===a||"g"===a||"N"===a||"n"===a||"S"===a||"s"===a?0<=t.imaginaryPart?i.formatNumber(t.realPart,n)+" + "+i.formatNumber(t.imaginaryPart,n)+"i":i.formatNumber(t.realPart,n)+" - "+i.formatNumber(Math.abs(t.imaginaryPart),n)+"i":t.toString()}toString(t,n,a){return n?this.formatNumber(t,n,a):t.toString()}applyCustomFormat(t,n){const a=this;n=n.replace(/_.|\[\w*\]|.\*|\*./g,""),n=n.replace(/\?/g,"#");const i=n.split(";");if("string"==typeof t&&isNaN(t))return i[i.length-1].replace(/"/g,"").replace(/@/g,t.toString());if(t._d)a.inputFormat="integer";else{if(t.imaginaryPart)return t.toString();t=parseFloat(t),a.inputFormat="floatingPoint"}let o=new Smart.Utilities.NumericProcessor(a,"inputFormat"),r=o.createDescriptor(t);"integer"===a.inputFormat&&(r=o.round(r)),a.numericProcessor=o;const l=a.getRelevantFormatSection(i,r);if(void 0===l)return t.toString();if(-1!==l.indexOf("@"))return i[i.length-1].replace(/"/g,"").replace(/@/g,t.toString());const s=-1!==l.replace(/".*"/g,"").indexOf("%"),d=a.getTextParts(l);if(-1!==d.main.toLowerCase().indexOf("e"))return a.applyCustomExponentialFormat(r,d,o);if(-1!==d.main.indexOf("/"))return a.applyCustomFractionalFormat(r,d,o);if(s&&("integer"===a.inputFormat?r=r.multiply(100):r=Math.round(100*r)),""===d.main){if(!s)return d.suffix;let t=r.toString();return a._ignoreMinus&&"-"===t.charAt(0)&&(t=t.slice(1)),t+d.suffix}let c=d.main.replace(/[^0#,. \/]/g,""),m=c.indexOf(".");for(-1!==m&&(c=c.substring(0,m+1)+c.substring(m+1).replace(/\./g,""),"."===c.charAt(c.length-1)&&(c=c.slice(0,c.length-1)),0===m&&(c="#"+c));","===c.charAt(c.length-1);)c=c.slice(0,c.length-1),"floatingPoint"===a.inputFormat?r/=1e3:r=r.multiply(.001);"integer"===a.inputFormat&&(r=o.round(r));const p=-1!==c.indexOf(",");c=c.replace(/,/g,"");const u=c.split("."),g=u[0];let h=u[1],_="";if(1===u.length)return"floatingPoint"===a.inputFormat&&(r=o.round(r)),_=r.toString(),a.setTextParts(a.formatWholeNumber(_,g,p),d);_=r.toString();let f=_.split("."),y=a.formatWholeNumber(f[0],g,p),b=f[1]||"";if(h.length<=b.length&&(_=parseFloat(r.toFixed(h.length)).toString(),f=_.split("."),y=a.formatWholeNumber(f[0],g,p),b=f[1]||"",b))return a.setTextParts(y+a.localizationObject.decimalseparator+b.slice(0,h.length),d);h=h.slice(b.length-h.length);let v=h.lastIndexOf("0");return-1===v?""===b?a.setTextParts(y,d):a.setTextParts(y+a.localizationObject.decimalseparator+b,d):a.setTextParts(y+a.localizationObject.decimalseparator+b+"0".repeat(v+1),d)}getRelevantFormatSection(t,n){const a=this,i=a.numericProcessor.compare(n,0,!0);if(1===i)return t[0];let o,r;return 3<=t.length?(a._ignoreMinus=!0,o=1,r=2):2===t.length?(a._ignoreMinus=!0,r=0,o=1):1===t.length&&(r=0,o=0),0===i?t[r]:-1===i?t[o]:void 0}getTextParts(t){const n=t.replace(/"[^"]*"/g,""),a=t.match(/"[^"]*"/g),i=n.search(/0|#|\./g),o=Math.max(n.lastIndexOf("0"),n.lastIndexOf("#"),n.lastIndexOf("."),n.lastIndexOf(",")),r=n.slice(i,o+1);if(""===r)return{prefix:"",main:"",suffix:t.replace(/"/g,"")};let l=t.indexOf(r),s=l+r.length;if(a)for(let n=0;n<a.length;n++){const i=t.indexOf(a[n]);l>=i&&s<=i+a[n].length&&(l=t.indexOf(r,i+a[n].length),s=l+r.length)}const d=t.slice(0,l).replace(/"/g,""),c=t.slice(s).replace(/"/g,"");return{prefix:d,main:r,suffix:c}}applyCustomExponentialFormat(t,n,a){var i=Math.pow;const o=this;let r=n.main,l;const s=-1!==r.indexOf(",");r=r.replace(/[^0#.eE+-]/g,"");const d=r.toLowerCase().indexOf("e");r=r.substring(0,d+1)+r.substring(d+1).replace(/[eE\.]/g,"");const c=r.charAt(d),m=r.indexOf(".");-1!==m&&(r=r.substring(0,m+1)+r.substring(m+1).replace(/\./g,"")),"."===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1));const p=r.split(c);let u=p[0];const g=u.split("."),h=g[0],_=g[1],f=p[1];let y=t.toString().split(".")[0].replace(/-/,""),b=0;if("0"===y&&a.compare(t,0)){let n=h.length-1;for(;0===parseInt(t);)b++,t*=10;y=t.toString().split(".")[0].replace(/-/,""),b+=n,t*=i(10,n)}if(s&&(u=u.slice(0,1)+","+u.slice(1)),y.length<=h.length)l=o.formatNumber(t,u,void 0,!0)+c+o.formatExponent(0-b,f);else{const n=y.length-h.length;let r="floatingPoint"===o.inputFormat?t/i(10,n):t.divide(i(10,n));if(!_){let t=o.applyThousandsSeparator(a.round(r).toString(),!s);l=t+c+o.formatExponent(n-b,f)}let d=r.toString().split(".")[1]||"";d.length===_.length?l=o.applySeparators(r,!s)+c+o.formatExponent(n-b,f):d.length<_.length?l=o.formatNumber(r,u,void 0,!0)+c+o.formatExponent(n-b,f):(r="floatingPoint"===o.inputFormat?r.toFixed(_.length):r=a.round(t.divide(i(10,n-_.length))).divide(i(10,_.length)),l=o.formatNumber(parseFloat(r),u,void 0,!0)+c+o.formatExponent(n-b,f))}return o.setTextParts(l,n)}formatExponent(t,n){let a;return-1!==["+","-"].indexOf(n.charAt(0))&&(a=n.charAt(0),(0<t&&"-"===a||0>t&&"+"===a)&&(a=void 0)),0>t&&(t=Math.abs(t),a="-"),n=n.replace(/[+-]/g,""),t=this.formatNumber(t,n,void 0,!0),(a?a:"")+t}formatWholeNumber(t,n,a){const i=this;let o="";if("-"===t.charAt(0)&&(!i._ignoreMinus&&(o="-"),t=t.slice(1)),"0"===t){if(n==="#".repeat(n.length))return o;t=""}if(n.length<=t.length)return o+i.applyThousandsSeparator(t,!a);n=n.slice(0,n.length-t.length);for(let o=n.length-1;0<=o;o--)"0"===n.charAt(o)&&(t="0"+t);return o+i.applyThousandsSeparator(t,!a)}setTextParts(t,n){return n.prefix+t+n.suffix}applyCustomFractionalFormat(t,n,a){var i=Math.abs;const o=this,r=/^([0#,]+[ ]+)?([0#,]+\/[0#,]+)$/;let l=n.main.trim(),s;if(!r.test(l))return t.toString();const d=r.exec(l);if(d[2]=d[2].replace(/,/g,""),"integer"===o.inputFormat){const a=d[2].split("/");return void 0===d[1]?s=o.formatNumber(t,a[0],void 0,!0)+"/"+o.formatNumber(1,a[1],void 0,!0):(s=o.formatNumber(t,d[1].trim(),void 0,!0),-1!==d[2].indexOf("0")&&(s+=" "+o.formatNumber(0,a[0],void 0,!0)+"/"+o.formatNumber(1,a[1],void 0,!0))),o.setTextParts(s,n)}if(void 0===d[1])s=(0>t?"-":"")+o.formatAsFraction(i(t),d[2]);else{const n=d[1].trim(),r=d[2];s=o.formatNumber(parseInt(t,10),n,void 0,!0)+" "+o.formatAsFraction(a.getPreciseModulo(i(t),1),r)}return o.setTextParts(s.trim(),n)}formatAsFraction(t,n){const a=this,i=n.split("/");if(0===t)return-1===n.indexOf("0")?"":a.formatNumber(0,i[0],void 0,!0)+"/"+a.formatNumber(1,i[1],void 0,!0);if(0==t%1)return a.formatNumber(t,i[0],void 0,!0)+"/"+a.formatNumber(1,i[1],void 0,!0);const o=[];a.approximateFractions(t,o);const r=2<=i[1].length?2:1;let l=[],s=[];o.forEach(function(n,a){const i=n.denominator.toString().length,o=Math.abs(t-n.numerator/n.denominator);return void 0===l[i]?(s[i]=a,void(l[i]=o)):void(o<l[i]&&(s[i]=a,l[i]=o))});let d=s[r]?o[s[r]]:o[s[1]];return a.formatNumber(d.numerator,i[0],void 0,!0)+"/"+a.formatNumber(d.denominator,i[1],void 0,!0)}approximateFractions(t,n){const a=[0,1],o=[1,0],r=this.getMaxNumerator(t);let l=t,s=NaN,d;for(let c=2;1e3>c;c++){const i=Math.floor(l);if(a[c]=i*a[c-1]+a[c-2],Math.abs(a[c])>r)return;if(o[c]=i*o[c-1]+o[c-2],d=a[c]/o[c],d===s)return;if(n.push({numerator:a[c],denominator:o[c]}),d===t)return;s=d,l=1/(l-i)}}getMaxNumerator(t){let n=null,a=t.toString().indexOf("E");-1===a&&(a=t.toString().indexOf("e")),n=-1===a?t.toString():t.toString().substring(0,a);let i=null;const o=n.toString().indexOf(".");-1===o?i=n:0===o?i=n.substring(1,n.length):o<n.length&&(i=n.substring(0,o)+n.substring(o+1,n.length));let r=i;const l=r.toString().length,s=t;let d=s.toString().length;0===s&&(d=0);const c=l-d;for(let n=c;0<n&&0==r%2;n--)r/=2;for(let n=c;0<n&&0==r%5;n--)r/=5;return r}exponentialToSuperscript(t){const n=t.indexOf("e"),a=t.slice(n+1).replace(/0{1,2}/,"");let i=t.slice(0,n+1);return i=i.replace("e","\xD710"),i+=this.toSuperscript(a),i=i.replace("+",""),i}toSuperscript(t,n){const a="-0123456789",o="\u207B\u2070\xB9\xB2\xB3\u2074\u2075\u2076\u2077\u2078\u2079";let r="";for(let l=0;l<t.length;l++)if(!0===n){const n=o.indexOf(t.charAt(l));r+=-1===n?t[l]:a[n]}else{const i=a.indexOf(t.charAt(l));r+=-1===i?t[l]:o[i]}return r}}),Smart.Utilities.Assign("ConditionalFormatter",class{constructor(t){const n=this;n.data=t||[],n._allowedDateComparators=["yesterday","today","tomorrow","last7Days","lastWeek","thisWeek","nextWeek","lastMonth","thisMonth","nextMonth","lastYear","thisYear","nextYear"],n._colorSchemes=[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]},{name:"scheme28",colors:["#63BE7B","#FDD17F","#F8696B"]},{name:"scheme29",colors:["#F8696B","#FDD17F","#63BE7B"]},{name:"scheme30",colors:["#63BE7B","#FCFCFF","#F8696B"]},{name:"scheme31",colors:["#F8696B","#FCFCFF","#63BE7B"]},{name:"scheme32",colors:["#5A8AC6","#FCFCFF","#F8696B"]},{name:"scheme33",colors:["#F8696B","#FCFCFF","#5A8AC6"]},{name:"scheme34",colors:["#FCFCFF","#F8696B"]},{name:"scheme35",colors:["#F8696B","#FCFCFF"]},{name:"scheme36",colors:["#63BE7B","#FCFCFF"]},{name:"scheme37",colors:["#FCFCFF","#63BE7B"]},{name:"scheme38",colors:["#63BE7B","#FFEF9C"]},{name:"scheme39",colors:["#FFEF9C","#63BE7B"]},{name:"scheme40",colors:["#000000","#8b0000 ","#FFFF00","#FFFFFF"]},{name:"scheme41",colors:["#63BE7B","#FDD17F ","#F8696B","#FF69B4"]},{name:"scheme42",colors:["#63BE7B","#FDD17F ","#FDD17F","#F8696B"]},{name:"scheme00",colors:["#63BE7B","#FDD17F","#FDD17F","#FDD17F","#F8696B"]}]}format(t,n,a){const i=this,o=i.data;if(0!==o.length&&(t?i.condition=t:t=i.condition,!!t)){(void 0===i.comparator||null===i.comparator)&&(i.comparator=a),n?i.columns=n:n=i.columns,i.color&&(i.color=/^#[0-9A-F]{6}$/i.test(i.color)?i.color:void 0),n&&Array.isArray(n)&&(!Array.isArray(n)||0!==n.length)||(n=i.columns=[]);let t={};for(let a=0;a<n.length;a++){const r=n[a];null!==o[0][r]&&void 0!==o[0][r]&&(t[r]=i._validateColumnData(r))}return 0===Object.keys(t).length?void 0:t}}_applyColorScale(t){function n(t){let n=0;for(;n<u;){if(t<=c[n].max)return n;n++}return o(0,a(u-1,n))}var a=Math.min,o=Math.max;const r=this,l=t.length;if(0===l)return;const s=r.colorScheme===void 0?[r.color]:r._getSchemeColors();if(0===s.length||void 0===s[0]||null===s[0])return;let d={},c={},m,p;const u=s.length-("iconSet"===r.condition?0:1),i=r._getColumnRange(t),h=parseFloat(r.min)||i.min,_=o(h,parseFloat(r.max)||i.max);for(let n=0;n<u;n++)c[n]={min:c[n-1]?c[n-1].max:h,max:h+(_-h)*((n+1)/u)};0==u&&(c[0]={min:h,max:_});for(let g=0,i;g<l;g++)(i=t[g]instanceof Date?t[g].getTime():t[g],i=a(_,o(h,i)),"number"==typeof i)&&(m=n(i)||0,"iconSet"===r.condition?d[g]={"--icon-set":" ","--icon-set-color":s[m],"--icon-set-rotation-angle":r._getRotationAngle(m/(u-1)||0)+"deg"}:(p=1-((i-c[m].min)/(c[m].max-c[m].min)||0),d[g]=r._getCellStyle(r._mixColors(s[m],s[a(m+1,u)],p))));return d}_applyColorBar(t){const n=this,a=t.length,i=n._getColumnRange(t),o=n.min?parseFloat(n.min)||0:i.min,r=n.max?parseFloat(n.max)||0:i.max,l=n.colorScheme===void 0?[n.color]:n._getSchemeColors();let s="",d={},c;for(let n=0;n<l.length;n++)void 0!==l[n]&&null!==l[n]&&(s+=l[n]+",");if(!s)return void console.log("Invalid color/colorScheme detected.");s=s.slice(0,-1),c=1===l.length?l[0]:"-webkit-linear-gradient(left,"+s+")";for(let n=0,i;n<a;n++)(i=t[n]instanceof Date?t[n].getTime():t[n],i=Math.min(r,Math.max(o,t[n])),"number"==typeof i)&&(d[n]={"--color-bar":" ","--bar-width":(100*((i-o)/(r-o))||0)+"%","--bar-color":c});return d}_applyRule(t){function n(n){switch(i){case"between":{if(n instanceof Date&&(n=n.getTime()),n>=r&&n<=l)return n;break}case"contains":if(-1<(n+"").indexOf(s))return n;break;case"duplicate":{let a=0;for(let r=0;r<o;r++)if(t[r]===n&&a++,1<a)return n;break}case"dateOccur":{const t=a._getDateRange(n,s);if(!t)break;if(n=new Date(n),isNaN(n.getTime()))break;const i=n.getTime(),o=t.min.getTime(),r=t.max.getTime();if(i>=o&&i<=r)return n;break}case"doesNotContain":if(0>(n+"").indexOf(s))return n;break;case"equal":if("number"==typeof n&&n===parseFloat(s))return n;if("string"==typeof n&&0===n.localeCompare(s+""))return n;if("boolean"==typeof n&&n+""==s+"")return n;if(n instanceof Date&&n.getTime()===new Date(s).getTime())return n;break;case"greaterThan":if(n>parseFloat(s))return n;break;case"lessThan":if(n<parseFloat(s))return n;break;case"notEqual":if("number"==typeof n&&n!==parseFloat(s))return n;if("string"==typeof n&&0!==n.localeCompare(s+""))return n;if("boolean"==typeof n&&n+""!=s+"")return n;if(n instanceof Date&&n.getTime()!==new Date(s).getTime())return n;break;case"topNItems":case"bottomNItems":case"topNPercent":case"bottomNPercent":if(d||(d=t.slice(0).sort(0===i.indexOf("top")?(t,n)=>t<n?1:t>n?-1:0:(t,n)=>t>n?1:t<n?-1:0).slice(0,parseInt(0<i.indexOf("Percent")?o*s/100:s))),-1<d.indexOf(n))return n;break;case"aboveAverage":case"belowAverage":if(!c){let n=0;t.map(t=>n+=parseFloat(t)),c=n/o}if("aboveAverage"===i&&n>c)return n;if("belowAverage"===i&&n<c)return n;}return null}const a=this,o=t.length,i="string"==typeof a.condition?a.condition.trim():"";let r=parseFloat(a.min)||0,l=Math.max(r,parseFloat(a.max)||0),s,d,c;if(s="dateOccur"===i?"string"==typeof a.comparator&&-1<a._allowedDateComparators.indexOf(a.comparator.trim())?a.comparator.trim():void 0:Array.isArray(a.comparator)?a.comparator[0].trim():a.comparator,!t||0===t.length)return;if(0>["odd","even","duplicate","dateOccur","between","aboveAverage","belowAverage"].indexOf(i)&&0!==i.indexOf("everyN")&&(void 0===s||null===s))return console.warn(a.condition+" requires a comparator."),[];if("odd"===i||"even"===i||0===i.indexOf("everyN"))return a._getAlternateItems(t);let m=[],p;for(let a=0;a<o;a++)p=n(t[a],a),void 0!==p&&null!==p&&m.push(a);return m}_getAlternateItems(t){const n=this,a=t.length,o="string"==typeof n.condition?n.condition.trim():"",r=parseInt(n.min)||0,l=Math.max(r,parseInt(n.max)||a)-1,s=parseInt(n.comparator);let d=[],c=0;for(let n=0;n<=a;n++)if(!(n<r)){if(n>l)break;"even"===o&&0==(n+1)%2?d.push(n):"odd"===o&&0!=(n+1)%2?d.push(n):void 0!==s&&!isNaN(s)&&(c===s?(d.push(n),c=0):c++)}return d}_getColumnRange(t){const n=t.length;let a=0,o,r;for(let l=0;l<n;l++)r=t[l],r instanceof Date&&(r=r.getTime()),r>a&&(a=r),void 0===o&&(o=r),r<o&&(o=r);return{min:parseFloat(o)||0,max:parseFloat(a)||0}}_getCellStyle(t,n){var a=this._hexToRgba(t,n).toString(),i=this._getTextElementByColor(this._hexToRgba(t,.7));return{background:a,color:i,border:t}}_getDateRange(t,n){var a=Math.abs;const i=new Date(t);let o,r;if(i instanceof Date&&n){const t=new Date;switch(n){case"yesterday":case"today":case"tomorrow":{"yesterday"===n?r=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1):"today"===n?(r=new Date,r.setHours(0,0,0,0)):r=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1),o=r;break}case"last7Days":r=new Date(t.getFullYear(),t.getMonth(),t.getDate()-6),o=new Date(t);break;case"lastWeek":case"thisWeek":case"nextWeek":r="lastWeek"===n?new Date(t.getFullYear(),t.getMonth(),t.getDate()-6-t.getDay()):"thisWeek"===n?new Date(t.getFullYear(),t.getMonth(),t.getDate()-a(1-t.getDay())):new Date(t.getFullYear(),t.getMonth(),t.getDate()+a(7-t.getDay())),o=new Date(r.getFullYear(),r.getMonth(),r.getDate()+6);break;case"lastMonth":case"thisMonth":case"nextMonth":"lastMonth"===n?(o=new Date(t.getFullYear(),t.getMonth(),0),r=new Date(o.getFullYear(),o.getMonth(),1)):"thisMonth"===n?(r=new Date(t.getFullYear(),t.getMonth(),1),o=new Date(t.getFullYear(),t.getMonth()+1,0)):(r=new Date(t.getFullYear(),t.getMonth()+1,1),o=new Date(t.getFullYear(),t.getMonth()+2,0));break;case"lastYear":case"thisYear":case"nextYear":"lastYear"===n?(r=new Date(t.getFullYear()-1,0,1),o=new Date(t.getFullYear()-1,12,0)):"thisYear"===n?(r=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),12,0)):(r=new Date(t.getFullYear()+1,0,1),o=new Date(t.getFullYear()+1,12,0));}return{min:r,max:o}}}_getRotationAngle(t){var n=Math.round;let a=t;return .25>t?a=n(t)?.25:0:.25<t&&.5>t?a=n(t)?.5:.25:.5<t&&.75>t?a=n(t)?.75:.5:.75<t&&1>t&&(a=n(t)?1:.75),180*a}_getSchemeColors(){const t=this;let n;if("string"==typeof t.colorScheme)n=0===t.colorScheme.indexOf("scheme")?t._colorSchemes.filter(n=>n.name===t.colorScheme)[0]:void 0;else if("number"==typeof t.colorScheme)n=t._colorSchemes[t.colorScheme]?t._colorSchemes[t.colorScheme]:void 0;else return[];return n="object"==typeof n?n.colors:t._colorSchemes[0].colors}_getTextElementByColor(t){return 125<=.299*t.r+.587*t.g+.114*t.b?"Black":"White"}_hexToRgba(t,n){const a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);var i=function(){return 1<this.alpha||void 0===this.alpha||null===this.alpha?this.alpha=1:0>this.alpha&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"};return void 0===n?a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16),toString:i}:null:(1<n?n=1:0>n&&(n=0),a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16),alpha:n,toString:i}:null)}_mixColors(t,n,a){const i=t=>t.toString(16),o=t=>parseInt(t,16);let r="#",l;a="undefined"==typeof a?.5:a,t=t.replace(/#/g,""),n=n.replace(/#/g,"");for(let s=0;5>=s;s+=2){const d=o(t.substr(s,2)),c=o(n.substr(s,2));for(l=i(Math.floor(c+(d-c)*a));2>l.length;)l="0"+l;r+=l}return r}_shadeColor(n,a){var i=Math.round,o=parseInt(n.slice(1),16),r=0>a?0:255,t=0>a?-1*a:a,l=o>>16,s=255&o>>8,d=255&o;return"#"+(16777216+65536*(i((r-l)*t)+l)+256*(i((r-s)*t)+s)+(i((r-d)*t)+d)).toString(16).slice(1)}_validateColumnData(t){const n=this,a=[],i=n.data;let o={},l;for(let n=0;n<i.length;n++)a.push(i[n][t]);if("colorScale"===n.condition||"iconSet"===n.condition)return n._applyColorScale(a);if("colorBar"===n.condition)return n._applyColorBar(a);if(l=n._applyRule(a),!!l){if(!n.color)return void console.warn("No color is provided. \"color\" property is not set.");for(let t=0;t<l.length;t++)o[l[t]]=n._getCellStyle(n.color);return o}}}),Smart.Utilities.Assign("TickIntervalHandler",class{constructor(t,n,a,i,o,r,l){const s=this;s.context=t,s.minLabel=n,s.maxLabel=a,s.labelClass=i,s.dimension=o,s.logarithmic=l,s.labelsSize=t.customInterval?0<t.customTicks.length?s.getCustomTicksLabelSize():{minLabelSize:0,minLabelOtherSize:0,maxLabelSize:0,maxLabelOtherSize:0}:s.getMinAndMaxLabelSize(),r?(s.getNiceInterval=s.getNiceIntervalInteger,s.getPossibleBiggerLabel=s.getPossibleBiggerLabelInteger):(s.getNiceInterval=s.getNiceIntervalFloatingPoint,s.getPossibleBiggerLabel=s.getPossibleBiggerLabelFloatingPoint)}getInterval(t,n,a,i){var o=Math.max;const r=this.context,l=r._measurements.innerRadius;let s=1,d;"radial"===t?(d=o(this.labelsSize.minLabelSize,this.labelsSize.minLabelOtherSize,this.labelsSize.maxLabelSize,this.labelsSize.maxLabelOtherSize),s=1.35):(d=o(this.labelsSize.minLabelSize,this.labelsSize.maxLabelSize),s=1.45),d*=s;let c;c="radial"===t?function(){let t=2*Math.PI*l*(Math.abs(r.startAngle-r.endAngle)/360);return Math.round(t)}():r[this.dimension]-this.labelsSize.minLabelSize/2-this.labelsSize.maxLabelSize/2,c=o(10,c);const m=Math.ceil(c/d),p="radial"===t?4*m:3*m;let u=this.getNiceInterval(n,a,m,!0),g=this.getNiceInterval(n,a,p);if(r._cachedLabelsSize=this.labelsSize,2<m&&!r.customInterval){const l=this.getPossibleBiggerLabel(m,u);if(l.length>o(this.minLabel.length,this.maxLabel.length)){const o=this.minLabel;this.minLabel=l,this.labelsSize=this.getMinAndMaxLabelSize(),r._cachedLabelsSize=this.labelsSize;const s=this.getInterval(t,n,a,i);return this.minLabel=o,this.labelsSize=this.getMinAndMaxLabelSize(),s}}return{major:u,minor:g}}getNiceIntervalFloatingPoint(t,n,a,i){var o=Math.log10;const r=n-t,l=Math.floor(o(r)-o(a));let s=Math.pow(10,l),d=a*s,c;c=r<2*d?1:r<3*d?2:r<7*d?5:10;let m=c*s;return i&&this.context._range/m>a&&(5===c?c=10:2===c?c=5:1===c?c=2:void 0,m=c*s),this.nearestPowerOfTen=s,this.logarithmic&&i?Math.max(1,m):m}getPossibleBiggerLabelFloatingPoint(t,n){var a=Math.pow;const o=this.context;let i=parseFloat(o.min-o._numericProcessor.getPreciseModulo(parseFloat(o.min),n)+parseFloat(n)),r=i,l,s;this.logarithmic&&(i=a(10,i)),l=o._formatLabel(i);for(let d=1;d<t&&(r+=n,!(r>=o._drawMax));d++)s=this.logarithmic?a(10,r):r,s=o._formatLabel(s),s.length>l.length&&(l=s);return l}getNiceIntervalInteger(t,n,a,i){var o=Math.log10;const r=new Smart.Utilities.BigNumber(n).subtract(new Smart.Utilities.BigNumber(t)),l=Math.floor(o(r.toString())-o(a)),s=new Smart.Utilities.BigNumber(10).pow(new Smart.Utilities.BigNumber(l)),d=new Smart.Utilities.BigNumber(a).multiply(s);let c=-1===r.compare(new Smart.Utilities.BigNumber(2*d))?1:-1===r.compare(new Smart.Utilities.BigNumber(3*d))?2:-1===r.compare(new Smart.Utilities.BigNumber(7*d))?5:10;let m=new Smart.Utilities.BigNumber(c).multiply(s);return i&&1===new Smart.Utilities.BigNumber(this.context._range).divide(m).compare(a)&&(5===c?c=10:2===c?c=5:1===c?c=2:void 0,m=new Smart.Utilities.BigNumber(c).multiply(s)),-1===m.compare(1)&&(m=new Smart.Utilities.BigNumber(1)),this.nearestPowerOfTen=s,m}getPossibleBiggerLabelInteger(t,n){const a=this.context,o=new Smart.Utilities.BigNumber(10);let i=new Smart.Utilities.BigNumber(a.min).subtract(new Smart.Utilities.BigNumber(a.min).mod(n)).add(n),r=i,l,s;this.logarithmic&&(i=o.pow(i)),l=a._formatLabel(i);for(let d=1;d<t&&(r=r.add(n),-1===r.compare(a._drawMax));d++)s=this.logarithmic?o.pow(r):r,s=a._formatLabel(s),s.length>l.length&&(l=s);return l}getMinAndMaxLabelSize(){const t=this,n=t.context,a=n.$.container,i=document.createElement("span");i.className=t.labelClass,i.style.position="absolute",i.style.visibility="hidden",a.appendChild(i),i.innerHTML=t.minLabel;const o=i[t.dimension],r=i[n._settings.otherSize];i.innerHTML=t.maxLabel;const l=i[t.dimension],s=i[n._settings.otherSize];return a.removeChild(i),{minLabelSize:o,minLabelOtherSize:r,maxLabelSize:l,maxLabelOtherSize:s}}getCustomTicksLabelSize(){const t=this,n=t.context,a=n.$.container,o=document.createElement("span"),i=n.customTicks;o.className=t.labelClass,o.style.position="absolute",o.style.visibility="hidden",a.appendChild(o),o.innerHTML=n._formatLabel(i[0]);let r=o[t.dimension],l=o[n._settings.otherSize];for(let a=1;a<n.customTicks.length;a++){o.innerHTML=n._formatLabel(n.customTicks[a]);const i=o[t.dimension],s=o[n._settings.otherSize];i>r&&(r=i),s>l&&(l=s)}return a.removeChild(o),{minLabelSize:r,minLabelOtherSize:l,maxLabelSize:r,maxLabelOtherSize:l}}}),Smart("smart-button",class extends Smart.ContentElement{static get properties(){return{value:{type:"string"},name:{type:"string"},type:{type:"string"},clickMode:{allowedValues:["hover","press","release","pressAndRelease"],type:"string",value:"release"}}}static get styleUrls(){return["smart.button.css"]}template(){return"<button class='smart-button' inner-h-t-m-l='[[innerHTML]]' id='button' type='[[type]]' name='[[name]]' value='[[value]]' disabled='[[disabled]]' role='button'></button>"}static get listeners(){return{"button.down":"_downHandler","button.mouseenter":"_mouseEnterHandler","button.mouseleave":"_mouseLeaveHandler","button.touchend":"_touchEndHandler","button.click":"_clickHandler","button.up":"_upHandler",up:"_upHandler","button.focus":"_focusHandler","button.blur":"_blurHandler"}}_upHandler(t){const n=this;t.stopPropagation(),n.$.setAttributeValue("active",!1)}_focusHandler(){const t=this;t.$.setAttributeValue("focus",!0)}_blurHandler(){const t=this;t.$.setAttributeValue("focus",!1)}_clickHandler(t){const n=this;("release"!==n.clickMode&&"pressAndRelease"!==n.clickMode||n.readonly)&&(t.preventDefault(),t.stopPropagation())}_downHandler(t){const n=this;if(!n.disabled&&(n.enableShadowDOM||t.originalEvent.stopPropagation(),n.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(n,t.pageX,t.pageY),n.$.setAttributeValue("active",!0),("press"===n.clickMode||"pressAndRelease"===n.clickMode)&&!n.readonly)){const a="buttons"in t?t.buttons:t.which;n.$.fireEvent("click",{buttons:a,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY})}}_mouseEnterHandler(t){const n=this;if(!n.readonly&&(n.$button.setAttributeValue("hover",!0),n.$.setAttributeValue("hover",!0),"hover"===n.clickMode)){const a="buttons"in t?t.buttons:t.which;n.$.fireEvent("click",{buttons:a,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY})}}_touchEndHandler(){const t=this;setTimeout(function(){t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)},300)}_mouseLeaveHandler(){const t=this;t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;"disabled"===t?(i._setFocusable(),i.$button&&i.$button.setAttributeValue("hover",!1),i.$.setAttributeValue("hover",!1),i instanceof Smart.RepeatButton&&i._stopRepeat()):"unfocusable"==t&&i._setFocusable()}_setFocusable(){const t=this,n=t.$.button?t.$.button:t;return t.disabled||t.unfocusable?(n.removeAttribute("tabindex"),void(n.tabIndex=-1)):void(n.tabIndex=0<t.tabIndex?t.tabIndex:0)}ready(){const t=this;super.ready(),t._setFocusable()}}),Smart("smart-repeat-button",class extends Smart.Button{static get properties(){return{delay:{value:50,type:"number"},initialDelay:{value:150,type:"number"}}}static get listeners(){return{"button.mousedown":"_startRepeat","button.mouseenter":"_updateInBoundsFlag","button.mouseleave":"_updateInBoundsFlag","document.mouseup":"_stopRepeat"}}_clickHandler(t){const n=this;("release"!==n.clickMode||n.preventDefaultClick||n.readonly||n.disabled)&&(t.preventDefault(),t.stopPropagation(),n.preventDefaultClick=!1)}_updateInBoundsFlag(t){const n=this;n._isPointerInBounds=!0,"mouseleave"===t.type?(n._isPointerInBounds=!1,n.$button.setAttributeValue("hover",!1),n.$.setAttributeValue("hover",!1)):(n.$button.setAttributeValue("hover",!0),n.$.setAttributeValue("hover",!0));const a="buttons"in t?t.buttons:t.which;1!==a&&n._stopRepeat(t)}_startRepeat(t){const n=this;n._initialTimer||n.readonly||(n._initialTimer=setTimeout(function(){n._repeatTimer=setInterval(()=>{if(n._isPointerInBounds){const a="buttons"in t?t.buttons:t.which;n.$.fireEvent("click",{buttons:a,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY}),n.preventDefaultClick=!0}},n.delay)},n.initialDelay))}_stopRepeat(){const t=this;t.readonly||(t.$.setAttributeValue("active",!1),t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null))}}),Smart("smart-toggle-button",class extends Smart.Button{static get properties(){return{checked:{value:!1,type:"boolean?"},falseContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminate:{value:!1,type:"boolean"},trueContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateTemplate:{value:null,type:"any"},trueTemplate:{value:null,type:"any"},falseTemplate:{value:null,type:"any"},type:{value:"toggle",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}static get listeners(){return{keydown:"_keyHandler",keyup:"_keyHandler",dragstart:"_dragStartHandler","button.click":"_buttonClickHandler","button.mouseenter":"_buttonMouseEnterHandler","button.mouseleave":"_buttonMouseLeaveHandler","document.up":"_documentUpHandler"}}ready(){super.ready()}_buttonClickHandler(){}_buttonMouseLeaveHandler(){const t=this;t.removeAttribute("hover")}_buttonMouseEnterHandler(){const t=this;t.setAttribute("hover","");t.disabled||t.readonly||"hover"!==t.clickMode||(t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue())}_documentUpHandler(){const t=this;t._pressed&&(t._pressed=!1,t.disabled||t.readonly||"press"===t.clickMode||(t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()))}_downHandler(t){const n=this;n.disabled||n.readonly||(n.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(n,t.pageX,t.pageY),n._pressed=!0,("press"===n.clickMode||"pressAndRelease"===n.clickMode)&&(n._changeCheckState("pointer"),n.$.fireEvent("click"),n._updateHidenInputNameAndValue()),"press"===n.clickMode&&(t.preventDefault(),t.stopPropagation()))}_dragStartHandler(t){t.preventDefault()}_keyHandler(t){const n=this;if(!0!==n.disabled&&!n.readonly&&32===t.keyCode){if("keydown"===t.type)return void t.preventDefault();if("none"===n.switchMode)return;n._changeCheckState("keyboard"),n._updateHidenInputNameAndValue()}}_changeCheckState(t){const n=this;let a=null;null===n.checked?n.checked=!0:(a=n.checked,n.checked=!n.checked),n._handleTextSelection(),n.$.fireEvent("change",{value:n.checked,oldValue:a,changeType:t})}_handleTextSelection(){const t=this;t.$.addClass("smart-unselectable"),t.timer&&clearTimeout(t.timer),t.timer=setTimeout(()=>t.$.removeClass("smart-unselectable"),500)}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;"checked"===t&&i.$.fireEvent("change",{value:a,oldValue:n,changeType:"api"});"trueTemplate"===t?i._handleTemplate(!0):"falseTemplate"===t?i._handleTemplate(!1):"indeterminateTemplate"===t?i._handleTemplate():void 0}_htmlBindOnInitialization(){const t=this;t._bindContentProperty("trueContent","smart-true-content"),t._bindContentProperty("falseContent","smart-false-content"),t._bindContentProperty("indeterminateContent","smart-indeterminate-content")}_bindContentProperty(t,n){const a=this;if(!a.$[t+"Container"])return;let i=document.createElement("div");i.innerHTML=a.innerHTML;let o=i.getElementsByClassName(n),r;if(0<o.length)for(let t=0;t<o.length;t++)r=o[t];""===a[t]&&(a[t]=r===void 0?"":r.outerHTML),a.$[t+"Container"].innerHTML=a[t]}_updateContentProperties(){function t(t){n.$[t+"Container"]&&(n[t]=n.$[t+"Container"].innerHTML)}const n=this;t("trueContent"),t("falseContent"),t("indeterminateContent")}_updateHidenInputValue(){const t=this;if(!t.$.hiddenInput)return;let n;n=null===t.checked?"null":!1===t.checked?"off":t.value||"on",t.$.hiddenInput.setAttribute("value",n)}_updateHidenInputName(){const t=this;if(t.$.hiddenInput){let n=!1===t.checked?"":t.name||"";t.$.hiddenInput.setAttribute("name",n)}}_updateHidenInputNameAndValue(){const t=this;t._updateHidenInputName(),t._updateHidenInputValue()}_handleTemplate(t,n){const a=this;let i,o,r;if(!0===t?(i=a.trueTemplate,o=a.$.trueContentContainer,r=a.trueContent):!1===t?(i=a.falseTemplate,o=a.$.falseContentContainer,r=a.falseContent):(i=a.indeterminateTemplate,o=a.$.indeterminateContentContainer,r=a.indeterminateContent),n&&(o.innerHTML=r?r:""),null===i||!i)return;if("function"==typeof i)return void i(o,{value:r});if(!("content"in document.createElement("template")))return void a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()}));if(i=document.getElementById(i),null===i||!("content"in i))return void a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:"template"}));const l=i.content,s=l.childNodes.length,d=/{{\w+}}/g;let c=[],m;for(let a=0;a<s;a++)for(m=d.exec(l.childNodes[a].innerHTML);m;)c.push({childNodeIndex:a,bindingString:m[0]}),m=d.exec(l.childNodes[a].innerHTML);const p=c.length;let u=document.importNode(i.content,!0),g,h;for(let a=0;a<p;a++){g=u.childNodes[c[a].childNodeIndex],h=c.length;for(let t=0;t<h;t++)g.innerHTML=g.innerHTML.replace(c[a].bindingString,r)}o.innerHTML="";for(let a=0;a<u.childNodes.length;a++)u.childNodes[a].outerHTML&&(o.innerHTML+=u.childNodes[a].outerHTML)}}),Smart("smart-breadcrumb",class extends Smart.BaseElement{static get properties(){return{addNewItem:{value:!1,type:"boolean"},allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},closeButtons:{value:!1,type:"boolean"},dataSource:{value:[],type:"array",reflectToAttribute:!1},itemTemplate:{value:null,type:"any"},minimizeWidth:{value:150,type:"number?"}}}static get listeners(){return{move:"_moveHandler",resize:"_resizeHandler","container.click":"_containerClickHandler","container.down":"_containerDownHandler","container.transitionend":"_containerTransitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}template(){return`<div id="container">
                    <div id="minimizedHeader" class="smart-header smart-minimized-header smart-hidden">
                        <div id="hamburgerIcon" class="smart-hamburger-icon">
                            <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top"></div>
                            <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center"></div>
                            <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom"></div>
                        </div>
                    </div>
                    <template>
                        <div id="itemsContainer" class="smart-breadcrumb-items" *items={{dataSource}}>
                            <div class="smart-breadcrumb-item">
                                <div class="smart-breadcrumb-item-label" inner-H-T-M-L={{item.label}}></div>
                                <div class="smart-close-button">&#xe81f</div>
                            </div>
                        </div>
                    </template>
                </div>`}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const o=this;switch(t){case"addNewItem":a?o._appendNewItemButton():(o.$.templateContainer.firstElementChild.removeChild(o._addNewItemButton),delete o._addNewItemButton),o._setIndentation();break;case"animation":case"disabled":case"unfocusable":o.addNewItem&&(o._addNewItemButton[t]=a),"disabled"===t&&o._minimizedDropDownOpened&&o._hamburgerIconClickHandler();break;case"itemTemplate":for(let t=0;t<o._items.length;t++)o._items[t].firstElementChild.innerHTML=o.dataSource[t].label;a&&o._applyTemplate();break;case"minimizeWidth":null!==a&&o.offsetWidth<=a?o.minimize():o.maximize();break;case"closeButtons":o._minimized||o._setIndentation();}}ready(){super.ready();const t=this;t._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),t.templateContainer=t.$.container.children[1],null!==t.minimizeWidth&&t.offsetWidth<=t.minimizeWidth&&t.minimize()}templateAttached(){this._handleDataSourceRefresh()}addItem(t){const n=this,a=n.dataSource.slice(0);!t||"object"!=typeof t||isNaN(t.index)||0>t.index||(a.splice(t.index,0,{label:t.label,value:t.value}),n.dataSource=a)}maximize(){const t=this;t._minimized&&(t.$minimizedHeader.addClass("smart-hidden"),t.templateContainer.classList.remove("smart-visibility-hidden"),t._edgeMacFF&&t.templateContainer.classList.remove("not-in-view"),t.$hamburgerIcon.removeClass("smart-close-button"),t.removeAttribute("minimized"),t._minimizedDropDownOpened=!1,t._minimized=!1,t._setIndentation())}minimize(){const t=this;if(t._minimized)return;const n=t.animation,a=t.hasAnimation;a&&(t.animation="none"),t.$minimizedHeader.removeClass("smart-hidden"),t.templateContainer.classList.add("smart-visibility-hidden"),t._edgeMacFF&&t.templateContainer.classList.add("not-in-view"),a&&setTimeout(function(){t.animation=n},0),t.setAttribute("minimized",""),t._minimized=!0,t._setIndentation()}removeItem(t){const n=this,a=n._items.indexOf(t),i=n.dataSource.slice(0);-1===a||(i.splice(a,1),n.dataSource=i)}_moveHandler(t){"touchmove"===t.originalEvent.type&&t.originalEvent.preventDefault()}_resizeHandler(){const t=this;null!==t.minimizeWidth&&t.offsetWidth<=t.minimizeWidth?t.minimize():t._minimized?t.maximize():t._setIndentation()}_containerClickHandler(t){const n=this;if(!n.disabled&&n.templateContainer.contains(t.target)){const a=t.target.closest(".smart-close-button");if(a){const t=a.closest(".smart-breadcrumb-item"),i=n.$.fireEvent("closing",{item:t});if(!i.defaultPrevented){const a=n.dataSource.slice(0);a.splice(n._items.indexOf(t),1),n.dataSource=a,n.$.fireEvent("close",{item:t})}}}}_containerDownHandler(t){const n=this,a=t.originalEvent.target;if(!(!n.allowDrag||n.disabled||a.classList.contains("smart-close-button"))){const i=a.closest(".smart-breadcrumb-item");i&&(n._dragDetails={item:i,x:t.pageX,y:t.pageY})}}_containerTransitionendHandler(t){const n=this;n._edgeMacFF&&t.target===n.templateContainer&&!n._minimizedDropDownOpened&&n.hasAnimation&&n.templateContainer.classList.add("not-in-view")}_hamburgerIconClickHandler(){const t=this;t._minimizedDropDownOpened?(t.$hamburgerIcon.removeClass("smart-close-button"),t.templateContainer.classList.add("smart-visibility-hidden"),t._minimizedDropDownOpened=!1):(t.$hamburgerIcon.addClass("smart-close-button"),t._edgeMacFF&&t.templateContainer.classList.remove("not-in-view"),t.templateContainer.classList.remove("smart-visibility-hidden"),t._minimizedDropDownOpened=!0)}_documentMoveHandler(t){var n=Math.abs;const a=this,i=a._dragDetails;if(!i)return;let o=i.feedback;if(t.originalEvent.preventDefault(),!o)if(5<n(i.x-t.pageX)||5<n(i.y-t.pageY))o=document.createElement("div"),o.className="smart-breadcrumb-feedback",o.style.height=a._dragDetails.item.offsetHeight+"px",o.innerHTML=a._dragDetails.item.firstElementChild.innerHTML,document.body.appendChild(o),i.feedback=o,a._getItemCoordinates();else return;const r=Smart.Utilities.Core.isMobile?document.elementFromPoint(t.clientX,t.clientY):t.originalEvent.target;if(o.style.left=t.pageX+10+"px",o.style.top=t.pageY+10+"px",!a.allowDrop)return o.classList.add("error"),void a.$.fireEvent("dragging",{item:i.item,target:r,originalEvent:t.originalEvent});if(delete i.target,a._clearItemDragClass(),!a.contains(r))return o.classList.add("error"),void a.$.fireEvent("dragging",{item:i.item,target:r,originalEvent:t.originalEvent});let l=r.closest(".smart-breadcrumb-item");if(l)return void a._applyItemDragClass(l,l.getBoundingClientRect(),t);if(a._minimized)return o.classList.add("error"),void a.$.fireEvent("dragging",{item:i.item,target:r,originalEvent:t.originalEvent});if(a.contains(r)){const n=a._itemCoordinates.rows,o=a._itemCoordinates.coordinates,l=parseFloat(window.getComputedStyle(a).getPropertyValue("--smart-breadcrumb-padding"))/2;let s;for(let a=0;a<n.length;a++)if(t.clientY<n[a].bottom+l){s=a;break}if(void 0===s)return i.feedback.classList.add("error"),void a.$.fireEvent("dragging",{item:i.item,target:r,originalEvent:t.originalEvent});let d=a._items[o[s][o[s].length-1].index],c;for(let n=0;n<o[s].length;n++)if(c=o[s][n].rect,t.clientX<c.right+l){d=a._items[o[s][n].index];break}return void a._applyItemDragClass(d,c,t)}}_getItemCoordinates(){const t=this,n=t._items,a=[[]],o=[];let r=n[0].offsetTop,l=0;a[0].push({index:0,rect:n[0].getBoundingClientRect()}),o[0]={top:a[0][0].rect.top,bottom:a[0][0].rect.bottom};for(let t=1;t<n.length;t++){const i=n[t],s=i.getBoundingClientRect(),d=n[t].offsetTop;d>r&&(r=d,l++,a[l]=[],o[l]={top:s.top,bottom:s.bottom}),a[l].push({index:t,rect:s})}t._itemCoordinates={coordinates:a,rows:o}}_applyItemDragClass(t,n,a){const i=this,o=i._dragDetails;let r,l,s;o.target=t,o.feedback.classList.remove("error"),o.before=!1,i._minimized?(r=a.clientY,l="top",s="height"):(r=a.clientX,l="left",s="width"),r<=n[l]+n[s]/2?(t.classList.add("target"),o.before=!0):t.nextElementSibling?t.nextElementSibling.classList.add("target"):t.classList.add("afterTarget"),i.$.fireEvent("dragging",{item:o.item,target:t,originalEvent:a.originalEvent})}_clearItemDragClass(){const t=this.querySelector(".target, .afterTarget");t&&(t.classList.remove("target"),t.classList.remove("afterTarget"))}_documentUpHandler(t){const n=this,a=n._dragDetails;if(a&&(delete n._dragDetails,a.feedback)){if(document.body.removeChild(a.feedback),n._clearItemDragClass(),!n.allowDrop)return;if(!a.target||a.item===a.target)return void n.$.fireEvent("dragEnd",{item:a.item,target:a.target||!Smart.Utilities.Core.isMobile?t.originalEvent.target:document.elementFromPoint(t.clientX,t.clientY),originalEvent:t.originalEvent});const i=n._items.slice(0),o=i.indexOf(a.item),r=n.dataSource.slice(0),l=r.splice(o,1);i.splice(o,1);const s=i.indexOf(a.target)+(a.before?0:1);o!==s&&(r.splice(s,0,l[0]),n.dataSource=r),n.$.fireEvent("dragEnd",{item:a.item,target:a.target,droppedBeforeTarget:a.before,originalEvent:t.originalEvent})}}_handleDataSourceRefresh(){const t=this;t._items=Array.from(t.$.templateContainer.firstElementChild.children),t.addNewItem&&t._appendNewItemButton(),t._applyTemplate(),t._setIndentation()}_appendNewItemButton(){const t=this,n=document.createElement("smart-button");n.innerHTML="+",n.animation=t.animation,n.disabled=t.disabled,n.unfocusable=t.unfocusable,n.addEventListener("click",function(){t.$.fireEvent("addNewItem")}),t.$.templateContainer.firstElementChild.appendChild(n),t._addNewItemButton=n}_setIndentation(){const t=this,n=t._items.slice(0);if(t._addNewItemButton&&n.push(t._addNewItemButton),0===n.length)return;let a=n[0].offsetTop,o=0;if(n.forEach(function(t){t.style.marginLeft=null}),!t._minimized)for(let t=1;t<n.length;t++){const i=n[t],r=n[t].offsetTop;r>a&&(a=r,o++,i.style.marginLeft=10*o+"px")}}_applyTemplate(){const t=this,n=t.itemTemplate;if(null===n)return;let a;if(a=n instanceof HTMLTemplateElement?n:document.getElementById(n),null!==a&&a instanceof HTMLTemplateElement){const n=document.importNode(a.content,!0),i=document.createElement("div");i.appendChild(n);const o=i.innerHTML;for(let n=0;n<t._items.length;n++){const a=t.dataSource,i=a[n].label,r=a[n].value,l=t._items[n].firstElementChild;l.innerHTML=o.replace(/{{label}}/g,i).replace(/{{value}}/g,r)}}}}),Smart("smart-check-box",class extends Smart.ToggleButton{static get properties(){return{checkMode:{value:"both",allowedValues:["both","input","label"],type:"string"},type:{value:"checkbox",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}template(){return`<div id='container' class='smart-container'>
                 <div class ='smart-overlay'></div>
                 <span id='checkBoxInput' class ='smart-input'></span>
                 <span id='checkBoxLabel' inner-h-t-m-l='[[innerHTML]]' class ='smart-label'><content></content></span>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}static get listeners(){return{down:"_downHandler","document.up":"_documentUpHandler","checkBoxInput.mouseenter":"_mouseEnterHandler","checkBoxInput.mouseleave":"_mouseLeaveHandler",focus:"_focusHandler",blur:"_blurHandler"}}static get styleUrls(){return["smart.checkbox.css"]}_focusHandler(){const t=this;t.$.setAttributeValue("focus",!0)}_blurHandler(){const t=this;t.$.setAttributeValue("focus",!1)}_mouseEnterHandler(){const t=this;t.$.setAttributeValue("hover",!0)}_mouseLeaveHandler(){const t=this;t.$.setAttributeValue("hover",!1)}ready(){const t=this;super.ready(),t.indeterminate&&(t._valueCashe=t.checked,t.checked=null),t._updateHidenInputNameAndValue()}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;i._updateContentProperties();"indeterminate"===t?(a?(i._valueCashe=i.checked,i.checked=null):i.checked=i._valueCashe,i._updateHidenInputNameAndValue()):"value"===t?i._updateHidenInputNameAndValue():"checked"===t?i._updateHidenInputNameAndValue():"name"===t?i._updateHidenInputName():void 0}_documentUpHandler(t){const n=this,a=n.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(n._pressed)return n._pressed=!1,n.$.setAttributeValue("active",!1),n.disabled||n.readonly||"input"===n.checkMode&&a!==n.$.checkBoxInput||"label"===n.checkMode&&a!==n.$.checkBoxLabel?void 0:"press"===n.clickMode?(t.preventDefault(),void t.stopPropagation()):void(n._changeCheckState("pointer"),n.focus(),n._handleTextSelection(),n._updateHidenInputNameAndValue())}_downHandler(t){const n=this,a=n.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(!(n.disabled||n.readonly||"input"===n.checkMode&&a!==n.$.checkBoxInput||"label"===n.checkMode&&a!==n.$.checkBoxLabel)){if(n.$.setAttributeValue("active",!0),n.hasRippleAnimation){const t=n.$.checkBoxInput.getBoundingClientRect(),a=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset;Smart.Utilities.Animation.Ripple.animate(n.$.checkBoxInput,t.left+t.width/2+a,t.top+t.height/2+i)}n._pressed=!0,("press"===n.clickMode||"pressAndRelease"===n.clickMode)&&(n._changeCheckState("pointer"),n.$.fireEvent("click"),n.focus(),n._updateHidenInputNameAndValue())}}}),Smart("smart-led",class extends Smart.ToggleButton{static get properties(){return{shape:{value:"round",allowedValues:["round","square"],type:"string"}}}static get styleUrls(){return["smart.led.css"]}template(){return`<div id='container' class='smart-container'>
                 <div id='ledAnimation' class ='smart-animation'></div>
                 <div id='button' class='smart-input'>
                    <span id='falseContentContainer' inner-h-t-m-l='[[falseContent]]' class ='smart-false-content-container'></span>
                    <span id='indeterminateContentContainer' inner-h-t-m-l='[[indeterminateContent]]' class ='smart-indeterminate-content-container'></span>
                    <span id='trueContentContainer' inner-h-t-m-l='[[trueContent]]' class ='smart-true-content-container'></span>
                 </div>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}ready(){const t=this;super.ready(),t._htmlBindOnInitialization(),t.indeterminate&&(t._valueCashe=t.checked,t.checked=null),t._handleTemplate(!0),t._handleTemplate(!1),t._handleTemplate(),t._updateHidenInputNameAndValue()}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;"indeterminate"===t?(a?(i._valueCashe=i.checked,i.checked=null):i.checked=i._valueCashe,i._updateHidenInputNameAndValue()):"trueContent"===t?(i.trueContent=a,i._handleTemplate(!0)):"falseContent"===t?(i.falseContent=a,i._handleTemplate(!1)):"indeterminateContent"===t?(i.indeterminateContent=a,i._handleTemplate()):"value"===t?i._updateHidenInputNameAndValue():"checked"===t?i._updateHidenInputNameAndValue():"name"===t?i._updateHidenInputName():void 0}_documentUpHandler(t){const n=this;return!n._pressed||n.readonly?void 0:"press"===n.clickMode?(t.preventDefault(),t.stopPropagation(),void(n._pressed=!1)):void(super._documentUpHandler(t),n.indeterminate=!1,n._updateHidenInputNameAndValue(),n._pressed=!1)}_mouseDownHandler(){const t=this;t.readonly||t.disabled||(t._pressed=!0,("press"===t.clickMode||"pressAndRelease"===t.clickMode)&&(t._changeCheckState("pointer"),t.$.fireEvent("click"),t.indeterminate=!1,t._updateHidenInputNameAndValue()))}}),Smart("smart-power-button",class extends Smart.ToggleButton{static get styleUrls(){return["smart.powerbutton.css"]}template(){return`<div id='container' class='smart-container'>
                 <div id='powerButtonAnimation' class ='smart-animation'></div>
                 <span id='button' class ='smart-input'></span>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}ready(){const t=this;super.ready(),t._updateHidenInputNameAndValue()}}),Smart("smart-radio-button",class extends Smart.ToggleButton{static get properties(){return{checkMode:{value:"both",allowedValues:["both","input","label"],type:"string"},type:{value:"radio",type:"string",defaultReflectToAttribute:!0,readonly:!0},groupName:{value:"",type:"string"}}}template(){return`<div  id='container' class='smart-container'>
                 <div class ='smart-overlay'></div>
                 <span id='radioButtonInput' class ='smart-input'></span>
                 <span id='radioButtonLabel' inner-h-t-m-l='[[innerHTML]]' class ='smart-label'><content></content></span>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}static get listeners(){return{down:"_downHandler","document.up":"_documentUpHandler",mouseenter:"_elementMouseEnterHandler","radioButtonInput.mouseenter":"_radioMouseEnterHandler","radioButtonInput.mouseleave":"_radioMouseLeaveHandler",focus:"_focusHandler",blur:"_blurHandler"}}static get styleUrls(){return["smart.radiobutton.css"]}_radioMouseEnterHandler(){const t=this;t.$.setAttributeValue("hover",!0)}_radioMouseLeaveHandler(){const t=this;t.$.setAttributeValue("hover",!1)}_focusHandler(){const t=this;t.$.setAttributeValue("focus",!0)}_blurHandler(){const t=this;t.$.setAttributeValue("focus",!1)}_mouseEnterHandler(){const t=this;t.$.setAttributeValue("hover",!0)}_mouseLeaveHandler(){const t=this;t.$.setAttributeValue("hover",!1)}ready(){const t=this;super.ready(),t._handleMultipleCheckedInstances(),t._updateHidenInputNameAndValue()}_downHandler(t){const n=this,a=n.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(!(n.disabled||n.readonly||"input"===n.checkMode&&a!==n.$.radioButtonInput||"label"===n.checkMode&&a!==n.$.radioButtonLabel)){if(n.$.setAttributeValue("active",!0),n.hasRippleAnimation){const t=n.$.radioButtonInput.getBoundingClientRect(),a=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset;Smart.Utilities.Animation.Ripple.animate(n.$.radioButtonInput,t.left+t.width/2+a,t.top+t.height/2+i)}return n._preventAction?void(n._preventAction=!1):void(("release"===n.clickMode||"pressAndRelease"===n.clickMode)&&(n._pressed=!0),("press"===n.clickMode||"pressAndRelease"===n.clickMode)&&("pressAndRelease"===n.clickMode&&(""===n.groupName?n._checkedBeforeChange=n.parentNode.querySelector("smart-radio-button[checked]"):n._checkedBeforeChange=document.querySelector("smart-radio-button[group-name=\""+n.groupName+"\"][checked]")),n._handleMouseInteraction()))}}_elementMouseEnterHandler(){const t=this;"hover"!==t.clickMode||t.disabled||t.readonly||t._handleMouseInteraction()}_documentUpHandler(t){const n=this,a=n.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;!n._pressed||n.disabled||n.readonly||"input"===n.checkMode&&a!==n.$.radioButtonInput||"label"===n.checkMode&&a!==n.$.radioButtonLabel||("release"===n.clickMode?n._handleMouseInteraction():(null===n._checkedBeforeChange?(n.$.fireEvent("change",{value:!1,oldValue:!0,changeType:"pointer"}),n.checked=!1):n._checkedBeforeChange._changeCheckState("pointer"),n.focus(),n._updateHidenInputNameAndValue()),n.$.setAttributeValue("active",!1),n._pressed=!1)}_handleMouseInteraction(){const t=this;t._handleTextSelection(),t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()}_handleMultipleCheckedInstances(){const t=this,n=Array.from(document.querySelectorAll("smart-radio-button[group-name=\""+t.groupName+"\"][checked]")),a=n.length;2>a||n.forEach((t,n)=>n<a-1&&(t.checked=!1))}_changeCheckState(t){const n=this;let a=document.querySelectorAll("smart-radio-button[group-name=\""+n.groupName+"\"]");if(!0===n.checked&&"api"===t||!1===n.checked)if(0<a.length)n._changeCheckStateInGroup(a,t);else{let i=n.parentNode;a=i.querySelectorAll("smart-radio-button:not([group-name])"),n._changeCheckStateInGroup(a,t)}}_changeCheckStateInGroup(t,n){const a=this;for(let o=0;o<t.length;o++)t[o]._isUpdating=!0,t[o]===a?(a.checked=!0,a.$.fireEvent("change",{value:!0,oldValue:!1,changeType:n})):t[o].checked&&(t[o].checked=!1),t[o]._isUpdating=!1}propertyChangedHandler(t,n,a){const i=this;switch(t){case"value":i._updateHidenInputNameAndValue();break;case"checked":i._isUpdating||i._changeCheckState("api"),i._updateHidenInputNameAndValue();break;case"name":i._updateHidenInputName();break;default:super.propertyChangedHandler(t,n,a);}}}),Smart("smart-switch-button",class extends Smart.ToggleButton{static get properties(){return{inverted:{value:!1,type:"boolean"},orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},switchMode:{value:"default",allowedValues:["default","click","drag","none"],type:"string"},clickMode:{value:"release",allowedValues:["press","release","pressAndRelease"],type:"string"}}}static get listeners(){return{"container.down":"_mouseDownHandler","document.move":"_drag","document.up":"_switchThumbDropHandler",mouseenter:"_switchButtonOnMouseEnter",mouseleave:"_switchButtonOnMouseLeave",resize:"_resizeHandler","container.resize":"_resizeHandler","document.selectstart":"_selectStartHandler"}}template(){return`<div  id='container' class='smart-container'>
                    <div  id='innerContainer' class ='smart-inner-container'>
                           <span id='falseContentContainer' inner-h-t-m-l='[[falseContent]]' class ='smart-false-content-container'></span>
                           <span id='switchThumb' class ='smart-thumb'></span>
                           <span id='trueContentContainer' inner-h-t-m-l='[[trueContent]]' class ='smart-true-content-container'></span>
                    </div>
                    <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}ready(){const t=this;super.ready();let n=t.animation;t.hasAnimation&&(t.animation="none"),t._supportCSSVariables=Smart.Utilities.Core.CSSVariablesSupport()&&!!window.getComputedStyle(t.$.container).getPropertyValue("--smart-switch-button-default-width"),t._htmlBindOnInitialization(),t._resizeHandler(),t._initializePrivateVariables(),t._getContainersSizeAndBreakPoint(),t.indeterminate&&(t._valueCache=t.checked,t.checked=null),t._handleTemplate(!0),t._handleTemplate(!1),t._handleTemplate(),t._updateHidenInputNameAndValue(),t._updateThumbPosition(),t.animation=n}_mouseDownHandler(t){const n=this;n.disabled||n.readonly||"none"===n.switchMode||(t.originalEvent.target.closest(".smart-thumb")===n.$.switchThumb&&("default"===n.switchMode||"drag"===n.switchMode)&&n._switchThumbDragStartHandler(t),n._isSwitchClicked=n,n._updateContentProperties(),"release"!==n.clickMode&&"click"===n.switchMode&&(n._updateStateOnClick(),n.$.fireEvent("click"),n.indeterminate=!1,n._updateHidenInputNameAndValue()))}_updateStateOnClick(){const t=this;t._changeCheckState(),t.focus()}_drag(t){const n=this;n._mouseDown&&(Smart.Utilities.Core.isMobile&&t.originalEvent.preventDefault(),n._switchThumbDragHandler(t))}_switchThumbDragStartHandler(t){const n=this;n.disabled||("click"===n.switchMode&&"release"!==n.clickMode&&(t.preventDefault(),t.stopPropagation()),n._isInactiveOn("drag")||(n._mouseDown=!0,n._getContainersSizeAndBreakPoint(),n._pointerPosition="vertical"===n.orientation?t.pageY:t.pageX,t.preventDefault()))}_selectStartHandler(t){const n=this;n._mouseDown&&t.preventDefault()}_switchThumbDragHandler(t){var n=Math.max;const a=this;if(!a._isInactiveOn("drag")){if(!1===a._mouseDown)return void a._removeDragStyles();a.hasAttribute("dragged")||a.setAttribute("dragged","");let i=a.$.innerContainer,o=a.$.container.getBoundingClientRect(),r="vertical"===a.orientation?document.body.scrollTop||document.documentElement.scrollTop:document.body.scrollLeft||document.documentElement.scrollLeft,l="vertical"===a.orientation?o.top+r:o.left+r,s="vertical"===a.orientation?a._pointerPosition-i.offsetTop:a._pointerPosition-i.offsetLeft,d=a._pointerPosition>=l&&a._pointerPosition<=l+a._switchContainerSize;const c=-1*(a.offsetWidth-a.$.switchThumb.offsetWidth),m=-1*(a.offsetHeight-a.$.switchThumb.offsetHeight);if(a._pointerPosition="vertical"===a.orientation?t.pageY:t.pageX,d){let t=a._pointerPosition-s;t<-a._switchTrackLength&&(t=-a._switchTrackLength),0<t&&(t=0),"vertical"===a.orientation?a.$.innerContainer.style.top=n(m,t)+"px":a.$.innerContainer.style.left=n(c,t)+"px"}}}_switchThumbDropHandler(){const t=this;t.hasAttribute("dragged")?t._endDrag():t._isSwitchClicked&&t._endClick(),t._mouseDown=!1,delete t._isSwitchClicked}_endDrag(){const t=this;if(t.indeterminate=!1,t._updateHidenInputNameAndValue(),!t._isInactiveOn("drag")&&t._mouseDown){t.removeAttribute("dragged");let n="vertical"===t.orientation?t.$.innerContainer.offsetTop+t.$.switchThumb.offsetTop+t.$.switchThumb.clientHeight/2:t.$.innerContainer.offsetLeft+t.$.switchThumb.offsetLeft+t.$.switchThumb.clientWidth/2;const a=n>t._switchBreakPoint;null===t.checked?a?t._changeCheckState(t.inverted):t._changeCheckState(!t.inverted):!t.inverted==(a===t.checked)&&t._changeCheckState(!t.checked),t._removeDragStyles(),t._updateThumbPosition()}}_endClick(){const t=this;t._resizeHandler();t.disabled||t.readonly||t._isInactiveOn("click")||("release"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t._updateStateOnClick(),t.indeterminate=!1,t._updateHidenInputNameAndValue())}_switchButtonOnMouseEnter(){const t=this;t.disabled||t.readonly||t.$.addClass("hovered")}_switchButtonOnMouseLeave(){const t=this;t.disabled||t.readonly||t.$.removeClass("hovered")}_isInactiveOn(t){const n=this,a=n.disabled||n.readonly||n.switchMode!==t;return"default"!==n.switchMode&&a}_keyUpHandler(t){const n=this;n.disabled||n.readonly||32!==t.keyCode||"none"===n.switchMode||(n._getContainersSizeAndBreakPoint(),n._changeCheckState())}_initializePrivateVariables(){const t=this;t._switchContainerSize=t._switchTrackLength=t._switchBreakPoint=t._pointerPosition=0,t._mouseDown=!1}_changeCheckState(t){const n=this;let a=n.checked;return null===a&&void 0!==t?(n.$.fireEvent("change",{value:t,oldValue:null}),n.checked=t,void n._updateThumbPosition()):void(n.checked=!(null!==n.checked)||!n.checked,n._updateThumbPosition(),n.$.fireEvent("change",{value:n.checked,oldValue:a}),n._updateHidenInputNameAndValue())}_getContainersSizeAndBreakPoint(){const t=this;t._switchContainerSize="vertical"===t.orientation?t.$.container.clientHeight:t.$.container.clientWidth,t._switchTrackLength="vertical"===t.orientation?t._switchContainerSize-t.$.switchThumb.clientHeight:t._switchContainerSize-t.$.switchThumb.clientWidth,t._switchBreakPoint=t._switchContainerSize/2}_removeDragStyles(){const t=this;t._supportCSSVariables?t.$.innerContainer.removeAttribute("style"):t.$.innerContainer.style.left="",t._supportCSSVariables?t.$.innerContainer.removeAttribute("style"):t.$.innerContainer.style.top="",t._mouseDown=!1}propertyChangedHandler(t,n,a){const i=this;super.propertyChangedHandler(t,n,a),i._updateContentProperties();"indeterminate"===t?a?(i._valueCache=i.checked,i.checked=null):i.checked=i._valueCache:"trueContent"===t?i.trueContent=a:"falseContent"===t?i.falseContent=a:"orientation"===t?i._resizeHandler():void 0;i._getContainersSizeAndBreakPoint(),i._removeDragStyles(),i._resizeHandler()}_resizeHandler(){const t=this,n=window.getComputedStyle(t,null),a=parseInt(n.getPropertyValue("border-top-width")),i=parseInt(n.getPropertyValue("border-right-width")),o=parseInt(n.getPropertyValue("border-bottom-width")),r=parseInt(n.getPropertyValue("border-left-width")),l="vertical"===t.orientation?t.offsetHeight-(a+o):t.offsetWidth-(r+i);t._getContainersSizeAndBreakPoint(),t._supportCSSVariables?t.$.container.style.setProperty("--smart-switch-button-default-width",l+"px"):(t._innerContainerSize=l,t.$.innerContainer.style.height=t.$.innerContainer.style.width="",t.$.trueContentContainer.style.height=t.$.trueContentContainer.style.width="",t.$.falseContentContainer.style.height=t.$.falseContentContainer.style.width="","horizontal"===t.orientation?(t.$.innerContainer.style.setProperty("width",2*l-t.$.switchThumb.clientWidth+"px"),t.$.trueContentContainer.style.setProperty("width",t._switchTrackLength+"px"),t.$.falseContentContainer.style.setProperty("width",t._switchTrackLength+"px")):(t.$.innerContainer.style.setProperty("height",2*l-t.$.switchThumb.clientHeight+"px"),t.$.trueContentContainer.style.setProperty("height",t._switchTrackLength+"px"),t.$.falseContentContainer.style.setProperty("height",t._switchTrackLength+"px")),t._updateThumbPosition())}_updateThumbPosition(){const t=this;return t._supportCSSVariables||(t.inverted?!0===t.checked:!1===t.checked)||!t._innerContainerSize?void(t.$.innerContainer.style.left=t.$.innerContainer.style.top=""):void((t.inverted?!1===t.checked:t.checked)&&("horizontal"===t.orientation?(t.$.innerContainer.style.left=-1*(t._innerContainerSize-t.$.switchThumb.offsetWidth)+"px",t.$.innerContainer.style.top=""):(t.$.innerContainer.style.top=-1*(t._innerContainerSize-t.$.switchThumb.offsetHeight)+"px",t.$.innerContainer.style.left="")),null===t.checked&&("horizontal"===t.orientation?(t.$.innerContainer.style.left=-1*(t._innerContainerSize/2-t.$.switchThumb.offsetWidth/2)+"px",t.$.innerContainer.style.top=""):(t.$.innerContainer.style.top=-1*(t._innerContainerSize/2-t.$.switchThumb.offsetHeight/2)+"px",t.$.innerContainer.style.left="")))}}),Smart("smart-accordion-item",class extends Smart.ContentElement{static get properties(){return{dragged:{value:!1,type:"boolean"},expanded:{value:!1,type:"boolean"},focused:{value:!1,type:"boolean"},index:{value:null,type:"number?"},label:{value:"",type:"string"}}}get enableShadowDOM(){return!1}static get listeners(){return{"accordionItemHeader.mouseenter":"_headerMouseEnterHandler","accordionItemHeader.mouseleave":"_headerMouseLeaveHandler","accordionItemHeader.down":"_ripple"}}template(){return`<div id="container">
                    <div id="accordionItemHeader" class ="smart-accordion-item-header smart-unselectable">
                        <span id="arrow" class ="smart-arrow"></span>
                        <span id="label" class ="smart-label" inner-h-t-m-l='[[label]]'></span>
                    </div>
                    <div id="accordionItemContent" class ="smart-accordion-item-content">
                        <div id="contentContainer" class ="smart-content-container"><content></content></div>
                    </div>
                </div>`}propertyChangedHandler(t,n,a){if(super.propertyChangedHandler(t,n,a),n=parseInt(n),a=parseInt(a),!("index"!==t||isNaN(n)||isNaN(a))){const t=this,i=t.parentElement.parentElement._items.length;0>a?a=0:a>=i&&(a=i-1),a!==n&&t.$.fireEvent("indexChange",{newIndex:a,oldIndex:n}),t.index=a}}_headerMouseEnterHandler(){const t=this;t.disabled||t.setAttribute("hovered","")}_headerMouseLeaveHandler(){const t=this;t.disabled||t.removeAttribute("hovered")}_ripple(t){const n=this;n.disabled||n.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(n.$.container,t.pageX,t.pageY)}_setIndex(t){const n=this,a=n.context;n.context=n,n.index=t,n.context=a}}),Smart("smart-accordion",class extends Smart.BaseElement{static get properties(){return{expandedIndexes:{value:[],type:"array"},expandMode:{allowedValues:["single","singleFitHeight","multiple","toggle","none"],value:"singleFitHeight",type:"string"},messages:{extend:!0,value:{en:{accordionItemRequired:"{{elementType}}: \"{{method}}\" requires an item from type \"smart-accordion-item\".",indexOutOfBound:"{{elementType}}: Out of bound index/indexes in \"{{method}}\" method.",invalidSettings:"{{elementType}}: \"{{method}}\" method accepts a string or an object as it's second parameter.",missingReference:"{{elementType}}: Missing reference to {{files}}.",noItems:"{{elementType}}: No child elements found.",overridingProperties:"{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The \"{{property1}}\" property is used by default."}},type:"object"},reorder:{value:!1,type:"boolean"}}}static get listeners(){return{down:"_downHandler",focus:"_focusHandler",indexChange:"_indexChangeHandler",keydown:"_keyDownHandler",move:"_moveHandler",resize:"_resizeHandler",styleChanged:"_resizeHandler","document.up":"_upHandler"}}template(){return`<div id="container">
                    <content></content>
                </div>`}static get styleUrls(){return["smart.accordion.css"]}ready(){super.ready();const t=this;t._createElement()}propertyChangedHandler(t,n,a){function i(){o._toggleItems("expand",[0]),o.expandedIndexes=[0]}const o=this;if("expandedIndexes"===t){if(n.toString()===a.toString())return;let t=[];if(0<o._items.length)for(let n=0,i;n<a.length;n++)if(i=parseInt(a[n]),!isNaN(i))if(o._expandModeIs(["single","singleFitHeight","toggle"])){1>t.length&&0<=i&&i<o._items.length&&t.push(i);break}else 0<=i&&i<=o._items.length&&-1===t.indexOf(i)&&t.push(i);if(0===t.length&&o._expandModeIs(["single","singleFitHeight"]))return a=n.slice(),void(o.expandedIndexes=a);a=t;const i=o._compareExpandedIndexes(n,a);return o._toggleItems("collapse",i.collapse),o._toggleItems("expand",i.expand),void(o.expandedIndexes=a)}switch(super.propertyChangedHandler(t,n,a),t){case"disabled":o._setFocusable(),o._enableDisableHandler();break;case"expandMode":if(0===o._items.length)break;if("multiple"===n&&"none"!==a||"none"===n&&"multiple"!==a){const t=o.expandedIndexes.slice(1);o._toggleItems("collapse",t),0===o.expandedIndexes.length&&o._expandModeIs(["single","singleFitHeight"])&&i()}else"toggle"===n&&o._expandModeIs(["single","singleFitHeight"])&&0===o.expandedIndexes.length&&i();if(!o._supportCSSVariables||!o._usedCSSVariables){const t=o.expandedIndexes[0];"singleFitHeight"===n?o._items[t].$.accordionItemContent.style.height="":"singleFitHeight"===a&&(o._items[t].$.accordionItemContent.style.height=o._expandedItemsContainerHeight-1+"px")}break;case"unfocusable":o._setFocusable();break;default:}}appendChild(t){const n=this;if(!n.isCompleted||t instanceof HTMLElement&&(t.classList.contains("smart-resize-trigger-container")||t.classList.contains("smart-measure-element"))){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.AccordionItem||n.error(n.localize("accordionItemRequired",{method:"appendChild"})),n.insert(n._items.length,t)}collapse(t,n){const a=this;if(t=a._validateItemsIndex(t,"collapse"),!isNaN(t)){const i=a._items[t].expanded;!i||a._expandModeIs(["single","singleFitHeight"])&&-1<a.expandedIndexes.indexOf(t)||a._collapseItem(t,n)}}expand(t,n){const a=this;if(t=a._validateItemsIndex(t,"expand"),!isNaN(t)){const i=a._items[t].expanded;i||(a._expandModeIs(["single","singleFitHeight","toggle"])&&a._toggleItems("collapse",a.expandedIndexes),a._expandItem(t,n))}}insert(t,n){const a=this,i=0===a._items.length;let o,r;if(n||("number"==typeof t?n=[{label:"",content:""}]:(n=[{label:t?t.toString():"",content:t?t.toString():""}],t=0)),n instanceof HTMLElement)n instanceof Smart.AccordionItem?o=n:a.error(a.localize("accordionItemRequired",{method:"insert"}));else if(Array.isArray(n)){r=document.createDocumentFragment();for(let t=0;t<n.length;t++){const i=a._createItem(n[t]);r.appendChild(i)}}else o=n instanceof Object?a._createItem(n):"string"==typeof n||"number"==typeof n?a._createItem({label:n.toString(),content:n.toString()}):a._createItem({label:"",content:""});t>a._items.length?o?a.$.container.appendChild(o):a.$.container.appendChild(r):o?a.$.container.insertBefore(o,a._items[t]):a.$.container.insertBefore(r,a._items[t]),o&&(o.tabIndex=a._tabIndex),a._storeItems(),i&&a._expandModeIs(["single","singleFitHeight"])?a._expandItem(0):a.expandedIndexes=a._getExpandedIndexes(),a._updateExpanedContentHeight(),a._updateInlineHeight(),a._storeItemsCoordinates(),a._updateItemsIndexProperty()}insertBefore(t,n){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t!==void 0&&n!==void 0&&t instanceof Smart.AccordionItem&&n instanceof Smart.AccordionItem||a.error(a.localize("accordionItemRequired",{method:"insertBefore"})),n!==void 0&&null!==n?(!a.contains(n)&&a.error(a.localize("referenceNodeNotChild",{argument:"referenceNode"})),a.insert(a._items.indexOf(n),t)):a.insert(a._items.indexOf(n),t)}remove(t){const n=this;let a;if(t instanceof HTMLElement)t instanceof Smart.AccordionItem?!n.contains(t)&&n.error(n.localize("referenceNodeNotChild",{argument:"node"})):n.error(n.localize("accordionItemRequired",{method:"remove"})),a=t,t=a.index;else{if(t=n._validateItemsIndex(t,"remove"),isNaN(t))return;a=n._items[t]}a&&(a.parentNode.removeChild(a),n._storeItems(),n._expandModeIs(["singleFitHeight"])&&(n._preventAnimation=!0),n._expandModeIs(["single","singleFitHeight"])&&t===n.expandedIndexes[0]&&0<n._items.length&&(n._expandItem(0),n._selectedItem=n._items[0],n._selectedItemIndex=0,n._itemIsFocussed=!0),n.expandedIndexes=n._getExpandedIndexes(),n._updateExpanedContentHeight(),n._updateInlineHeight(),n._storeItemsCoordinates(),n._updateItemsIndexProperty())}removeChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}return(t instanceof HTMLElement||n.error(n.localize("accordionItemRequired",{method:"removeChild"})),"smart-resize-trigger-container"===t.className)?void super.removeChild(t):void(t instanceof Smart.AccordionItem||n.error(n.localize("accordionItemRequired",{method:"removeChild"})),n.contains(t)||n.error(n.localize("referenceNodeNotChild",{argument:"node"})),n.remove(t))}_setFocusable(){const t=this;if(t.disabled||t.unfocusable){t.removeAttribute("tabindex");for(let n=0;n<t._items.length;n++)t._items[n].removeAttribute("tabindex");return}t.tabIndex=t._tabIndex;for(let n=0;n<t._items.length;n++)t._items[n].tabIndex=t._tabIndex}update(t,n){const a=this;if(t=a._validateItemsIndex(t,"update"),!isNaN(t)){let i=a._items[t];if(n||a.error(a.localize("invalidSettings",{elementType:a.nodeName.toLowerCase(),method:"update"})),i)if(Array.isArray(n)&&(0===n.length?n={label:"",content:""}:n=n[0]),"string"==typeof n)i.content=n;else for(let t in n)i[t]=n[t];const o=a._getItemsHeights(t);a._updateExpanedContentLocalHeight(a._items[t],o),a._updateInlineHeight(),a._storeItemsCoordinates()}}_adjustHeightValue(t){const n=this,a=n._items.length;let o,r;for(let l=0;l<a&&(n._items[l].expanded?o=n._items[l]:r=n._items[l],!(o&&r));l++);if(o||(o=n._items[0]),o||r){const n=o.expanded;o.expanded=!0;const i=window.getComputedStyle(o,null),l=!!r&&window.getComputedStyle(r,null),s=parseInt(i.getPropertyValue("margin-top"))+parseInt(i.getPropertyValue("margin-bottom")),d=l?parseInt(l.getPropertyValue("margin-top"))+parseInt(l.getPropertyValue("margin-bottom")):0;return o.expanded=n,t-((a-1)*d+s)}}_collapseItem(t,n){const a=this;let i=a._items[t];if(i.expanded&&!("none"===a.expandMode&&n)){if(i.expanded=!1,a.$.fireEvent("collapsing",{index:t,label:i.label,content:i.content.innerHTML}),-1<a.expandedIndexes.indexOf(t)){let n=a.expandedIndexes.indexOf(t),i=a.expandedIndexes.slice();i.splice(n,1),a.expandedIndexes=i}i.$.accordionItemContent.style.height="",a._handleAnimationsDuration(i,t,"collapsed")}}_compareExpandedIndexes(t,n){let a=[],o=[],r=[],l=t.length,s=n.length;for(let r=0;r<l;r++)-1===n.indexOf(t[r])?-1===a.indexOf(t[r])&&a.push(t[r]):-1===o.indexOf(t[r])&&o.push(t[r]);for(let a=0;a<s;a++)-1===o.indexOf(n[a])&&r.push(n[a]);return{collapse:a,expand:r}}_createElement(){const t=this;t._reorderItemsByIndex(),t._usedCSSVariables=!!window.getComputedStyle(t.$.container).getPropertyValue("--smart-accordion-animation-duration"),t._supportCSSVariables=Smart.Utilities.Core.CSSVariablesSupport(),t._storeItems(),t._enableDisableHandler(),t._expandedIndexesHandler(),t._updateExpanedContentHeight(),t._tabIndex=0>=t.tabIndex?0:t.tabIndex,t._setFocusable(),t._updateItemsIndexProperty(),t._updateInlineHeight();for(let n=0;n<t._items.length;n++)t._items[n].$.arrow.classList.add("smart-animate-trigger")}_createItem(t){const n=this,a=document.createElement("smart-accordion-item");if(t)return(a.disabled=n.disabled,-1<n._tabIndex&&(a.tabIndex=n._tabIndex),"string"==typeof t||"number"==typeof t)?(a.label=t+"",a.content=t+"",a):(a.label=t.label||"",a.content=t.content||"",a)}_downHandler(t){const n=this;if(n.disabled||n.readonly||"none"===n.expandMode||n._toggled)return;const a=n.enableShadowDOM?n.shadowRoot.elementFromPoint(t.pageX,t.pageY):t.originalEvent.target,i=a.closest(".smart-accordion-item-header"),o=a.closest("smart-accordion-item");return i?void(n._selectedItem=o,n._itemIsPressed=n._itemIsFocussed=!0,n._reorderedIndex=n._selectedItemIndex=n._items.indexOf(o),n._storeItemsCoordinates()):void(o&&(o.focused=!0))}_enableDisableHandler(){const t=this;if(t.disabled)for(let n=0;n<t._items.length;n++)t._items[n].disabled=!0;else for(let n=0;n<t._items.length;n++)t._items[n].disabled=!1}_expandedIndexesHandler(){const t=this;let n=t._getExpandedIndexes("initial"),a=n.length,i=t.expandedIndexes.length;if(0!==t._items.length){if(0===i&&0<a&&(t.expandedIndexes=n,i=a),t._expandModeIs(["multiple","none"])||1===i)return void t._toggleItems("expand",t.expandedIndexes);switch(t.expandMode){case"single":case"singleFitHeight":0===i?t._toggleItems("expand",[0]):1<i&&(t._toggleItems("collapse",t.expandedIndexes.splice(0,1)),t._toggleItems("expand",t.expandedIndexes));break;case"toggle":1<i&&(t._toggleItems("collapse",t.expandedIndexes.splice(0,1)),t._toggleItems("expand",t.expandedIndexes));break;default:}}}_expandItem(t,n){const a=this;let i=a._items[t];if(!(i.expanded||"none"===a.expandMode&&n)){if(i.$.container.style.getPropertyValue("--smart-accordion-expanded-content-local-height")||(i.expanded=!0,i.$.container.style.setProperty("--smart-accordion-expanded-content-local-height",i.$.accordionItemContent.scrollHeight+"px"),i.expanded=!1),i.expanded=!0,a.$.fireEvent("expanding",{index:t,label:i.label,content:i.content.innerHTML}),-1===a.expandedIndexes.indexOf(t)){let n=a.expandedIndexes.slice();n.push(t),a.expandedIndexes=n}a._supportCSSVariables&&a._usedCSSVariables||"singleFitHeight"!==a.expandMode||(i.$.accordionItemContent.style.height=a._expandedItemsContainerHeight-1+"px"),a._handleAnimationsDuration(i,t,"expanded")}}_expandModeIs(t){const n=this;return-1<t.indexOf(n.expandMode)}_focusHandler(){const t=this;t.disabled||0===t._items.length||(t._itemIsFocussed?t._selectedItem.focused=!1:t._items[0].focused=!1)}_getExpandedIndexes(t){const n=this,a=[];for(let o=0;o<n._items.length;o++)"initial"===t?n._items[o].hasAttribute("expanded")&&(a.push(o),n._items[o].removeAttribute("expanded")):n._items[o].expanded&&a.push(o);return a.slice()}_getItemsHeights(t){const n=this,a=n._items,o=a.length;let r=[];if(0!==o){if(!isNaN(t)&&0<=t&&t<o){const n=a[t];let i=0;return n.expanded?i=n.$.accordionItemContent.scrollHeight:(n.expanded=!0,i=n.$.accordionItemContent.scrollHeight,n.expanded=!1),i+"px"}for(let t=0;t<o;t++){const n=a[t];let i=0;n.expanded?i=n.$.accordionItemContent.scrollHeight:(n.expanded=!0,i=n.$.accordionItemContent.scrollHeight,n.expanded=!1),r.push(i+"px")}return n._heightCalcAfterInitialization=!0,r}}_handleAnimationsDuration(t,n,a){const i=this;if(!i._animationAfterInitialization)return void(i._animationAfterInitialization=!0);if(1===i._items.length&&"singleFitHeight"===i.expandMode)return void i.$.fireEvent(a,{index:n,label:t.label,content:t.content.innerHTML});if(!1===i.hasAnimation||!i._supportCSSVariables)return void i.$.fireEvent(a,{index:n,label:t.label,content:t.content.innerHTML});if(i._preventAnimation)return i.$.fireEvent(a,{index:n,label:t.label,content:t.content.innerHTML}),void(i._preventAnimation=!1);i._toggled=!0;let o=window.getComputedStyle(i).animationDuration,r;if(-1<o.indexOf("ms"))o=parseFloat(o.substring(0,o.length-2)),r=isNaN(o)||0>o?0:o-50;else if(-1<o.indexOf("s"))o=parseFloat(o.substring(0,o.length-1)),r=isNaN(o)||0>o?0:1e3*o-50;else return void i.$.fireEvent(a,{index:n,label:t.label,content:t.content.innerHTML});t instanceof Smart.AccordionItem&&(t.$.addClass("smart-toggled-item"),i.$container.addClass("smart-toggling"),setTimeout(function(){t.$.removeClass("smart-toggled-item"),i.$container.removeClass("smart-toggling"),i.$.fireEvent(a,{index:n}),i._toggled=!1},r))}_indexChangeHandler(t){const n=this,a=n._items,i=a.length,o=t.detail;o.newIndex>=i?n.$.container.appendChild(a[o.oldIndex]):o.newIndex>o.oldIndex?n.$.container.insertBefore(a[o.oldIndex],a[o.newIndex+1]):n.$.container.insertBefore(a[o.oldIndex],a[o.newIndex]);let r=n.enableShadowDOM?n.shadowRoot.querySelectorAll("smart-accordion-item"):n.getElementsByTagName("smart-accordion-item");n._items=Array.from(r),n._updateItemsIndexProperty()}_keyDownHandler(t){function n(t){t===d||isNaN(t)||(s.focused=!1,d=t,s=o._items[d],s.focused=!0)}function a(t){return"up"===t?void(0>d-1?n(0):n(d-1)):void(d+1>l?n(l):n(d+1))}const o=this,i=t.key;if("none"===o.expandMode||o.disabled||o.readonly||o._toggled)return;if(-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home"," ","Enter","Tab"].indexOf(i)||!(document.activeElement instanceof Smart.AccordionItem))return;"Tab"!==i&&t.preventDefault();let r=o._items.length,l=r-1,s,d;for(let n=0,a;n<r;n++)a=o._items[n],a.focused&&(s=a,d=n);switch(i){case"Tab":t.shiftKey?a("up"):a("down");break;case"ArrowLeft":o.collapse(d);break;case"ArrowDown":a("down");break;case"ArrowRight":o.expand(d);break;case"ArrowUp":a("up");break;case"End":n(l);break;case"Home":n(0);break;case" ":case"Enter":if(s.expanded)return void o.collapse(d);o.expand(d);break;default:}}_moveHandler(t){var n=Math.abs;const a=this;if(a._itemIsPressed&&a.reorder&&!a.readonly&&!(2>a._items.length))if(a._dragStart){if(a.$container.addClass("smart-reordering"),!a._dragging){const n=a._selectedItem;a.$.fireEvent("dragStart",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,index:a._selectedItemIndex,label:n.label,content:n.content.innerHTML}),a._selectedItem.dragged=a._dragging=!0}const o=t.clientY;let r=!1;for(let t=0;t<a._itemsCoordinates.length;t++){const n=a._itemsCoordinates[t];if(o>=n.fromY&&o<=n.toY){r=t;break}}if(!0!==a._preventReorder&&!1!==r&&r!==a._reorderedIndex){if(1<n(a._reorderedIndex-r)){const t=0>a._reorderedIndex-r?-1:1;a._swapItems(a._reorderedIndex,r+t)}a._swapItems(a._reorderedIndex,r),a._reorderedIndex=r,a._storeItemsCoordinates()}a._preventReorder=!!(o<a._itemsCoordinates[a._reorderedIndex].fromY||o>a._itemsCoordinates[a._reorderedIndex].toY),1<n(a._reorderedIndex-r)&&(a._preventReorder=!1)}else a._dragStart=!0}_reorderItemsByIndex(){const t=this;let n=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-accordion-item"):t.getElementsByTagName("smart-accordion-item"),a=Array.from(n),i=!1,o=a.map(function(t){return null===t.index?t.index=0:i=!0,t.index});if(i){const r=a.length;if(!(2>r)){let a=o.slice();if(a.sort(function(t,n){return parseInt(t)-parseInt(n)}),o.toString()!==a.toString())for(let o=0;o<r;o++){let i;for(let t=0;t<r;t++)n[t].index===a[o]&&(i=n[t]);t.$.container.insertBefore(i,n[o])}}}}_resizeHandler(){const t=this;t._updateExpanedContentHeight(),t._updateInlineHeight(),t._storeItemsCoordinates()}_storeItems(){const t=this,n=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-accordion-item"):t.getElementsByTagName("smart-accordion-item");if(t._items=Array.from(n),0===t._items.length)return void t.$container.addClass("smart-empty");t.$container.removeClass("smart-empty");const a=t._getItemsHeights();for(let n=0;n<t._items.length;n++)t._updateExpanedContentLocalHeight(t._items[n],a[n])}_storeItemsCoordinates(){const t=this;if(!t.disabled&&t.reorder){const n=[];for(let a=0;a<t._items.length;a++){const i=t._items[a],o=i.getBoundingClientRect();n.push({fromY:o.top+(window.scrollY||window.pageYOffset),toY:o.bottom+(window.scrollY||window.pageYOffset)})}t._itemsCoordinates=n}}_swapItems(t,n){const a=this,i=Math.min(t,n),o=Math.max(t,n),r=a._items;let l=a.expandedIndexes.slice();if(a._items[t].expanded&&!a._items[n].expanded){const i=l.indexOf(t);l[i]=n,a.expandedIndexes=l.slice()}else if(a._items[n].expanded&&!a._items[t].expanded){const i=l.indexOf(n);l[i]=t,a.expandedIndexes=l.slice()}a.selectedIndex=a.selectedIndex===t?n:t,a.$.container.insertBefore(r[o],r[i]),function(t,n,a){const i=t[a];t[a]=t[n],t[n]=i}(r,t,n),a._items[t].$.removeClass("hovered"),a._reorderedIndex=n}_toggleItems(t,n){const a=this,o=n.length;if(0<o)for(let r=0;r<o;r++)a["_"+t+"Item"](n[r])}_updateExpanedContentHeight(){const t=this;t.$.container.style.setProperty("--smart-accordion-item-header-height","");const n=t._items.length,a=t.$.container.offsetHeight,o=t._items[t.expandedIndexes[0]];let r=0,l=0,s=0,d=0;if(1===n){let n=t._items[0];n.expanded=!1,r=n.offsetHeight,l=n.$.accordionItemHeader.offsetHeight,n.expanded=!0}else for(;0===r&&d<n;){const n=t._items[d];n instanceof Smart.AccordionItem&&!n.expanded&&(r=n.offsetHeight,l=n.$.accordionItemHeader.offsetHeight),d++}if(1<n&&o instanceof Smart.AccordionItem){const t=o.$.accordionItemHeader.offsetHeight;s=t-l}const c=getComputedStyle(t.$.root),m=r*n;let p=a-m-s-parseFloat(c.paddingBottom)-parseFloat(c.paddingTop);"singleFitHeight"===t.expandMode&&(p=t._adjustHeightValue(p)),p=0<=p?p:0,t.$.container.style.setProperty("--smart-accordion-expanded-content-height",p+"px"),t.$.container.style.setProperty("--smart-accordion-item-header-height",l+"px"),t._expandedItemsContainerHeight=p}_updateExpanedContentLocalHeight(t,n){const a=this;a._supportCSSVariables&&a._usedCSSVariables&&t.$.container.style.setProperty("--smart-accordion-expanded-content-local-height",n)}_updateInlineHeight(){const t=this;t._supportCSSVariables&&t._usedCSSVariables||"singleFitHeight"!==t.expandMode||0===t._items.length||(t._items[t.expandedIndexes[0]].$.accordionItemContent.style.height=t._expandedItemsContainerHeight-1+"px")}_updateItemsIndexProperty(){const t=this;let n=[];for(let a=0;a<t._items.length;a++)t._items[a]._setIndex(a),t._items[a].expanded&&n.push(a);t.expandedIndexes=n.slice()}_upHandler(t){const n=this;if(!(!n._itemIsPressed||n.disabled||n.readonly)){for(let t=0;t<n._items.length;t++)t!==n._selectedItemIndex&&(n._items[t].focused=!1);if(n._selectedItem.focused=!0,!n._dragging)n._selectedItem.expanded?n.collapse(n._selectedItemIndex,!0):n.expand(n._selectedItemIndex,!0);else{const a=n._selectedItem;n.$container.removeClass("smart-reordering"),n.$.fireEvent("dragEnd",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,index:n._selectedItemIndex,label:a.label,content:a.content.innerHTML})}n._reorderedIndex=void 0,n._dragStart=!1,n._dragging=!1,n._itemIsPressed=!1,n._selectedItem.dragged=!1,n._updateItemsIndexProperty()}}_validateItemsIndex(t,n){const a=this;return isNaN(parseInt(t))||0>t||t>a._items.length-1?void a.log(a.localize("indexOutOfBound",{elementType:a.nodeName.toLowerCase(),method:n})):parseInt(t)}}),Smart("smart-calendar",class extends Smart.BaseElement{static get properties(){return{animationSettings:{value:null,type:"object"},calendarMode:{value:"default",allowedValues:["default","classic"],type:"string"},dayNameFormat:{value:"firstTwoLetters",allowedValues:["narrow","firstTwoLetters","long","short"],type:"string"},dateFormatFunction:{value:null,type:"function"},disableAutoNavigation:{value:!1,type:"boolean"},displayMode:{value:"month",allowedValues:["month","year","decade"],type:"string"},displayModeView:{value:"table",allowedValues:["table","list"],type:"string"},dropDownHeight:{value:"200",type:"string"},dropDownWidth:{value:"initial",type:"string"},firstDayOfWeek:{value:0,type:"number",defaultValue:0,validator:"_firstDayOfWeekValidator"},footerTemplate:{value:null,type:"any"},headerTemplate:{value:null,type:"any"},hideDayNames:{value:!1,type:"boolean"},hideOtherMonthDays:{value:!1,type:"boolean"},hideTooltipArrow:{value:!1,type:"boolean"},importantDates:{value:[],type:"array",defaultValue:[]},importantDatesTemplate:{value:null,type:"any"},max:{value:new Date(2100,1,1),type:"any",defaultValue:new Date(2100,1,1)},min:{value:new Date(1900,1,1),type:"any",defaultValue:new Date(1900,1,1)},months:{value:1,type:"number",defaultValue:1,validator:"_monthsValidator"},monthNameFormat:{value:"long",allowedValues:["narrow","firstTwoLetters","long","short","2-digit","numeric"],type:"string"},name:{value:"",type:"string"},restrictedDates:{value:[],type:"array",defaultValue:[]},scrollButtonsNavigationMode:{value:"landscape",allowedValues:["portrait","landscape"],type:"string"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedDates:{value:[],type:"array"},selectionMode:{value:"default",allowedValues:["none","default","one","many","zeroOrMany","oneOrMany","zeroOrOne","week"],type:"string"},spinButtonsDelay:{value:80,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},titleTemplate:{value:null,type:"any"},tooltip:{value:!1,type:"boolean"},tooltipDelay:{value:100,type:"number"},tooltipPosition:{value:"top",allowedValues:["bottom","top","left","right","absolute"],type:"string"},tooltipTemplate:{value:null,type:"any"},view:{value:"portrait",allowedValues:["landscape","portrait"],type:"string"},viewSections:{value:["header"],type:"array"},weekNumbers:{value:!1,type:"boolean"},weeks:{value:6,type:"number",defaultValue:6,validator:"_weeksValidator"},yearFormat:{value:"numeric",allowedValues:["2-digit","numeric"],type:"string"}}}static get listeners(){return{"container.down":"_downHandler","document.up":"_documentUpHandler","container.move":"_moveHandler","container.wheel":"_containerWheelHandler","body.focus":"_bodyFocusStateHandler","body.blur":"_bodyBlurStateHandler","header.click":"_headerClickHandler","header.change":"_headerChangeHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler","listViewContainer.keydown":"_listViewContainerKeyDownHandler","listViewContainer.change":"_listViewContainerChangeEventHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","container.mouseover":"_mouseEventsHandler","container.mouseout":"_mouseEventsHandler","tooltip.open":"_tooltipEventHandler","tooltip.close":"_tooltipEventHandler"}}static get methods(){return{select:"select(date=new Date(): date|string): void",clearSelection:"clearSelection(): void",today:"today(): date",navigate:"navigate(step: int): bool"}}static get styleUrls(){return["smart.button.css","smart.dropdownlist.css","smart.dropdown.css","smart.tooltip.css","smart.calendar.css"]}template(){return`<div id="container">
                    <div id="title" class="smart-calendar-title">
                        <div id="yearContainer" class="smart-calendar-year-container"></div>
                        <div id="dateContainer" class="smart-calendar-date-container smart-calendar-selected"></div>
                    </div>
                    <div id="calendarContainer" class="smart-calendar-container">
                        <div id="header" class="smart-calendar-header">
                            <smart-repeat-button prev-month class="smart-calendar-button" id="previousMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                <div class="smart-arrow">&#xe809</div>
                            </smart-repeat-button>
                            <div id="dateElement" class="smart-calendar-date-element">
                                <div id="defaultHeaderDate"></div>
                                <div id="classicHeaderDate">
                                    <smart-drop-down-list class="smart-calendar-month-element" id="monthElement" drop-down-position="bottom" selection-mode="one" disabled="[[disabled]]" readonly="[[readonly]]" drop-down-width="[[dropDownWidth]]" drop-down-height="[[dropDownHeight]]" theme="[[theme]]">
                                    </smart-drop-down-list>
                                    <input class="smart-calendar-year-element" id="yearElement" disabled="[[disabled]]" readonly="[[readonly]]"/>
                                    <span class="smart-calendar-year-elements">
                                        <smart-repeat-button next-year class="smart-calendar-button" id="nextYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                            <span class="smart-arrow">&#xe801</span>
                                        </smart-repeat-button>
                                        <smart-repeat-button prev-year class="smart-calendar-button" id="previousYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                            <span class="smart-arrow">&#xe804</span>
                                        </smart-repeat-button>
                                    </span>
                                </div>
                            </div>
                            <smart-repeat-button next-month class="smart-calendar-button" id="nextMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                <div class="smart-arrow">&#xe810</div>
                            </smart-repeat-button>
                        </div>
                        <div id="body" class="smart-content smart-calendar-body">
                           <div id="monthsContainer" class="smart-calendar-months-container">
                              <div id="month" class="smart-calendar-month">
                                   <div id="monthName" class="smart-calendar-month-name"></div>
                                   <div id="weekTitles" class="smart-calendar-week-titles">
                                       <div class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                   </div>
                                   <div id="weeks" class="smart-calendar-weeks">
                                        <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                        </div>
                                        <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                   </div>
                                </div>
                            </div>
                            <div id="dateViewContainer" class="smart-calendar-date-view-container smart-hidden">
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                            </div>
                            <div id="monthsSeparator" class="smart-calendar-month-separator"></div>
                            <div id="nextMonthsContainer" class="smart-calendar-next-months-container"></div>
                            <smart-list-box item-height="30" unfocusable id="listViewContainer" selection-mode="one" class="smart-calendar-list-view smart-hidden" animation="simple"></smart-list-box>
                            <div id="animationPanel" class="smart-calendar-animation-panel smart-hidden"></div>
                        </div>
                        <div id="footer" class="smart-calendar-footer smart-hidden">
                            <div id="selectedDatesRange"></div>
                        </div>
                        <smart-tooltip id="tooltip" open-mode="manual" arrow
                                   tooltip-template="[[tooltipTemplate]]"
                                   position="[[tooltipPosition]]"
                                   delay="[[tooltipDelay]]"
                                   disabled="[[disabled]]">
                         </smart-tooltip>
                        <input id="hiddenInput" type="hidden" name="[[name]]">
                    </div>
                </div>`}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const o=this;switch(t){case"animationSettings":o._applyAnimationSettings();break;case"disabled":case"unfocusable":o._setFocusable();break;case"calendarMode":o.displayMode="month",o._refreshCalendarMode(),o._setDisplayModeContent();break;case"dayNameFormat":o._refreshDayOfWeekTitles(o.$.month);break;case"dateFormatFunction":{let t=o.$.monthsContainer.children;for(let n=0;n<t.length;n++)t[n].firstElementChild.innerHTML=a?a(t[n]._date):o._monthsNames[t[n]._date.getMonth()]+" "+t[n]._date.toLocaleDateString(o.locale,{year:o.yearFormat});o._refreshHeaderTitle();break}case"displayMode":o._setDisplayMode(n,a);break;case"displayModeView":o._applyAnimationSettings(!0),"month"!==o.displayMode&&o._setDisplayModeContent();break;case"firstDayOfWeek":o._handleMonths(),o._refreshDayOfWeekTitles();break;case"hideTooltipArrow":o.$.tooltip.arrow=!a;break;case"titleTemplate":case"headerTemplate":case"footerTemplate":o._handleLayoutTemplate(o.$[t.split(/[T]/)[0]],a),"titleTemplate"===t?o._refreshTitle():"headerTemplate"===t?o._refreshHeaderTitle():o._refreshFooter();break;case"importantDates":o.importantDates=o._getValidDates(a),o._refreshImportantDates();break;case"importantDatesTemplate":o._handleImportantDateTemplate(),o._refreshImportantDates();break;case"locale":o._refreshMonthNames(),o._refreshDayOfWeekTitles(),o._refreshHeaderTitle(),o._refreshTitle(),o._refreshFooter(),o.displayMode&&"month"!==o.displayMode&&o._setDisplayModeContent();break;case"max":case"min":o._validateMinMax(t,a,n),o._validateSelectedDates(),o._noFocusingRequired=!1,o._refreshHeaderElements();break;case"months":o._handleMonths();break;case"monthNameFormat":o._refreshCalendarMode(),o._refreshHeaderTitle();break;case"restrictedDates":o._setRestrictedDates(o.restrictedDates=o._getValidDates(a));break;case"rightToLeft":o._refreshDayOfWeekTitles(),o._handleMonths();break;case"scrollButtonsNavigationMode":o._setScrollButtonsNavigationMode();break;case"selectedDates":if(o._clearSelection(!0),o._validateSelectedDates(o._getValidDates(a)),o._applySelectionMode(!0),o._viewDates){let t=o.selectedDates[o.selectedDates.length-1];o._isDateInView(t)?o.selectedDates.map(t=>o._selectDate(t,!0,!0)):o._handleMonths(t)}o._refreshFooter(),o._setWeeksVisibility(o.$.monthsContainer),o.$.hiddenInput.value=o.selectedDates.toString(),o.$.fireEvent("change",{value:o.selectedDates}),o._refreshTitle();break;case"selectionMode":o._applySelectionMode(),o._refreshTitle();break;case"view":o._refreshTitle();break;case"viewSections":-1<a.indexOf("title")?o.$title.removeClass("smart-hidden"):o.$title.addClass("smart-hidden"),o._refreshTitle(),-1<a.indexOf("header")?o.$header.removeClass("smart-hidden"):o.$header.addClass("smart-hidden"),o._refreshHeaderTitle(),-1<a.indexOf("footer")?o.$footer.removeClass("smart-hidden"):o.$footer.addClass("smart-hidden"),o._refreshFooter();break;case"weeks":o._setWeeksVisibility(o.$.monthsContainer);break;case"yearFormat":if(o._refreshCalendarMode(),o._refreshFooter(),1<o.months&&"month"===o.displayMode){let t=o._animationStarted?o.$.nextMonthsContainer.children:o.$.monthsContainer.children;for(let n=0;n<t.length;n++)t[n].firstElementChild.innerHTML=o.dateFormatFunction?o.dateFormatFunction(t[n]._date):o._monthsNames[t[n]._date.getMonth()]+" "+t[n]._date.toLocaleDateString(o.locale,{year:a})}o._refreshTitle(),o._refreshHeaderTitle();}}ready(){super.ready();const t=this;t._keysPressed={},t._applyAnimationSettings(),t.importantDates=t._getValidDates(t.importantDates),t.restrictedDates=t._getValidDates(t.restrictedDates),t._refreshMonthNames(),t._validateMinMax(),t._validateSelectedDates(t._getValidDates(t.selectedDates)),t._handleLayoutTemplate(t.$.title,t.titleTemplate),t._handleLayoutTemplate(t.$.header,t.headerTemplate),t._handleLayoutTemplate(t.$.footer,t.footerTemplate),t._handleImportantDateTemplate(),t._setFocusable(),t._refreshDayOfWeekTitles(),t._applySelectionMode(!0),t._handleMonths(0===t.selectedDates.length?new Date(new Date().setHours(0,0,0,0)):t.selectedDates[t.selectedDates.length-1]),t._updateViewSectionsVisibility(),t._setScrollButtonsNavigationMode(),t._refreshCalendarMode(),t._setDisplayMode(),t._refreshTitle(),t._refreshFooter(),t._refreshImportantDates(),t.$.monthElement&&t.$.monthElement._setDropDownSize(),t._changeEventFired=0}_updateViewSectionsVisibility(){const t=this;-1<t.viewSections.indexOf("title")?t.$title.removeClass("smart-hidden"):t.$title.addClass("smart-hidden"),-1<t.viewSections.indexOf("header")?t.$header.removeClass("smart-hidden"):t.$header.addClass("smart-hidden"),-1<t.viewSections.indexOf("footer")?t.$footer.removeClass("smart-hidden"):t.$footer.addClass("smart-hidden")}clearSelection(){this._clearSelection()}_setFocusable(){function t(t,n){return n?t&&t instanceof n?("function"==typeof t._setFocusable&&t.isCompleted?t.unfocusable=-1>=a:t.setAttribute("tabindex",a),t):void 0:void 0}const n=this;let a=0<n.tabIndex?n.tabIndex:0;(n.disabled||n.unfocusable)&&(a=-1),n.$.previousMonthButton=t(n.$.previousMonthButton,Smart.Button),n.$.nextMonthButton=t(n.$.nextMonthButton,Smart.Button),n.$.nextYearButton=t(n.$.nextYearButton,Smart.Button),n.$.previousYearButton=t(n.$.previousYearButton,Smart.Button),n.$.monthElement=t(n.$.monthElement,Smart.DropDownList),n.$.yearElement=t(n.$.yearElement,HTMLInputElement),-1<n.viewSections.indexOf("title")&&(n.$.dateContainer.setAttribute("tabindex",a),n.$.yearContainer.setAttribute("tabindex",a)),n.$.body.setAttribute("tabindex",a),"default"===n.calendarMode?n.$.dateElement.setAttribute("tabindex",a):n.$.dateElement.removeAttribute("tabindex"),n.tabIndex=n.readonly&&!n.disabled?0<n.tabIndex?n.tabIndex:0:a}static get requires(){return{"Smart.Tooltip":"smart.tooltip.js"}}navigate(t){const n=this;if(t=parseInt(t),isNaN(t)||0===t)return!1;const a=n._getNextDate(t);return!!a&&("month"===n.displayMode?(n.hasAnimation?(n._animateNavigation(a,t),n.$nextMonthsContainer.hasClass("smart-date-view-container")&&n.$nextMonthsContainer.removeClass("smart-date-view-container")):(n._handleMonths(a),n._refreshHeaderElements(),n._refreshHeaderTitle()),!0):(n.hasAnimation?(n.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),"list"===n.displayModeView?n._setDisplayModeContent(a):(!n._navigationDate||n._navigationDate.getTime()!==a.getTime())&&n._animateNavigation(a,t)):n._setDisplayModeContent(a),!0))}select(t){const n=this;"undefined"!=typeof n._viewDates[0]&&"none"!==n.selectionMode&&t&&(t=n._getValidDate(t),!(t instanceof Date)||"one"===n.selectionMode&&-1<n.selectedDates.map(Number).indexOf(t.getTime())||t.getTime()<n.min.getTime()||t.getTime()>n.max.getTime()||(("one"===n.selectionMode||"default"===n.selectionMode||"zeroOrOne"===n.selectionMode)&&n._clearSelection(!0),n._selectDate(t),1===n.selectedDates.length&&!n._isDateInView(n.selectedDates[0])&&n._handleMonths(n.selectedDates[0])))}today(){const t=this;let n=new Date;return n.setHours(0,0,0,0),n.getTime()<t.min.getTime()||n.getTime()>t.max.getTime()?n=new Date(t.max):t.selectedDates=[n],t._handleMonths(n),n}_animateNavigation(t,n,a){function i(){let t=0<n?l.$.body[l._animationSettings.scrollSize]>=d:0===l.$.body[l._animationSettings.scrollSize],a=l._scrollStep/2;return t?void l._animateNavigationCompleted():void(0<n&&l.$.body[l._animationSettings.scrollSize]>d*l._animationSettings.easeThreshold?(a=r(l.$.body[l._animationSettings.scrollSize]/l._animationSettings.stepEaseSize,o(a-(d-l.$.body[l._animationSettings.scrollSize])*l._animationSettings.step)),l._scrollStep=l._scrollStep*l._animationSettings.step+a):0>n&&l.$.body[l._animationSettings.scrollSize]<d*l._animationSettings.easeThreshold&&(a=r(l.$.body[l._animationSettings.scrollMax]/l._animationSettings.stepEaseSize,o(a-l.$.body[l._animationSettings.scrollSize]*l._animationSettings.step)),l._scrollStep=l._scrollStep*l._animationSettings.step+a),l.$.body[l._animationSettings.scrollSize]+=0<n?l._scrollStep:-l._scrollStep,l._animationId=requestAnimationFrame(i))}var o=Math.abs,r=Math.max;const l=this;l._navigationDate=t,l._animationSettings||l._applyAnimationSettings(),l.$animationPanel.addClass("smart-hidden"),l.$.dateViewContainer.style.transform="",l.$.dateViewContainer.style.opacity="",l.$.monthsContainer.style.transform="",l.$.monthsContainer.style.opacity="";const s="month"===l.displayMode?l.$.monthsContainer:l.$.dateViewContainer,d=l.$.body[l._animationSettings.scrollMax]-l.$.body[l._animationSettings.size];l._scrollStep=l.$.body[l._animationSettings.size]*l._animationSettings.startSpeed,l._animationStarted=!0,"month"===l.displayMode?l._handleMonths(t,l.$.nextMonthsContainer):(l._setCellState(l._focusedCell,"focus",!1),l._setDisplayModeContent(t,l.$.nextMonthsContainer)),a||(0<n?(s.style.order=1,l.$.nextMonthsContainer.style.order=3,(!l._animationStarted||l._animationStarted&&l.$.body[l._animationSettings.scrollSize]>2*(l.$.body[l._animationSettings.scrollMax]*l._animationSettings.resetThreshold))&&(l.$.body[l._animationSettings.scrollSize]=0)):(s.style.order=3,l.$.nextMonthsContainer.style.order=1,(!l._animationStarted||l._animationStarted&&l.$.body[l._animationSettings.scrollSize]<l.$.body[l._animationSettings.scrollMax]*l._animationSettings.resetThreshold)&&(l.$.body[l._animationSettings.scrollSize]=l.$.body[l._animationSettings.scrollMax]))),cancelAnimationFrame(l._animationId),l._animationId=requestAnimationFrame(i)}_animateNavigationCompleted(){const t=this;let n="month"===t.displayMode?t.$.monthsContainer:t.$.dateViewContainer,a,o,r;if(cancelAnimationFrame(t._animationId),"month"!==t.displayMode){let i=[].slice.call(n.children).indexOf(t._focusedCell);n.innerHTML=t.$.nextMonthsContainer.innerHTML;let l=n.children[i],s;o=n.children,r=t.$.nextMonthsContainer.children;for(let n=0;n<o.length;n++)o[n].value=r[n].value,o[n].restricted=r[n].restricted,o[n].important=r[n].important,o[n].otherMonth=r[n].otherMonth,o[n].value.getTime()<=t.max.getTime()&&(s=o[n]);a=l&&l.value.getTime()>=t.max.getTime()?s.value:t._focusedCell?t._focusedCell.value:void 0}else{let a=n.children,l=t.$.nextMonthsContainer.children;for(let n=0;n<a.length;n++){a[n]._date=l[n]._date,a[n].innerHTML=l[n].innerHTML,o=t._getMonthCells(a[n]),r=t._getMonthCells(l[n]);for(let t=0;t<o.length;t++)o[t].value=r[t].value,o[t].restricted=r[t].restricted,o[t].important=r[t].important,o[t].otherMonth=r[t].otherMonth}0<t._selectedCells.length&&(t._selectedCells=t._selectedCells.map(n=>n=t._getCellByDate(n.value)).filter(t=>"undefined"!=typeof t))}t._focusCell(t._getCellByDate(a)),n.style.order=1,t.$.nextMonthsContainer.style.order=3,t.$.body[t._animationSettings.scrollSize]=0,t._animationStarted=!1,delete t._navigationDate}_applyAnimationSettings(t){const n=this;if(!n.hasAnimation)return void delete n._animationSettings;n._animationSettings=n.animationSettings?n.animationSettings:n._animationSettings?n._animationSettings:{},"portrait"===n.scrollButtonsNavigationMode?(n._animationSettings.scrollMax="scrollHeight",n._animationSettings.size="offsetHeight",n._animationSettings.scrollSize="scrollTop"):(n._animationSettings.scrollMax="scrollWidth",n._animationSettings.size="offsetWidth",n._animationSettings.scrollSize="scrollLeft");t||(n._animationSettings.startSpeed=n._animationSettings.startSpeed?n._animationSettings.startSpeed:.2,n._animationSettings.easeThreshold=n._animationSettings.easeThreshold?n._animationSettings.easeThreshold:.5,n._animationSettings.step=n._animationSettings.step?n._animationSettings.step:.25,n._animationSettings.stepEaseSize=n._animationSettings.stepEaseSize?n._animationSettings.stepEaseSize:200,n._animationSettings.resetThreshold=n._animationSettings.resetThreshold?n._animationSettings.resetThreshold:.2)}_applySelectionMode(t){var n=Math.min,a=Math.max;const i=this;let o=[],r=!!t;switch(i.selectionMode){case"none":return void i._clearSelection(r);case"many":case"default":case"oneOrMany":if(0===i.selectedDates.length){o.push(new Date(n(a(i.min.getTime(),new Date().setHours(0,0,0,0)),i.max.getTime())));break}return;case"one":if(1===i.selectedDates.length)return;1<i.selectedDates.length?(o.push(i.selectedDates[i.selectedDates.length-1]),i._clearSelection(r)):o.push(new Date(n(a(i.min.getTime(),new Date().setHours(0,0,0,0)),i.max.getTime())));break;case"zeroOrOne":if(1<i.selectedDates.length){o.push(i.selectedDates[i.selectedDates.length-1]),i._clearSelection(r);break}return;case"zeroOrMany":return;case"week":if(1<=i.selectedDates.length){let t=i.selectedDates[i.selectedDates.length-1];for(let n=0;8>n;n++)o.push(new Date(t)),t.setDate(t.getDate()+1);i._clearSelection(r)}}if(i.selectedDates=[],t)return void(i.selectedDates=o);const l=o.length;for(let n=0;n<l;n++)i._selectDate(o[n],n<l-1)}_clearSelection(t){const n=this;if(n._selectedCells&&n._selectedCells.map(t=>{n._setCellState(t,"selected",!1)}),n.selectedDates=[],n._selectedCells=[],"many"===n.selectionMode){const t=n.$.monthsContainer.children;for(let a=0;a<t.length;a++)n._getMonthCells(t[a]).map(t=>{n._setCellState(t,"hover",!1)})}n._refreshFooter(),n.$.hiddenInput.value=n.selectedDates.toString(),t||n.$.fireEvent("change",{value:[]}),n._refreshTitle()}_bodyBlurStateHandler(t){const n=this;n._bodyStateHandler(t)}_bodyFocusStateHandler(t){const n=this;n._bodyStateHandler(t)}_bodyStateHandler(t){const n=this;if(n._focusedCell){if("blur"===t.type||"focus"===t.type&&n._noFocusingRequired)return n._noFocusingRequired=!1,void n._setCellState(n._focusedCell,"focus",!1);if("month"!==n.displayMode)return void("focus"!==t.type||n.$.dateViewContainer.querySelector("smart-calendar-cell[focus]")||n._setCellState(n._focusedCell||n.$.dateViewContainer.querySelector(".smart-calendar-cell"),"focus",!0))}"focus"===t.type&&n._focusCell()}_containerWheelHandler(t){const n=this;if(n.disabled||n.readonly)return;let a,i,o;o=i=document.activeElement,n.enableShadowDOM&&(o=n.shadowRoot.activeElement,o?i=o?n.shadowRoot.getRootNode().host:void 0:(o=function(){for(let t=n.shadowRoot;t&&t.host;){if(t.activeElement)return t.activeElement;t=t.host.getRootNode()}}(),i=o?o.closest("smart-calendar"):void 0)),n.$.yearElement===o&&(a=12),i&&i.closest("smart-calendar")===n&&(a=t.target===n.$.yearElement?12:1);a&&(t.preventDefault(),a=12==a?a:a*n.months,0<t.deltaY?n.navigate(-a):n.navigate(a))}_downHandler(t){const n=this;let a=t.originalEvent.target;if(n._dragStartDetails=void 0,!(n.disabled||n.readonly)){if(n.hasRippleAnimation&&(a.value instanceof Date||a.parentElement&&a.parentElement.classList.contains("smart-calendar-title")||a.parentElement===n.$.dateElement)&&Smart.Utilities.Animation.Ripple.animate(a,t.pageX,t.pageY),a=t.originalEvent.target.closest(".smart-calendar-header"),t.originalEvent.target.closest(".smart-calendar-year-container")&&"decade"!==n.displayMode)return"classic"===n.calendarMode?void 0:void n._showDateView("year");if(t.originalEvent.target.closest(".smart-calendar-date-container")&&"month"!==n.displayMode)return"classic"===n.calendarMode?void 0:void n._displayModeHandler("list"===n.displayModeView?n.$.listViewContainer.getItem(n.$.listViewContainer.selectedValues[0]):n._focusedCell,"month");if(n._animationStarted&&n._animateNavigationCompleted(),Smart.Utilities.Core.isMobile&&!(a&&a===n.$.header))return void(n._dragStartDetails={x:t.pageX,y:t.pageY,startTime:Date.now(),target:t.originalEvent.target});if(a=t.originalEvent.target,a.closest(".smart-calendar-week")||a.parentElement===n.$.dateViewContainer){for(;a&&!(a.value instanceof Date);)a=a.parentElement;return void(a&&("month"===n.displayMode?n._weeksDownHandler(t,a):n._displayModeHandler(a)))}if(!a.closest(".smart-calendar-month-element")){if(t.originalEvent.stopPropagation(),"list"===n.displayModeView&&"month"!==n.displayMode)return a=(n.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target).closest("smart-list-item"),void(a&&n._displayModeHandler(a));const i=document.scrollingElement||document.documentElement,o=i.scrollLeft,r=i.scrollTop;n.focus(),window.scrollTo(o,r)}}}_displayModeHandler(t,n){const a=this;if(a._animationStarted&&a._animateNavigationCompleted(),t instanceof HTMLElement&&t.parentElement.classList.contains("smart-calendar-week")&&t.otherMonth){if("decade"===a.displayMode&&(t.value.getFullYear()<a.min.getFullYear()||t.value.getFullYear()>a.max.getFullYear()))return;if("year"===a.displayMode&&(t.value.getFullYear()<a.min.getFullYear()||t.value.getFullYear()===a.min.getFullYear()&&t.value.getMonth()<a.min.getMonth()||t.value.getFullYear()>a.max.getFullYear()||t.value.getFullYear()===a.max.getFullYear()&&t.value.getMonth()>a.max.getMonth()))return}if(n=n?n:a.displayMode,"year"===n?n="month":"decade"===n?n="year":void 0,a.displayMode!==n){const i=a.$.fireEvent("displayModeChanging",{oldDisplayMode:a.displayMode,newDisplayMode:n}).defaultPrevented;i||(a.displayMode=n,a.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),t.parentElement===a.$.dateViewContainer&&!t.disabled&&!t.restricted&&a._focusCell(t),a.hasAnimation?(t instanceof Smart.ListItem||t.ownerListBox===a.$.listViewContainer?t.offsetHeight?a.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(0<t.dataItem.top?t.offsetTop-t.offsetHeight/2:t.offsetTop+t.offsetHeight/2)+"px":a.$.animationPanel.style.transformOrigin=a.$.listViewContainer.offsetLeft+a.$.listViewContainer.offsetWidth/2+"px "+(a.$.listViewContainer.offsetTop+a.$.listViewContainer.offsetHeight/2)+"px":(t=a._focusedCell,a.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(t.offsetTop+t.offsetHeight/2)+"px"),a._animateView(1,t)):a._setDisplayModeContent(t.value instanceof Date?t.value:new Date(t.value)))}}_animateView(t,n){function a(){return(0<t&&3.5<=s||0>t&&0>=s)&&(l=!0),l?(cancelAnimationFrame(o._animationId),o.$animationPanel.addClass("smart-hidden"),o.$.animationPanel.style.transform="",o.$.animationPanel.style.opacity="",m.style.transform="",m.style.opacity="",void("month"===o.displayMode?o.$.body.focus():"list"===o.displayModeView&&o.focus())):void(o.$.animationPanel.style.opacity=d,m.style.opacity=1-d,d-=.05,0<t?(o.$.animationPanel.style.transform="scale("+s+")",m.style.transform="scale("+Math.min((s-1)/2,1)+")",s+=.125):(o.$.animationPanel.style.transform="scale("+i(s,0)+")",m.style.transform="scale("+i(1+s,1)+")",s-=.06),o._animationId=requestAnimationFrame(a))}var i=Math.max;const o=this;let r=n instanceof Date?n:new Date(n.value),l=!1,s=1,d=1,c,m;if("list"===o.displayModeView?(c=n instanceof Smart.ListItem||n.ownerListBox===o.$.listViewContainer?o.$.listViewContainer:"month"===o.displayMode?o.$.listViewContainer:o.$.monthsContainer,m="month"===o.displayMode?o.$.monthsContainer:o.$.listViewContainer):!(n.value instanceof Date)&&(n=o._focusedCell?o._focusedCell:0<o._selectedCells.length?o._selectedCells[o._selectedCells.length-1]:o._getCellByDate(new Date)),c||(c=n.parentElement===o.$.dateViewContainer?o.$.dateViewContainer:o.$.monthsContainer),m||(m="month"===o.displayMode?o.$.monthsContainer:o.$.dateViewContainer),m.style.transformOrigin=o.$.animationPanel.style.transformOrigin,c instanceof Smart.ListBox)for(o.$.animationPanel.innerHTML="",o.$.animationPanel.appendChild(c.cloneNode(!1));c.$.itemsInnerContainer.firstElementChild;)o.$.animationPanel.children[0].appendChild(c.$.itemsInnerContainer.firstElementChild);else o.$.animationPanel.innerHTML=c.innerHTML;if(o._setDisplayModeContent(r),o.$.animationPanel.style.width=o.$.body.offsetWidth+"px",o.$.animationPanel.style.height=o.$.body.offsetHeight+"px",o.$.animationPanel.style.transform="scale(1)",o.$.animationPanel.style.opacity=1,o.$animationPanel.removeClass("smart-hidden"),m.style.opacity="0",m.style.transform="scale(3.5)",c.$.hasClass("smart-calendar-date-view-container")?o.$animationPanel.addClass("smart-calendar-date-view-container"):o.$animationPanel.removeClass("smart-calendar-date-view-container"),c instanceof Smart.ListBox){const t=o.$.animationPanel.children[0];t.whenReady(function(){t._refreshLayout(),t.ensureVisible(t.selectedValues[0])})}cancelAnimationFrame(o._animationId),o._animationId=requestAnimationFrame(a)}_documentUpHandler(t){var n=Math.abs;const a=this;if(!Smart.Utilities.Core.isMobile||!a._dragStartDetails)return;const i=Date.now();let o=t.originalEvent.target,r={};if("portrait"===a.scrollButtonsNavigationMode?(r.coordinate="y",r.direction="pageY"):(r.coordinate="x",r.direction="pageX"),10>=n(a._dragStartDetails[r.coordinate]-t[r.direction])){if(o="list"===a.displayModeView&&"month"!==a.displayMode?o.closest("smart-list-item"):o,!o)return void(a._dragStartDetails=void 0);if("month"!==a.displayMode)return a._displayModeHandler(o),"portrait"===a.scrollButtonsNavigationMode?a.$.body.scrollTop=0:a.$.body.scrollLeft=0,void(a._dragStartDetails=void 0);if(a._weeksDownHandler(t,o),!a.disableAutoNavigation&&o.otherMonth)return}else{const o=n((t[r.direction]-a._dragStartDetails[r.coordinate])/(i-a._dragStartDetails.startTime));if(1<o){const t=parseInt(o);for(let n=0;n<t;n++)a.navigate(a._dragStartDetails.step);return void(a._dragStartDetails=void 0)}}if(!a.hasAnimation)return void(a._dragStartDetails=void 0);let l=("month"===a.displayMode?a.$.monthsContainer[a._animationSettings.scrollMax]:a.$.dateViewContainer[a._animationSettings.scrollMax])+a.$.monthsSeparator[a._animationSettings.size];return 0<a._dragStartDetails.step&&a.$.body[a._animationSettings.scrollSize]>l*a._animationSettings.easeThreshold||0>a._dragStartDetails.step&&a.$.body[a._animationSettings.scrollSize]<l*a._animationSettings.easeThreshold?(a._animateNavigation(a._dragStartDetails.navigationDate,a._dragStartDetails.step,!0),void(a._dragStartDetails=void 0)):void(a._animateMonthRepositioning(void 0,a._dragStartDetails.step),a._dragStartDetails=void 0)}_animateMonthRepositioning(t,n){function a(){let t=0>n?r.$.body[r._animationSettings.scrollSize]>=s:0===r.$.body[r._animationSettings.scrollSize],d=r._scrollStep/2;return t?(cancelAnimationFrame(r._animationId),l.style.order=1,r.$.nextMonthsContainer.style.order=3,r.$.body[r._animationSettings.scrollSize]=0,void(r._animationStarted=!1)):void(0<n?(d=o(r.$.body[r._animationSettings.scrollMax]/r._animationSettings.stepEaseSize,i(d-r.$.body[r._animationSettings.scrollSize]*r._animationSettings.step)),r._scrollStep=r._scrollStep*r._animationSettings.step+d):(d=o(r.$.body[r._animationSettings.scrollMax]/r._animationSettings.stepEaseSize,i(d-(s-r.$.body[r._animationSettings.scrollSize])*r._animationSettings.step)),r._scrollStep=r._scrollStep*r._animationSettings.step+d),r.$.body[r._animationSettings.scrollSize]+=0>n?r._scrollStep:-r._scrollStep,r._animationId=requestAnimationFrame(a))}var i=Math.abs,o=Math.max;const r=this,l="month"===r.displayMode?r.$.monthsContainer:r.$.dateViewContainer;r._animationSettings||r._applyAnimationSettings();const s=l[r._animationSettings.scrollMax]+r.$.monthsSeparator[r._animationSettings.size];r._scrollStep=r.$.body[r._animationSettings.size]*r._animationSettings.startSpeed,cancelAnimationFrame(r._animationId),r._animationId=requestAnimationFrame(a),r._animationStarted=!0}_focusCell(t){const n=this;if(n._focusedCell&&n._setCellState(n._focusedCell,"focus",!1),!(n.disabled||n.readonly)){if(t)return"month"===n.displayMode?t.disabled||t.restricted?void 0:(n._setCellState(t,"focus",!0),n._focusedCell=t,void n._updateWeeksVisibility()):(n._setCellState(t,"focus",!0),void(n._focusedCell=t));if("month"===n.displayMode||0!==n.$.monthsContainer.offsetHeight){if(0<n._selectedCells.length){const t=n._selectedCells[n._selectedCells.length-1];n._setCellState(t,"focus",!0),n._focusedCell=t}else{const t=n.$.monthsContainer.children;if(n.min.getTime<t[0]._date.getTime())return;const a=n._getMonthCells(t[0],n.rightToLeft);for(let t=0;t<a.length;t++){const i=a[t];if(!i.otherMonth){if(i.disabled||i.restricted)continue;n._focusedCell=i;break}}}n._focusedCell&&(n._setCellState(n._focusedCell,"focus",!0),n._updateWeeksVisibility())}}}_getDays(t,n){const a=n.length;let i=[];if(0<a)for(let o=0;o<a;o++)n[o].getFullYear()===t.getFullYear()&&n[o].getMonth()===t.getMonth()&&i.push(n[o].getDate());return i}_getCellByDate(t,n){const a=this;if(!(t instanceof Date))return;if(n||(n=a.$.monthsContainer),"month"!==a.displayMode){if("list"===a.displayModeView)return;let n=arguments[1]?a.$.nextMonthsContainer.children:a.$.dateViewContainer.children;for(let o=0;o<n.length;o++)if("year"===a.displayMode){if(n[o].value.getMonth()===t.getMonth())return n[o];continue}else if(n[o].value.getFullYear()===t.getFullYear())return n[o];return}let o=n.children,r,l;for(let a=0;a<o.length;a++)if(t.getFullYear()===o[a]._date.getFullYear()&&t.getMonth()===o[a]._date.getMonth()){r=o[a];break}if(r){l=a._getMonthCells(r);for(let n=0;n<l.length;n++)if((!l[n].otherMonth||l[n].hover)&&l[n].value.getMonth()===t.getMonth()&&l[n].value.getDate()===t.getDate())return l[n]}}_getMonthCells(t,n){const a=t.getElementsByClassName("smart-calendar-week");let i=[];if(n)for(let t=0,n;t<a.length;t++){n=a[t].children;for(let t=n.length-1;0<t;t--)i.push(n[t])}else for(let t=0,n;t<a.length;t++){n=a[t].children;for(let t=1;t<n.length;t++)i.push(n[t])}return i}_getWeekNumber(t){var n=Math.round;const a=this;let i=new Date(t.getFullYear(),0,1),o=n((t.getTime()-i.getTime()-6e4*(t.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1,r=i.getDay()-a.firstDayOfWeek,l;return r=0<=r?r:r+7,4>r?(l=Math.floor((o+r-1)/7)+1,52<l&&(i=new Date(t.getFullYear()+1,0,1),r=i.getDay()-a.firstDayOfWeek,r=0<=r?r:r+7,l=4>r?1:53)):l=n((o+r-1)/7),l}_handleDateSelection(t){function n(t,n){if(a._clearSelection(!0),t.getTime()<n.value.getTime())for(;t.getTime()<=n.value.getTime();)a._selectDate(t,!0),t.setDate(t.getDate()+1);else if(t.getTime()>n.value.getTime())for(;t.getTime()>=n.value.getTime();)a._selectDate(t,!0),t.setDate(t.getDate()-1);else a._selectDate(n,!0);a.$.hiddenInput.value=a.selectedDates.toString(),a._refreshFooter(),a.$.fireEvent("change",{value:a.selectedDates}),a._refreshTitle()}const a=this;if(!("undefined"==typeof t||t.disabled||t.restricted))switch(a.selectionMode){case"none":a._focusCell(t);break;case"one":case"default":if(a._keysPressed.Control)return 1<a.selectedDates.length||1===a.selectedDates.length&&!t.selected?void a._selectDate(t.value):void a._focusCell(t);if(a._keysPressed.Shift)return void n(new Date(a.selectedDates[0]),t);a._clearSelection(!0),a._selectDate(t.value,!!(-1<a._selectedCells.indexOf(t.value)));break;case"many":{if(0===a.selectedDates.length)return void a._selectDate(t.value);const i=a.selectedDates[a.selectedDates.length-1];let o=new Date(a.selectedDates[0]);if(t.value.getTime()===o.getTime()||t.value.getTime()===i.getTime())return a._clearSelection(),void a._focusCell(t);0<a.selectedDates.length&&n(o,t);break}case"zeroOrMany":a._selectDate(t.value);break;case"oneOrMany":if(1===a.selectedDates.length&&t.selected)return void a._focusCell(t);a._selectDate(t.value);break;case"zeroOrOne":if(1===a.selectedDates.length&&t.selected)return void a._selectDate(t.value);a._clearSelection(!0),a._selectDate(t.value);break;case"week":{if(t.selected&&(t.value.getTime()===a.selectedDates[0].getTime()||t.value.getTime()===a.selectedDates[a.selectedDates.length-1].getTime()))return a._clearSelection(),void a._focusCell(t);a._clearSelection(!0);let n=new Date(t.value);a._selectDate(n);for(let t=1;8>t;t++)n.setDate(n.getDate()+1,7>t),a._selectDate(n);a._isDateInView(n)||a.navigate(1);break}}}_handleImportantDateTemplate(){const t=this;if(t._importantDatesTemplate=t._validateTemplate("importantDatesTemplate",t.importantDatesTemplate),!t._importantDatesTemplate||!t._importantDatesTemplate.content)return;let n=t._importantDatesTemplate.content;const a=n.childNodes.length,o=/{{\w+}}/g;let r;t._bindingDetails=[];for(let l=0;l<a;l++)if(r=o.exec(n.childNodes[l].innerHTML),r)return void t._bindingDetails.push({childNodeIndex:l,bindingString:r[0]})}_handleLayoutTemplate(t,n){const a=this,i=a._validateTemplate(t.$.hasClass("smart-header")?"headerTemplate":t.$.hasClass("smart-calendar-footer")?"footerTemplate":"titleTemplate",n);if(!i||!i.content)return void("function"==typeof n&&n(t,{}));a._layoutTemplates||(a._layoutTemplates=[]);let o=document.importNode(i.content,!0);t.innerHTML="";const r=o.childNodes.length,l=/{{\w+}}/g;let s=[],d;for(let a=0;a<r;a++)d=l.exec(o.childNodes[a].innerHTML),d&&s.push({childNodeIndex:a,bindingString:d[0]});return a._layoutTemplates=a._layoutTemplates.filter(n=>n.selector!==t),a._layoutTemplates.push({selector:t,template:i,bindings:s}),a.enableShadowDOM?(t.innerHTML="<slot></slot>",void a.appendChild(o)):void t.appendChild(o)}_handleCalendarCellHover(t,n){const a=this;if(!a._animationStarted){if("month"===a.displayMode)if("mouseover"===t.type&&"many"===a.selectionMode&&0<a.selectedDates.length){const t=a.$.monthsContainer.children;for(let n=0;n<t.length;n++)a._getMonthCells(t[n]).map(t=>{a._setCellState(t,"hover",!1)});let i=new Date(a.selectedDates[0]),o=new Date(n.value),r=n;const l=i.getTime()>o.getTime()?-1:1,s=function(){r=a._getCellByDate(i,a.$.monthsContainer),!r||r.selected||r.restricted||a._setCellState(r,"hover",!0)};if(i.getTime()!==o.getTime()){for(i.setDate(i.getDate()+l);i.getTime()!==o.getTime();)s(),i.setDate(i.getDate()+l);s()}}else a._setCellState(n,"hover",!1);"mouseover"!==t.type||n.otherMonth?a._setCellState(n,"hover",!1):a._setCellState(n,"hover",!0)}}_handleMonths(t,n){function a(t){let n=t.children.length,a=document.createDocumentFragment(),i;for(n;n<o.months;n++)i=o.$.month.cloneNode(!1),i.innerHTML=o.$.month.innerHTML,a.appendChild(i);return a}function i(n){let a=n.children;for(let r=0;r<a.length;r++)o._setMonth(t,a[r]),t.setMonth(t.getMonth()+1);o._setWeeksVisibility(n),o._refreshHeaderElements(),o._refreshHeaderTitle(),o.tooltip&&o.$.tooltip.close(),o.$.body===document.activeElement&&o._focusCell()}const o=this;let r;if(t||(t=o._viewDates&&0<o._viewDates.length?o._viewDates[0]:new Date),t=new Date(Math.min(Math.max(o.min.getTime(),t.getTime()),o.max.getTime())),n||(n=o.$.monthsContainer),o._selectedCells=[],o.hasAnimation){for(r=o.$.nextMonthsContainer.children,0<r.length&&r[0].value instanceof Date&&(o.$.nextMonthsContainer.innerHTML="");o.$.nextMonthsContainer.childElementCount<o.months;)o.$.nextMonthsContainer.appendChild(a(o.$.nextMonthsContainer));for(;o.$.nextMonthsContainer.childElementCount>o.months;)o.$.nextMonthsContainer.removeChild(r[o.$.nextMonthsContainer.childElementCount-1]);if(arguments[1]===o.$.nextMonthsContainer)return void i(o.$.nextMonthsContainer)}if(r=o.$.monthsContainer.children,r.length>o.months){for(;o.$.monthsContainer.childElementCount>o.months;)o.$.monthsContainer.removeChild(r[o.$.monthsContainer.childElementCount-1]),o._viewDates.pop();return void i(o.$.monthsContainer)}return o.$.monthsContainer.children.length===o.months?void i(o.$.monthsContainer):void(o._viewDates=[],o.$.monthsContainer.appendChild(a(o.$.monthsContainer)),i(o.$.monthsContainer))}_headerChangeHandler(t){const n=this;return t.stopPropagation(),n.disabled||n.readonly?void 0:t.target.ownerElement===n.$.monthElement&&0!==n._changeEventFired?void n._changeEventFired--:void(t.target===n.$.yearElement&&(n._viewDates[0].setFullYear(Math.min(Math.max(n.min.getFullYear(),isNaN(parseInt(n.$.yearElement.value))?0:parseInt(n.$.yearElement.value)),n.max.getFullYear())),n._handleMonths(n._viewDates[0])),n.$.monthElement&&t.target.ownerElement===n.$.monthElement&&n._handleMonths(new Date(n.$.monthsContainer.children[0]._date.getFullYear(),n.$.monthElement.selectedIndexes[0],1)))}_headerClickHandler(t){const n=this;if(!(n.disabled||n.readonly)){let a=t.target.closest("smart-repeat-button");if(!(a&&a.disabled))return a===n.$.previousMonthButton?(n._isInteractiveNavigation=!0,void n.navigate(-1*n.months)):a===n.$.nextMonthButton?(n._isInteractiveNavigation=!0,void n.navigate(1*n.months)):a===n.$.previousYearButton?void n.navigate(-12):a===n.$.nextYearButton?void n.navigate(12):"classic"===n.calendarMode?void(n.displayMode="month"):void(t.target.closest(".smart-calendar-date-element")&&(n._animationStarted&&n._animateNavigationCompleted(),n._isInteractiveNavigation=!0,n._showDateView()))}}_setDisplayMode(t,n,a){const i=this;if(i.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),0===arguments.length||!i.hasAnimation)return"classic"===i.calendarMode?void(i.displayMode="month"):("month"!==i.displayMode&&(i.$monthsContainer.addClass("smart-hidden"),i.$dateViewContainer.hasClass("smart-hidden")&&i.$dateViewContainer.removeClass("smart-hidden")),!i.isCompleted&&"month"===i.displayMode)?void 0:void i._setDisplayModeContent();if(i._animationStarted&&(i.displayMode=t,i._animateNavigationCompleted(),i.displayMode=n),"month"===t&&"year"===n||"year"===t&&"decade"===n)i.displayMode=t,i._showDateView(a?void 0:i.displayMode);else if("month"===t&&"decade"===n)i._showDateView(i.displayMode="year");else{let t;"list"===i.displayModeView?(t=(i.$.listViewContainer.enableShadowDOM?i.$.listViewContainer.shadowRoot:i.$.listViewContainer).querySelector("smart-list-item[selected]"),i.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(0<t.dataItem.top?t.offsetTop-t.offsetHeight/2:t.offsetTop+t.offsetHeight/2)+"px"):(t=i._focusedCell,i.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(t.offsetTop+t.offsetHeight/2)+"px"),i._animateView(1,t)}}_setDisplayModeContent(t,n){const a=this;let o=t&&"Invalid Date"!==t.toString()?t:0<a.selectedDates.length?a.selectedDates[a.selectedDates.length-1]:new Date;o.setTime(Math.min(Math.max(o.getTime(),a.min.getTime()),a.max.getTime())),o.setHours(0,0,0,0);const r=a._prepareView(o);if(!r)return;let i;n?(a.$.nextMonthsContainer.innerHTML=a.$.dateViewContainer.innerHTML,i=a.$.nextMonthsContainer):i=a.$.dateViewContainer;const l=i.children;let s;for(let d=0;d<l.length;d++){const t=l[d];t.innerHTML=r.viewContent[d],t.value=r.dates[d],"year"===a.displayMode?(t.value.getFullYear()<a.min.getFullYear()||t.value.getFullYear()===a.min.getFullYear()&&t.value.getMonth()<a.min.getMonth()||t.value.getFullYear()>a.max.getFullYear()||t.value.getFullYear()===a.max.getFullYear()&&t.value.getMonth()>a.max.getMonth()?a._setCellState(t,"otherMonth",!0):a._setCellState(t,"otherMonth",!1),o.getFullYear()===t.value.getFullYear()&&o.getMonth()===t.value.getMonth()&&(s=t)):"decade"===a.displayMode&&(0==d||d==l.length-1||t.value.getFullYear()<a.min.getFullYear()||t.value.getFullYear()>a.max.getFullYear()?a._setCellState(t,"otherMonth",!0):a._setCellState(t,"otherMonth",!1),o.getFullYear()===t.value.getFullYear()&&(s=t)),a._setCellState(t,"hover",!1)}if(s.otherMonth)for(let t=0;t<l.length;t++)if(!l[t].otherMonth){s=l[t];break}return a._focusedCell&&a._setCellState(a._focusedCell,"focus",!1),a._focusedCell=s,a._focusCell(a._focusedCell),a._refreshHeaderTitle(),a._refreshHeaderElements(),a.$.fireEvent("displayModeChange"),a._isInteractiveNavigation?void(a._isInteractiveNavigation=void 0):void(a._setCellState(s,"focus",!0),setTimeout(function(){a.$.body.focus(),a._focusCell(a._focusedCell)},0))}_prepareView(t){function n(t,n,a){let i=new Date(t,n+1,0),o=i.getDate();return a>o?i.setDate(o):i.setDate(a),i}const a=this;let o=[],r=[],l,i;if("month"===a.displayMode)return a.$nextMonthsContainer.hasClass("smart-date-view-container")&&a.$nextMonthsContainer.removeClass("smart-date-view-container"),a.$listViewContainer.addClass("smart-hidden"),a.$dateViewContainer.hasClass("smart-visibility-hidden")&&a.$dateViewContainer.removeClass("smart-visibility-hidden"),a._isDateInView(t)||a._handleMonths(t),a.$header.hasClass("smart-hidden")&&a.$header.removeClass("smart-hidden"),a.$body.hasClass("smart-calendar-list-view")&&a.$body.removeClass("smart-calendar-list-view"),a.$dateContainer.addClass("smart-calendar-selected"),a.$yearContainer.removeClass("smart-calendar-selected"),a.$dateViewContainer.addClass("smart-hidden"),a.$monthsContainer.removeClass("smart-hidden"),a._refreshHeaderTitle(),a.$.body.setAttribute("tabindex",0<a.tabIndex?a.tabIndex:0),a._refreshHeaderElements(),a.$.body.focus(),a._focusCell(a._getCellByDate(t)),void a.$.fireEvent("displayModeChange");if("list"===a.displayModeView)return a._setDisplayModeListContent(t),void a.$.fireEvent("displayModeChange");if(a.$header.hasClass("smart-hidden")&&a.$header.removeClass("smart-hidden"),a.$dateViewContainer.hasClass("smart-visibility-hidden")&&a.$dateViewContainer.removeClass("smart-visibility-hidden"),a.$listViewContainer.addClass("smart-hidden"),a.$.body.setAttribute("tabindex",0<a.tabIndex?a.tabIndex:0),"year"===a.displayMode){let l=new Date;for(let s=0;12>s;s++)l=n(l.getFullYear(),s,l.getDate()),o.push(l.toLocaleDateString(a.locale,{month:"short"})),r.push(n(t.getFullYear(),s,t.getDate()))}else{l=t?t.getFullYear():a._viewDates[0].getFullYear(),i=l%10,0!==i&&(l-=i),l-=1;for(let n=0;12>n;n++)o.push(l+""),r.push(new Date(l,t.getMonth(),t.getDate())),++l}return{viewContent:o,dates:r}}_setDisplayModeListContent(t){function n(t,n,a){let i=new Date(t,n+1,0),o=i.getDate();return a>o?i.setDate(o):i.setDate(a),i}const a=this;let o=[];if(a.$dateViewContainer.addClass("smart-visibility-hidden"),a.$listViewContainer.hasClass("smart-hidden")&&(a.$body.addClass("smart-calendar-list-view"),a.$listViewContainer.removeClass("smart-hidden"),a.$.listViewContainer._setFocusable(),a.$.body.removeAttribute("tabindex")),"year"===a.displayMode){let r=new Date;for(let l=0;12>l;l++)r=n(r.getFullYear(),l,r.getDate()),o.push({label:r.toLocaleDateString(a.locale,{month:"short"}),value:n(t.getFullYear(),l,t.getDate()).toDateString()});a.$yearContainer.removeClass("smart-calendar-selected"),a.$dateContainer.addClass("smart-calendar-selected")}else{let n=a.min.getFullYear(),r=a.max.getFullYear();r=Math.min(a.max.getFullYear(),t.getFullYear()+10),n=Math.max(a.min.getFullYear(),r-10);for(let a=n;a<r;a++)o.push({label:a.toString(),value:new Date(a,t.getMonth(),t.getDate()).toDateString()});a.$yearContainer.addClass("smart-calendar-selected"),a.$dateContainer.removeClass("smart-calendar-selected")}a.$.listViewContainer.dataSource=o,a.$.listViewContainer.selectedValues=[t.toDateString()],a.$.listViewContainer.ensureVisible(a.$.listViewContainer.selectedValues[0]),a._refreshHeaderTitle(),a._refreshHeaderElements(),a.focus()}_isDateInView(t){const n=this;if(!t)return!1;for(let a=0;a<n._viewDates.length;a++)if(t.getFullYear()===n._viewDates[a].getFullYear()&&t.getMonth()===n._viewDates[a].getMonth()){let a=n._getCellByDate(t,n._animationStarted?n.$.nextMonthsContainer:n.$.monthsContainer);return a?!(a.otherMonth||a.classList.contains("smart-visibility-hidden")):void 0}return!1}_keyDownHandler(t){const n=this;if(!(n.disabled||n.readonly))switch(n.enableShadowDOM?n.shadowRoot.activeElement||document.activeElement:document.activeElement){case n.$.yearElement:"Escape"===t.key&&n._refreshHeaderElements();break;case n.$.dateElement:if("default"===n.calendarMode&&" "===t.key||"Enter"===t.key)return t.preventDefault(),n._isInteractiveNavigation=!0,void n._showDateView();n._focusedCell||n._focusCell(),-1<t.key.indexOf("Arrow")&&n.$.dateElement===document.activeElement&&n.$.body.focus(),n._navigateDays(t);break;case n.$.body:(" "===t.key||"Enter"===t.key)&&t.preventDefault(),n._navigateDays(t);break;case n.$.yearContainer:if((" "===t.key||"Enter"===t.key)&&"decade"!==n.displayMode&&(t.preventDefault(),n._isInteractiveNavigation=!0,n._showDateView("year")),-1<t.key.indexOf("Arrow")){if(t.preventDefault(),n._focusedCell||n._focusCell(),"month"!==n.displayMode&&"list"===n.displayModeView)return n.focus(),void n.$.listViewContainer._handleKeyStrokes(t.key);n._navigateDays(t)}break;case n.$.dateContainer:if((" "===t.key||"Enter"===t.key)&&"month"!==n.displayMode&&(t.preventDefault(),n._displayModeHandler("list"===n.displayModeView?n.$.listViewContainer.getItem(n.$.listViewContainer.selectedValues[0]):n._focusedCell,"month")),-1<t.key.indexOf("Arrow")){if(n._focusedCell||n._focusCell(),"month"!==n.displayMode&&"list"===n.displayModeView)return n.focus(),void n.$.listViewContainer._handleKeyStrokes(t.key);n._navigateDays(t)}break;default:if("month"!==n.displayMode&&"list"===n.displayModeView)return(["Arrow","End","Home","Page"].indexOf(t.key)&&t.preventDefault()," "===t.key||"Enter"===t.key||t.ctrlKey&&("ArrowUp"===t.key||"ArrowDown"===t.key))?void n._navigateDays(t):void n.$.listViewContainer._handleKeyStrokes(t.key);-1<t.key.indexOf("Arrow")&&(!n._focusedCell&&n._focusCell(),n._navigateDays(t));}}_listViewContainerChangeEventHandler(t){t.stopPropagation()}_listViewContainerKeyDownHandler(t){const n=this;"list"!==n.displayModeView||(" "===t.key||"Enter"===t.key)&&n._navigateDays(t)}_showDateView(t){const n=this;if(t=t?t:n.displayMode,"month"===t?t="year":"year"===t?t="decade":void 0,n.displayMode===t)return;const a=n.$.fireEvent("displayModeChanging",{oldDisplayMode:n.displayMode,newDisplayMode:t}).defaultPrevented;if(a)return;n.displayMode=t;let i;return arguments[0]&&"list"===n.displayModeView&&"month"!==n.displayMode&&0<n.$.listViewContainer.items.length?(i=n.$.listViewContainer.getItem(n.$.listViewContainer.selectedValues[0]),n.$.animationPanel.style.transformOrigin=i.offsetHeight?i.offsetLeft+i.offsetWidth/2+"px "+(0<i.dataItem.top?i.offsetTop-i.offsetHeight/2:i.offsetTop+i.offsetHeight/2)+"px":n.$.listViewContainer.offsetLeft+n.$.listViewContainer.offsetWidth/2+"px "+(0<i.dataItem.top?i.offsetTop-i.offsetHeight/2:n.$.listViewContainer.offsetTop+n.$.listViewContainer.offsetHeight/2)+"px"):(!n._focusedCell&&n._focusCell(),i=n._focusedCell,n.$.animationPanel.style.transformOrigin=i.offsetLeft+i.offsetWidth/2+"px "+(i.offsetTop+i.offsetHeight/2)+"px"),n.$monthsContainer.addClass("smart-hidden"),n.$dateViewContainer.hasClass("smart-hidden")&&n.$dateViewContainer.removeClass("smart-hidden"),"decade"===n.displayMode&&(n.$yearContainer.addClass("smart-calendar-selected"),n.$dateContainer.removeClass("smart-calendar-selected")),n.hasAnimation?void n._animateView(-1,i):void n._setDisplayModeContent(n._focusedCell?n._focusedCell.value:n._viewDates[0])}_keyUpHandler(t){const n=this;n.disabled||n.readonly||"default"===n.selectionMode&&("Shift"===t.key||"Control"===t.key)&&(n._keysPressed[t.key]=!1)}_mouseEventsHandler(t){const n=this;if(n.disabled||n.readonly)return;if("mouseenter"===t.type)return void n.$.setAttributeValue("hover",!0);if("mouseleave"===t.type)return n.$.setAttributeValue("hover",!1),void(n.tooltip&&n.$.tooltip.close());const a=n.enableShadowDOM?t.composedPath()[0]:t.target;if(!a.closest(".smart-calendar-week"))return void(n.tooltip&&n.$.tooltip.close());let i=a,o;for(;i&&!(i.value instanceof Date);)i=i.parentElement,o=!0;if(i&&(Smart.Utilities.Core.isMobile||n._handleCalendarCellHover(t,i),n.tooltip)){if(i.hasAttribute("important")&&"mouseover"===t.type)return n.$.tooltip.open(),n.tooltipTemplate?n.$.tooltip.value=i.value+"":n.$.tooltip.innerHTML=0===n.$.tooltip.innerHTML.trim().length?"Important day!":n.$.tooltip.innerHTML,n.$.tooltip.selector=i,void(n.$.tooltip.selector!==i&&n.$.tooltip.close());if(o||n.$.tooltip.selector===i)return;n.$.tooltip.close()}}_moveHandler(t){var n=Math.round;const a=this;if(!Smart.Utilities.Core.isMobile||!a._dragStartDetails||"list"===a.displayModeView&&"month"!==a.displayMode)return;t.originalEvent.preventDefault(),t.preventDefault(),t.stopPropagation();const i={x:n(t.pageX),y:n(t.pageY)};let o="portrait"===a.scrollButtonsNavigationMode?i.y>a._dragStartDetails.y?-1*a.months:1*a.months:i.x<a._dragStartDetails.x?1*a.months:-1*a.months;const r=a._getNextDate(o);if(!r)return;if(a._dragStartDetails.step=o,a._dragStartDetails.navigationDate=new Date(r),!a.hasAnimation)return;let l;if("month"!==a.displayMode)a.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),l=a.$.dateViewContainer,a.$.nextMonthsContainer.children[0].value instanceof Date&&a.$.nextMonthsContainer.children[1].value.getFullYear()===r.getFullYear()||a._setDisplayModeContent(r,a.$.nextMonthsContainer);else if(a.$nextMonthsContainer.hasClass("smart-calendar-date-view-container")&&a.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),l=a.$.monthsContainer,!a.$.nextMonthsContainer.children[0]._date||a.$.nextMonthsContainer.children[0]._date.getTime()!==r.getTime()){let t=a.$.nextMonthsContainer.children;for(let n=0;n<t.length;n++)r.setMonth(a._dragStartDetails.navigationDate.getMonth()+n),a._setMonth(r,t[n],!0)}0>o?(l.style.order=3,a.$.nextMonthsContainer.style.order=1,a.$.body[a._animationSettings.scrollSize]=a.$.body[a._animationSettings.scrollMax]):(l.style.order=1,a.$.nextMonthsContainer.style.order=3,a.$.body[a._animationSettings.scrollSize]=0);const s="portrait"===a.scrollButtonsNavigationMode?"y":"x";10<Math.abs(a._dragStartDetails[s]-i[s])&&(a.$.body[a._animationSettings.scrollSize]+=2*-(i[s]-a._dragStartDetails[s]))}_getNextDate(t){const n=this;let a;if("month"!==n.displayMode){let i;const o=n._focusedCell&&n._focusedCell.value.getFullYear();if("list"===n.displayModeView)a=new Date(n.$.listViewContainer.items[0].value);else{let t=n._animationStarted?n.$.nextMonthsContainer:n.$.dateViewContainer;a=new Date("year"===n.displayMode?t.children[0].value:t.children[1].value)}if(i="year"===n.displayMode?1:0===t?1:10,a.setFullYear(a.getFullYear()+(0<t?i:-i)),a.getTime()<n.min.getTime()&&(a=n.min),a.getTime()>n.max.getTime()&&(a=n.max),"year"===n.displayMode){if(a.getFullYear()<n.min.getFullYear()||a.getFullYear()>n.max.getFullYear()||o===a.getFullYear())return;}else if(a.getFullYear()<n.min.getFullYear()||a.getFullYear()>n.max.getFullYear()||o===a.getFullYear())return}else{let i=n._viewDates[0];if(a=new Date(i),a.setDate(1),a.setMonth(a.getMonth()+t),a.setTime(Math.min(Math.max(a.getTime(),n.min.getTime()),n.max.getTime())),i.getMonth()===a.getMonth()&&i.getFullYear()===a.getFullYear())return}return a}_navigateDays(t){const n=this;let a="ArrowUp"===t.key||"ArrowDown"===t.key?7:1,i="ArrowUp"===t.key||"ArrowLeft"===t.key||"PageUp"===t.key?-1:1;switch(t.key){case"ArrowUp":case"ArrowLeft":case"ArrowDown":case"ArrowRight":if(!n._handleArrowKeys(t,a,i))return;break;case" ":case"Enter":if("month"!==n.displayMode)return void n._displayModeHandler("list"===n.displayModeView?n.$.listViewContainer.getItem(n.$.listViewContainer.selectedValues[0]):n._focusedCell);break;case"Control":case"Shift":return void("default"===n.selectionMode&&(n._keysPressed[t.key]=!0));case"Home":case"End":{t.preventDefault();let a=function(n){if("Home"===t.key){for(let t=0;t<n.length;t++)if(!n[t].otherMonth&&(!n[t].disabled||!n[t].restricted))return n[t];}else for(let t=n.length-1;0<=t;t--)if(!n[t].otherMonth&&(!n[t].disabled||!n[t].restricted))return n[t]},i;if(i="month"===n.displayMode?a(n._getMonthCells(n._focusedCell.closest(".smart-calendar-month"),n.rightToLeft)):a(n.$.dateViewContainer.children),!i)return;if(n._focusCell(i),"month"!==n.displayMode)return;break}case"PageUp":case"PageDown":{if(!n._handlePageUpDownKeys(t,i))return;break}default:return;}n._focusedCell&&n._handleDateSelection(n._focusedCell)}_handleArrowKeys(t,n,a){const i=this;let o;if("month"!==i.displayMode||i._animationStarted||i.$.body.focus(),i._focusedCell||i._focusCell(i._getCellByDate(new Date)),!t.altKey){if(t.ctrlKey){if("ArrowDown"===t.key||"ArrowUp"===t.key){let n;switch(i.displayMode){case"month":n="ArrowDown"===t.key?"month":"year";break;case"year":n="ArrowDown"===t.key?"month":"decade";break;case"decade":n="ArrowDown"===t.key?"year":"decade";}if(n!==i.displayMode){const t=i.displayMode;i.displayMode=n,i._setDisplayMode(t,n,"month"===t),i._keysPressed&&delete i._keysPressed.Control}}return}if(t.preventDefault(),i.rightToLeft&&("ArrowLeft"===t.key||"ArrowRight"===t.key)&&(a*=-1),"month"!==i.displayMode){let r=i._animationStarted?i.$.nextMonthsContainer.children:i.$.dateViewContainer.children;if(n="ArrowUp"===t.key||"ArrowDown"===t.key?4:1,"year"===i.displayMode){const t=i._focusedCell.value.getMonth()+a*n;let r=new Date(i._focusedCell.value.getFullYear(),t+1,0);i._focusedCell.value.getDate()<=r.getDate()&&(r=i._focusedCell.value),o=new Date(i._focusedCell.value.getFullYear(),t,r.getDate())}else o=new Date(i._focusedCell.value.getFullYear()+a*n,i._focusedCell.value.getMonth(),i._focusedCell.value.getDate());if("year"===i.displayMode){if(o.getFullYear()<i.min.getFullYear()||o.getFullYear()===i.min.getFullYear()&&o.getMonth()<i.min.getMonth()||o.getFullYear()>i.max.getFullYear()||o.getFullYear()===i.max.getFullYear()&&o.getMonth()>i.max.getMonth())return;o.getTime()>r[r.length-1].value.getTime()?i.navigate(1):o.getTime()<r[0].value.getTime()&&i.navigate(-1)}else{if(o.getFullYear()<i.min.getFullYear()||o.getFullYear()>i.max.getFullYear())return;if(o.getFullYear()<r[1].value.getFullYear()||o.getFullYear()>r[10].value.getFullYear()){let n=i._focusedCell;i.navigate(a),("ArrowUp"===t.key||"ArrowDown"===t.key)&&(n===r[3]||n===r[4]||n===r[7]||n===r[8]?o.setFullYear(o.getFullYear()+2*a):o.setFullYear(o.getFullYear()-2*a))}}return void i._focusCell(i._getCellByDate(o,i._animationStarted?i.$.nextMonthsContainer:void 0))}const r=i.restrictedDates.map(Number);for(o=new Date(i._focusedCell.value.getFullYear(),i._focusedCell.value.getMonth(),i._focusedCell.value.getDate()+a*n,0,0,0,0);-1<r.indexOf(o.getTime());)o.setDate(o.getDate()+a);if(!(o.getTime()<i.min.getTime()||o.getTime()>i.max.getTime())){i._isDateInView(o)||i.navigate(a*i.months);let t=i._getCellByDate(o,i._animationStarted?i.$.nextMonthsContainer:void 0);return i._focusCell(t),!(-1<["zeroOrMany","oneOrMany","none","many","week"].indexOf(i.selectionMode))||void 0}}}_handlePageUpDownKeys(t,n){const a=this;t.preventDefault();let i;if("month"!==a.displayMode){if(i=a._focusedCell,!a.navigate(n))return;for(;i&&i.classList.contains("smart-visibility-hidden");)i=null===i.previousElementSibling?i.nextElementSibling:i.previousElementSibling;return a._focusCell(i),void(a.hasAnimation&&"decade"===a.displayMode&&a._focusedCell.value.setFullYear(a._focusedCell.value.getFullYear()+10*n))}i=new Date(a._focusedCell.value.getFullYear(),a._focusedCell.value.getMonth()+n,1,0,0,0,0);let o=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();return a._focusedCell.value.getDate()>o?i.setDate(o):i.setDate(a._focusedCell.value.getDate()),a._isDateInView(i)||a.navigate(n*a.months),a._animationStarted?a._focusCell(a._getCellByDate(i,a.$.nextMonthsContainer)):a._focusCell(a._getCellByDate(i)),!0}_selectDate(t,n,a){const i=this;if("undefined"==typeof i._viewDates||"none"===i.selectionMode)return;let o=i.selectedDates.slice(0),r=i._getCellByDate(t,i._animationStarted?i.$.nextMonthsContainer:i.$.monthsContainer);r&&i._selectCell(r);let l;t=new Date(t),t.setHours(0,0,0,0),l=o.map(Number).indexOf(t.getTime());-1<i.restrictedDates.map(Number).indexOf(t.getTime())||t.getTime()<i.min.getTime()||t.getTime()>i.max.getTime()||(-1<l?o.splice(l,1):o.push(t),!a&&(i.selectedDates=o),i._refreshFooter(),i.$.hiddenInput.value=i.selectedDates.toString(),!n&&i.$.fireEvent("change",{value:[t]}),i._refreshTitle())}_selectCell(t){const n=this;if(!(!t||-1<n.restrictedDates.map(Number).indexOf(t.value.getTime())||n.disableAutoNavigation&&!1===t.otherMonth||t.value.getTime()<n.min.getTime()||t.value.getTime()>n.max.getTime())){const a=n._selectedCells.indexOf(t);-1<a?(n._setCellState(t,"selected",!1),n._selectedCells.splice(a,1)):(n._setCellState(t,"selected",!0),n._selectedCells.push(t)),n._focusCell(t)}}_refreshDayOfWeekTitles(){function t(t){let a;return"firstTwoLetters"===n.dayNameFormat?(a=new Intl.DateTimeFormat(n.locale,{weekday:"long"}).format(t),a=8206===a.charCodeAt(0)?a.substring(1,3):a.substring(0,2)):a=new Intl.DateTimeFormat(n.locale,{weekday:n.dayNameFormat}).format(t),a}const n=this;let a=[],o=new Date,r;for(let n=1;8>n;n++)o.setDate(n),r={number:o.getDay(),name:t(o)},a.push(r);a.sort((t,n)=>t.number>n.number?1:-1);const i=n.$.monthsContainer.children;let l,s;for(let t=0;t<i.length;t++)if(l=i[t].getElementsByClassName("smart-calendar-week-titles")[0].children,s=6<n.firstDayOfWeek?0:n.firstDayOfWeek,n.rightToLeft)for(let t=l.length-1;0<=t;t--)l[t].textContent=a[s++].name,s=6<s?0:s;else for(let t=1;t<l.length;t++)l[t].textContent=a[s++].name,s=6<s?0:s;if(n.hasAnimation){const t=n.$.monthsContainer.getElementsByClassName("smart-calendar-week-titles")[0].innerHTML,a=n.$.nextMonthsContainer.getElementsByClassName("smart-calendar-week-titles");for(let n=0;n<a.length;n++)a[n].innerHTML=t}}_refreshCalendarMode(){const t=this;if(!t.headerTemplate)if(t._refreshMonthNames(),"default"===t.calendarMode){t.$classicHeaderDate.addClass("smart-hidden"),t.$defaultHeaderDate.removeClass("smart-hidden");const n=t._viewDates.slice(0).sort((t,n)=>t.getTime()-n.getTime()),a=n[0],i=n[n.length-1];a.setDate(2);let o=a.toLocaleDateString(t.locale,{year:t.yearFormat,month:t.monthNameFormat});1<t.months&&(i.setDate(2),o+=" - "+i.toLocaleDateString(t.locale,{year:t.yearFormat,month:t.monthNameFormat})),t.$.defaultHeaderDate.innerHTML=o,t.unfocusable||t.$.dateElement.setAttribute("tabindex",0<t.tabIndex?t.tabIndex:0)}else t.$defaultHeaderDate.addClass("smart-hidden"),t.$classicHeaderDate.removeClass("smart-hidden"),t.$.dateElement.removeAttribute("tabindex")}_refreshFooter(){function t(){if(0===n.selectedDates.length)return"";if(1===n.selectedDates.length)return n.selectedDates[0].toLocaleDateString(n.locale,{year:n.yearFormat,weekday:"short",month:"short",day:"numeric"});else{let t=n.selectedDates.slice(0).sort((t,n)=>t.getTime()-n.getTime());return t[0].toLocaleDateString(n.locale,{year:n.yearFormat,weekday:"short",month:"short",day:"numeric"})+" - "+t[t.length-1].toLocaleDateString(n.locale,{year:n.yearFormat,weekday:"short",month:"short",day:"numeric"})}}const n=this;if(!(0>n.viewSections.indexOf("footer")||0===n.$.footer.offsetHeight)){if(n.footerTemplate){if("function"==typeof n.footerTemplate)return;let a=n._layoutTemplates.filter(t=>t.selector===n.$.footer)[0],i=document.importNode(a.template.content,!0);if(0<a.bindings.length){let n=i.childNodes[a.bindings[0].childNodeIndex];a.selector.childNodes[a.bindings[0].childNodeIndex].innerHTML=n.innerHTML.replace(a.bindings[0].bindingString,t())}return}n.$.selectedDatesRange.innerHTML=t()}}_refreshImportantDates(){const t=this;if("month"===t.displayMode){t._clearImportantDates();for(let n=0;n<t.importantDates.length;n++)t._setImportantDate(t.importantDates[n])}}_clearImportantDates(){const t=this,n=t.$.monthsContainer.children;for(let a=0;a<n.length;a++)t._getMonthCells(n[a]).map(n=>{t._setCellState(n,"important",!1)})}_setImportantDate(t,n){const a=this,i=a._getCellByDate(t);n||(n=i),n&&(a._setCellState(n,"important",!0),a._applyImportantDateTemplate(n))}_applyImportantDateTemplate(t){const n=this;if(!n._importantDatesTemplate)return"function"==typeof n.importantDatesTemplate?void n.importantDatesTemplate(t,{value:t.value}):void(t.innerHTML=t.value.getDate()+"");let a=document.importNode(n._importantDatesTemplate.content,!0);if(n._bindingDetails&&0<n._bindingDetails.length){let i=a.childNodes[n._bindingDetails[0].childNodeIndex];i.innerHTML=i.innerHTML.replace(n._bindingDetails[0].bindingString,t.value.getDate())}t.innerHTML="";for(let n=0;n<a.childNodes.length;n++)a.childNodes[n].outerHTML&&(t.innerHTML+=a.childNodes[n].outerHTML)}_setMonth(t,n,a){const o=this,i=o._getDays(t,o.selectedDates),r=o._getDays(t,o.importantDates),l=o._getDays(t,o.restrictedDates);t.setDate(1),n||(n=o.$.month),n._date=new Date(t),a||((!o._viewDates||o._viewDates.length>=o.months)&&(o._viewDates=[]),o._viewDates.push(new Date(t))),t=new Date(t);let s=(t.getDay()-o.firstDayOfWeek+7)%7;t.setDate(0);let d=t.getDate();if(t.setDate(32),t.setDate(1),t.setDate(32),o._selectedCells)for(let t=0;t<o._selectedCells.length;t++)o._selectedCells[t].closest(".smart-calendar-month")===n&&o._setCellState(o._selectedCells[t],"selected",!1);o._setMonthContent(t,n,{previusMonthDays:d,firstDayOfWeek:s,selectedDates:i,importantDates:r,restrictedDates:l})}_setMonthContent(t,n,a){const i=this,o=32-t.getDate(),r=i._getMonthCells(n,i.rightToLeft),l=n._date.getMonth(),s=n._date.getFullYear(),c=new Date;let m=1,p=1,u;c.setHours(0,0,0,0),r.map(t=>{i._setCellState(t,"restricted",!1),i._setCellState(t,"selected",!1),i._setCellState(t,"otherMonth",!1),i._setCellState(t,"focus",!1),i._setCellState(t,"important",!1),i._setCellState(t,"today",!1),i._setCellState(t,"disabled",!1),i._setCellState(t,"hover",!1)});for(let g=0;g<r.length;g++){const t=r[g];g===a.firstDayOfWeek&&p<=o?(t.className="smart-calendar-cell",t.value=new Date(s,l,p),t.innerHTML=t.value.getDate().toString(),-1<a.restrictedDates.indexOf(p)||t.value.getTime()<i.min.getTime()||t.value.getTime()>i.max.getTime()?i._setCellState(t,"restricted",!0):-1<a.selectedDates.indexOf(p)&&(i._setCellState(t,"selected",!0),0>i._selectedCells.indexOf(t)&&i._selectedCells.push(t)),-1<a.importantDates.indexOf(p)&&(i._setImportantDate(t.value,t),a.importantDates.splice(a.importantDates.indexOf(p),1)),t.value.getTime()===c.getTime()&&i._setCellState(t,"today",!0),a.firstDayOfWeek++,p++):(1==p?(t.value=new Date(s,l-1,++a.previusMonthDays-a.firstDayOfWeek),u=!!(t.value.getTime()<i.min.getTime()||n.previousElementSibling)):(t.value=new Date(s,l+1,m++),u=!!(t.value.getTime()>i.max.getTime()||n.nextElementSibling)),t.innerHTML=t.value.getDate().toString(),u?t.classList.add("smart-visibility-hidden"):(i._setCellState(t,"otherMonth",!0),t.classList.remove("smart-visibility-hidden")))}1<i.months&&(n.firstElementChild.innerHTML=i.dateFormatFunction?i.dateFormatFunction(n._date):i._monthsNames[l]+" "+n._date.toLocaleDateString(i.locale,{year:i.yearFormat})),i._setMonthWeekNumbers(n)}_refreshMonthNames(){function t(t){let a=new Intl.DateTimeFormat(n.locale,{month:n.monthNameFormat}).format(t);return"firstTwoLetters"===n.monthNameFormat&&(a=8206===a.charCodeAt(0)?a.substring(0,2):a.substring(1,3)),a}const n=this;let a=new Date,i;a.setDate(1),n._monthsNames=[];for(let o=0;12>o;o++)a.setMonth(o),i=t(a),n._monthsNames.push(i);if("classic"===n.calendarMode&&n.$.monthElement){let t=n.$.monthsContainer.children;n.$.monthElement.dataSource&&(n._changeEventFired=1);const a=n.$.monthElement.context;if(n.$.monthElement.context=document,n.$.monthElement.dataSource=n._monthsNames,n.$.monthElement.context=a,n._viewDates){for(let a=0;a<t.length;a++)t[a].firstElementChild.textContent=n._monthsNames[t[a]._date.getMonth()]+" "+t[a]._date.getFullYear();n._changeEventFired=1,n.$.monthElement.selectedIndexes=n._viewDates.map(t=>t.getMonth())}}}_setMonthWeekNumbers(t){const n=this,a=function(t){for(let n=1;n<t.children.length;n++)if(!t.children[n].classList.contains("smart-visibility-hidden"))return!0};let i=t.getElementsByClassName("smart-calendar-week");i=[].slice.call(i);for(let o=0;o<i.length;o++){if(!a(i[o])){i[o].children[0].innerHTML="";continue}const r=i[o].children[1],l=r.otherMonth?r.value.getTime()>t._date.getTime()?1:-1:0;i[o].children[0].innerHTML=n._getWeekNumber(new Date(t._date.getFullYear(),t._date.getMonth()+l,r.value.getDate()))}}_setRestrictedDates(t){const n=this,a=n.$.monthsContainer.children;for(let i=0;i<a.length;i++)n._getMonthCells(a[i]).map(t=>{n._setCellState(t,"restricted",!1)});if(n._viewDates){const a=function(t){for(let a=0;a<n._viewDates.length;a++)if(n._viewDates[a].getFullYear()===t.getFullYear()&&n._viewDates[a].getMonth()===t.getMonth())return!0};for(let o=0;o<t.length;o++)if(a(t[o])){const a=n._getCellByDate(t[o]);n._setCellState(a,"restricted",!0)}}}_setScrollButtonsNavigationMode(){const t=this;"landscape"===t.scrollButtonsNavigationMode?(t.$.previousMonthButton&&(t.$.previousMonthButton.$.button.firstElementChild.innerHTML="&#xe809"),t.$.nextMonthButton&&(t.$.nextMonthButton.$.button.firstElementChild.innerHTML="&#xe810")):(t.$.previousMonthButton&&(t.$.previousMonthButton.$.button.firstElementChild.innerHTML="&#xe80b"),t.$.nextMonthButton&&(t.$.nextMonthButton.$.button.firstElementChild.innerHTML="&#xe80d")),t._applyAnimationSettings(!0)}_tooltipEventHandler(t){const n=this;n.enableShadowDOM&&n.$.fireEvent(t.type,t.detail)}_refreshTitle(){const t=this;let n=0<t.selectedDates.length?t.selectedDates[t.selectedDates.length-1]:new Date;if(t.titleTemplate){if("function"==typeof t.titleTemplate)return;let a=t._layoutTemplates.filter(n=>n.selector===t.$.title)[0],i=document.importNode(a.template.content,!0);if(0<a.bindings.length){let o=i.childNodes[a.bindings[0].childNodeIndex];return n=n.toLocaleDateString(t.locale,{year:t.yearFormat,weekday:"short",month:"short",day:"numeric"}),void(a.selector.childNodes[a.bindings[0].childNodeIndex].innerHTML=o.innerHTML.replace(a.bindings[0].bindingString,n))}}t.$.title.children[0].innerHTML=n.toLocaleDateString(t.locale,{year:t.yearFormat}),t.$.title.children[1].innerHTML="landscape"===t.view?n.toLocaleDateString(t.locale,{weekday:"short"})+",</br>"+n.toLocaleDateString(t.locale,{month:"short",day:"numeric"}):n.toLocaleDateString(t.locale,{weekday:"short"})+", "+n.toLocaleDateString(t.locale,{month:"short",day:"numeric"})}_setWeeksVisibility(t){function n(t){return function(t){for(let n=1;n<t.children.length;n++)if(!t.children[n].classList.contains("smart-visibility-hidden"))return!1;return!0}(t)||o>=a.weeks?void t.classList.add("smart-hidden"):void(o<a.weeks&&(t.classList.remove("smart-hidden"),o++))}const a=this,i=t.children;let o;for(let r=0;r<i.length;r++){const t=i[r];let l=t.getElementsByClassName("smart-calendar-week");l=[].slice.call(l);let s=a._selectedCells.filter(t=>t.closest(".smart-calendar-month")===i[r]);if(6===a.weeks){l.map(t=>t.classList.remove("smart-hidden"));continue}if(o=0,0<s.length){let t=s[s.length-1],a=l.indexOf(t.parentElement);for(let t=a;t<l.length;t++)n(l[t]);for(let t=a-1;0<=t;t--)n(l[t])}else for(let t=0;t<l.length;t++)n(l[t])}}_refreshHeaderElements(){const t=this,n=document.activeElement.closest("smart-calendar")===t,a=t._animationStarted?t.$.nextMonthsContainer:t.$.dateViewContainer;let i=t._viewDates[t._viewDates.length-1],o=t._viewDates.map(t=>t.getFullYear()),r,l;if("month"===t.displayMode||"list"!==t.displayModeView){if(t.$.previousMonthButton&&!t.disabled&&("month"!==t.displayMode&&t.$.dateViewContainer.children[0].value?l="year"===t.displayMode?a.children[0].value.getFullYear()-1:a.children[1].value.getFullYear()-1:0>t._viewDates[0].getMonth()-1?(r=11,l=t._viewDates[0].getFullYear()-1):(r=t._viewDates[0].getMonth()-1,l=t._viewDates[0].getFullYear()),t.$.previousMonthButton.disabled=!!(l<t.min.getFullYear()||l===t.min.getFullYear()&&r<t.min.getMonth()),t.$.previousMonthButton.disabled&&n&&t.$.body.focus()),t.$.nextMonthButton&&!t.disabled&&("month"!==t.displayMode&&t.$.dateViewContainer.children[0].value?l="year"===t.displayMode?a.children[0].value.getFullYear()+1:a.children[1].value.getFullYear()+11:11<i.getMonth()+1?(r=0,l=i.getFullYear()+1):(r=i.getMonth()+1,l=i.getFullYear()),t.$.nextMonthButton.disabled=!!(l>t.max.getFullYear()||l===t.max.getFullYear()&&r>t.max.getMonth()),t.$.nextMonthButton.disabled&&n&&t.$.body.focus()),"classic"===t.calendarMode&&t.$.monthElement){const n=t.$.monthElement.items;if(n.map(t=>t.disabled=!1),-1<o.indexOf(t.min.getFullYear()))for(let a=0;a<t.min.getMonth();a++)n[a].disabled=!0;if(-1<o.indexOf(t.max.getFullYear()))for(let a=t.max.getMonth()+1;a<n.length;a++)n[a].disabled=!0;t._changeEventFired=t.$.monthElement.selectedIndexes.length,t.$.monthElement.selectedIndexes=[t._viewDates[0].getMonth()],t._changeEventFired=0}t.$.previousYearButton&&!t.disabled&&(l=t._viewDates[0].getFullYear()-1,t.$.previousYearButton.disabled=!!(l<t.min.getFullYear()),t.$.previousYearButton.disabled&&n&&t.$.body.focus()),t.$.nextYearButton&&!t.disabled&&(l=i.getFullYear()+1,t.$.nextYearButton.disabled=!!(l>t.max.getFullYear()),t.$.nextYearButton.disabled&&n&&t.$.body.focus()),t.$.yearElement&&(t.$.yearElement.value=o[0],t.$.yearElement.disabled=!!(i.getFullYear()+1>t.max.getFullYear()&&t._viewDates[0].getFullYear()-1<t.min.getFullYear()))}}_refreshHeaderTitle(){function t(){if("month"!==n.displayMode){if("list"===n.displayModeView&&n.$.listViewContainer.selectedValues[0]){let t=n.$.listViewContainer.items;a="year"===n.displayMode?new Date(n.$.listViewContainer.getItem(n.$.listViewContainer.selectedValues[0]).value).getFullYear():new Date(t[0].value).getFullYear()+" - "+new Date(t[t.length-1].value).getFullYear()}else if(n.$.dateViewContainer.children[0].value){let t=n._animationStarted?n.$.nextMonthsContainer.children:n.$.dateViewContainer.children;a="year"===n.displayMode?t[0].value.getFullYear():t[1].value.getFullYear()+" - "+t[t.length-2].value.getFullYear()}if(a)return a}const t=n._viewDates.slice(0).sort((t,n)=>t.getTime()-n.getTime()),i=t[0],o=t[t.length-1];return i.setDate(2),a=i.toLocaleDateString(n.locale,{year:n.yearFormat,month:n.monthNameFormat}),1<n.months&&(o.setDate(2),a+=" - "+o.toLocaleDateString(n.locale,{year:n.yearFormat,month:n.monthNameFormat})),a}const n=this;let a;if("default"===n.calendarMode&&(n.$.defaultHeaderDate.innerHTML=t()),"function"!=typeof n.headerTemplate&&n._layoutTemplates){let a=n._layoutTemplates.filter(t=>t.selector===n.$.header)[0];if(a){let i=document.importNode(a.template.content,!0);if(0<a.bindings.length){const o=i.childNodes[a.bindings[0].childNodeIndex];a.selector.childNodes[a.bindings[0].childNodeIndex].innerHTML=o.innerHTML.replace(a.bindings[0].bindingString,n.dateFormatFunction?n.dateFormatFunction(n._viewDates):t())}}}}_updateWeeksVisibility(){const t=this,n=t._focusedCell.parentElement;if(!n.classList.contains("smart-hidden"))return;const a=[].slice.call(n.parentElement.children),o=a.indexOf(n),r=function(t){for(let n=1;n<t.children.length;n++)if(!t.children[n].classList.contains("smart-visibility-hidden"))return!1;return!0};let l=0;a.map(t=>t.classList.add("smart-hidden"));for(let n=o;n<a.length;n++)if(!r(a[n])&&(a[n].classList.remove("smart-hidden"),l++,l===t.weeks))return;if(l<t.weeks)for(let n=o-1;0<=n;--n)if(a[n].classList.remove("smart-hidden"),l++,l===t.weeks)return}_getValidDates(t){function n(t){if(t instanceof Date)return t;if(Smart.Utilities.DateTime&&t instanceof Smart.Utilities.DateTime)return t.toDate();if("string"==typeof t){if("new Date()"===t.trim()||"new Smart.Utilities.DateTime()"===t.trim())return new Date;let n=/(\d+[,-.\/]{1}\s*\d+[,-.\/]{1}\s*\d+)/;const a=()=>{if(t=t.replace(/[,-.\/]/g,",").split(","),2<t.length)t=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]));else return new Date;return t};return n.test(t)?(t=n.exec(t)[0].replace(/[,-.\/]/g,",").split(","),t?new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])):a()):a()}}let a=[];if(void 0===t)return null;if(Array.isArray(t))for(let o=0;o<t.length;o++)a.push(n(t[o]));else a.push(n(t));return a=a.filter(t=>t&&"Invalid Date"!==t.toDateString()),a.map(t=>t.setHours(0,0,0,0)),a}_getValidDate(t){const n=this,a=n._getValidDates(t);return 0<a.length?a[0]:null}_validateSelectedDates(t){const n=this;let a=[];t||(t=n.selectedDates);let i=t.slice(0),o=function(t){for(let a=0;a<n.restrictedDates.length;a++)if(n.restrictedDates[a].getTime()===t.getTime())return!0};n.selectedDates=i.filter(function(t){return!!(t.getTime()>=n.min.getTime()&&t.getTime()<=n.max.getTime()&&!o(t))||void a.push(t)}),n._viewDates&&(a.map(t=>n._selectDate(t)),n._focusCell())}_validateMinMax(t,n,a){const o=this;switch(t){case"min":n=o._getValidDate(o[t]),o.min=n?n:a?a:o.properties.min.defaultValue;break;case"max":n=o._getValidDate(o[t]),o.max=n?n:a?a:o.properties.max.defaultValue;break;default:n=o._getValidDate(o.min),o.min=n?n:a?a:o.properties.min.defaultValue,n=o._getValidDate(o.max),o.max=n?n:a?a:o.properties.max.defaultValue;}o.min=o.min.getTime()>o.max.getTime()?o.max:o.min,o.min.setHours(0,0,0,0),o.max.setHours(0,0,0,0);let r=o.$.monthsContainer.children,l;if(o._viewDates){if(o._viewDates[0].getTime()>o.max.getTime()||o._viewDates[0].getTime()<o.min.getTime())return void o._handleMonths();for(let t=0;t<r.length;t++){l=o._getMonthCells(r[t]);for(let n=0;n<l.length;n++){const a=l[n];if(a.value.getTime()>=o.min.getTime()&&a.value.getTime()<=o.max.getTime())o._setCellState(a,"restricted",!1),a.value.getMonth()===r[t]._date.getMonth()?a.classList.remove("smart-visibility-hidden"):!o.hideOtherMonthDays&&(o._setCellState(a,"otherMonth",!0),a.classList.remove("smart-visibility-hidden")),"month"!==o.displayMode&&o._setCellState(a,"otherMonth",!1);else{if(!a.otherMonth)o._setCellState(a,"restricted",!0);else if(a.classList.contains("smart-visibility-hidden")){o._setCellState(a,"restricted",!1);continue}"month"!==o.displayMode&&(a.classList.remove("smart-visibility-hidden"),o._setCellState(a,"otherMonth",!0))}}}}}_setCellState(t,n,a){t[n]=a;const i=Smart.Utilities.Core.toDash(n);a?t.setAttribute(i,""):t.removeAttribute(i)}_validateTemplate(t,n){if(null!==n&&n&&"function"!=typeof n){const a=this;return"content"in document.createElement("template")?("string"==typeof n&&(n=document.getElementById(n)),null!==n&&"content"in n?n:void a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:t}))):void a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()}))}}_weeksDownHandler(t,n){const a=this,i=n.value;let o;return(n.otherMonth&&(o=n.value.getTime()>n.closest(".smart-calendar-month")._date.getTime()?1:-1),a.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(n,t.pageX,t.pageY),o)?a._isDateInView(n.value)?void 0:void(a.disableAutoNavigation||a.navigate(o*a.months)):void(n=a._getCellByDate(i),n&&(n.disabled||n.restricted)||a._handleDateSelection(n))}_firstDayOfWeekValidator(t,n){return Math.min(Math.max(0,isNaN(n)?6:n),6)}_weeksValidator(t,n){return Math.min(Math.max(1,isNaN(n)?6:n),6)}_monthsValidator(t,n){return Math.min(Math.max(1,isNaN(n)?1:n),12)}}),Smart("smart-input",class extends Smart.BaseElement{static get properties(){return{dataSource:{type:"any",value:[]},dropDownDataSource:{type:"any",value:[]},dropDownHeight:{type:"any",value:200},dropDownWidth:{type:"any",value:null},dropDownButtonPosition:{allowedValues:["none","left","right"],value:"none",type:"string"},items:{type:"number",value:8},minLength:{type:"number",value:1},name:{value:"",type:"string"},openedre:{value:!1,type:"boolean"},query:{type:"string",value:""},queryMode:{allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string",value:"containsIgnoreCase"},placeholder:{value:"",type:"string"},readonly:{type:"boolean",value:!1},type:{type:"string"},value:{type:"string",value:""}}}static get styleUrls(){return["smart.textbox.css"]}template(){return"<div tabindex=0 id=\"inputContainer\"><input class=\"smart-input\" id='input' readonly='[[readonly]]' pleaseholder='[[placeholder]]' type='[[type]]' name='[[name]]' value='{{value::keyup}}' disabled='[[disabled]]' role='input'/><div id=\"dropDownButton\" tabindex=-1 class=\"smart-drop-down-button\"><div id=\"arrow\" class=\"arrow\"></div></div></div>"}static get listeners(){return{"input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}focus(){const t=this;t.$.input.focus()}select(){const t=this;t.readonly?t.$.input.focus():t.$.input.select()}_documentUpHandler(t){const n=this;let a=t.originalEvent.target;if(a!==n&&a!==n.$.dropDownButton&&a!==n.$.input&&a!==n.$.arrow){if(n._isPointerDown)return n._isPointerDown=!1,void n.$.input.focus();if(!n.$.scrollView.contains(a)){const a=n.close();a&&(t.stopPropagation(),t.preventDefault(),t.originalEvent.stopPropagation(),t.originalEvent.preventDefault())}}}_focusHandler(){const t=this;t.setAttribute("focus","")}_blurHandler(){const t=this;t.opened||t.removeAttribute("focus")}_refreshMenu(){const t=this;t.$.menu.classList.remove("scroll"),t.$.scrollView.computedVerticalScrollBarVisibility&&t.$.menu.classList.add("scroll")}_performSelect(){const t=this,n=t.$.menu.querySelector(".active").getAttribute("data-value");t.value=n,t.close()}_offsetTop(t){const n=this;return t?t.offsetTop+n._offsetTop(t.offsetParent):0}_offsetLeft(t){const n=this;return t?t.offsetLeft+n._offsetLeft(t.offsetParent):0}_offset(t){return{left:this._offsetLeft(t),top:this._offsetTop(t)}}_open(){const t=this,n=t._offset(t);this.opened||(t.timer&&clearTimeout(t.timer),document.body.appendChild(t.$.scrollView),t.$.scrollView.style.left=-3+n.left+"px",t.$.scrollView.style.top=n.top+t.offsetHeight+1+"px",t.$.scrollView.classList.remove("open"),t.$.scrollView.onpointerdown=function(){t._isPointerDown=!0},requestAnimationFrame(function(){t.$.scrollView.refresh(),t._refreshMenu(),t.$.scrollView.setAttribute("open",""),t.setAttribute("open",""),t.$.dropDownButton.setAttribute("open",""),t.$.input.setAttribute("open",""),"auto"!==t.dropDownWidth&&t.dropDownWidth?t.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",t.dropDownWidth+"px"):"auto"===t.dropDownWidth?t.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""):t.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",t.offsetWidth-8+"px")}),t.$.scrollView.refresh(),t._refreshMenu(),this.opened=!0)}close(){const t=this;return!!t.opened&&(t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){t.$.scrollView.parentNode&&!t.opened&&document.body.removeChild(t.$.scrollView)},1e3),t.$.scrollView.removeAttribute("open"),t.$.dropDownButton.removeAttribute("open"),t.$.input.removeAttribute("open"),t.removeAttribute("open"),t.opened=!1,t.$.input.focus(),!0)}_lookup(t){const n=this;let a=[];return(n.query=n.$.input.value,n.$.input.readonly&&(!n._incrementalSearchQuery&&(n._incrementalSearchQuery=""),n._incrementalSearchQuery+=t.key,n._incrementalSearchTimer&&clearTimeout(n._incrementalSearchTimer),n.query=n._incrementalSearchQuery,n._incrementalSearchTimer=setTimeout(function(){n._incrementalSearchQuery=""},700)),!n.query||n.query.length<n.minLength)?void n.close():(a="function"==typeof n.dataSource?n.dataSource(n.query):n.dataSource,n._process(a))}_downHandler(t){const n=this;n.readonly&&n._dropDownButtonDownHandler(t)}_dropDownButtonDownHandler(t){const n=this;return n._toggle(),t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),!1}_toggle(){const t=this;t.opened?t.close():t.open()}open(){const t=this;let n;t.dropDownDataSource?(t.query="",n="function"==typeof t.dataSource?t.dataSource(t.query):t.dataSource):n="function"==typeof t.dropDownDataSource?t.dropDownDataSource(t.query):t.dropDownDataSource,t._process(n);const a=t.$.menu.querySelector(".active");if(a)for(let n=0;n<t.$.menu.children.length;n++){const i=t.$.menu.children[n],o=i.getAttribute("data-value");if(o===t.$.input.value){a.classList.remove("active"),i.classList.add("active");break}}t.ensureVisible(),t.$.input.focus(),setTimeout(function(){t.$.input.focus()},25)}_process(t){const n=this;"string"==typeof t&&(t=n.$.deserialize(t,"array")),t=t.filter(function(t){return n.matcher?n.matcher:n._matcher(t)}),t=n._sorter(t),t.sort(),!t.length&&n.opened&&n.close();0===t.length||(0<n.query.length?n._render(t.slice(0,n.items)):n._render(t),n._open(),n.$.scrollView.refresh(),n._refreshMenu(),n.ensureVisible())}_matcher(t){const n=this,a=n.query;switch(n.queryMode){case"startsWith":return t.startsWith(a);case"startsWithIgnoreCase":return t.toLowerCase().startsWith(a.toLowerCase());case"doesNotContain":return 0>t.indexOf(a);case"doesNotContainIgnoreCase":return 0>t.toLowerCase().indexOf(a.toLowerCase());case"contains":return-1<t.indexOf(a);default:case"containsIgnoreCase":return~t.toLowerCase().indexOf(a.toLowerCase());case"equals":return 0===t.localeCompare(a);case"equalsIgnoreCase":return 0===t.toLowerCase().localeCompare(a.toLowerCase());case"endsWith":return t.endsWith(a);case"endsWithIgnoreCase":return t.toLowerCase().endsWith(a.toLowerCase());}}_sorter(t){const n=this;let a=[],i=[],o=[],r;for(;r=t.shift();)r.toLowerCase().indexOf(n.query.toLowerCase())?~r.indexOf(n.query)?i.push(r):o.push(r):a.push(r);return a.concat(i,o)}_highlighter(t){const n=this,a=n.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+a+")","ig"),function(t,n){return"<strong>"+n+"</strong>"})}_render(t){const n=this,a=t.map(function(t){const a=document.createElement("li"),i=document.createElement("a");return i.href="#",a.setAttribute("data-value",t),i.innerHTML=n.highlighter?n.highlighter(t):n._highlighter(t),a.appendChild(i),a});0<a.length&&a[0].classList.add("active"),n.$.menu.innerHTML="";for(let o=0;o<a.length;o++){const t=a[o];n.$.menu.appendChild(t),t.onmouseenter=function(){this.classList.add("active")},t.onmouseleave=function(){this.classList.remove("active")}}}ensureVisible(){const t=this,n=t.$.menu.querySelector(".active");n&&(n.offsetTop+n.offsetHeight>=t.$.scrollView.scrollTop+t.$.scrollView.offsetHeight&&(t.$.scrollView.scrollTop=n.offsetTop+n.offsetHeight),(n.offsetTop<=t.$.scrollView.scrollTop||n.offsetTop>=t.$.scrollView.scrollTop+t.$.scrollView.offsetHeight)&&(t.$.scrollView.scrollTop=n.offsetTop),0===[...t.$.menu.children].indexOf(n)?t.$.scrollView.scrollTop=0:[...t.$.menu.children].indexOf(n)===t.$.menu.children.length-1&&(t.$.scrollView.scrollTop=t.$.scrollView.scrollHeight))}_next(){const t=this,n=t.$.menu.querySelector(".active");if(!n)return void t.$.menu.firstElementChild.classList.add("active");n.classList.remove("active");let a=n.nextElementSibling;a||(a=t.$.menu.firstElementChild),a.classList.add("active"),t.ensureVisible()}_prev(){const t=this,n=t.$.menu.querySelector(".active");if(!n)return void t.$.menu.firstElementChild.classList.add("active");n.classList.remove("active");let a=n.previousElementSibling;a||(a=t.$.menu.lastElementChild),a.classList.add("active"),t.ensureVisible()}_move(t){const n=this;if(n.opened){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),n._prev();break;case 40:t.preventDefault(),n._next();}t.stopPropagation()}}_keyDownHandler(t){const n=this;n._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(t.keyCode);t.shiftKey||t.altKey||t.ctrlKey||n._move(t)}_keyPressHandler(t){const n=this;n._suppressKeyPressRepeat||t.shiftKey||t.altKey||t.ctrlKey||n._move(e)}_keyUpHandler(t){const n=this;if(!(t.shiftKey||t.altKey||t.ctrlKey))switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:40===t.keyCode&&t.altKey&&n.open(),38===t.keyCode&&t.altKey&&n.close();break;case 9:case 13:if(!n.opened)return;n._performSelect(),t.stopPropagation(),t.preventDefault();break;case 27:if(!n.opened)return;n.close(),t.stopPropagation(),t.preventDefault();break;default:n._lookup(t),!n.opened||t.ctrlKey||t.shiftKey||(t.stopPropagation(),t.preventDefault());}}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;"dropDownHeight"===t&&i.$.scrollView.style.setProperty("--smart-input-drop-down-menu-height",i.dropDownHeight+"px"),"opened"===t&&(a?i.open():i.close())}ready(){const t=this;super.ready();const n=document.createElement("ul"),a=document.createElement("smart-scroll-viewer");a.horizontalScrollBarVisibility="hidden",a.appendChild(n),a.style.setProperty("--smart-input-drop-down-menu-height",t.dropDownHeight+"px"),a.classList.add("smart-input-drop-down-menu"),a.id=t.id+"_"+t.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),t.setAttribute("aria-controls",a.id),t.$.scrollView=a,t.$.menu=n,t.opened&&t.open(),t.opened=!1,t.$.inputContainer.tabIndex=0,t.$.menu.onclick=function(n){n.stopPropagation(),n.preventDefault(),t._performSelect(),t.$.input.focus()}}}),Smart("smart-card",class extends Smart.ContentElement{static get properties(){return{dataSource:{value:null,type:"object?",reflectToAttribute:!1},itemTemplate:{value:null,type:"any?",reflectToAttribute:!1},contentHandler:{value:null,type:"function?",reflectToAttribute:!1}}}static get listeners(){return{mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler","container.swipeleft":"_swipeHandler","container.swiperight":"_swipeHandler","container.swipetop":"_swipeHandler","container.swipebottom":"_swipeHandler"}}static get styleUrls(){return["smart.card.css"]}template(){return`<div id="container" inner-h-t-m-l="[[innerHTML]]">
                <content></content>
            </div>`}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;"itemTemplate"===t?(i._template=i._handleTemplate(),i.innerHTML=i._processTemplate(),i.contentHandler&&i.contentHandler(i)):"dataSource"===t?(i.innerHTML=i._processTemplate(),i.contentHandler&&i.contentHandler(i)):"contentHandler"===t?i.contentHandler&&i.contentHandler(i):void 0}ready(){super.ready();const t=this;t._template=t._handleTemplate(),t._template.hasBindings?t.innerHTML=t._processTemplate():t.itemTemplate&&(t.innerHTML=t._template.content),t.contentHandler&&t.contentHandler(t)}_handleTemplate(){const t=this;let n=t.itemTemplate,a="",i=!1,o=/{{\w+}}/g;return t.itemTemplate?n instanceof HTMLElement?a=n.innerHTML:(n=document.getElementById(n),a=n?n.innerHTML:""):a=t.innerHTML,o.exec(a)&&(i=!0),{content:a,hasBindings:i}}_processTemplate(){const t=this,n=/{{\w+}}/g,a=t._template.content.match(n),i=t.dataSource||{};let o=t._template.content;return a&&0!==a.length?(a.forEach(function(t){const n=t.replace("{{","").replace("}}","");o=o.replace(t,i[n]||"")}),o):o}_swipeHandler(t){t.stopPropagation(),this.$.fireEvent(t.type)}}),Smart("smart-carousel",class extends Smart.ContentElement{static get properties(){return{autoPlay:{value:!1,type:"any"},dataSource:{value:[],type:"array",reflectToAttribute:!1},delay:{value:200,type:"number"},displayMode:{allowedValues:["default","multiple","3d"],value:"default",type:"string"},disableItemClick:{value:!1,type:"boolean"},hideArrows:{value:!1,type:"boolean"},hideIndicators:{value:!1,type:"boolean"},indicatorTemplate:{value:null,type:"any"},interval:{value:5e3,type:"number"},itemTemplate:{value:null,type:"any"},keyboard:{value:!1,type:"boolean"},loop:{value:!1,type:"boolean"},messages:{value:{en:{htmlTemplateNotSuported:"{{elementType}}:  Browser doesn't support HTMLTemplate elements."}},type:"object",extend:!0},slideShow:{value:!1,type:"boolean"},swipe:{value:!1,type:"boolean"},wheel:{value:!1,type:"boolean"}}}static get listeners(){return{"arrowLeft.click":"_handleArrowClick","arrowRight.click":"_handleArrowClick","indicatorsContainer.click":"_handleIndicatorsContainerClick",keydown:"_handleKeyDown",swipeleft:"_handleSwipe",swiperight:"_handleSwipe",wheel:"_handleMouseWheel","itemsContainer.click":"_handleItemClick","itemsContainer.transitionend":"_handleTransitionEnd"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.button.css","smart.carousel.css"]}template(){return`<div id="container">
                    <div id="itemsContainer" inner-h-t-m-l="[[innerHTML]]" class="smart-items-container"><content></content></div>
                    <smart-repeat-button initial-delay="0" delay="[[delay]]" id="arrowLeft" animation="[[animation]]" unfocusable class="smart-arrow smart-arrow-left"></smart-repeat-button>
                    <smart-repeat-button initial-delay="0" delay="[[delay]]" id="arrowRight" animation="[[animation]]" unfocusable class="smart-arrow smart-arrow-right"></smart-repeat-button>
                    <div id="indicatorsContainer" class="smart-indicators-container"></div>
                </div>`}propertyChangedHandler(t,n,a){const i=this;switch(super.propertyChangedHandler(t,n,a),t){case"disabled":i._setFocusable();break;case"dataSource":if(i._generateIndicators(),i._generateItems(),i._handleIndicatorsState(0,0),i._handleItemsState(0,0),i._handle3dMode(0),!1!==i.autoPlay){const t=parseInt(i.autoPlay);t?setTimeout(function(){i.play()},t):i.play()}i._animationTrigger(i._currentIndex);break;case"itemTemplate":i._generateItems(),i._handleItemsState(i._currentIndex,i._currentIndex+1);break;case"indicatorTemplate":i._generateIndicators(),i._handleIndicatorsState(i._currentIndex,i._currentIndex+1);break;case"interval":i.pause(),i.play();break;case"loop":i._handleArrowsActiveState(i._currentIndex,i._currentIndex);break;case"hideArrows":a||i._handleArrowsActiveState(i._currentIndex,i._currentIndex);break;case"displayMode":"multiple"===n&&i.$.itemsContainer.removeAttribute("style");}}ready(){super.ready();const t=this;if(t._setInitialState(),t._generateIndicators(),t._generateItems(),t._handleIndicatorsState(0,0),t._handleItemsState(0,0),t._handle3dMode(0),!1!==t.autoPlay){const n=parseInt(t.autoPlay);n?setTimeout(function(){t.play()},n):t.play()}t._setFocusable(),t._animationTrigger(t._currentIndex)}next(){const t=this,n=t.dataSource.length;if(t.disabled||0===n)return;let a=t._currentIndex;a=t.loop?a>=n-1?0:a+1:a>=n-1?a:a+1,t._goToItem(a)}pause(){const t=this;t._handleRotation(),t._rotate=!1}slideTo(t){const n=this;t=t?parseInt(t):0;n.disabled||0>t||t>n._items.length||n._goToItem(t)}prev(){const t=this,n=t.dataSource.length;if(t.disabled||0===n)return;let a=t._currentIndex;a=t.loop?0>=a?n-1:a-1:0>=a?0:a-1,t._goToItem(a)}play(){const t=this;t.disabled||!t.slideShow||(t._rotationInterval&&clearInterval(t._rotationInterval),t._handleRotation(!0),t._rotate=!0)}_animationTrigger(t){const n=this;for(let a=0;a<n._items.length;a++)a!==t&&n._items[a].classList.add("smart-animate-trigger")}_handle3dMode(t){const n=this,a=n.dataSource.length;if(!n.disabled&&a&&"3d"===n.displayMode){t=t||0;for(let o=0;o<a;o++){const a=o-t;a?n._items[o].setAttribute("position",a):n._items[o].removeAttribute("position")}}}_handleArrowsActiveState(t,n){const a=this,i=a.dataSource.length;a.loop?a.$.arrowLeft.disabled=a.$.arrowRight.disabled=!1:(0===n&&(a.$.arrowLeft.disabled=!1),n===i-1&&(a.$.arrowRight.disabled=!1),0===t&&(a.$.arrowLeft.disabled=!0),t===i-1&&(a.$.arrowRight.disabled=!0))}_handleArrowClick(t){const n=this,a=n._currentIndex;n.disabled||(n.$.arrowLeft.contains(t.target)?n.prev():n.next(),n._changeEvent(a,n._currentIndex))}_handleDefaultInnerHTML(){const t=this;if(!(t.dataSource&&0<t.dataSource.length)&&0<=t.$.itemsContainer.innerHTML.indexOf("<ul")){const n=t.$.itemsContainer.getElementsByTagName("ul")[0],a=n.getElementsByTagName("li");for(let n=0;n<a.length;n++){const i={HTMLcontent:a[n].innerHTML};t.dataSource.push(i)}}}_handleIndicatorsState(t,n){const a=this;!a.disabled&&0!==a._indicators.length&&(t||0===t)&&(n||0===n)&&(t!==n&&a._indicators[t].classList.remove("smart-active"),a._indicators[n].classList.add("smart-active"))}_handleItemClick(t){const n=this,a=t.target.closest(".smart-carousel-item");if(!(n.disabled||!a||"3d"!==n.displayMode||n.disableItemClick)){const t=parseInt(a.getAttribute("item-id")),i=parseInt(a.getAttribute("position"));3<Math.abs(i)||n._goToItem(t)}}_handleItemsState(t,n){const a=this;!a.disabled&&0!==a._items.length&&(t||0===t)&&(n||0===n)&&(t!==n&&(a._items[t].classList.remove("smart-active"),a._items[t].classList.add("smart-out")),a._items[n].classList.add("smart-active"))}_handleIndicatorsContainerClick(t){const n=this,a=t.target.closest(".smart-indicator"),i=n._currentIndex;if(!n.disabled&&a){const t=parseInt(a.getAttribute("indicator-id"));i===t||(n._goToItem(t),n._changeEvent(i,n._currentIndex))}}_handleMultipleMode(t){const n=this;if("multiple"!==n.displayMode)return;const a=n._items[t],i=a.offsetWidth,o=n.$.container.offsetWidth,r=n.$.itemsContainer.offsetWidth;let l=0;if(0===t)return void(n.$.itemsContainer.style.marginLeft="0px");if(t===n._items.length-1)return void(n.$.itemsContainer.style.marginLeft="-"+(r-o)+"px");for(let a=0;a<t;a++)l+=n._items[t].offsetWidth;l+i/2>=o/2&&l+i<r&&(n.$.itemsContainer.style.marginLeft="-"+(l+i/2-o/2)+"px")}_changeEvent(t,n){if(t!==n){const a=this;a.$.fireEvent("changing",{index:n,previousIndex:t}),a.hasAnimation||a.$.fireEvent("change",{index:n,previousIndex:t})}}_handleKeyDown(t){const n=this,a=t.key,i=n._currentIndex;!n.disabled&&n.keyboard&&-1!==["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","Home","End"," ","Enter"].indexOf(a)&&("ArrowLeft"===a||"ArrowDown"===a?n.prev():"ArrowUp"===a||"ArrowRight"===a?n.next():"Home"===a?n._goToItem(0):"End"===a?n._goToItem(n.dataSource.length-1):" "===a?n._rotate?n.pause():n.play():"Enter"===a?n.play():void 0,n._changeEvent(i,n._currentIndex))}_handleMouseWheel(t){const n=this,a=n._currentIndex;n.disabled||!n.wheel||document.activeElement!==n||(t.stopPropagation(),t.preventDefault(),0<t.deltaY?n.next():n.prev(),n._changeEvent(a,n._currentIndex))}_handleRotation(t){const n=this;t?n._rotationInterval=setInterval(function(){n.slideShow&&n.next()},n.interval):clearInterval(n._rotationInterval)}_handleSwipe(t){const n=this;n.disabled||!n.swipe||(t.stopPropagation(),t.preventDefault(),"swipeleft"===t.type?n.prev():n.next())}_generateIndicator(t){const n=this,a=document.createElement("span"),i=t?t:0;if(n.indicatorTemplate){const t=n._validateTemplate(n.indicatorTemplate);a.innerHTML=n._processItemTemplate(t.content,n.dataSource[i])}return a.classList.add("smart-indicator"),a.setAttribute("indicator-id",i),a}_generateIndicators(){const t=this,n=t.dataSource.length;let a=[],o=document.createDocumentFragment();for(let r=0;r<n;r++){const n=t._generateIndicator(r);a.push(n),o.appendChild(n)}t._indicators=a,t.$.indicatorsContainer.innerHTML="",t.$.indicatorsContainer.appendChild(o)}_generateItem(t){const n=this,a=document.createElement("div"),i=t?t:0;if(n.itemTemplate){const t=n._validateTemplate(n.itemTemplate);a.innerHTML=n._processItemTemplate(t.content,n.dataSource[i])}else{const t=n.dataSource[i];a.innerHTML=`<div class="smart-carousel-item-container" style="background-image:url('${t.image||""}')">
                        <h2 class="smart-carousel-item-label">${t.label||""}</h2>
                        <p class="smart-carousel-item-content">${t.content||""}</p>
                    </div>
                    <div class="smart-carousel-html-content">${t.HTMLcontent||""}</div>
                </div>`}return a.classList.add("smart-carousel-item"),a.setAttribute("item-id",i),a}_processItemTemplate(t,n){const a=/{{\w+}}/g,i=t.match(a);let o=t;return i&&0!==i.length?(i.forEach(function(t){const a=t.replace("{{","").replace("}}","");o=o.replace(t,n[a]||"")}),o):o}_generateItems(){const t=this,n=t.dataSource.length;let a=[],o=document.createDocumentFragment();for(let r=0;r<n;r++){const n=t._generateItem(r);a.push(n),o.appendChild(n)}t._items=a,t.$.itemsContainer.innerHTML="",t.$.itemsContainer.appendChild(o)}_goToItem(t,n){const a=this,i=a.dataSource.length,o=a._currentIndex;let r=t;0>t?r=0:t>i-1&&(r=i-1),a._removeFadeOut(),a._animationTrigger(),a._handleIndicatorsState(o,r),a._handleItemsState(o,r),a._currentIndex=r,n&&a._changeEvent(o,r),a._handle3dMode(r),a._handleMultipleMode(r),a._handleArrowsActiveState(r,o)}_setFocusable(){const t=this;if(t.disabled||t.unfocusable)return t.removeAttribute("tabindex"),void(t.tabIndex=-1);let n=0<t.tabIndex?t.tabIndex:0;t.setAttribute("tabindex",n),t.tabIndex=n}_setInitialState(){const t=this;t._currentIndex=0,t._indicators=[],t._items=[],t._rotate=!1,t._handleDefaultInnerHTML()}_validateTemplate(t){const n=this;let a="",i=!1,o=/{{\w+}}/g;return("function"==typeof t&&(a=t()),!("content"in document.createElement("template")))?(n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()})),void(n.itemTemplate=null)):(t instanceof HTMLElement?a=t.innerHTML:(t=document.getElementById(t),a=t?t.innerHTML:""),o.exec(a)&&(i=!0),{content:a,hasBindings:i})}_handleTransitionEnd(t){if(t.target.classList.contains("smart-carousel-item")&&!t.target.getAttribute("position")){const n=this,a=t.target.getAttribute("item-id");n._lastTransitionEndId===a||(n._removeFadeOut(),this.$.fireEvent("change",{index:a,previousIndex:n._lastTransitionEndId}),n._lastTransitionEndId=a)}}_removeFadeOut(){const t=this,n=t.$.itemsContainer.getElementsByClassName("smart-out");if(n.length)for(let t=0;t<n.length;t++)n[t].classList.remove("smart-out")}}),Smart("smart-chip",class extends Smart.ContentElement{static get properties(){return{avatar:{value:null,type:"string?"},closeButton:{value:!1,type:"boolean"},itemTemplate:{value:null,type:"any?",reflectToAttribute:!1},value:{value:"",type:"string"}}}static get listeners(){return{click:"_clickHandler",keydown:"_keyDownHandler"}}static get styleUrls(){return["smart.chip.css"]}template(){return`<div id="container">
                    <span id="avatar" class ="smart-avatar">[[avatar]]</span><!--
                --><span id="value" class ="smart-value" inner-h-t-m-l="[[innerHTML]]"><content></content></span><!--
                --><span id="closeButton" class ="smart-close-button"></span>
            </div>`}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;"disabled"===t||"unfocusable"===t?i._setFocusable():"avatar"===t?i.itemTemplate?i._setAvatar(i._customAvatar):i._setAvatar(i.$.avatar):"itemTemplate"===t?i._applyTemplate():"value"===t?i.itemTemplate?i._applyTemplate():i.$.value.innerHTML=a||"":void 0}ready(){super.ready();const t=this;t.value=t.value?t.value:t.innerHTML,t._applyTemplate(),t._setFocusable()}close(){const t=this;t.$.fireEvent("close",{value:t.value}),t.parentElement.removeChild(t)}_applyTemplate(){const t=this;let n=t.itemTemplate;if(!n)return t.$.value.innerHTML=t.value,void t._setAvatar(t.$.avatar);if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(n instanceof HTMLTemplateElement||(n=document.getElementById(n)),null===n||!("content"in n))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase()}));let a=n.innerHTML;t.$.container.innerHTML=a.replace(/{{\s*value\s*}}/g,t.value),t._customAvatar=t.$.container.querySelector(".smart-avatar"),t._setAvatar(t._customAvatar)}_clickHandler(t){const n=this;if(!n.disabled){const a=n.enableShadowDOM?n.shadowRoot.elementFromPoint(t.pageX,t.pageY):t.target;a.closest&&a.closest(".smart-close-button")&&n.close()}}_keyDownHandler(t){const n=this;let a=t.key;n.disabled||n.readonly||"Delete"!==a||n.close()}_setAvatar(t){if(t){const n=this,a=/\.(gif|jpg|jpeg|tiff|png)$/i.test(n.avatar);t.innerHTML=a?"<img src=\""+n.avatar+"\" />":n.avatar||""}}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void(t.tabIndex=0<t.tabIndex?t.tabIndex:0)}}),Smart("smart-list-item",class extends Smart.ContentElement{static get properties(){return{alternationIndex:{value:-1,type:"int"},displayMode:{allowedValues:["plain","checkBox","radioButton"],value:"plain",type:"string"},grouped:{value:!1,type:"boolean"},selected:{value:!1,type:"boolean"},value:{value:"",type:"string"},label:{value:"",type:"string"},details:{value:"",type:"string"},group:{value:"",type:"string"},hidden:{value:!1,type:"boolean"},readonly:{value:!1,type:"boolean"}}}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}get _focused(){const t=this;return void 0===t.__focused&&(t.__focused=!1),t.__focused}set _focused(t){const n=this;n.__focused=t,t?n.setAttribute("focus",""):n.removeAttribute("focus")}template(){return`<div id="container">
                   <span id='itemInput' class ='smart-input smart-hidden'></span>
                    <span class ="smart-overlay" id="overlay"></span>
                    <div id="itemContainer" class ="smart-content smart-list-item-container"><span class="smart-content-label" inner-h-t-m-l=\'[[innerHTML]]\'><content></content></span><span inner-h-t-m-l=\'[[details]]\' id="details" class="smart-content-details"></span></div>
                </div>`}appendChild(t){const n=this;if(!n.isCompleted||t.classList.contains("smart-ripple")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}n.$.itemContainer.innerHTML="",t instanceof HTMLElement&&n.$.itemContainer.appendChild(t)}insertBefore(t,n){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}n.parentNode.insertBefore(t,n)}removeChild(t){const n=this;if(!n.isCompleted||t.classList.contains("smart-ripple")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t instanceof HTMLElement&&n.$.itemContainer.removeChild(t)}attached(){const t=this;super.attached(),t.ownerListBox=t.getListBox()}static get listeners(){return{mouseenter:"_itemOnMouseEnter",mouseleave:"_itemOnMouseLeave"}}ready(){super.ready();const t=this;""===t.label?""!==t.innerHTML&&(t.label=t.innerHTML):t.innerHTML=t.label,t._setDisplayMode(t.displayMode),t.$.container.noRipple=!0}propertyChangedHandler(t,n,a){const i=this;if(super.propertyChangedHandler(t,n,a),"hidden"===t&&(a?i.$.addClass("smart-hidden"):i.$.removeClass("smart-hidden")),"displayMode"===t&&i._setDisplayMode(a),"label"===t){const t=i.context;i.context=document,i.innerHTML=a;const n=i.getListBox();n.onItemUpdated(i),i.context=t}if("details"===t){const t=i.context;i.context=document,i.$.details.innerHTML=a;const n=i.getListBox();n.onItemUpdated(i),i.context=t}if("innerHTML"===t){const t=i.getListBox();t.onItemUpdated(i)}}getListBox(){const t=this;let n=t.parentNode;for(;!1==n instanceof Smart.ListBox&&null!==n;)n=n.parentNode;return!n&&Smart.EnableShadowDOM?t.getRootNode().host:n}_itemOnMouseEnter(){const t=this;!t.disabled&&t.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&t.ownerListBox.allowDrop&&(Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"}),t.ownerListBox.$.verticalScrollBar.thumbCapture||t.ownerListBox.$.horizontalScrollBar.thumbCapture||t.setAttribute("hover",""))}_itemOnMouseMove(t){const n=this;if(n.ownerListBox&&Smart.ListBox.DragDrop.Dragging&&n.ownerListBox.allowDrop&&!Smart.Utilities.Core.isMobile){const a=[].slice.call(n.ownerListBox.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let t=0;t<a.length;t++)a[t].$.removeClass("smart-list-item-line-feedback"),a[t].$.removeClass("smart-list-item-bottom-line-feedback");if(Smart.ListBox.DragDrop.DropDetails={item:n,position:"top"},!n.ownerListBox._areCSSVarsSupported){if(n.ownerListBox._indexOf(n)===n.ownerListBox._items.length-1||n.parentNode.lastElementChild===n){const a=n.getBoundingClientRect();t.pageY-window.pageYOffset>a.top+a.height/2-1&&(Smart.ListBox.DragDrop.DropDetails={item:n,position:"bottom"})}return}if(n.$.removeClass("smart-list-item-line-feedback"),n.$.removeClass("smart-list-item-bottom-line-feedback"),n.ownerListBox.sorted&&n.ownerListBox.autoSort)return;const i=n.ownerListBox._items.filter(t=>!t.hidden);if(i.indexOf(n)===i.length-1||n.parentNode.lastElementChild===n){const a=n.getBoundingClientRect();t.pageY-window.pageYOffset>a.top+a.height/2-1?(n.$.addClass("smart-list-item-bottom-line-feedback"),Smart.ListBox.DragDrop.DropDetails={item:n,position:"bottom"}):!arguments[1]&&n.$.addClass("smart-list-item-line-feedback")}else arguments[1]||n.$.addClass("smart-list-item-line-feedback")}}_itemOnMouseLeave(){const t=this;t.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&(t.$.removeClass("smart-list-item-line-feedback"),t.$.removeClass("smart-list-item-bottom-line-feedback")),t.removeAttribute("hover"))}_setDisplayMode(t){const n=this,a=n.getListBox();if(a){const i="checkBox"===a.selectionMode||"radioButton"===a.selectionMode?a.selectionMode:"plain";n.displayMode=t=i}return"plain"===t?void n.$itemInput.addClass("smart-hidden"):void n.$itemInput.removeClass("smart-hidden")}}),Smart("smart-list-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"}}}get enableShadowDOM(){return!1}template(){return`<div id="container">
                 <span id="itemsLabel" class ="smart-list-items-group-label">[[label]]</span>
                 <div id="listItemsGroupContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-list-items-group-container">
                    <content></content>
                 </div>
               </div>`}appendChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t instanceof HTMLElement&&n.$.listItemsGroupContainer.appendChild(t)}removeChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t instanceof HTMLElement&&n.$.listItemsGroupContainer.removeChild(t)}getListBox(){const t=this;let n=t.parentNode;for(;!1==n instanceof Smart.ListBox&&null!==n;)n=n.parentNode;return n}attached(){const t=this;super.attached(),t.ownerListBox||(t.ownerListBox=t.getListBox())}}),Smart("smart-list-box",class extends Smart.ScrollViewer{static get properties(){return{allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},autoSort:{value:!0,type:"boolean"},dataSource:{value:null,type:"any?",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},shadowDomMode:{allowedValues:["light","shadow"],value:"shadow",type:"string"},dropAction:{value:"move",type:"string",allowedValues:["copy","move","none"]},editable:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterCallback:{value:null,type:"function?"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},filterInputPlaceholder:{value:"",type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{overridingProperties:"{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The \"{{property1}}\" property is used by default.",invalidIndex:"{{elementType}}: \"{{method}}\" method accepts an index of type number or an Array of numbers.",indexOutOfBound:"{{elementType}}: Out of bound index/indexes in \"{{method}}\" method.",invalidItem:"{{elementType}}: \"{{method}}\" method accepts an object or an array of objects as it's second parameter.",invalidSettings:"{{elementType}}: \"{{method}}\" method accepts a string or an object as it's second parameter."}},type:"object"},name:{value:"",type:"string"},placeholder:{value:"No Items",type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},selectionMode:{value:"oneOrManyExtended",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},selectionChangeAction:{value:"release",allowedValues:["press","release"],type:"string"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},topVisibleIndex:{value:-1,type:"int"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}static get styleUrls(){return["smart.listbox.css"]}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler","container.wheel":"_mouseWheelHandler","editInput.change":"_editInputEventHandler","editInput.blur":"_editInputEventHandler","editInput.keydown":"_editInputEventHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","itemsInnerContainer.down":"_downHandler","itemsInnerContainer.dblclick":"_dblclickEventHandler","itemsInnerContainer.move":"_itemsContainerMoveHandler","itemsContainer.mouseleave":"_mouseLeaveHandler","document.up":"_upHandler","document.move":"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}template(){return`<div id="container" class="smart-container">
                 <div class="smart-list-box-filter-input-container smart-hidden" id="filterInputContainer">
                     <input id="filterInput" disabled="[[disabled]]" placeholder='[[filterInputPlaceholder]]'>
                 </div>
                 <div id="itemsContainer" class="smart-list-items-container">
                      <div id="placeholder" class ="smart-placeholder">[[placeholder]]</div>
                      <div id="itemsInnerContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-list-items-inner-container">
                          <content></content>
                      </div>
                      <input type="text" id="editInput" class= "smart-hidden"/>
                 </div>
                 <smart-scroll-bar wait id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>
                 <smart-scroll-bar wait id="horizontalScrollBar" disabled="[[disabled]]" ></smart-scroll-bar>
                 <div id="loadingIndicatorContainer" class ="smart-loader-container">
                    <span id="loadingIndicator" class="smart-loader"></span>
                    <span id="loadingIndicatorPlaceHolder" class ="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>
                 </div>
                <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}_mouseLeaveHandler(){const t=this,n=[].slice.call(t.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let t=0;t<n.length;t++)n[t].$.removeClass("smart-list-item-line-feedback"),n[t].$.removeClass("smart-list-item-bottom-line-feedback")}_downHandler(t){const n=this;if(n.disabled||n.displayLoadingIndicator||n.readonly)return;let a=t.originalEvent.target,i=null;if(a instanceof Smart.ListItem&&!a.disabled&&!a.hidden&&!(a instanceof Smart.ListItemsGroup))i=a.dataItem;else for(;a.parentElement;){if(a instanceof Smart.ListItem&&!a.disabled&&!a.hidden&&!(a instanceof Smart.ListItemsGroup)){i=a.dataItem;break}a=a.parentElement}Smart.ListBox.DragDrop.StartTime=new Date,Smart.ListBox.DragDrop.StartPosition={left:t.pageX,top:t.pageY};i&&(t.stopPropagation(),n.hasRippleAnimation&&!i.readonly&&!i.disabled&&Smart.Utilities.Animation.Ripple.animate(a.$.overlay,t.pageX,t.pageY),!Smart.Utilities.Core.isMobile&&"press"===n.selectionChangeAction&&(n._focus(i),n.select(i)),!Smart.ListBox.DragDrop.Feedback&&n.allowDrag&&(Smart.ListBox.DragDrop.Feedback=document.createElement("span"),Smart.ListBox.DragDrop.Feedback.appendChild(i.offsetHeight?i.cloneNode(!0):n._createItem(i)),Smart.ListBox.DragDrop.Item=i,Smart.Utilities.Extend(Smart.ListBox.DragDrop.Feedback).addClass("smart-popup smart-list-item smart-list-item-feedback")))}_dblclickEventHandler(t){const n=this;if(n.editable){const a=t.target.closest("smart-list-item");return!(a instanceof Smart.ListItem)||a.disabled||a.readonly?void n.$editInput.addClass("smart-hidden"):void(n.$.editInput.owner=a,n.$.editInput.value=a.label,n.$.editInput.style.height=a.offsetHeight+"px",n.$.editInput.style.top=a.offsetTop+"px",n.$editInput.hasClass("smart-hidden")&&n.$editInput.removeClass("smart-hidden"),n.$.editInput.focus())}}_editInputEventHandler(t){const n=this;if("blur"===t.type||"keydown"===t.type&&"Escape"===t.key)return n.$editInput.hasClass("smart-hidden")?void 0:n.$editInput.addClass("smart-hidden"),void n.focus();if(!("keydown"===t.type||n.$editInput.hasClass("smart-hidden"))){const a=t.target;if(t.stopPropagation(),a.owner.label!==a.value&&(a.owner.label=a.value,n.itemTemplate&&n._applyTemplate(a.owner),n.dataSource)){const t=a.owner.dataIndex,i=n.dataSource[t];i&&(n.displayMember?i[n.displayMember]=a.value:i.label=a.value)}n.$editInput.addClass("smart-hidden"),n.$.fireEvent("itemLabelChange",{selected:a.owner.selected,disabled:a.owner.disabled,index:n._indexOf(a.owner),label:a.owner.label,value:a.owner.value})}}_pointerUpHandler(t){const n=this;let a=t.originalEvent,i=a.target;const o=a=>{const o=a.ownerListBox;o.disabled||o!==n||o.displayLoadingIndicator||"none"===o.selectionMode||a.grouped||a.readonly||(o._focus(a),o.select(a),t.preventDefault(),Smart.ListBox.DragDrop.StartPosition=null,n.$.fireEvent("itemClick",{selected:i.selected,disabled:i.disabled,index:n._indexOf(i),label:i.label,value:i.value}))};if(a.target instanceof Smart.ListItem&&!a.target.disabled&&!(a.target instanceof Smart.ListItemsGroup))return void o(i.dataItem);for(;i.parentElement;){if(i instanceof Smart.ListItem&&!i.disabled&&!(i instanceof Smart.ListItemsGroup)){o(i.dataItem);break}i=i.parentElement}if(this.enableShadowDOM&&"shadow"===this.shadowDomMode){const t=a.composedPath();for(let n=0;n<t.length;n++){const a=t[n];a instanceof Smart.ListItem&&!a.disabled&&o(a.dataItem)}}}_upHandler(t){var n=Math.abs;const a=this;if(!(a.disabled||a.readonly||!Smart.ListBox.DragDrop.StartPosition)){if(Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging){const i=n(t.pageX-Smart.ListBox.DragDrop.StartPosition.left),o=n(t.pageY-Smart.ListBox.DragDrop.StartPosition.top);let r=0<=i&&3>=i&&0<=o&&3>=o;if(Smart.Utilities.Core.isMobile&&300<=new Date-Smart.ListBox.DragDrop.StartTime&&(r=!1,Smart.ListBox.DragDrop.StartTime=null),r){const n=t.originalEvent.target.closest("smart-list-box");n?n._pointerUpHandler(t):a._pointerUpHandler(t),Smart.ListBox.DragDrop.StartPosition=null}else{let n=t.originalEvent.target;if(t.target instanceof Smart.ListItem&&!n.readonly&&!t.target.disabled&&!(t.target instanceof Smart.ListItemsGroup))t.preventDefault(),t.stopPropagation();else for(;n.parentElement;){if(n instanceof Smart.ListItem&&!n.readonly&&!n.disabled&&!(n instanceof Smart.ListItemsGroup)){t.preventDefault(),t.stopPropagation();break}n=n.parentElement}}}else if(!Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging&&"release"===a.selectionChangeAction){const n=t.originalEvent.target.closest("smart-list-box");n?n._pointerUpHandler(t):a._pointerUpHandler(t)}if(Smart.ListBox.DragDrop.Feedback){Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback),Smart.ListBox.DragDrop.Feedback=null;let n;if(Smart.Utilities.Core.isMobile&&Smart.ListBox.DragDrop.Dragging)for(let a=0;a<Smart.ListBox.DragDrop.ListBoxes.length;a++){const o=Smart.ListBox.DragDrop.ListBoxes[a],r=o.getBoundingClientRect();if(o.allowDrop&&!o.closest(".smart-visibility-hidden")&&r.left<=t.pageX&&t.pageX<=r.left+r.width&&r.top<=t.pageY&&t.pageY<=r.top+r.height){n=o;const a=o._items.filter(t=>!t.hidden);for(let n=0;n<a.length;n++){const i=a[n],l=i.getBoundingClientRect();if((a.indexOf(i)===a.length-1||i.parentNode.lastElementChild===i)&&t.pageY>=r.top+i.offsetTop-o.scrollTop+l.height/2&&t.pageY<=r.top-o.scrollTop+i.offsetTop+l.height){Smart.ListBox.DragDrop.DropDetails={item:i,position:"bottom"};break}if(t.pageY>=r.top+i.offsetTop-o.scrollTop&&t.pageY<=r.top+i.offsetTop+l.height-o.scrollTop){Smart.ListBox.DragDrop.DropDetails={item:i,position:"top"};break}}}}if(Smart.ListBox.DragDrop.Dragging){if(Smart.ListBox.DragDrop.DropDetails){let a=Smart.ListBox.DragDrop.DropDetails.item,i=Smart.ListBox.DragDrop.Item;const o=i.ownerListBox;if(n=!n&&t.originalEvent.target.closest?t.originalEvent.target.closest("smart-list-box"):n,a.$.removeClass("smart-list-item-line-feedback"),a.$.removeClass("smart-list-item-bottom-line-feedback"),n&&a.ownerListBox!==n&&0<n.items.length&&(a=n.items[n.items.length-1]),!(Smart.ListBox.DragDrop.Item!==a&&(n===a.ownerListBox||Smart.Utilities.Core.isMobile)))n&&0===n._items.length&&"none"!==n.dropAction&&("move"===n.dropAction?Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item):"copy"===n.dropAction&&(i=i.cloneNode(!0)),n.appendChild(i));else if("none"!==i.ownerListBox.dropAction){a.ownerListBox!==i.ownerListBox&&"move"===i.ownerListBox.dropAction&&Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item),"copy"===i.ownerListBox.dropAction&&(i=i.cloneNode(!0)),Smart.ListBox.DragDrop.Item.group=a.group;const t=a.ownerListBox;"checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&t.clearSelection(),"top"===Smart.ListBox.DragDrop.DropDetails.position?t.insertBefore(i,a):a.parentNode.lastElementChild===a?t.appendChild(i):t.appendChild(i,a),t.ensureVisible(i),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode?(t._focus(i),t._refreshSelection()):(t.clearSelection(),t.select(i))}i.selected&&n!==o&&o._refreshSelection();const r=Smart.ListBox.DragDrop.Item,l=r.ownerListBox;r.displayMode="checkBox"===l.selectionMode||"radioButton"===l.selectionMode?l.selectionMode:"plain",l.$.fireEvent("dragEnd",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,selected:r.selected,disabled:r.disabled,index:l._indexOf(r),label:r.label,value:r.value}),l._focus(r)}else{const n=Smart.ListBox.DragDrop.Item,a=n.ownerListBox;n.displayMode="checkBox"===a.selectionMode||"radioButton"===a.selectionMode?a.selectionMode:"plain",a.$.fireEvent("dragEnd",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,selected:n.selected,disabled:n.disabled,index:a._indexOf(n),label:n.label,value:n.value}),a._focus(n)}t.preventDefault()}Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}for(let t=0;t<Smart.ListBox.DragDrop.ListBoxes.length;t++){const n=Smart.ListBox.DragDrop.ListBoxes[t];n._dragInterval&&clearInterval(n._dragInterval)}}}_itemsContainerMoveHandler(t){const n=this;if(Smart.ListBox.DragDrop.Dragging)return n._applyItemFeedback(t),n._moveHandler(t),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),!1}_applyItemFeedback(t){const n=this,a=t.originalEvent.target,i=a.closest?a.closest("smart-list-item"):a;return Smart.Utilities.Core.isMobile?void(Smart.ListBox.DragDrop.DropDetails={item:Smart.ListBox.DragDrop.Item,position:"bottom"}):0===n.items.length?void 0:i?void i._itemOnMouseMove(t):void n.items[n.items.length-1]._itemOnMouseMove(t,!0)}_moveHandler(t){var n=Math.abs;if(Smart.ListBox.DragDrop.Feedback)if(!Smart.ListBox.DragDrop.Dragging){const a=n(t.pageX-Smart.ListBox.DragDrop.StartPosition.left),i=n(t.pageY-Smart.ListBox.DragDrop.StartPosition.top),o=new Date-Smart.ListBox.DragDrop.StartTime;let r=5<=a&&15>=a||5<=i&&15>=i;if(Smart.Utilities.Core.isMobile&&(300>o||1e3<o)&&(r=!1),r){Smart.ListBox.DragDrop.Dragging=!0,Smart.ListBox.DragDrop.Feedback.style.left=5+t.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=5+t.pageY+"px",document.body.appendChild(Smart.ListBox.DragDrop.Feedback),t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();const n=Smart.ListBox.DragDrop.Item,a=n.ownerListBox;a.$.fireEvent("dragStart",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,selected:n.selected,disabled:n.disabled,index:a._indexOf(n),label:n.label,value:n.value})}}else{Smart.ListBox.DragDrop.Feedback.style.left=5+t.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=5+t.pageY+"px";for(let n=0;n<Smart.ListBox.DragDrop.ListBoxes.length;n++){const a=Smart.ListBox.DragDrop.ListBoxes[n];a._dragInterval&&clearInterval(a._dragInterval),a._dragInterval=setInterval(function(){const n=a.getBoundingClientRect();n.left<=t.clientX&&n.left+n.width>=t.clientX&&(t.clientY>=n.top&&t.clientY<=n.top+20?a.scrollTop-=2:t.clientY>=n.top+n.height-20&&t.clientY<=n.top+n.height&&(a.scrollTop+=2))},1)}return t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),!1}}_focusHandler(){const t=this;t._focused=!0,t.setAttribute("focus","")}_blurHandler(){const t=this;t._focused=!1,t.removeAttribute("focus")}appendChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}n.isVirtualized?(-1<n._items.indexOf(t)&&n._items.splice(n._items.indexOf(t),1),n._items.push(t)):(t.dataItem=t,n.enableShadowDOM&&"light"===n.shadowDomMode?n.appendChild(t):n.$.itemsInnerContainer.appendChild(t),-1<n._items.indexOf(t)&&n._items.splice(n._items.indexOf(t),1),n._items.push(t)),n._refreshItems(),n._refreshSelection()}insertBefore(t,n){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}a.isVirtualized?(-1<a._items.indexOf(t)&&a._items.splice(a._items.indexOf(t),1),a._items.splice(a._indexOf(n),0,t)):(t.dataItem=t,n.parentNode.insertBefore(t,n),-1<a._items.indexOf(t)&&a._items.splice(a._items.indexOf(t),1),a._items.splice(a._indexOf(n),0,t)),a._refreshItems(),a._refreshSelection()}removeChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}if(n.isVirtualized)n._items.splice(n._indexOf(t),1);else if(t.parentNode){const a=n.selectedIndexes.slice(0),i=n.selectedValues.slice(0),o=a.indexOf(t.dataIndex);t.parentNode.removeChild(t),-1<o&&(a.splice(o,1),i.splice(o,1),n.selectedIndexes=a,n.selectedValues=i)}n._refreshItems()}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const o=this;switch(t){case"innerHTML":o.clearSelection(),o._dataBind(),o.innerHTML=o.content=Smart.Utilities.Core.html(o.$.content);break;case"dataSource":case"valueMember":case"groupMember":case"displayMember":{o.clearSelection(),o._dataBind();break}case"disabled":case"unfocusable":o._setFocusable();break;case"displayLoadingIndicator":{o._setLoadingIndicatorVisibility();break}case"filterable":{o._refreshFilter(),o._refreshLayout();break}case"grouped":{if(a?o._group():o._ungroup(),!("radioButton"===o.selectionMode))o._refreshSelection();else if(0<o.selectedValues.length){const t=o.selectedValues;o.clearSelection(),o.select(t[0])}o._refreshLayout();break}case"itemTemplate":{if(null===a||""===a)return o._items.map(t=>t.innerHTML=t.label),delete o._bindingDetails,void o._refreshLayout();const t=o.querySelectorAll("smart-list-item"),n=function(){o._handleItemTemplate(a)&&(o._items.map(t=>o._applyTemplate(t)),o._refreshLayout()),o.ownerElement&&o.ownerElement._setDropDownSize&&o.ownerElement._setDropDownSize(),o.$.fireEvent("bindingComplete")};0===t.length?n():o._ensureItemsReady(t,n);break}case"selectedIndexes":case"selectedValues":{let r=o.selectedIndexes.slice(0),i=o.selectedValues.slice(0);if(!o._items||0===o._items.length)return o.selectedIndexes=[],o.selectedValues=[],void(o.$.hiddenInput.value=o.selectedValues.toString());if(o._propertyChanging=!0,"selectedIndexes"===t){r=n.slice(0),o.clearSelection();for(let t=0;t<a.length;t++){const n=a[t],i=o._items[n];i&&("oneOrManyExtended"===o.selectionMode||"oneOrMany"===o.selectionMode?(0<o.selectedIndexes.length&&0==t&&o.clearSelection(),o._select(i)):o.select(i))}}else{i=n.slice(0),o.selectedValues=[],o.clearSelection();for(let t=0;t<a.length;t++){const n=a[t],i=o.getItem(n);i&&("oneOrManyExtended"===o.selectionMode?o._select(i):o.select(i))}}if(0<o.selectedIndexes.length&&o._focus(o._items[o.selectedIndexes[0]]),o._propertyChanging=!1,JSON.stringify(i)!==JSON.stringify(o.selectedValues.slice(0))){let t=[],n=[];for(let t=0;t<r.length;t++)0>o.selectedIndexes.indexOf(r[t])&&n.push(o._items[r[t]]);for(let n=0;n<o.selectedIndexes.length;n++)0>r.indexOf(o.selectedIndexes[n])&&t.push(o._items[o.selectedIndexes[n]]);let a={addedItems:t,removedItems:n};if(0<o.selectedIndexes.length){const t=o._items[o.selectedIndexes[o.selectedIndexes.length-1]];t!==void 0&&(a.selected=t.selected,a.disabled=t.disabled,a.index=o._indexOf(t),a.label=t.label,a.value=t.value)}else a.selected=!1,a.disabled=!1,a.index=-1,a.label="",a.value="";o.$.fireEvent("change",a)}break}case"selectionMode":{const t="checkBox"===o.selectionMode||"radioButton"===o.selectionMode?o.selectionMode:"plain",n=o.selectedIndexes.slice(0),a=o.selectedValues.slice(0);o._propertyChanging=!0;const r=o.selectedValues;o.selectedValues=[],o.clearSelection();for(let t=0;t<r.length;t++){const n=r[t],a=o.getItem(n);a&&("oneOrManyExtended"===o.selectionMode?o._select(a):o.select(a))}if(o._items.forEach(n=>n.displayMode=t),o._recycle(),o._propertyChanging=!1,JSON.stringify(a)!==JSON.stringify(o.selectedValues.slice(0))){let t=[],a=[];for(let t=0;t<n.length;t++)0>o.selectedIndexes.indexOf(n[t])&&a.push(o._items[n[t]]);for(let a=0;a<o.selectedIndexes.length;a++)0>n.indexOf(o.selectedIndexes[a])&&t.push(o._items[o.selectedIndexes[a]]);let i={addedItems:t,removedItems:a};if(0<n.length){const t=o._items[n[n.length-1]];t&&(i.selected=t.selected,i.disabled=t.disabled,i.index=o._indexOf(t),i.label=t.label,i.value=t.value)}o.$.fireEvent("change",i)}break}case"topVisibleIndex":o._setTopVisibleIndex(a);break;case"autoSort":o._canSort=a;break;case"sortDirection":case"sorted":{o._canSort=!0,a?o._sort():o._unsort();const t=o.selectedValues;o.selectedValues=[],o._refreshSelection();for(let n=0;n<t.length;n++){const a=t[n],i=o.getItem(a);i&&("oneOrManyExtended"===o.selectionMode?o._select(i):o.select(i))}o._refreshLayout(),o._canSort=o.autoSort;break}}}_refreshSelection(){const t=this;if(t._items&&0!==t._items.length){const n=t.selectedValues;t.selectedIndexes=[],t.selectedValues=[];for(let a=0;a<t._items.length;a++){const i=t._items[a];i.selected=!1,-1<n.indexOf(i.value)&&t.select(i)}t._recycle()}}clearSelection(){const t=this;if(!t._items||0===t._items.length)return;let n=[];for(let a=0;a<t._items.length;a++)t._items[a].selected&&n.push(t._items[a]);t._items.map(t=>t.selected=!1);const a=t.selectedValues.slice(0),i=t.selectedIndexes.slice(0);if(t.selectedIndexes=[],t.selectedValues=[],t.$.hiddenInput.value=t.selectedValues.toString(),t._recycle(),t.context!==t){let a={addedItems:[],removedItems:n};if(0<i.length){const n=t._items[i[i.length-1]];n&&(a.selected=n.selected,a.disabled=n.disabled,a.index=t._indexOf(n),a.label=n.label,a.value=n.value)}t.$.fireEvent("change",a)}}ensureVisible(t){const n=this;if(t)return!("string"==typeof t&&(t=n.getItem(t),!t))&&(n.isVirtualized||n.$.itemsContainer.scrollTop===n.scrollTop||(n.scrollTop=n.$.itemsContainer.scrollTop),t.top+t.height>=n.scrollTop+n.offsetHeight&&(n.scrollTop+=t.height,!n.isVirtualized&&(n.$.itemsContainer.scrollTop=n.scrollTop)),(t.top<=n.scrollTop||t.top>=n.scrollTop+n.$.itemsContainer.offsetHeight)&&(n.scrollTop=t.top,!n.isVirtualized&&(n.$.itemsContainer.scrollTop=n.scrollTop)),0===n._indexOf(t)||1===n._indexOf(t)&&1<n._items.length&&n._items[0].grouped?(n.scrollTop=0,!n.isVirtualized&&(n.$.itemsContainer.scrollTop=n.scrollTop)):n._indexOf(t)===n._items.length-1&&(n.scrollTop=n.scrollHeight,!n.isVirtualized&&(n.$.itemsContainer.scrollTop=n.scrollTop)),!0)}get items(){const t=this;return t._filteredItems?t._filteredItems:t._items}ready(){super.ready();const t=this;if(t.enableShadowDOM&&"light"===t.shadowDomMode){const n=document.createDocumentFragment();[].slice.call(t.$.itemsInnerContainer.children).map(t=>n.appendChild(t)),t.appendChild(n),t.$.itemsInnerContainer.appendChild(document.createElement("slot"))}t._areCSSVarsSupported=Smart.Utilities.Core.CSSVariablesSupport(),t._keysPressed={},t._incrementalSearchQuery="",t._incrementalSearchItems=[],t._canSort=!0,t._previousEntry="",t.isUpdating=0,t._scrollView&&(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar),t._scrollView.hScrollBar.$.addClass("smart-hidden"),t._scrollView.vScrollBar.$.addClass("smart-hidden"));const n=t._scrollView.vScrollBar,a=t._scrollView.hScrollBar;n.hasStyleObserver=!1,a.hasStyleObserver=!1,n.hasResizeObserver=!1,a.hasResizeObserver=!1,n.wait=!1,a.wait=!1,t._setFocusable(),t._setLoadingIndicatorVisibility(),t._refreshFilter(),t._initializeInnerHTML(),t._dataBind()}attached(){const t=this;super.attached(),Smart.ListBox.DragDrop||(Smart.ListBox.DragDrop={ListBoxes:[]}),Smart.ListBox.DragDrop.ListBoxes.push(t),t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar)),0<t.selectedIndexes.length&&t.ensureVisible(t._items[t.selectedIndexes[0]])}detached(){const t=this;if(super.detached(),t._scrollView&&(t._scrollView.unlisten(),delete t._scrollView),Smart.ListBox.DragDrop&&Smart.ListBox.DragDrop.ListBoxes){const n=Smart.ListBox.DragDrop.ListBoxes.indexOf(t);Smart.ListBox.DragDrop.ListBoxes.splice(n,1)}}_createItem(t,n,a){const i=this,o="checkBox"===i.selectionMode||"radioButton"===i.selectionMode?i.selectionMode:"plain",r=a?{}:document.createElement("smart-list-item");r.ownerListBox=i,"number"==typeof t&&(t=""+t);const l=function(n,a){return void 0===t[n]?t[a]:""+t[n]};let s="string"==typeof t?t:l(i.displayMember,"label"),d="string"==typeof t?t:l(i.valueMember,"value"),c=l(i.groupMember,"group");return void 0===s&&(void 0===n?s="":s=""+n),r.label=r.innerHTML=""+s,void 0===d&&(void 0===n?d=s:d=""+n),r.value=""+d,r.displayMode=o,r.selected=!!t.selected&&t.selected,r.disabled=!!t.disabled&&t.disabled,r.dataItem=r,void 0!==n&&(r.dataIndex=n),i._alternateItem(r),t.title&&(r.title=t.title),c&&(r.group=""+c),r}_alternateItem(t){const n=this,a=n.alternationStart,i=0<n.alternationEnd?n.alternationEnd:1/0;0>=n.alternationCount||(n._alternationIndexCounter===void 0&&(n._alternationIndexCounter=0),t.dataIndex>=a&&t.dataIndex<=i&&(t.alternationIndex=n._alternationIndexCounter++,n._alternationIndexCounter===n.alternationCount&&(n._alternationIndexCounter=0)))}_beginUpdate(){const t=this;t.isUpdating++}_isUpdating(){const t=this;return 0<t.isUpdating}_endUpdate(){const t=this;t.isUpdating--}get _scrollHeight(){const t=this;let n=0;if(t.isVirtualized){if(t.__scrollHeight)return t.__scrollHeight;if(0===t._items.length)return 0;t.isUpdating++;const a=t._createItem(t.dataSource[0]);t.$.itemsInnerContainer.appendChild(a);for(let o=0;o<t._items.length;o++){const i=t._items[o];if(i.hidden){i.height=0,i.top=n;continue}t.itemHeight?(32>t.itemHeight&&(t.itemHeight=32),i.height=t.itemHeight):(a.label=i.label,i.height=a.offsetHeight),i.top=n,n+=i.height}t.$.itemsInnerContainer.removeChild(a),t.__scrollHeight=n-t.$.itemsInnerContainer.offsetHeight,t.filterable&&(t.__scrollHeight+=t.$.filterInput.offsetHeight),n=t.__scrollHeight,t.isUpdating--}else{for(let a=0;a<t._items.length;a++){const i=t._items[a];if(i.hidden){i.height=0,i.top=n;continue}t.itemHeight?"auto"!==t.itemHeight&&(i.height=t.itemHeight,i.style.height=i.height+"px"):i.height=i.offsetHeight,i.top=i.offsetTop,n+=i.height}n=t.$.itemsInnerContainer.scrollHeight-t.$.itemsInnerContainer.offsetHeight,t.filterable&&0<n&&(n+=t.$.filterInput.offsetHeight),t.__scrollHeight=n}return 0+n}_initializeRecyclingItems(){const t=this;if(!t.dataSource||t.dataSource&&0===t.dataSource.length||!t.isVirtualized)return;let n=0,a=t.offsetHeight;t.$.itemsInnerContainer.innerHTML="",t._recyclingItems=[];const i=function(){for(let o=0;o<t.dataSource.length;o++){const i=t.dataSource[o],r=t._createItem(i);if(t.itemHeight&&"auto"!==t.itemHeight&&(r.style.height=t.itemHeight+"px"),t.$.itemsInnerContainer.appendChild(r),n+=r.offsetHeight,r.dataItem=t._items[o],t._recyclingItems.push(r),n>1.5*a)break}};i();for(let t=0;n<1.5*a&&5>++t;)i()}_dataBind(){const t=this;if(t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar)),"function"==typeof t.dataSource&&(t._items=[]),"string"==typeof t.dataSource&&(t.dataSource=JSON.parse(t.dataSource)),null!==t.dataSource&&Array.isArray(t.dataSource)){t.isUpdating++;const n=n=>{t._items=[],t._groups=[];for(let a=0;a<t.dataSource.length;a++){const i=t.dataSource[a],o=n?t._createItem(i,a):t._createItem(i,a,!0);t._items[a]=o,n&&n.appendChild(o)}};if(t.isVirtualized)n(),t._initializeRecyclingItems();else{const a=document.createDocumentFragment();t.$.itemsInnerContainer.innerHTML="",n(a),t.$.itemsInnerContainer.appendChild(a)}t.isUpdating--}const n=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-list-item"):t.querySelectorAll("smart-list-item"),a=function(){t.isUpdating++,t.dataSource||(t._initializeHtmlListItems(),t._initializeHtmlListGroups()),t.grouped&&t._group(),t.sorted&&t._sort(),t._refreshLayout(),t._initializeSelection(),t.isInitialized=!0,t._canSort=t.autoSort,t.isUpdating--,t.itemTemplate&&t._handleItemTemplate(t.itemTemplate)&&(t._items.map(n=>t._applyTemplate(n)),t._refreshLayout()),t.__onCompleted&&(t._onCompleted=t.__onCompleted,t.__onCompleted=null,t._onCompleted()),-1<t.topVisibleIndex&&t._setTopVisibleIndex(t.topVisibleIndex),t.$.fireEvent("bindingComplete"),t._updateTopVisibleIndex(),0===t._items.length&&t.clearItems()};0===n.length?a():(t._onCompleted&&(t.__onCompleted=t._onCompleted,t._onCompleted=null),t._ensureItemsReady(n,a))}_ensureItemsReady(t,n){const a=this,i=function(){const a=function(n){for(let a=0;a<t.length;a++)t[a].context="node"===n?t[a]:document};a("node"),n(),a()};if(0===t.length)i();else{a._nodesReadyListeners=0;for(let n=0;n<t.length;n++){const o=t[n],r=function(){a._nodesReadyListeners--,0===a._nodesReadyListeners&&(i(),delete a._nodesReadyListeners)}.bind(a);o.isCompleted||(a._nodesReadyListeners++,o._onCompleted=r)}0===a._nodesReadyListeners&&i()}}_initializeInnerHTML(){const t=this;0<=t.$.itemsInnerContainer.innerHTML.indexOf("<option")?t.$.itemsInnerContainer.innerHTML=t.$.itemsInnerContainer.innerHTML.replace(/<optgroup/ig,"<smart-list-items-group").replace(/<\/optgroup/ig,"</smart-list-items-group").replace(/<option/ig,"<smart-list-item").replace(/<\/option/ig,"</smart-list-item"):0<=t.$.itemsInnerContainer.innerHTML.indexOf("<ul")&&(t.$.itemsInnerContainer.innerHTML=t.$.itemsInnerContainer.innerHTML.replace(/<ul/ig,"<smart-list-items-group").replace(/<\/ul/ig,"</smart-list-items-group").replace(/<li/ig,"<smart-list-item").replace(/<\/li/ig,"</smart-list-item"))}_initializeHtmlListItems(){const t=this,n=t.enableShadowDOM&&"shadow"===t.shadowDomMode?t.shadowRoot.querySelectorAll("smart-list-item"):t.querySelectorAll("smart-list-item"),a="checkBox"===t.selectionMode||"radioButton"===t.selectionMode?t.selectionMode:"plain",o=function(t,n,a){return void 0===t[n]?t[a]:""+t[n]};t._items=[];let r=0;for(let l=0;l<n.length;l++){const i=n[l];i.dataIndex=l,i.label=i.innerHTML,i.dataItem=i,i.top||(i.top=r),i.height||(i.height=i.offsetHeight),r+=i.height,i.value||(i.value=""+l);const s=o(i,t.displayMember,"label"),d=o(i,t.valueMember,"value"),c=o(i,t.groupMember,"group");i.label!==s&&(i.label=s),i.value!==d&&(i.value=d),i.group!==c&&(i.group=c);const m=i.context;i.context=document,i.displayMode=a,i.context=m,t._alternateItem(i),i.selected&&(t.selectedIndexes.push(l),t.selectedValues.push(i.value)),t._items.push(i)}t.itemTemplate&&t._handleItemTemplate(t.itemTemplate)&&t._items.map(n=>t._applyTemplate(n))}_group(){const t=this;t.isUpdating++;let n=[],a=[];t._canSort&&t._unsort();for(let a=0;a<t._items.length;a++){const i=t._items[a];let o=i.group?i.group.trim():i.innerHTML.toUpperCase().charAt(0)||i.label.toUpperCase().charAt(0);o+=" ",n[o]?n[o].items.push(i):n[n.length++]=n[o]={items:[i],label:o}}if(!t.isVirtualized){for(;t.$.itemsInnerContainer.firstChild;)t.$.itemsInnerContainer.removeChild(t.$.itemsInnerContainer.firstChild);const o=document.createDocumentFragment();t._groups=[];for(let r=0;r<n.length;r++){const i=n[r],l=document.createElement("smart-list-items-group");l.label=i.label,l.dataIndex=r;for(let t=0;t<n[r].items.length;t++){const n=i.items[t];a.push(n),n.group=i.label,l.appendChild(n)}t._groups.push(l),o.appendChild(l)}t._items=a;const i=/Trident|Edge/.test(navigator.userAgent);i?setTimeout(function(){t.$.itemsInnerContainer.appendChild(o)},50):t.$.itemsInnerContainer.appendChild(o)}else{t._groups=[];for(let t=0;t<n.length;t++){const i=n[t];i.dataIndex=t,i.grouped=!0,i.hidden=!1,i.displayMode="plain",a.push(i);for(let o=0;o<n[t].items.length;o++){const t=i.items[o];t.group=i,a.push(t)}}t._groups=n,t._items=a}t.sorted&&t._sort(),t.isUpdating--}_ungroup(){const t=this;t.isUpdating++,t._groups=[],t._canSort&&t._unsort();let n=[];if(!t.isVirtualized){const a=document.createDocumentFragment();for(let o=0;o<t._items.length;o++){const i=t._items[o];a.appendChild(i),n.push(i)}0<n.length&&(t.$.itemsInnerContainer.innerHTML="",t.$.itemsInnerContainer.appendChild(a))}else for(let a=0;a<t._items.length;a++){const i=t._items[a];i.grouped||n.push(i)}t._items=n,t.sorted&&t._sort(),t.isUpdating--}_initializeHtmlListGroups(){const t=this,n=t.$.itemsInnerContainer.querySelectorAll("smart-list-items-group");t._groups=[];for(let a=0;a<n.length;a++){const i=n[a];i.dataIndex=a,t._groups.push(i)}}_initializeSelection(){const t=this,n=t.selectedIndexes.slice(0),a=t.selectedValues.slice(0);t.clearSelection(),"oneOrManyExtended"===t.selectionMode&&(t._keysPressed.Control=!0);for(let o=0;o<t._items.length;o++){const i=t._items[o];(0<=n.indexOf(o)||0<=a.indexOf(i.value||i.label))&&(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=null,t.select(i))}"oneOrManyExtended"===t.selectionMode&&(t._keysPressed.Control=!1)}onItemUpdated(){const t=this;!t.isInitialized||t._isUpdating()||(t.isUpdating++,t._refreshLayout(),t.isUpdating--)}_refreshItems(){const t=this;if(t.isInitialized&&!t._isUpdating()){if(t.isUpdating++,t.grouped?t._ungroup():t.sorted&&t._canSort&&t._unsort(),!t.isVirtualized){t._items=[];const n=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-list-item"):t.querySelectorAll("smart-list-item");for(let a=0;a<n.length;a++)n[a].dataIndex=a,t._alternateItem(n[a]),t._items.push(n[a])}t.grouped?t._group():t.sorted&&t._sort(),t._refreshLayout(),t.isUpdating--}}_applyIncrementalSearch(t){const n=this;if(!(null===n.incrementalSearchDelay||isNaN(n.incrementalSearchDelay)))return-1<["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control","Home","End","PageUp","PageDown"].indexOf(t)?void 0:(0!==n._incrementalSearchQuery.indexOf(t)&&(n._incrementalSearchQuery+=t),n._incrementalSearchTimer&&clearTimeout(n._incrementalSearchTimer),n._incrementalSearch(),void(n._incrementalSearchTimer=setTimeout(function(){n._incrementalSearchQuery=""},n.incrementalSearchDelay)))}select(t){const n=this;if(!("string"==typeof t&&(t=n.getItem(t),!t))&&!("number"==typeof t&&(t=n.getItem(t),!t))&&!(t.grouped||t.readonly)){if("none"===n.selectionMode)return n.selectedIndexes=[],void(n.selectedValues=[]);switch(n._focusedItem||"none"===n.selectionMode||(n._focusedItem=t,t._focused=!0),n.selectionMode){case"one":return(1!==n.selectedIndexes.length||n.selectedIndexes[0]!==n._indexOf(t))&&(n._previouslySelectedIndexes=n.selectedIndexes,1<=n.selectedIndexes.length&&n.clearSelection(),n._select(t),delete n._previouslySelectedIndexes,!0);case"zeroOrOne":return 1===n.selectedIndexes.length&&n.selectedIndexes[0]===n._indexOf(t)?(n.unselect(t),!0):(n._previouslySelectedIndexes=n.selectedIndexes,1<=n.selectedIndexes.length&&n.clearSelection(),n._select(t),delete n._previouslySelectedIndexes,!0);case"radioButton":if(n._previouslySelectedIndexes=n.selectedIndexes,0<n.$.itemsInnerContainer.querySelectorAll("smart-list-items-group").length){const a=t.parentNode;if(!t.selected){for(let t in a.children){const i=a.children[t];i.selected&&n.unselect(i)}n._select(t)}return delete n._previouslySelectedIndexes,!0}if(n.isVirtualized&&0<n._groups.length){const a=t.group;if(!t.selected){for(let t in a.items){const i=a.items[t];i.selected&&n.unselect(i)}n._select(t)}return delete n._previouslySelectedIndexes,!0}return t.selected||(1<=n.selectedIndexes.length&&n.clearSelection(),n._select(t)),delete n._previouslySelectedIndexes,!0;case"oneOrMany":return t.selected?1<n.selectedIndexes.length&&n.unselect(t):n._select(t),!0;case"zeroOrMany":case"checkBox":return t.selected?n.unselect(t):n._select(t),!0;case"oneOrManyExtended":{const a=n.selectedValues;if(n._keysPressed.Control)return 1<n.selectedIndexes.length?t.selected?(n.unselect(t),n._focus(n._items[n.selectedIndexes[0]])):n._select(t):n._select(t),!0;if(n._keysPressed.Shift){const i=n._items[n.selectedIndexes[0]];let o;n.clearSelection();const r=0<=a.indexOf(i.value)||i.selected;if(n._select(i,r),n._indexOf(i)>n._indexOf(t))for(o=n._indexOf(i)-1;o>=n._indexOf(t);){const t=n._items[o],i=0<=a.indexOf(t.value)||t.selected;n._select(t,i),o--}else for(o=n._indexOf(i)+1;o<=n._indexOf(t);){const t=n._items[o],i=0<=a.indexOf(t.value)||t.selected;n._select(t,i),o++}const l=[];for(let t=0;t<a.length;t++)l.push(n.getItem(a[t]));if(0<l.length&&!n._propertyChanging){let o=[];for(let t=0;t<n.selectedValues.length;t++){const i=n.selectedValues[t];0>a.indexOf(i)&&o.push(n.getItem(i))}n.$.fireEvent("change",{addedItems:o,removedItems:l,selected:t.selected,disabled:t.disabled,index:n._indexOf(t),label:t.label,value:t.value})}return!0}for(let o=0;o<a.length;o++){const i=a[o],r=n.getItem(i);t!==r&&n.unselect(r)}return n.clearSelection(),n._select(t,0<=a.indexOf(t.value)),!0}}return!1}}_applyTemplate(t,n){const a=this;if(null===a.itemTemplate)return;if("function"==typeof a.itemTemplate)return void a.itemTemplate(t,{label:t.label,value:t.value,index:a._items.indexOf(t)});if(!a._bindingDetails||0===a._bindingDetails.length)return;const i=a._bindingDetails.length;let o=document.importNode(a._template.content,!0),r,l;for(let s=0;s<i;s++){r=o.childNodes[a._bindingDetails[s].childNodeIndex],l=a._bindingDetails[s].bindingString.length;for(let n=0;n<l;n++){const i=a._bindingDetails[s].bindingString[n],o=0<=i.indexOf("label")?t.label:t.value;r.innerHTML=r.innerHTML.replace(i,o)}}t.innerHTML="";for(let a=0;a<o.childNodes.length;a++)o.childNodes[a].outerHTML&&(t.innerHTML+=o.childNodes[a].outerHTML);!1===n||(a._scrollHeightTimer&&(clearInterval(a._scrollHeightTimer),a._scrollHeightCounter=0),a._scrollHeightTimer=setInterval(function(){(a._lastScrollHeight!==a.$.itemsInnerContainer.scrollHeight||10===a._scrollHeightCounter)&&(a._refreshLayout(),clearInterval(a._scrollHeightTimer)),a._lastScrollHeight=a.$.itemsInnerContainer.scrollHeight,a._scrollHeightCounter++},50))}_filterItems(t,n){const a=this,i=a.$.filterInput.value;let o,r;const l=function(){if(0===r.length)return a._filteredItems=[],void(n&&n());o=a._queryItems(i,a.filterMode);for(let t=0;t<r.length;t++)r[t].hidden=!0,r[t].$.addClass("smart-hidden");for(let t=0;t<o.length;t++){const n=o[t];n.hidden=!1,n.$.removeClass("smart-hidden")}if(a.grouped&&a.isVirtualized)for(let t=0;t<a._groups.length;t++){const n=a._groups[t],i=n.items;let o=!0;for(let t=0;t<i.length;t++)i[t].hidden||(o=!1);o&&(n.hidden=!0)}if(a.grouped&&!a.isVirtualized)for(let t=0;t<a._groups.length;t++){const n=a._groups[t],i=[].concat(...n.querySelectorAll("smart-list-item"));let o=!0;for(let t=0;t<i.length;t++)i[t].$.hasClass("smart-hidden")||(o=!1);o?n.$.addClass("smart-hidden"):n.$.removeClass("smart-hidden")}a._filteredItems=o,a._refreshLayout(),n&&n();t||a._refreshSelection()};if("function"!=typeof a.dataSource){if(r=a._items,0===r.length)return;l()}else if(i){const t=a.dataSource(i,function(t){i&&a.isAttached&&(a._updateListBoxAfterQuery=function(){o=r=a._items,l()},a.clearItems(),a.insert(0,t))});if(t){if(!i)return;a._updateListBoxAfterQuery=function(){o=r=a._items,l()},a.clearItems(),a.insert(0,t)}}else a.clearItems(),o=r=a._items,l()}_getNextItem(t){const n=this,a=n._items,i=n._items.length;for(let n=Math.max(t+1,0);n<i;){const t=a[n];if(!t.disabled&&!t.hidden&&!t.grouped&&!t.readonly)return t;n++}return a[t]}_getPreviousItem(t){const n=this,a=n._items;for(let n=Math.max(t-1,0);-1<n;){const t=a[n];if(!t.disabled&&!t.hidden&&!t.grouped&&!t.readonly)return t;n--}return a[t]}get _scrollWidth(){const t=this,n=t._items;return t.__scrollWidth?t.__scrollWidth:(t.__scrollWidth=(()=>{const t=this;let a="",i;for(let t=0;t<n.length;t++){if(n[t].hidden)continue;const i=n[t].label;i.length>a.length&&(a=i)}const o=t._createItem({label:a});t.$.itemsContainer.appendChild(o),o.label=a,o.$.itemContainer.style.width="auto",o.$.container.style.width="auto",o.style.width="auto";const r=getComputedStyle(o),l=parseInt(r.paddingLeft)+parseInt(r.paddingRight);return i=o.$.itemContainer.offsetWidth+l,o.parentNode.removeChild(o),i})(),t.__scrollWidth)}update(t,n){const a=this,i=a._items[t];if(i){if("string"==typeof n)i.label=n,void 0===i.value&&(i.value=n);else for(let t in n)"selected"==t&&i[t]!==n[t]?a.select(i):i[t]=n[t],"group"==t&&a._refreshItems();(a.sorted||a.grouped||a.isVirtualized)&&(a._refreshItems(),a._refreshSelection())}else a.error(a.localize("indexOutOfBound",{elementType:a.nodeName.toLowerCase(),method:"update"}))}insert(t,n){const a=this;let o=[];if(t||(t=0),Array.isArray(n)){a.isUpdating++;for(let r=0;r<n.length;r++){const i=n[r],l=a._createItem(i);o.push(l),t>=a._items.length||0===a._items.length?a.appendChild(l):a.insertBefore(l,a._items[t])}a.isUpdating--}else{const i=a._createItem(n);o.push(i),t>=a._items.length||0===a._items.length?a.appendChild(i):a.insertBefore(i,a._items[t])}0<o.length&&a._ensureItemsReady(o,function(){a._refreshItems(),0===a._items.length||(a._updateListBoxAfterQuery&&(a._updateListBoxAfterQuery(),delete a._updateListBoxAfterQuery),a._refreshSelection(),a.$.fireEvent("bindingComplete"))})}remove(t){const n=this,a=n._items[t];a?(n.isVirtualized?n._items.splice(t,1):a.parentNode.removeChild(a),a.selected&&n.unselect(a),n._refreshItems(),n._refreshSelection(),0===n.selectedIndexes.length&&0<n._items.length&&("oneOrMany"===n.selectionMode||"one"===n.selectionMode||"oneOrManyExtended"===n.selectionMode)&&n.select(n._items[0])):n.error(n.localize("indexOutOfBound",{elementType:n.nodeName.toLowerCase(),method:"remove"}))}_queryItems(t,n){const a=this,o=[],r=function(i,o){if(i.grouped)return i;switch(n){case"startsWith":if(0===i.label.indexOf(o))return i;break;case"startsWithIgnoreCase":if(0===i.label.toLowerCase().indexOf(o.toLowerCase()))return i;break;case"doesNotContain":if(0>i.label.indexOf(o))return i;break;case"doesNotContainIgnoreCase":if(0>i.label.toLowerCase().indexOf(o.toLowerCase()))return i;break;case"contains":if(-1<i.label.indexOf(o))return i;break;case"containsIgnoreCase":if(-1<i.label.toLowerCase().indexOf(o.toLowerCase()))return i;break;case"equals":if(0===i.label.localeCompare(o))return i;break;case"equalsIgnoreCase":if(0===i.label.toLowerCase().localeCompare(o.toLowerCase()))return i;break;case"endsWith":if(i.label.endsWith(o))return i;break;case"endsWithIgnoreCase":if(i.label.toLowerCase().endsWith(o.toLowerCase()))return i;break;case"custom":if(a.filterCallback(i,t))return i;}return null};if(0===t.length)return a._items;for(let l=0;l<a._items.length;l++){const n=r(a._items[l],t);n&&o.push(n)}return o}_select(t,n){const a=this,i=a.selectedIndexes.indexOf(a._indexOf(t)),o=a.selectedIndexes.slice(0),r=a.selectedValues.slice(0);if(t.selected=!0,-1===i)o.push(a._indexOf(t)),r.push(t.value||t.label);else return a._recycle(),!1;if(a.selectedIndexes=o,a.selectedValues=r,a._recycle(),a.$.hiddenInput.value=r.toString(),a.isCompleted&&!n&&a.isInitialized&&!a._propertyChanging){let n=[];if(a._previouslySelectedIndexes){for(let t=0;t<a._previouslySelectedIndexes.length;t++)0>a.selectedIndexes.indexOf(a._previouslySelectedIndexes[t])&&n.push(a._items[a._previouslySelectedIndexes[t]]);delete a._previouslySelectedIndexes}return a.$.fireEvent("change",{addedItems:[t],removedItems:n,selected:t.selected,disabled:t.disabled,index:a._indexOf(t),label:t.label,value:t.value}),!0}}_setTopVisibleIndex(t){const n=this;return"number"==typeof t&&(n.topVisibleIndex=Math.max(0,t),t=n._items[n.topVisibleIndex]),!!t&&void(t.top!==n.scrollTop&&(n.scrollTop=t.top,!n.isVirtualized&&(n.$.itemsContainer.scrollTop=n.scrollTop),n.scrollHeight===n.scrollTop&&n._updateTopVisibleIndex()))}_updateTopVisibleIndex(){const t=this,n=t.scrollTop+t._scrollView.verticalScrollBar.offsetHeight-t.offsetHeight;let a;if(t.scrollTop<t.scrollHeight/2){for(let o=0;o<t._items.length;o++)if(t._items[o].top>n){a=t._items[o];break}}else for(let o=t._items.length-1;0<=o&&!(t._items[o].top<n);o--)a=t._items[o];a&&(t.topVisibleIndex=a.dataIndex)}unselect(t){const n=this;if(!t)return;if("string"==typeof t&&(t=n.getItem(t),!t))return;if("none"===n.selectionMode)return void n.clearSelection();const a=n.selectedIndexes.indexOf(n._indexOf(t)),i=n.selectedIndexes.slice(0),o=n.selectedValues.slice(0);if(t.selected=!1,0<=a)i.splice(a,1),o.splice(a,1);else return!1;return(n.selectedIndexes=i,n.selectedValues=o,n.$.hiddenInput.value=o.toString(),n.isCompleted&&!n._propertyChanging)?(n.$.fireEvent("change",{addedItems:[],removedItems:[t],selected:t.selected,disabled:t.disabled,index:n._indexOf(t),label:t.label,value:t.value}),n._recycle(),!0):void 0}_handleItemTemplate(t){if(null===t||!t)return;if("function"==typeof t)return t;const n=this;if(!("content"in document.createElement("template")))return n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()})),void(n.itemTemplate=null);if(t=document.getElementById(t),null===t||!("content"in t))return n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:"itemTemplate"})),void(n.itemTemplate=null);const a=t.content,o=a.childNodes.length,r=/{{\w+}}/g;let l,s;n._bindingDetails=[],n._template=t;for(let d=0;d<o;d++){for(s=[];l=r.exec(a.childNodes[d].innerHTML);)s.push(l[0]);0<s.length&&n._bindingDetails.push({childNodeIndex:d,bindingString:s})}return!0}_handleKeyStrokes(t){const n=this,a="radioButton"===n.selectionMode||"checkBox"===n.selectionMode||"zeroOrMany"===n.selectionMode||"oneOrMany"===n.selectionMode||"zeroOrOne"===n.selectionMode;let i=n._items;if(n.filterable&&0<n.$.filterInput.value.length&&(i=n._filteredItems),!(n.disabled||n.readonly)){switch(t){case"ArrowLeft":case"ArrowUp":n._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":n._handleArrowKeys(!1);break;case" ":{if(1>n.selectedIndexes.length&&!n._focusedItem)return;const t=n._focusedItem?n._focusedItem:n._items[n.selectedIndexes[n.selectedIndexes.length-1]],a=t=>{t.selected&&"radioButton"!==n.selectionMode?n.unselect(t):n.select(t)};if("oneOrMany"===n.selectionMode)return void(t.selected&&1<n.selectedIndexes.length?a(t):!t.selected&&a(t));a(t);break}case"Home":{if(0===i.length)return;a?n._focus(i[0]):(!n._keysPressed.Shift&&n.clearSelection(),n.select(i[0]),n._focus(i[0])),n.scrollTop=0;break}case"End":{if(0===i.length)return;a?n._focus(i[i.length-1]):(!n._keysPressed.Shift&&n.clearSelection(),n.select(i[i.length-1]),n._focus(i[i.length-1])),n.scrollTop=n.scrollHeight;break}case"PageUp":{n._pageUpKeyHandler(i);break}case"PageDown":{n._pageDownKeyHandler(i);break}}n._recycle()}}_horizontalScrollbarHandler(t){const n=this;t.stopPropagation(),n.isVirtualized?n._recycle():n.$.itemsContainer.scrollLeft=t.detail.value}_unsort(){const t=this;t.isUpdating++;const n=function(t,n){let a=t.dataIndex,i=n.dataIndex;return a<i?-1:a>i?1:0};if(!t.isVirtualized){if(0<t._groups.length){t._groups.sort(n);let a=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],r=[].concat(...i.querySelectorAll("smart-list-item"));r.sort(n),a=a.concat(r)}t._items=a}else t._items.sort(n);t._applySortOrder()}else if(0<t._groups.length){t._groups.sort(n);let a=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],r=[].concat(...i.items);r.sort(n),a.push(i),a=a.concat(r)}t._items=a}else t._items.sort(n);t.isUpdating--}_applySortOrder(){const t=this,n=function(t){for(let n=0;n<t.length;n++){const a=t[n],i=a.parentNode;i&&i.appendChild(a)}};n(t._items),n(t._groups)}_sort(){const t=this;if(t._canSort){t.isUpdating++;const n=function(n,a){let i=n.label,o=a.label;if("asc"===t.sortDirection){if(i<o)return-1;if(i>o)return 1}else{if(i<o)return 1;if(i>o)return-1}return 0};if(t._groups.sort(n),!t.isVirtualized){if(0<t._groups.length){let a=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],r=[].concat(...i.querySelectorAll("smart-list-item"));r.sort(n),a=a.concat(r)}t._items=a}else t._items.sort(n);t._applySortOrder()}else if(0<t._groups.length){let a=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],r=[].concat(...i.items);a.push(i),r.sort(n),a=a.concat(r)}t._items=a}else t._items.sort(n);t.isUpdating--}}getItem(t){const n=this;for(let a=0;a<n._items.length;a++)if(n._items[a].value===t)return n._items[a];return null}_focus(t){const n=this;!t||"none"===n.selectionMode||n.disabled||n.readonly||(n._focusedItem&&(n._focusedItem._focused=!1),n._focusedItem=t,n._focusedItem._focused=!0)}_keyDownHandler(t){const n=this,a=n.enableShadowDOM?n.shadowRoot.activeElement:document.activeElement;let i=t.key;if(!(n.disabled||n.readonly)&&!(n.filterable&&n.$.filterInput===a)&&n._focused&&!(0===n._items.length||n.disabled||n.displayLoadingIndicator)){if(n.editable){if("F2"===i)return void n._dblclickEventHandler({target:n._focusedItem});if(n.$.editInput===a)return}if("none"!==n.selectionMode){if(t.stopPropagation(),"Down"===i||"Right"===i||"Left"===i||"Up"===i?i="Arrow"+i:void 0,n.filterable)switch(i){case"ArrowLeft":case"ArrowRight":return;case"ArrowUp":case"ArrowDown":t.preventDefault();}if(n._applyIncrementalSearch(i),!(0>["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","Home","End","PageUp","PageDown"].indexOf(i))){if(t.preventDefault(),!n._focusedItem&&0<n._items.length)return void("one"===n.selectionMode||"oneOrMany"===n.selectionMode||"oneOrManyExtended"===n.selectionMode?n.select(n._items[0]):n._focus(n._items[0]));switch(n.selectionMode){case"one":if("Shift"===i||"Control"===i||" "===i)return;n._handleKeyStrokes(i);break;case"oneOrMany":case"zeroOrOne":case"zeroOrMany":case"radioButton":case"checkBox":if("Shift"===i||"Control"===i)return;n._handleKeyStrokes(i);break;case"oneOrManyExtended":if(" "===i)return;n._keysPressed[i]="keydown"===t.type,n._handleKeyStrokes(i);}}}}}_keyUpHandler(t){const n=this,a=n.enableShadowDOM?n.shadowRoot.activeElement:document.activeElement;if(!(n.editable&&n.$.editInput===a)){if(n.filterable&&n.$.filterInput===a)return n._filterTimer&&clearTimeout(n._filterTimer),void(n._filterTimer=setTimeout(function(){const t=n.context;n.context=n,n._filterItems(),n.scrollTop=n.$.itemsContainer.scrollTop=0,n.scrollLeft=n.$.itemsContainer.scrollLeft=0,n.context=t},300));if(n._focused){if(n._focusedItem&&n._focusedItem.hidden&&0<n._filteredItems.length){let t=n._filteredItems[0];t.grouped&&1<n._filteredItems.length&&(t=n._filteredItems[1]),n._focus(t),n._recycle()}t.stopPropagation(),t.preventDefault(),n.disabled||0>["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","PageUp","PageDown"].indexOf(t.key)||(n._keysPressed[t.key]=!1)}}}_mouseWheelHandler(t){const n=this;(n.computedHorizontalScrollBarVisibility||n.computedVerticalScrollBarVisibility)&&(n.disabled||!n.computedVerticalScrollBarVisibility||(t.stopPropagation(),t.preventDefault(),n.scrollTo(n.scrollTop+(0>t.deltaY?-n.offsetHeight:n.offsetHeight))))}_pageDownKeyHandler(t){const n=this;if(0===t.length)return;let a=n._items[n.selectedIndexes[n.selectedIndexes.length-1]];("checkBox"===n.selectionMode||"radioButton"===n.selectionMode||"zeroOrMany"===n.selectionMode||"oneOrMany"===n.selectionMode||"zeroOrOne"===n.selectionMode)&&n._focusedItem&&(a=n._focusedItem);let o;const r=n._indexOf(a);let l=a.top+n.$.itemsContainer.offsetHeight-a.height;for(let n=r;n<t.length;n++)if(t[n].top>=l){o=t[n];break}o||(o=t[t.length-1]),"checkBox"===n.selectionMode||"radioButton"===n.selectionMode||"zeroOrMany"===n.selectionMode||"oneOrMany"===n.selectionMode||"zeroOrOne"===n.selectionMode?n._focus(o):!o.selected&&(!n._keysPressed.Shift&&n.clearSelection(),n.select(o),n._focus(o)),(o.height+o.top>n.$.itemsContainer.scrollTop+n.$.itemsContainer.offsetHeight||o.top<n.$.itemsContainer.scrollTop)&&(n.scrollTop=o.top-n.$.itemsContainer.offsetHeight+o.height)}_pageUpKeyHandler(t){const n=this;if(0===t.length)return;let a=n._items[n.selectedIndexes[n.selectedIndexes.length-1]];("checkBox"===n.selectionMode||"radioButton"===n.selectionMode||"zeroOrMany"===n.selectionMode||"oneOrMany"===n.selectionMode||"zeroOrOne"===n.selectionMode)&&n._focusedItem&&(a=n._focusedItem);const o=a.top-n.$.itemsContainer.offsetHeight,r=n._indexOf(a);let l;for(let n=r;0<n;n--)if(t[n].top<=o){l=t[n];break}l||(l=t[0]),"checkBox"===n.selectionMode||"radioButton"===n.selectionMode||"zeroOrMany"===n.selectionMode||"oneOrMany"===n.selectionMode||"zeroOrOne"===n.selectionMode?n._focus(l):!l.selected&&(!n._keysPressed.Shift&&n.clearSelection(),n.select(l),n._focus(l)),n.scrollTop=l.top;const i=n._indexOf(l);0===i&&(n.scrollTop=0)}clearItems(){const t=this;t.$.itemsInnerContainer.innerHTML="",t.clearSelection(),t._items=[],t.$placeholder.removeClass("smart-hidden")}_resizeHandler(t){const n=this;t.target!==n||n._isUpdatingScrollBars||(n._isUpdatingScrollBars=!0,n._initializeRecyclingItems(),n._refreshLayout(),n._isUpdatingScrollBars=!1)}_indexOf(t){const n=this;if(!t)return-1;let a=n._items.indexOf(t);return-1===a&&(a=n._items.indexOf(n.getItem(t.value))),a}_incrementalSearch(){const t=this,n="radioButton"!==t.selectionMode&&"checkBox"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode;let a=0,o;switch(t.incrementalSearchMode){case"containsIgnoreCase":case"equalsIgnoreCase":case"startsWithIgnoreCase":case"endsWithIgnoreCase":o=t._incrementalSearchQuery.toLowerCase();break;default:o=t._incrementalSearchQuery;}const r=function(a){a.grouped||a.readonly||(n?(0<t.selectedIndexes.length&&t.clearSelection(),t._focus(a),t.select(a)):t._focus(a),(a.height+a.top>t.$.itemsContainer.scrollTop+t.$.itemsContainer.offsetHeight||a.top<t.scrollTop)&&(t.scrollTop=a.top),0===t._indexOf(a)&&(t.scrollTop=0),t._indexOf(a)===t._items.length-1&&(t.scrollTop=t.scrollHeight))};0!==t._previousEntry.localeCompare(o)&&(t._incrementalSearchItems=t._queryItems(t._incrementalSearchQuery,t.incrementalSearchMode),delete t._itemPosition),t._previousEntry=o;const l=t._incrementalSearchItems.length;if(0!==l){if(1===l)return void r(t._incrementalSearchItems[0]);for(void 0===t._itemPosition?n&&t.clearSelection():t._itemPosition<l-1?a=t._itemPosition:(a=0,n?(t._incrementalSearchItems[t._itemPosition].selected=!1,t.selectedIndexes=[],t.selectedValues=[]):t._incrementalSearchItems[t._itemPosition]._focused=!1),a;a<l;a++){if(t._incrementalSearchItems[a].selected&&n){t._incrementalSearchItems[a].selected=!1,t.selectedIndexes=[],t.selectedValues=[];continue}if(!n&&t._incrementalSearchItems[a]._focused){t._incrementalSearchItems[a]._focused=!1;continue}return r(t._incrementalSearchItems[a]),void(t._itemPosition=a)}}}_selectStartHandler(t){const n=this,a=n.enableShadowDOM?n.shadowRoot.activeElement:document.activeElement;n.$.filterInput===a||n.$.editInput===a||t.preventDefault()}_handleArrowKeys(t){const n=this,a="radioButton"!==n.selectionMode&&"checkBox"!==n.selectionMode&&"zeroOrMany"!==n.selectionMode&&"oneOrMany"!==n.selectionMode&&"zeroOrOne"!==n.selectionMode;if(n.disabled||n.readonly)return;let i;if(n._focusedItem&&!n._keysPressed.Shift)i=n._indexOf(n._focusedItem),n._focusedItem._focused=!1;else if(0!==n.selectedIndexes.length)i=n.selectedIndexes[n.selectedIndexes.length-1];else return;const o=t?n._getPreviousItem(i):n._getNextItem(i);n._focus(o),a&&(n._keysPressed.Shift?n.select(o):n._items[i]!==o&&(n.clearSelection(),n.select(o))),n.ensureVisible(o)}_refreshFilter(){const t=this;return t.filterable?(t.$.filterInput.disabled=!!(t.disabled||t.displayLoadingIndicator),t.$filterInputContainer.removeClass("smart-hidden"),void t.$itemsContainer.addClass("filter")):void(t.$.filterInput.disabled=!0,t.$filterInputContainer.addClass("smart-hidden"),t.$itemsContainer.removeClass("filter"))}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void(t.tabIndex=0<t.tabIndex?t.tabIndex:0)}_setLoadingIndicatorVisibility(){const t=this;return t.displayLoadingIndicator?void(t.$loadingIndicatorContainer.hasClass("smart-visibility-hidden")?t.$loadingIndicatorContainer.removeClass("smart-visibility-hidden"):t.$loadingIndicatorContainer.removeClass("smart-hidden")):void(t._areCSSVarsSupported?t.$loadingIndicatorContainer.addClass("smart-hidden"):t.$loadingIndicatorContainer.addClass("smart-visibility-hidden"))}_refreshLayout(){var t=Math.max;const n=this,a=n._items;if(n.__scrollHeight=null,n.__scrollWidth=null,n._height=null,n._scrollView||(n._scrollView=new Smart.Utilities.Scroll(n,n.$.horizontalScrollBar,n.$.verticalScrollBar)),n.$itemsContainer.removeClass("hscroll"),n.$itemsContainer.removeClass("vscroll"),!a||null===a||0===a.length)return n.scrollWidth=0,n.scrollHeight=0,n.$filterInputContainer.removeClass("vscroll"),n.$placeholder.removeClass("smart-hidden"),void(n.isVirtualized&&n._recycle());n.$placeholder.addClass("smart-hidden");const i=2*(parseInt(getComputedStyle(n.$.itemsInnerContainer).getPropertyValue("--smart-list-item-horizontal-offset"))||0);let o=n._scrollWidth-n.$.itemsContainer.offsetWidth-i,r=n._scrollHeight;if(n._refreshHorizontalScrollBarVisibility(o),n._refreshVerticalScrollBarVisibility(r),n.$.itemsInnerContainer.style.width="hidden"===n.horizontalScrollBarVisibility?n.$.itemsContainer.offsetWidth-i:t(n.$.itemsContainer.offsetWidth-i,-i+n.__scrollWidth)+"px",n.computedVerticalScrollBarVisibility)return o=n._scrollWidth-n.$.itemsContainer.offsetWidth-n._scrollView.vScrollBar.offsetWidth,n._refreshHorizontalScrollBarVisibility(o),"hidden"!==n.horizontalScrollBarVisibility&&(n.$.itemsInnerContainer.style.width=t(n.$.itemsContainer.offsetWidth-i,-i+n.__scrollWidth-n._scrollView.vScrollBar.offsetWidth)+"px"),n.computedHorizontalScrollBarVisibility&&("visible"===n.horizontalScrollBarVisibility&&0===n.scrollWidth?"visible"===n.horizontalScrollBarVisibility&&(n.__scrollHeight+=n._scrollView.hScrollBar.offsetHeight):n.__scrollHeight+=n._scrollView.hScrollBar.offsetHeight,n.scrollHeight=n.__scrollHeight),void(n.isVirtualized&&n._recycle());o=n._scrollWidth-n.$.itemsContainer.offsetWidth-i,n._refreshHorizontalScrollBarVisibility(o),n.computedHorizontalScrollBarVisibility&&(n.scrollHeight=n._scrollHeight,n._refreshVerticalScrollBarVisibility(n.scrollHeight)),n.isVirtualized&&n._recycle();const l=/Trident|Edge/.test(navigator.userAgent);!n.isRefreshing&&l&&setTimeout(function(){n.isRefreshing=!0,n._refreshLayout(),n.isRefreshing=!1},50)}_styleChangedHandler(){const t=this;t._refreshLayout()}_swipeLeftHandler(){}_swipeRightHandler(){}_refreshHorizontalScrollBarVisibility(t){const n=this;n.scrollWidth=t,n.computedHorizontalScrollBarVisibility?(n.scrollLeft=n.$.itemsContainer.scrollLeft,n.$itemsContainer.addClass("hscroll")):n.$itemsContainer.removeClass("hscroll")}_refreshVerticalScrollBarVisibility(t){const n=this;n.scrollHeight=t,n.computedVerticalScrollBarVisibility?(n.$itemsContainer.addClass("vscroll"),n.$filterInputContainer.addClass("vscroll")):(n.$itemsContainer.removeClass("vscroll"),n.$filterInputContainer.removeClass("vscroll"))}_validateTemplate(t,n){if(null!==n&&n){const a=this;return"content"in document.createElement("template")?(n=document.getElementById(n),null!==n&&"content"in n?n:(a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:t})),void(a[t]=null))):(a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()})),void(a[t]=null))}}_getItemIndexByPosition(t){const n=this,a=n.filterable&&0<n.$.filterInput.value.length?n._filteredItems:n._items,i=(a=>{let i=0,o=a.length-1;if(0>=t)return 0;const r=a[a.length-1];if(r.top<=t)return a.length-1;for(;!0;){const r=Math.floor((i+o)/2),l=a[r];if(n._isItemInPosition(l,t))return r;l.top<t?i=r+1:l.top>t&&(o=r-1)}})(a);return i}_isItemInPosition(t,n){const a=t.top,i=t.top+t.height;return a<=n&&i>n}get isVirtualized(){const t=this;return t.virtualized&&t.dataSource&&0<t.dataSource.length}_recycle(){const t=this;if(!t._recyclingItems)return;let n=t._height;t._height||(n=t._height=t.$.itemsContainer.offsetHeight);let a=0;const i=t.scrollTop,o=t._getItemIndexByPosition(i),r=t.filterable&&0<t.$.filterInput.value.length?t._filteredItems:t._items,l=r[o];let s=l?l.top:0;if(t.$.itemsInnerContainer.style.left=-t.scrollLeft+"px",t.$.itemsInnerContainer.style.top=-i+s+"px",t.isUpdating++,0<=o)for(let l=o;l<r.length;l++){const o=r[l];if(0!==o.height){if(s+o.height>=i&&s<=i+n){const n=t._recyclingItems[a++];if(!n)break;n.context=document,n.dataItem=o,n.label=o.label,n.value=o.value,n.selected=o.selected,n._focused=o._focused,n.hidden=o.hidden,n.grouped=o.grouped,n.readonly=o.readonly,n.style.height=o.height+"px",t._alternateItem(n),n.title=o.title?o.title:"",n.displayMode=o.grouped?"plain":o.displayMode,0<t.scrollWidth&&(n.style.width=t.$.itemsInnerContainer.offsetWidth+t.scrollWidth+"px"),t.itemTemplate&&t._handleItemTemplate(t.itemTemplate)&&t._applyTemplate(n,!1)}else break;s+=o.height}}if(a<t._recyclingItems.length)for(let n=a;n<t._recyclingItems.length;n++){const n=t._recyclingItems[a++],i=n.context;n.context=document,n.hidden=!0,n.context=i}t.isUpdating--}_verticalScrollbarHandler(t){const n=this,a=t.detail.value;return t.stopPropagation(),n.isVirtualized?n._recycle():n.$.itemsContainer.scrollTop=a,n._updateTopVisibleIndex(),t.context.max===t.context.value?void n.$.fireEvent("scrollBottomReached"):void(t.context.min===t.context.value&&n.$.fireEvent("scrollTopReached"))}}),Smart("smart-drop-down-button",class extends Smart.ContentElement{static get properties(){return{autoCloseDelay:{value:100,type:"number"},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},dropDownAppendTo:{value:null,type:"any"},dropDownButtonPosition:{allowedValues:["none","left","right","top","bottom"],value:"right",type:"string"},dropDownMinHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxHeight:{value:"",type:"any",validator:"_propertyValidator"},dropDownOpenMode:{allowedValues:["none","default","dropDownButton","auto"],value:"default",type:"string"},dropDownOverlay:{value:!1,type:"boolean"},dropDownPlaceholder:{value:"No Items",type:"string"},dropDownPosition:{allowedValues:["auto","top","bottom","overlay-top","overlay-center","overlay-bottom","center-bottom","center-top"],value:"auto",type:"string"},dropDownMinWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownWidth:{value:"",type:"any",validator:"_propertyValidator"},dropDownMaxWidth:{value:"",type:"any",validator:"_propertyValidator"},hint:{value:"",type:"string"},horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},label:{value:"",type:"string"},messages:{extend:!0,value:{en:{invalidNode:"{{elementType}}: Invalid parameter \"{{node}}\" when calling {{method}}."}},type:"object"},name:{value:"",type:"string"},opened:{value:!1,type:"boolean"},placeholder:{value:"",type:"string"},resizeMode:{value:"none",allowedValues:["none","horizontal","vertical","both"],type:"string"},resizeIndicator:{value:!1,type:"boolean"},selectionDisplayMode:{value:"plain",allowedValues:["plain","placeholder","tokens"],type:"string"},tokenTemplate:{value:null,type:"any"},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{"actionButton.down":"_buttonsDownHandler","actionButton.mouseenter":"_buttonsMouseEventsHandler","actionButton.mouseleave":"_buttonsMouseEventsHandler","actionButton.focus":"_buttonsFocusHandler","actionButton.blur":"_buttonsFocusHandler","document.selectstart":"_selectStartHandler","document.dragstart":"_dragStartHandler","document.down":"_documentDownHandler","document.up":"_documentUpHandler","document.move":"_documentMoveHandler","dropDownButton.down":"_buttonsDownHandler","dropDownButton.mouseenter":"_buttonsMouseEventsHandler","dropDownButton.mouseleave":"_buttonsMouseEventsHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",focus:"_focusEventHandler",blur:"_blurEventHandler","dropDownButton.focus":"_buttonsFocusHandler","dropDownButton.blur":"_buttonsFocusHandler","dropDownContainer.transitionend":"_dropDownTransitionendHandler",mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler",resize:"_resizeHandler","resizeBar.move":"_resizeBarMoveHandler",styleChanged:"_styleChangedHandler"}}template(){return`<div id="container">
                    <span class="smart-label" id="label">[[label]]</span>
                    <div id="content" class="smart-content">
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <span id="actionButton" class="smart-input smart-action-button">[[placeholder]]</span>
                            <span id="dropDownButton" class="smart-drop-down-button">
                                <span id="arrow"></span>
                            </span>
                        </div>
                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden">
                            <smart-scroll-viewer id="scrollViewer"
                                inner-h-t-m-l = "[[innerHTML]]"
                                right-to-left="[[right-to-left]]"
                                horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"
                                vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]">
                                    <content></content>
                            </smart-scroll-viewer>
                            <div id="resizeBar" class="smart-drop-down-resize-bar">
                                <div></div>
                            </div>
                         </div>
                    </div>
                    <span class="smart-hint" id="hint">[[hint]]</span>
                </div>`}propertyChangedHandler(t,n,a){const i=this;switch(t){case"placeholder":case"selectedIndexes":case"selectedValues":case"tokenTemplate":case"dataSource":case"displayMember":break;case"innerHTML":case"resizeMode":"innerHTML"===t?i.$.scrollViewer.innerHTML=a:i.$.dropDownContainer.setAttribute("resize-mode",i.resizeMode),i.$.scrollViewer.refresh();break;default:super.propertyChangedHandler(t,n,a);}}appendChild(t){const n=this;if(!n.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}return t?void n.$.scrollViewer.appendChild(t):void n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}removeChild(t){const n=this;if(!n.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}return t?void(!n.$.dropDownContainer.contains(t)||n.$.scrollViewer.removeChild(t)):void n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}removeAll(){const t=this;t.isCompleted&&t.$.scrollViewer.removeAll()}_open(){const t=this;if(!t.disabled&&t.offsetHeight&&t.$dropDownContainer.hasClass("smart-visibility-hidden")){if(t.$dropDownContainer.hasClass("not-in-view")&&t.$dropDownContainer.removeClass("not-in-view"),t.$.dropDownContainer.style.transition=null,t.dropDownAppendTo&&0<t.dropDownAppendTo.length){const n=t.getBoundingClientRect();if(t.$.container.contains(t.$.dropDownContainer)){let n=0;const a=setInterval(function(){const i=t.getBoundingClientRect();n++,i.top===t._positionTop&&10>n||(t.open(),clearInterval(a),t._positionTop=i.top)},100);return}n.top!==t._positionTop&&(t._positionTop=n.top)}const n=t.$.fireEvent("opening").defaultPrevented;n||(t.opened=!0,t._positionDetection.placeOverlay(),t._positionDetection.checkBrowserBounds("vertically"),t._positionDetection.positionDropDown(),t._positionDetection.checkBrowserBounds("horizontally"),t.$dropDownContainer.removeClass("smart-visibility-hidden"),t.$.fireEvent("open"),t.$.dropDownButton&&("dropDownButton"===t.dropDownOpenMode?t.$.dropDownButton.setAttribute("selected",""):t.$.dropDownButton.removeAttribute("selected")),t.$.input&&t.$.input.focus())}}open(){const t=this,n=document.getElementsByTagName("smart-drop-down-button");for(let a=0;a<n.length;a++)n[a]!==t&&n[a].opened&&n[a].close();t._open(),t.$.scrollViewer.refresh()}scrollTo(t,n){const a=this;a.isCompleted&&a.$.scrollViewer.scrollTo(t,n)}ready(){super.ready();const t=this;t.$.dropDownContainer&&(t._positionDetection=new Smart.Utilities.PositionDetection(t,t.$.dropDownContainer,t.$.container,"close"),t._positionDetection.getDropDownParent(!0),t._positionDetection.setDropDownPosition(),t._calculateDropDownSize(),t.$.dropDownContainer.setAttribute("resize-mode",t.resizeMode),t.resizeIndicator&&t.$.dropDownContainer.setAttribute("resize-indicator",""),t._positionDetection.handleAutoPositioning()),t.opened&&t.open(),t._positionTop=t.getBoundingClientRect().top,t._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),t.hasAnimation&&t._edgeMacFF&&t.$dropDownContainer.addClass("not-in-view"),t._createElement()}_applySelection(){const t=this;t.$.actionButton.innerHTML=t.placeholder}_setDropDownSize(){const t=this;t._dropDownSize||t._calculateDropDownSize(),["dropDownMinWidth","dropDownMinHeight","dropDownMaxWidth","dropDownMaxHeight"].forEach(n=>{t.$.dropDownContainer.style[n.replace("dropDown","").replace(/^./,"m")]=t[n]?t[n]+(t[n].toString().endsWith("%")?"%":"px"):null}),t.$.dropDownContainer.style.width=t.dropDownWidth?"auto"===t.dropDownWidth?"auto":("initial"===t.dropDownWidth?t.offsetWidth:parseFloat(t.dropDownWidth))+"px":"auto"===t._dropDownSize.width?"auto":(parseFloat(t._dropDownSize.width)||0)+"px",t.$.dropDownContainer.style.height=t.dropDownHeight&&"auto"!==t.dropDownHeight?parseFloat(t.dropDownHeight)+(-1<(t.dropDownHeight+"").indexOf("%")?"%":"px"):t._dropDownSize.height}_setFocusable(){const t=this;if(t.disabled||t.unfocusable)return t.removeAttribute("tabindex"),t.$.actionButton.removeAttribute("tabindex"),void t.$.dropDownButton.removeAttribute("tabindex");let n=0<t.tabIndex?t.tabIndex:0;"dropDownButton"===t.dropDownOpenMode?(t.removeAttribute("tabindex"),t.$.actionButton.setAttribute("tabindex",n),t.$.dropDownButton.setAttribute("tabindex",n)):(t.$.actionButton.removeAttribute("tabindex"),t.$.dropDownButton.removeAttribute("tabindex"),t.tabIndex=n)}_calculateDropDownSize(){const t=this;t._dropDownSize={};const n=window.getComputedStyle(t.$.dropDownContainer),a=parseFloat(n.getPropertyValue("border-top-width").trim()),i=parseFloat(n.getPropertyValue("border-bottom-width").trim()),o=parseFloat(n.getPropertyValue("margin-top").trim()),r=parseFloat(n.getPropertyValue("margin-bottom").trim()),l=parseFloat(n.getPropertyValue("padding-top").trim()),s=parseFloat(n.getPropertyValue("padding-bottom").trim());Smart.Utilities.Core.CSSVariablesSupport()&&(t._dropDownSize.width=n.getPropertyValue("--smart-drop-down-list-drop-down-width").trim(),t._dropDownSize.height=n.getPropertyValue("--smart-drop-down-list-drop-down-height").trim()),(!t._dropDownSize.width||-1<t._dropDownSize.width.indexOf("initial"))&&(t._dropDownSize.width=t.offsetWidth),t._dropDownSize.height||(t._dropDownSize.height="auto"),t._dropDownSize.minHeight=parseFloat(n.getPropertyValue("min-height").trim()),t._dropDownSize.maxHeight=parseFloat(n.getPropertyValue("max-height").trim()),t._dropDownSize.borderWidth=(isNaN(a)?0:a)+(isNaN(i)?0:i),t._dropDownSize.paddingWidth=(isNaN(l)?0:l)+(isNaN(s)?0:s),t._dropDownSize.marginWidth=(isNaN(o)?0:o)+(isNaN(r)?0:r)}_createElement(){const t=this;t._applySelection(),t._setDropDownSize(),t._setFocusable(),t.$.arrow.noRipple=!0}_dragStartHandler(t){const n=this;n._resizeDetails&&n._resizeDetails.started&&t.preventDefault()}_dropDownTransitionendHandler(){const t=this;t._edgeMacFF&&!t.opened&&t.hasAnimation&&(t.$.dropDownContainer.style.top=t.$.dropDownContainer.style.left="",t.$dropDownContainer.addClass("not-in-view"))}_focus(t){this.$.listBox._focus(t)}_blurEventHandler(){const t=this;t.$.dropDownButton&&(t.removeAttribute("focus"),t.$.dropDownButton.removeAttribute("focus")),t.$.actionButton&&(t.removeAttribute("focus"),t.$.actionButton.removeAttribute("focus")),t.nodeName&&"Smart-DROP-DOWN-LIST"===t.nodeName&&!t._preventDropDownClose&&t.close()}_focusEventHandler(){const t=this;t.$.dropDownButton&&(t.setAttribute("focus",""),t.$.dropDownButton.setAttribute("focus","")),t.$.actionButton&&(t.setAttribute("focus",""),t.$.actionButton.setAttribute("focus","")),t.removeAttribute("drop-down-button-focus"),t.removeAttribute("action-button-focus")}_buttonsFocusHandler(t){const n=this;t.target===n.$.dropDownButton?"focus"===t.type?n.setAttribute("drop-down-button-focus",""):(n.removeAttribute("drop-down-button-focus"),n.nodeName&&"Smart-DROP-DOWN-LIST"===n.nodeName&&!n._preventDropDownClose&&n.close()):"focus"===t.type?n.setAttribute("action-button-focus",""):n.removeAttribute("action-button-focus")}_getUpEventTarget(t){const n=this;let a=t;for(;a;){if(a instanceof Smart.ListItem&&a.ownerListBox===n.$.listBox){if(a.unselectable||a.disabled)return;a="item";break}else if(a===n.$.dropDownContainer){a="dropDownContainer";break}a=a.parentElement}if(n.enableShadowDOM&&null!==a)for(a=t.getRootNode().host;a;){if(a===n.$.dropDownContainer){a="dropDownContainer";break}a=a.parentElement}return a}close(){const t=this;if(!t.$dropDownContainer.hasClass("smart-visibility-hidden")){const n=t.$.fireEvent("closing").defaultPrevented;n||(t.$dropDownContainer.addClass("smart-visibility-hidden"),t.$.fireEvent("close"),t.$.dropDownButton&&t.$.dropDownButton.removeAttribute("selected"),t.opened=!1,t._preventDropDownClose=!1,t._positionDetection.removeOverlay(!0),t._edgeMacFF&&!t.hasAnimation&&(t.$.dropDownContainer.style.top=t.$.dropDownContainer.style.left="",t.$dropDownContainer.addClass("not-in-view")))}}_documentUpHandler(t){const n=this,a=n.hasAttribute("resizing");if(n.$.actionButton.removeAttribute("active"),n._resizeDetails&&n._resizeDetails.started)return n._resizeDetails.started=n._resizeDetails.resizeEventFired=!1,n.removeAttribute("resizing"),n._preventDropDownClose=!1,n.focus(),void n.$.fireEvent("resizeEnd",{position:{left:t.pageX,top:t.pageY}});if(n.disabled||n._isDropDownClicked||n.readonly)return void delete n._isDropDownClicked;if(n._overlayDown)return n.close(),void delete n._overlayDown;let i=t.originalEvent.target,o=i.closest?i.closest("smart-drop-down-list"):void 0;if(n.enableShadowDOM&&(i=t.originalEvent.composedPath()[0],o=i.getRootNode().host),n._preventsSelectStart=!1,"undefined"!=typeof i&&i!==n.$.resizeBar){if("tokens"===n.selectionDisplayMode&&i.classList.contains("smart-drop-down-list-selection-label")&&o===n){"none"!==n.dropDownOpenMode&&n.open();let t=n.$.listBox._items.filter(t=>t.label.toString()===i.textContent)[0];return n.$.listBox._scrollView.scrollTop=t.offsetTop,void n._focus(t)}if("tokens"===n.selectionDisplayMode&&i.classList.contains("smart-drop-down-list-unselect-button")&&o===n)return 1===n.selectedIndexes.length&&0>["zeroOrMany","zeroOrOne","checkBox"].indexOf(n.selectionMode)?void 0:void n.unselect(n.$.listBox._items.filter(t=>t.label.toString()===i.previousElementSibling.textContent)[0]);const t=i.closest(".smart-action-button");if(n._buttonClicked&&("dropDownButton"===n.dropDownOpenMode&&t&&n._buttonClicked===n.$.actionButton?n.$.fireEvent("actionButtonClick"):(i.closest(".smart-drop-down-button")===n._buttonClicked||t===n._buttonClicked)&&n.$.fireEvent("dropDownButtonClick")),n._buttonClicked=void 0,t===n.$.actionButton||i.closest(".smart-drop-down-button")===n.$.dropDownButton)return"dropDownButton"===n.dropDownOpenMode&&t===n.$.actionButton?void n.close():void(n.$dropDownContainer.hasClass("smart-visibility-hidden")&&"none"!==n.dropDownOpenMode?n.open():n.close());i=n._getUpEventTarget(i),void 0===i||(("dropDownContainer"!==i&&"item"!==i||"item"===i&&"checkBox"!==n.selectionMode&&0>n.selectionMode.indexOf("Many"))&&n.close(),a&&n.$.scrollViewer&&n.$.scrollViewer.refresh())}}_keyDownHandler(t){const n=this,a=document.activeElement;if(!(n.disabled||n.readonly||a!==n&&a!==n.$.dropDownButton&&a!==n.$.actionButton))switch(t.key){case"Enter":case" ":t.target.setAttribute("active",""),t.preventDefault(),t.target!==n.$.actionButton&&(n._keyPressed=!0,n.opened&&"Enter"===t.key?n.close():!n.opened&&!n.readonly&&"none"!==n.dropDownOpenMode&&n.open());break;case"End":n.$.scrollViewer.scrollTop=n.$.scrollViewer.scrollHeight;break;case"Home":n.$.scrollViewer.scrollTop=0;break;case"PageUp":case"PageDown":n.$.scrollViewer.scrollTop+=(-1<t.key.indexOf("Down")?1:-1)*n.$.dropDownContainer.offsetHeight;break;case"ArrowUp":case"ArrowDown":if(t.altKey)return n._keyPressed=!1,void(n.$dropDownContainer.hasClass("smart-visibility-hidden")?n.open():n.close());t.preventDefault(),n.$.scrollViewer.scrollTop+=10*(-1<t.key.indexOf("Down")?1:-1);break;case"Escape":t.preventDefault(),n.close();}}}),Smart("smart-base-progress-bar",class extends Smart.BaseElement{static get properties(){return{indeterminate:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function"},max:{value:100,type:"number"},min:{value:0,type:"number"},showProgressValue:{value:!1,type:"boolean"},value:{value:0,type:"number?"}}}ready(){super.ready();const t=this;t._updateProgress()}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;i._updateProgress(),"value"===t&&i.$.fireEvent("change",{value:a,oldValue:n,changeType:"api"})}_updateProgress(){}get _percentageValue(){var t=Math.min,n=Math.max;const a=this,i=n(a.min,a.max),o=t(a.min,a.max),r=t(i,n(o,a.value));return(r-o)/(i-o)}}),Smart("smart-circular-progress-bar",class extends Smart.BaseProgressBar{template(){return`<div id="container">
                    <svg width="100%" height="100%" viewPort="0 0 100 100" viewBox="0 0 100 100">
                       <circle id="value" class ="smart-value-path" r="50" cx="50" cy="50" transform="rotate(270 50 50)"></circle>
                       <circle id="value" class ="smart-value" r="50" cx="50" cy="50" transform="rotate(270 50 50)"></circle>
                    </svg>
                    <div class ="smart-label-container">
                        <content></content>
                        <span id="label" class ="smart-label"></span>
                    </div>
                </div>`}static get listeners(){return{resize:"_resizeHandler"}}ready(){super.ready();const t=this;t.$.container.style.width=t.$.container.style.height=Math.min(t.offsetWidth,t.offsetHeight)+"px",t.$.hasClass("echo-animation")&&(t.value=t.max,t._updateProgress())}_resizeHandler(){const t=this;t.$.container.style.width=t.$.container.style.height=Math.min(t.offsetWidth,t.offsetHeight)+"px"}_updateProgress(){var t=Math.PI;super._updateProgress();const n=this,a=n.indeterminate?100*t:100*t-100*(n._percentageValue*t),i=!!document.documentMode,o=!i&&!!window.StyleMedia;if(n.showProgressValue){const t=parseInt(100*n._percentageValue);n.$.label.innerHTML=n.formatFunction?n.formatFunction(t):t+"%"}else n.$.label.innerHTML="";return i||o?null===n.value||n.indeterminate?(n.$.value.style.strokeDashoffset="",void n.$.value.setAttribute("class","smart-value smart-value-animation-ms")):(n.$.value.setAttribute("class","smart-value"),void(n.$.value.style.strokeDashoffset=n.inverted?-a:a)):(n.$.value.style.strokeDashoffset=n.inverted?-a:a,null===n.value||n.indeterminate?void n.$value.addClass("smart-value-animation"):void n.$value.removeClass("smart-value-animation"))}}),Smart("smart-progress-bar",class extends Smart.BaseProgressBar{static get properties(){return{orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}template(){return`<div>
                    <div id="value" class="smart-value"></div>
                    <div id="label" class ="smart-label"></div>
                </div>`}_updateProgress(){super._updateProgress();const t=this;if(t.showProgressValue){const n=parseInt(100*t._percentageValue);t.$.label.innerHTML=t.formatFunction?t.formatFunction(n):n+"%"}else t.$.label.innerHTML="";null===t.value||t.indeterminate?t.$value.addClass("smart-value-animation"):t.$value.removeClass("smart-value-animation"),t.$.value.style.transform="horizontal"===t.orientation?"scaleX("+t._percentageValue+")":"scaleY("+t._percentageValue+")"}}),Smart("smart-scroll-bar",class extends Smart.BaseElement{static get properties(){return{clickRepeatDelay:{type:"integer",value:50},largeStep:{type:"integer",value:100},min:{type:"integer",value:0},max:{type:"integer",value:1e3},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},orientation:{type:"string",value:"horizontal",allowedValues:["horizontal","vertical"]},step:{type:"integer",value:10},showButtons:{type:"boolean",value:!0,defaultReflectToAttribute:!0},value:{type:"integer",value:0}}}static get styleUrls(){return["smart.scrollbar.css"]}template(){return"<div id=\"container\" class=\"smart-container\">\n                    <div id=\"nearButton\" class =\"smart-scroll-button smart-arrow-left\"></div>\n                    <div  id=\"track\" class =\"smart-track\">\n                        <div id=\"thumb\" class=\"smart-thumb\"></div>\n                    </div>\n                    <div id=\"farButton\" class =\"smart-scroll-button smart-arrow-right\"></div>\n            </div>"}static get listeners(){return{"nearButton.click":"_nearButtonClickHandler","nearButton.mousedown":"_startRepeat","nearButton.mouseup":"_stopRepeat","nearButton.mouseenter":"_updateInBoundsFlag","nearButton.mouseleave":"_updateInBoundsFlag","farButton.click":"_farButtonClickHandler","farButton.mousedown":"_startRepeat","farButton.mouseup":"_stopRepeat","farButton.mouseenter":"_updateInBoundsFlag","farButton.mouseleave":"_updateInBoundsFlag","track.down":"_trackDownHandler","track.click":"_trackClickHandler","thumb.down":"_dragStartHandler","document.move":"_dragHandler","document.up":"_dragEndHandler",up:"_dragEndHandler","document.selectstart":"_selectStartHandler",resize:"_resizeHandler"}}_updateInBoundsFlag(t){const n=this,a=t.target;a._isPointerInBounds=!0,"mouseleave"===t.type&&(a._isPointerInBounds=!1);const i="buttons"in t?t.buttons:t.which;1!==i&&n._stopRepeat(t)}_startRepeat(t){const n=this;if(n.disabled)return;const a=t.target;a._initialTimer||(a._initialTimer=setTimeout(function(){a._repeatTimer=setInterval(()=>{if(a._isPointerInBounds){const n="buttons"in t?t.buttons:t.which;a.$.fireEvent("click",{buttons:n,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY})}},n.clickRepeatDelay)},3*n.clickRepeatDelay))}_stopRepeat(t){const n=this;if(!n.disabled){const n=t.target;n._repeatTimer&&(clearInterval(n._repeatTimer),n._repeatTimer=null),n._initialTimer&&(clearTimeout(n._initialTimer),n._initialTimer=null)}}_calculateThumbSize(t){const n=this,a=n.max-n.min,i="horizontal"===n.orientation?10<n.$.track.offsetWidth:10<n.$.track.offsetHeight;let o=0;return 1<=a&&i?(o=t/(a+t)*t,0<=n.$.thumb.className.indexOf("smart-hidden")&&n.$thumb.removeClass("smart-hidden")):n.$thumb.addClass("smart-hidden"),Math.max(10,Math.min(o,t))}_dragStartHandler(t){const n=this;n.disabled||(n.thumbCapture=!0,n.dragStartX=t.clientX,n.dragStartY=t.clientY,n.dragStartValue=n.value,t.stopPropagation(),t.preventDefault())}_dragHandler(t){const n=this;if(!0!==n.thumbCapture)return;n._isThumbDragged=!0;const a=(n.max-n.min)/(n.scrollBarSize-n.thumbSize),i="horizontal"===n.orientation?(t.clientX-n.dragStartX)*a:(t.clientY-n.dragStartY)*a;let o=i;n.rightToLeft&&"horizontal"===n.orientation&&(o=-i),n._updateValue(n.dragStartValue+o),t.stopPropagation(),t.preventDefault(),t.originalEvent&&(t.originalEvent.stopPropagation(),t.originalEvent.preventDefault())}_dragEndHandler(t){const n=this;n._trackDownTimer&&(clearInterval(n._trackDownTimer),n._trackDownTimer=null);n.thumbCapture&&(n.thumbCapture=!1,n._isThumbDragged=!1,"switchWhenReleased"===n.mechanicalAction?n._updateValue(n.dragStartValue,n.value):"switchUntilReleased"===this.mechanicalAction&&n._updateValue(n.dragStartValue),t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation())}_farButtonClickHandler(){const t=this;if(!t.disabled){const n=t.value;t._updateValue(t.value+t.step),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(n)}}_nearButtonClickHandler(){const t=this;if(!t.disabled){const n=t.value;t._updateValue(t.value-t.step),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(n)}}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;switch(t){case"min":case"max":case"orientation":case"showButtons":{i._layout();break}case"value":i._updateValue(n,a);}}ready(){super.ready();const t=this;t._layout()}_resizeHandler(){const t=this;t._layout()}refresh(){const t=this;t._layout()}_layout(){const t=this;t.scrollBarSize="horizontal"===t.orientation?t.$.track.offsetWidth:t.$.track.offsetHeight,t.thumbSize=t._calculateThumbSize(t.scrollBarSize),"horizontal"===t.orientation&&t.$.thumb.style.width!==t.thumbSize+"px"?t.$.thumb.style.width=t.thumbSize+"px":"vertical"===t.orientation&&t.$.thumb.style.height!==t.thumbSize+"px"&&(t.$.thumb.style.height=t.thumbSize+"px"),"horizontal"===t.orientation?(t.$.nearButton.classList.contains("smart-arrow-up")&&t.$.nearButton.classList.remove("smart-arrow-up"),t.$.farButton.classList.contains("smart-arrow-down")&&t.$.farButton.classList.remove("smart-arrow-down"),!t.$.nearButton.classList.contains("smart-arrow-left")&&t.$.nearButton.classList.add("smart-arrow-left"),!t.$.farButton.classList.contains("smart-arrow-right")&&t.$.farButton.classList.add("smart-arrow-right")):(t.$.nearButton.classList.contains("smart-arrow-left")&&t.$.nearButton.classList.remove("smart-arrow-left"),t.$.farButton.classList.contains("smart-arrow-right")&&t.$.farButton.classList.remove("smart-arrow-right"),!t.$.nearButton.classList.contains("smart-arrow-up")&&t.$.nearButton.classList.add("smart-arrow-up"),!t.$.farButton.classList.contains("smart-arrow-down")&&t.$.farButton.classList.add("smart-arrow-down")),t._updateThumbPosition(),(t.value>t.max||t.value<t.min)&&t._updateValue(t.value,t.value>t.max?t.max:t.min)}_selectStartHandler(t){const n=this;n.thumbCapture&&t.preventDefault()}_trackDownHandler(t){const n=this;t.target!==n.$.track||(n._trackDownTimer=setInterval(function(){n._trackClickHandler(t)},n.clickRepeatDelay))}_trackClickHandler(t){const n=this;if(n.disabled)return;if(n._isThumbDragged)return clearInterval(n._trackDownTimer),void(n._trackDownTimer=null);const a=n.$.thumb.getBoundingClientRect(),i=t.pageX-window.pageXOffset,o=t.pageY-window.pageYOffset,r=n.value;"horizontal"===n.orientation?i>(n._isThumbDragged?n.dragStartX:a.right)?n._updateValue(n.value+n.largeStep):i<(n._isThumbDragged?n.dragStartX:a.left)&&n._updateValue(n.value-n.largeStep):o>(n._isThumbDragged?n.dragStartY:a.bottom)?n._updateValue(n.value+n.largeStep):o<(n._isThumbDragged?n.dragStartY:a.top)&&n._updateValue(n.value-n.largeStep),"switchUntilReleased"===n.mechanicalAction&&n._updateValue(r)}_updateValue(t,n){const a=this;if(1===arguments.length&&(n=t,t=a.value),(void 0===n||isNaN(n))&&(n=a.min),n>a.max&&(n=a.max),n<a.min&&(n=a.min),a.value=n,t!==n){if(a._updateThumbPosition(),a.thumbCapture&&"switchWhenReleased"===a.mechanicalAction)return;if(a.onChange)return void a.onChange({value:a.value,oldValue:t,min:a.min,max:a.max});a.$.fireEvent("change",{value:a.value,oldValue:t,min:a.min,max:a.max})}}_updateThumbPosition(){const t=this,n=t.$.track.offsetHeight,a=t.$.track.offsetWidth,i="horizontal"===t.orientation?a:n,o=t._calculateThumbSize(i),r="horizontal"===t.orientation?a-o:n-o;let l=(i-o)/(t.max-t.min)*(t.value-t.min);t.rightToLeft&&"horizontal"===t.orientation&&(l=(i-o)/(t.max-t.min)*(t.max-t.value-t.min)),l=Math.min(r,Math.max(0,l)),"vertical"===t.orientation&&t.$.thumb.style.top!==l+"px"?t.$.thumb.style.top=l+"px":"horizontal"===t.orientation&&t.$.thumb.style.left!==l+"px"&&(t.$.thumb.style.left=l+"px")}}),Smart("smart-table",class extends Smart.ContentElement{static get properties(){return{columns:{value:null,type:"any?",reflectToAttribute:!1},dataSource:{value:null,type:"any?",reflectToAttribute:!1},sortMode:{value:"none",type:"string",allowedValues:["none","one","many"]}}}static get listeners(){return{"tableContainer.down":"downHandler"}}template(){return`<div id="container" class="smart-container">
					   <table id="tableContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-table-container">
							<content></content>
                       </table>              
                </div>`}ready(){const t=this;t.dataBind()}_initColumns(){const t=this;t._columns=[],t.columnByDataField=[];for(let n=0,a;n<t.columns.length;n++){if(a=t.columns[n],"string"==typeof a&&t.dataSource.dataFields){const n=t.dataSource.dataFields.find(t=>{if(t.name===a)return t});a={label:a,dataField:a,dataType:n?n.dataType||"string":"string"}}t._columns.push(a),t.columnByDataField[a.dataField]=a}}_initRows(){const t=this;t.rows=[],t.rowById=[];const n=function(n,a){const i={data:n,boundIndex:a};t.rowById[i.uid]=i,t.rows.push(i)},a=function(){const n=t.rows[t.rows.length-1];delete t.rowById[n.uid],t.rows.pop()},i=function(n){const a=t.rows[t.rows.length-1];delete t.rowById[a.uid],t.rows.splice(n,1)};for(let a=0;a<t.dataSource.length;a++){const i=t.dataSource[a];n(i,a)}t.dataSource.notify(function(o){if(!t.dataSource._updating){const r=o.data;switch(t.rows.canNotify=!1,o.action){case"add":if(r.length)for(let a=0;a<r.length;a++)n(r[a],t.dataSource.length-r.length+a);else n(r,t.dataSource.length-1);break;case"update":if(r.length)for(let n=0;n<r.length;n++){const a=o.index[n];t.rows[a].data=r[n]}else{const n=o.index;t.rows[n].data=r}break;case"insert":n(r,o.index);for(let n=0;n<t.rows.length;n++){const a=t.rows[n];a.dataIndex=n}break;case"remove":i(o.index);break;case"removeLast":a();}t.rows.canNotify=!0,t.refresh()}}),t.rows=new Smart.ObservableArray(t.rows);for(let n=0;n<t.rows.length;n++){const a=t.rows[n];a.propertyChanged=function(){}}t.rows.notify(function(n){if(t.rows.canNotify&&!n.path){t.rows.canNotify=!1;const a=n.action;t.dataSource&&(t.dataSource.canNotify=!1,"add"===a?t.dataSource.add(t.rows[n.index]):"update"===a?t.dataSource.update(n.index,t.rows[n.index]):"remove"===a?t.dataSource.remove(n.index):void 0,t.dataSource.canNotify=!0,t.rows.canNotify=!0,t.refresh())}})}downHandler(){}refresh(){const t=this;let n="<thead><tr>",a="<tbody>";for(let a=0;a<t._columns.length;a++){const i=t._columns[a];n+="<th scope=\"col\">"+i.label+"</th>"}n+="</tr></thead>";for(let n=0;n<t.rows.length;n++){const i=t.rows[n];a+="<tr>";for(let n=0;n<t._columns.length;n++){const o=t._columns[n];a+="<td>"+i.data[o.dataField]+"</td>"}a+="</tr>"}a+="</tbody>",t.innerHTML=n+a;const o=t.querySelectorAll("th");for(let n=0;n<t._columns.length;n++){const a=t._columns[n];a.headerCellElement=o[n],a.headerCellElement.onclick=function(){"none"===t.sortMode||(!this.headerCellElement.sortIconContainerElement&&(this.headerCellElement.innerHTML+="<span class=\"sort-by\"></span>",this.headerCellElement.sortIconContainerElement=this.headerCellElement.lastChild),this.headerCellElement.sortIconContainerElement.classList.contains("asc")?t.sortBy(this.dataField,"desc"):this.headerCellElement.sortIconContainerElement.classList.contains("desc")?t.sortBy(this.dataField,null):t.sortBy(this.dataField,"asc"))}.bind(a)}if(t._sortColumns&&0<t._sortColumns.length)for(let n=0;n<t._sortColumns.length;n++){const a=t._sortColumns[n],i=t.columnByDataField[a.dataField];i.headerCellElement.sortIconContainerElement||(i.headerCellElement.innerHTML+="<span class=\"sort-by "+a.direction+"\"></span>",i.headerCellElement.sortIconContainerElement=i.headerCellElement.lastChild)}}dataBind(){const t=this;if(!t.dataSource){if(!t.columns){t.columns=[],t.dataFields=[];const n=document.querySelectorAll("th");for(let a=0;a<n.length;a++){const i=n[a].innerHTML.trim();t.columns.push({label:i,dataField:i,dataType:"string"}),t.dataFields.push(i)}}let n=[];if(!t.rows){const a=document.querySelectorAll("tr");for(let o=0;o<a.length;o++){const i=a[o],r={},l=i.querySelectorAll("td");if(0<l.length){for(let n=0;n<t.columns.length;n++){const a=t.columns[n];r[a.dataField]=l[n].innerHTML.trim()}n.push(r)}}t.dataSource=new Smart.DataAdapter({dataSource:n,dataFields:t.dataFields})}const a=t.querySelectorAll("table");1<a.length&&a[a.length-1].parentNode.removeChild(a[a.length-1])}t._initColumns(),t._initRows(),t.refresh()}sortBy(t,n){const a=this,o=a.columnByDataField[t],r=[],l=[],s=[];if("none"===a.sortMode)return;let d=n||"asc";const i=function(t){t.headerCellElement.sortIconContainerElement||(t.headerCellElement.innerHTML+="<span class=\"sort-by\"></span>",t.headerCellElement.sortIconContainerElement=t.headerCellElement.lastChild)},c=function(t){i(t),t.headerCellElement.sortIconContainerElement.classList.remove("desc"),t.headerCellElement.sortIconContainerElement.classList.remove("asc"),t.sortOrder=null},m=function(){if(0<a._sortColumns.length)for(let t=0;t<a._sortColumns.length;t++){const n=a._sortColumns[t],i=a.columnByDataField[n.dataField];c(i)}a._sortColumns=[]};if(null===o)return void m();if("none"===a.sortMode||!a.dataSource)return;c(o),a._sortColumns||(a._sortColumns=[]);let p="string";for(let o=0;o<a.dataSource.dataFields.length;o++){const n=a.dataSource.dataFields[o];if(n.name===t){p=n.dataType;break}}let u=!0;for(let r=0;r<a._sortColumns.length;r++){const n=a._sortColumns[r];if(n.dataField===t)if(u=!1,"asc"===n.direction)n.direction="desc",d="desc";else if("desc"===n.direction){a._sortColumns.splice(r,1),c(o),d=null;break}}u&&("one"===a.sortMode&&m(),a._sortColumns.push({dataField:t,direction:d,dataType:p})),i(o),null===d?(o.headerCellElement.sortIconContainerElement.classList.remove("asc"),o.headerCellElement.sortIconContainerElement.classList.remove("desc")):(o.headerCellElement.sortIconContainerElement.classList.remove("asc"),o.headerCellElement.sortIconContainerElement.classList.remove("desc"),o.sortOrder=d,"desc"===d?o.headerCellElement.sortIconContainerElement.classList.add("desc"):o.headerCellElement.sortIconContainerElement.classList.add("asc"));for(let o=0;o<a._sortColumns.length;o++){const t=a._sortColumns[o];r.push(t.dataField),l.push(t.direction),s.push(t.dataType)}(function(){a.dataSource._sort(a.dataSource.boundSource,r,l,s);for(let t=0;t<a.dataSource.length;t++){const n=a.rows[t],i=a.dataSource[t];n.data=i,n.boundIndex=i.boundIndex}a.refresh()})()}}),Smart("smart-tab-item",class extends Smart.ContentElement{static get properties(){return{closeButtonHidden:{value:!1,type:"boolean"},index:{value:null,type:"number?"},selected:{value:!1,type:"boolean"},label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}get enableShadowDOM(){return!1}attached(){const t=this;super.attached();t.isCompleted&&(t.$.removeClass("right"),t.$.removeClass("left"),t.$.removeClass("top"),t.$.removeClass("bottom"),t.$.removeClass("animate"))}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;if(i._preventPropertyChangedHandler)return void delete i._preventPropertyChangedHandler;switch(t){case"closeButtonHidden":i.$.fireEvent("closeButtonVisibilityChange",{hidden:a});break;case"index":i.$.fireEvent("indexChange",{newIndex:a,oldIndex:n,tabItem:i});break;case"label":break;case"labelSize":i.$.fireEvent("labelSizeChange",{size:a});}}appendChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}n.firstElementChild.appendChild(t)}_setIndex(t){const n=this,a=n.context;n.context=n,n.index=t,n.context=a}}),Smart("smart-tab-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}get enableShadowDOM(){return!1}template(){return""}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;if(i._preventPropertyChangedHandler)return void delete i._preventPropertyChangedHandler;switch(t){case"label":break;case"labelSize":this.$.fireEvent("labelSizeChange",{size:a});}}}),Smart("smart-tabs",class extends Smart.BaseElement{static get properties(){return{addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},closeButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},closeButtons:{value:!1,type:"boolean"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},enableMouseWheelAction:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:"smart-tabs: The method \"insert\" requires a details Object to be passed as a second argument.",invalidIndex:"smart-tabs: \"{{method}}\" method accepts an index of type number.",referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:"smart-tabs: The method \"{{method}}\" requires a \"smart-tab-item\" element to be passed as an argument."}},type:"object",extend:!0},name:{value:"",type:"string"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},reorder:{value:!1,type:"boolean"},resize:{value:!1,type:"boolean"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},scrollMode:{value:"paging",allowedValues:["paging","continuous"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},tabLayout:{value:"scroll",allowedValues:["scroll","dropDown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}static get listeners(){return{closeButtonVisibilityChange:"_closeButtonVisibilityChangeHandler",indexChange:"_indexChangeHandler",keydown:"_keydownHandler",labelSizeChange:"_labelSizeChangeHandler",resize:"_applyTabOverflow",styleChanged:"_applyTabOverflow","container.dblclick":"_containerHandler","container.down":"_containerHandler","container.mouseout":"_containerHandler","container.mouseover":"_containerHandler","container.up":"_containerHandler","scrollButtonFar.click":"_scrollButtonClickHandler","scrollButtonNear.click":"_scrollButtonClickHandler","tabContentSection.transitionend":"_tabContentSectionTransitionendHandler","tabsHeaderItems.wheel":"_tabsHeaderItemsWheelHandler","tabStrip.mouseleave":"_tabStripMouseleaveHandler","tabStrip.move":"_tabStripMoveHandler","document.move":"_documentMoveHandler","document.selectstart":"_selectStartHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.tabs.css"]}template(){return`<div id="container">
                    <div id="tabsHeaderSection" class="smart-header smart-tabs-header-section">
                        <div id="tabsHeaderItems" class="smart-tabs-header-items">
                            <smart-repeat-button id="scrollButtonNear" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>
                                <div id="arrowNear" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="tabStrip" class="smart-tab-strip"></div>
                            <smart-repeat-button id="scrollButtonFar" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>
                                <div id="arrowFar" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="dropDownButton" class="smart-drop-down-button">
                                <div id="dropDownButtonArrow" class="smart-drop-down-button-arrow smart-unselectable"></div>
                            </div>
                            <span id="tabSelectionBar" class="smart-tabs-selection-bar"></span>
                            <div id="resizeToken" class="smart-tabs-resize-token smart-hidden"></div>
                        </div>
                        <div id="tabHeaderControls" class="smart-tabs-header-controls"></div>
                    </div>
                    <div id="tabContentSection" class="smart-tabs-content-section">
                       <content></content>
                    </div>
                    <div id="dropDownButtonDropDown" class="smart-drop-down-button-drop-down smart-hidden"></div>
                    <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}attached(){const t=this;super.attached();t.isCompleted&&t._applyTabOverflow()}ready(){super.ready();const t=this;t._flexWritingModeNoFullSupport=!0,t._arrowCodes={top:"&#xe804",bottom:"&#xe801",left:"&#xe802",right:"&#xe803"},t._createElement()}appendChild(t){const n=this;if(!n.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.TabItem||n.error(n.localize("tabItemRequired",{method:"appendChild"})),n.insert(n._tabs.length,{node:t})}collapse(){const t=this;!t.collapsible||t.collapsed||(t.collapsed=!0)}ensureVisible(t){var n=Math.round;const a=this;if(null!==t&&"wrap"!==a.tabLayout&&"shrink"!==a.tabLayout&&"hidden"!==a.tabPosition){a._validateIndex(t,"ensureVisible"),t=Math.max(0,Math.min(t,a._tabs.length-1));const i=a._tabs[t].group,o=a.$.tabStrip,r=o.getBoundingClientRect(),l=null===i?a._tabLabelContainers[t]:a._groupLabels[a._groups.indexOf(i)],s=l.getBoundingClientRect();("top"===a.tabPosition||"bottom"===a.tabPosition)&&(r.left>s.left||r.right<s.right)?o.scrollLeft+=n(s.right-o.offsetWidth-r.left):("left"===a.tabPosition||"right"===a.tabPosition)&&(r.top>s.top||r.bottom<s.bottom)&&(o.scrollTop+=n(s.bottom-o.offsetHeight-r.top)),a._updateScrollButtonVisibility(),a.resize&&a._getTabCoordinates()}}expand(){const t=this;t.collapsible&&t.collapsed&&(t.collapsed=!1)}getOffsetFromEdgeOfElement(t){const n=this;n._validateIndex(t,"getOffsetFromEdgeOfElement"),t=Math.max(0,Math.min(t,n._tabs.length-1));const a=n._tabs[t],i=n.tabPosition;return"hidden"===i?a.getBoundingClientRect().top-n.getBoundingClientRect().top:Math.abs(a.getBoundingClientRect()[i]-n.getBoundingClientRect()[i])}insert(t,n){const a=this;let i,o;if(a._validateIndex(t,"insert"),(void 0===n||void 0===n.label&&void 0===n.content&&void 0===n.node)&&a.error(a.localize("detailsObjectRequired")),void 0===n.node)i=n.group,o=document.createElement("smart-tab-item"),o.label=void 0===n.label?"":n.label,o.labelSize=void 0===n.labelSize?null:n.labelSize,o.content=n.content;else if(o=n.node,void 0!==o.index&&null!==o.index){const t=o.context;o.context=o,o.index=null,o.context=t}o.$.addClass("smart-visibility-hidden"),o.group=null;const r=a._addTabLabelContainer(o),l=r.tabLabelContainer,s=r.dropDownLabelContainer;l.tab=o,o.tabLabelContainer=l;const d={index:t,tab:o,tabLabelContainer:l,dropDownLabelContainer:s};if(0===a._groups.length&&void 0===i)a._insertNoGrouping(d);else if(void 0!==i&&null!==i){d.group=i;const t=a.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+i+"\"]");null===t?a._insertIntoNewGroup(d):(d.smartTabItemsGroup=t,a._insertIntoExistingGroup(d))}else a._insertNearAGroup(d);a._getReorderItems(),null===a.selectedIndex&&!a.allowToggle&&a._tabs.length&&a._select(0,!0),null!==o.group&&null!==o.labelSize&&"shrink"!==a.tabLayout&&l.style.removeProperty([a._orientationSettings.dimension]),a._applyTabOverflow()}insertBefore(t,n){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.TabItem&&(n===void 0||null===n||n instanceof Smart.TabItem)||a.error(a.localize("tabItemRequired",{method:"insertBefore"}));let i;a.contains(t)&&(t.selected&&(i=!0),a.remove(t.index)),n!==void 0&&null!==n?(!a.contains(n)&&a.error(a.localize("referenceNodeNotChild",{argument:"referenceNode"})),a.insert(n.index,{node:t})):a.insert(a._tabs.length,{node:t}),i&&a._select(t.index,!1)}remove(t){const n=this,a=n._tabs.length;if(0!==a){n._validateIndex(t,"remove"),t=Math.max(0,Math.min(t,a-1));const i=n._tabs[t],o=n._tabLabelContainers[t];if(o.parentElement.removeChild(o),i.parentElement.removeChild(i),null!==i.group){const t=n.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+i.group+"\"]");if(0===t.childElementCount){const a=n._groups.indexOf(i.group);n.$.tabStrip.removeChild(n._groupLabels[a]),n._groups.splice(a,1),n.$.container.removeChild(n._groupLabels[0].dropDown),n._groupLabels.splice(a,1),n.$.tabContentSection.removeChild(t)}}1<a?t<n.selectedIndex?n.selectedIndex--:t===n.selectedIndex&&(t===a-1?n._select(t-1,!1):(n._select(t+1,!1),n.selectedIndex--)):(n.selectedIndex=null,n.$.tabContentSection.innerHTML=""),n._tabLabelContainers.splice(t,1),n.$.dropDownButtonDropDown.removeChild(n.$.dropDownButtonDropDown.children[t]),n._tabs.splice(t,1),n._focusedItem===i&&(n._focusedItem=n._tabs[n._focusedItem.index]),n._updateTabIndexes(),n._getReorderItems(),n._applyTabOverflow(),n.ensureVisible(n.selectedIndex)}}removeChild(t){const n=this;if(!n.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.TabItem||n.error(n.localize("tabItemRequired",{method:"removeChild"})),n.contains(t)||n.error(n.localize("referenceNodeNotChild",{argument:"node"})),n.remove(t.index)}select(t){const n=this;0===n._tabs.length||(n._validateIndex(t,"select"),t=Math.max(0,Math.min(t,n._tabs.length-1)),n.ensureVisible(t),n._select(t,!0))}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void((null===t.getAttribute("tabindex")||0>t.getAttribute("tabindex"))&&t.setAttribute("tabindex",0))}update(t,n,a){const i=this;if(0!==i._tabs.length){i._validateIndex(t,"update"),t=Math.max(0,Math.min(t,i._tabs.length-1));const o=i._tabs[t];if(void 0!==n&&o.label!==n){const a=i._tabLabelContainers[t].firstElementChild.children[0],r=i.$.dropDownButtonDropDown.children[t];o.label=n,a.innerHTML="",r.innerHTML="",i._setLabel(n,a,r),i._applyTabOverflow()}void 0!==a&&(o.content=a)}}_createElement(){const t=this;t.disabled&&(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0),t._handlePosition(t.tabPosition),t._handleScrollButtonsPosition(t.scrollButtonsPosition,"both"),null!==t.dataSource&&t._processDataSource(),t._setFocusable(),t.collapsed&&!t.collapsible&&(t.collapsed=!1),t.collapsible&&t.allowToggle&&(t.allowToggle=!1),t._processHTML(),null===t.selectedIndex&&t.$.tabContentSection.setAttribute("show-placeholder","")}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const o=this;switch(t){case"addNewTab":a?o._insertAddNewTab():(o.$.tabStrip.removeChild(o._addNewTab),delete o._addNewTab),o._applyTabOverflow();break;case"allowToggle":a&&o.collapsible?(o.collapsed&&o._toggleCollapsedState(),o.collapsible=!1):!a&&null===o.selectedIndex&&(o.ensureVisible(o.selectedIndex=0),o._select(o.selectedIndex,!0,null));break;case"closeButtonMode":if("selected"===a){for(let t=0;t<o._tabs.length;t++)o._disableCloseButton(t);o._enableCloseButton(o.selectedIndex)}else{o._disableCloseButton(o.selectedIndex);const t=o._tabLabelContainers;for(let n=0;n<t.length;n++){const a=t[n];a.closeButtonEnabled=!0!==o._tabs[n].closeButtonHidden,o._showCloseButton(a)}}o._applyTabOverflow();break;case"closeButtons":{const t=o._tabLabelContainers,n=a?o._showCloseButton:o._hideCloseButton;for(let a=0;a<t.length;a++){const i=t[a];n(i)}o._applyTabOverflow();break}case"collapsed":if(!o.collapsible&&a)return void(o.collapsed=!1);break;case"collapsible":!a&&o.collapsed&&(o.collapsed=!1),o.allowToggle=!1,o.selectedIndex===void 0&&o.select(o._focusedItem.index);break;case"dataSource":o.selectedIndex=null;for(let t=0;t<o._groupLabels.length;t++)o.$.container.removeChild(o._groupLabels[t].dropDown);o.$.tabStrip.innerHTML="",o._processDataSource(),o._processHTML();break;case"disabled":o._setFocusable(),o.$.scrollButtonNear.disabled=a,o.$.scrollButtonFar.disabled=a,a||o._updateScrollButtonVisibility(),o._closeDropDownButtonDropDown();break;case"messages":case"scrollMode":case"selectionMode":case"readonly":case"reorder":break;case"overflow":if("scroll"!==o.tabLayout)return;o.$.tabStrip.scrollLeft=0,o.$.tabStrip.scrollTop=0,"hidden"===a?(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")):o._checkOverflowScroll(),o._getTabCoordinates();break;case"tabPosition":{if(o.$.tabSelectionBar.style.transition="none",o._tabPositionChanging=!0,o._closeGroupDropDown(),o._handlePosition(a,n),"shrink"!==o.tabLayout&&o._applyLabelSizes("tabPosition"),o._applyTabOverflow(),"hidden"!==a){const t=o.getElementsByClassName("smart-tab-group-arrow");for(let n=0;n<t.length;n++)t[n].innerHTML=o._arrowCodes[o.tabPosition]}delete o._tabPositionChanging,requestAnimationFrame(function(){o.$.tabSelectionBar.style.transition=null});break}case"resize":a&&o._getTabCoordinates();break;case"scrollButtonsPosition":o._handleScrollButtonsPosition(a,n);break;case"selectedIndex":{if(isNaN(a)&&(o.selectedIndex=a=n),!o.allowToggle&&null===a)return void(o.selectedIndex=n);let t=a;null!==a&&(t=Math.max(0,Math.min(a,o._tabs.length-1)),o.ensureVisible(t)),o._select(t,!0,n);break}case"tabLayout":"scroll"===n&&(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")),"shrink"===a?o._applyLabelSizes("shrink",!0):"shrink"===n&&o._applyLabelSizes("shrink",!1),o._applyTabOverflow(),"scroll"===a&&o.disabled&&(o.$.scrollButtonNear.disabled=!0,o.$.scrollButtonFar.disabled=!0),o.ensureVisible(o.selectedIndex);break;case"tabTextOrientation":o._applyTabOverflow(),o.ensureVisible(o.selectedIndex);break;case"unfocusable":o._setFocusable();}}_addGroupContainer(t,n){const a=this,i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),s=document.createElement("div");return i.className="smart-tab-group-container smart-unselectable",i.$=Smart.Utilities.Extend(i),o.className="smart-tab-label-text-wrapper",null!==n&&"shrink"!==a.tabLayout&&(i.style[a._orientationSettings.dimension]=parseInt(n,10)+"px"),r.className="smart-tab-label-text-container",r.innerHTML=t,l.className="smart-tab-group-arrow",l.innerHTML=a._arrowCodes[a.tabPosition],s.className="smart-tab-group-drop-down smart-hidden",s.$=Smart.Utilities.Extend(s),o.appendChild(r),o.appendChild(l),i.appendChild(o),a.$.container.appendChild(s),i.group=t,i.dropDown=s,s.groupContainer=i,{label:i,dropDown:s}}_addGroupElements(t){const n=this,a=t.groups,i=t.groupLabels,o=t.group,r=a.indexOf(o),l=t.tabLabelContainer;let s;if(-1!==r)s=i[r],s.dropDown.appendChild(l);else{a.push(o);const r=n._addGroupContainer(o,t.smartTabItemsGroup.labelSize),d=r.dropDown;s=r.label,d.appendChild(l),d.groupContainer=r.label,t.documentFragment.appendChild(s),i.push(s)}n.selectedIndex===t.i&&(n._selectedGroup=s,s.$.addClass("smart-tab-group-selected"))}_addNewTabHandler(t,n,a){const i=this;i._swiping||(a?(t.removeAttribute("hover"),i.insert(i._tabs.length,{label:"New Tab",content:""}),i._select(i._tabs.length-1,!0)):!i._reordering&&!i._swiping&&("mouseover"===n?t.setAttribute("hover",""):"mouseout"==n&&t.removeAttribute("hover")))}_addTabLabelContainer(t,n){const a=this,i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div");let s;return i.className="smart-tab-label-container smart-unselectable",o.className="smart-tab-label-text-wrapper",r.className="smart-tab-label-text-container",l.className="smart-tab-close-button",l.innerHTML="&#xe81f",void 0===n?(a.closeButtons?"default"===a.closeButtonMode&&t.closeButtonHidden||"selected"===a.closeButtonMode&&!t.selected?(l.classList.add("smart-hidden"),i.closeButtonEnabled=!1):(r.classList.add("smart-close-button-enabled"),i.closeButtonEnabled=!0):(l.classList.add("smart-hidden"),i.closeButtonEnabled=!0),s=document.createElement("div"),s.className="smart-tab-label-container smart-unselectable",null===t.group&&null!==t.labelSize&&"shrink"!==a.tabLayout&&(i.style[a._orientationSettings.dimension]=parseInt(t.labelSize,10)+"px")):(l.classList.add("smart-hidden"),i.closeButtonEnabled=!1),a._setLabel(t?t.label:"+",r,s),r.$=Smart.Utilities.Extend(r),l.$=Smart.Utilities.Extend(l),o.appendChild(r),o.appendChild(l),i.appendChild(o),i.$=Smart.Utilities.Extend(i),{tabLabelContainer:i,dropDownLabelContainer:s}}_animateSelection(t,n,a){const o=this;let r="right",l="left";if(o._animatedTab=t,o._animatedOldTab=n,o._animatedTab&&o._animatedOldTab){("left"===o.tabPosition||"right"===o.tabPosition)&&(r="top",l="bottom");for(let t=0;t<o._tabs.length;t++)o._tabs[t].$.removeClass(r),o._tabs[t].$.removeClass(l),o._tabs[t].$.removeClass("animate");return t===n?(t.$.hasClass("smart-visibility-hidden")?t.$.removeClass("smart-visibility-hidden"):t.$.addClass("smart-visibility-hidden"),void(o._animatedOldTab.classToRemove=r)):void(a?(t.$.addClass(r),t.$.removeClass("smart-visibility-hidden"),n.$.addClass("animate"),t.$.addClass("animate"),n.$.addClass(l),n.$.addClass("smart-visibility-hidden"),t.$.removeClass(r),o._animatedOldTab.classToRemove=l):(t.$.addClass(l),t.$.removeClass("smart-visibility-hidden"),n.$.addClass("animate"),t.$.addClass("animate"),n.$.addClass(r),n.$.addClass("smart-visibility-hidden"),t.$.removeClass(l),o._animatedOldTab.classToRemove=r))}}_applyConditionalTabOverflow(){const t=this,n="left"===t.tabPosition||"right"===t.tabPosition,a=t.$.tabStrip;if("scroll"===t.tabLayout)return void t._checkOverflowScroll();if(t._flexWritingModeNoFullSupport&&"shrink"===t.tabLayout&&n&&a.scrollHeight>a.offsetHeight){const n=a.children,o=100/n.length+"%";a.$.addClass("shrink-tabs-vertical");for(let t=0;t<n.length;t++)n[t].style.height=o,n[t].firstElementChild.firstElementChild.classList.add("smart-tab-label-text-container-full-height");t._inlineStyleTabStripChildren=!0}}_applyLabelSizes(t,n){const a=this,o=a._orientationSettings.dimension,r="width"===o?"height":"width";for(let l=0;l<a._reorderItems.length;l++){const i=a._reorderItems[l],s=a._getCorrespondingCustomElement(i);null!==s.labelSize&&("tabPosition"===t&&i.style.removeProperty(r),n?i.style.removeProperty(o):i.style[o]=parseInt(s.labelSize,10)+"px")}}_applyTabOverflow(){var t=Math.max;const n=this;if(n._removeInlineStyle(),0===n._tabs.length)return void n._toggleNavigationElementsVisibility();const a=n.tabLayout,i=n.tabPosition,o="left"===i||"right"===i,r=n.$.tabStrip;switch(n._closeDropDownButtonDropDown(),a){case"scroll":case"dropDown":n._flexWritingModeNoFullSupport&&"vertical"===n.tabTextOrientation&&o&&n._fixTabStripNotChrome(r);break;case"wrap":if("vertical"!==n.tabTextOrientation)o&&r.scrollWidth>r.offsetWidth&&(r.style.width=r.scrollWidth+"px","right"===i&&(r.style.flexWrap="wrap-reverse"),n._inlineStyleTabStrip=!0);else if(!n._flexWritingModeNoFullSupport)o||r.scrollHeight>r.offsetHeight&&(r.style.height=r.scrollHeight+"px",n._inlineStyleTabStrip=!0);else if(o)n._fixTabStripNotChrome(r);else{const a=r.children;let o=a[0].offsetHeight;for(let n=1;n<a.length;n++)o=t(o,a[n].offsetHeight);for(let t=1;t<a.length;t++)a[t].style.height=o+"px";n._inlineStyleTabStripChildren=!0}break;case"shrink":if(!o)r.scrollWidth>r.offsetWidth&&r.$.addClass("shrink-tabs");else if(n._flexWritingModeNoFullSupport&&"vertical"===n.tabTextOrientation){const a=r.children,i=window.getComputedStyle(a[0].firstElementChild),o=parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10);let l=0;for(let n=0;n<a.length;n++)l=t(l,a[n].firstElementChild.firstElementChild.offsetWidth);r.style.width=o+l+"px",n._inlineStyleTabStrip=!0;break}}n._applyConditionalTabOverflow(),n._getTabCoordinates(),n._fixTabStripFlex(a),n._toggleNavigationElementsVisibility(),n._positionTabSelectionBar(n._tabLabelContainers[n.selectedIndex],!0)}_checkOverflowScroll(){var t=Math.round;const n=this,a=n.$tabsHeaderSection,i=n.$.tabStrip,o=n.overflow;if("hidden"===o)return;let r,l,s;"left"===n.tabPosition||"right"===n.tabPosition?(r=t(i.scrollHeight)>t(i.offsetHeight),l=0<t(i.scrollTop),s=t(i.offsetHeight+i.scrollTop)<t(i.scrollHeight)):(r=t(i.scrollWidth)>t(i.offsetWidth),l=0<t(i.scrollLeft),s=t(i.offsetWidth+i.scrollLeft)<t(i.scrollWidth)),"scroll"===o&&(a.addClass("scroll-buttons-shown"),n.$scrollButtonNear.removeClass("smart-hidden"),n.$scrollButtonFar.removeClass("smart-hidden")),r?"auto"===o?(!a.hasClass("scroll-buttons-shown")&&a.addClass("scroll-buttons-shown"),l?n.$scrollButtonNear.removeClass("smart-hidden"):n.$scrollButtonNear.addClass("smart-hidden"),s?n.$scrollButtonFar.removeClass("smart-hidden"):n.$scrollButtonFar.addClass("smart-hidden"),!1===(l&&s)?a.addClass("one-button-shown"):a.removeClass("one-button-shown"),!n.disabled&&(n.$.scrollButtonNear.disabled=!1,n.$.scrollButtonFar.disabled=!1)):(a.removeClass("one-button-shown"),n.disabled?(n.$.scrollButtonNear.disabled=!0,n.$.scrollButtonFar.disabled=!0):(n.$.scrollButtonNear.disabled=!l,n.$.scrollButtonFar.disabled=!s)):!r&&"auto"===o&&a.hasClass("scroll-buttons-shown")?(a.removeClass("scroll-buttons-shown"),a.removeClass("one-button-shown"),n.$scrollButtonNear.addClass("smart-hidden"),n.$scrollButtonFar.addClass("smart-hidden")):!r&&"scroll"===o&&(n.$.scrollButtonNear.disabled=!0,n.$.scrollButtonFar.disabled=!0)}_closeButtonVisibilityChangeHandler(t){const n=this,a=t.target.index;return"selected"===n.closeButtonMode?void(n._tabLabelContainers[a].closeButtonEnabled=t.detail.hidden):void(t.detail.hidden?n._disableCloseButton(a):n._enableCloseButton(a))}_closeDropDownButtonDropDown(){const t=this;t._dropDownButtonDropDownOpened&&(t.$dropDownButtonDropDown.addClass("smart-hidden"),t._dropDownButtonDropDownOpened=!1)}_closeGroupDropDown(){const t=this;t._openDropDown&&(t._openDropDown.rippleInProgress?setTimeout(function(){t._openDropDown&&(t._openDropDown.$.addClass("smart-hidden"),delete t._openDropDown.rippleInProgress,t._openDropDown=void 0)},450):(t._openDropDown.$.addClass("smart-hidden"),t._openDropDown=void 0))}_containerHandler(t){const n=this,a=t.type;if(!(n.disabled||n.readonly||n._resizing&&"mouseout"!==a||("down"===a||"up"===a)&&1!==t.which&&!Smart.Utilities.Core.isMobile)){"up"===a&&t.stopPropagation();const i=t.originalEvent?t.originalEvent.target:t.target;return n.$.tabContentSection.contains(i)?void 0:n.$.dropDownButton.contains(i)?void n._dropDownButtonHandler(i,t):n.$.dropDownButtonDropDown.contains(i)?void n._dropDownButtonHandler(i,t,!0):void n._tabStripHandler(i,t)}}_disableCloseButton(t){const n=this,a=n._tabLabelContainers[t];a.closeButtonEnabled=!1,n.closeButtons&&n._hideCloseButton(a)}_documentMoveHandler(t){const n=this,a=n._orientationSettings;if(n._reordering){n._reorderStartThrown||(n._fireDragEvent(t,"dragStart"),n._reorderStartThrown=!0);const i=t[a.coordinate],o="wrap"===n.tabLayout?function(n){return t.pageX>=n.fromX&&t.pageX<=n.toX&&t.pageY>=n.fromY&&t.pageY<=n.toY}:function(t){return i>=t[a.from]&&i<=t[a.to]};let r=!1;for(let t=0;t<n._tabCoordinates.length;t++){const a=n._tabCoordinates[t];if(o(a)){r=t;break}}!0!==n._preventReorder&&!1!==r&&r!==n._draggedIndex&&(n._reorderTabs(n._draggedIndex,r),n._closeGroupDropDown(),n._draggedIndex=r,n._getReorderItems(),n._getTabCoordinates());const l=n._tabCoordinates[n._draggedIndex];n._preventReorder=!!("wrap"!==n.tabLayout&&(i<l[a.from]||i>l[a.to])||"wrap"===n.tabLayout&&(null!==t.originalEvent.target.closest(".smart-tab-label-container")||null!==t.originalEvent.target.closest(".smart-tab-group-container"))&&!(t.pageX>=l.fromX&&t.pageX<=l.toX&&t.pageY>=l.fromY&&t.pageY<=l.toY))}else n._resizing&&(n.$.resizeToken.style[a.edge]=t[a.coordinate]-n._tabsHeaderSectionCoordinate+"px",n.$resizeToken.removeClass("smart-hidden"))}_documentUpHandler(t){const n=this;let a=t.originalEvent.target;n._endSwiping(t,Date.now()),n._openDropDown&&!n._openDropDown.rippleInProgress&&(a===document||a.closest(".smart-tab-group-container")!==n._openDropDown.groupContainer)&&n._closeGroupDropDown(),n.$.dropDownButton.contains(a)||n._closeDropDownButtonDropDown(),n._endReordering(t,a),n._resize(t),n._tabToResize!==void 0&&(n._tabToResize=void 0)}_dropDownButtonHandler(t,n,a){const i=this,o=n.type;if(a)return void(t.classList.contains("smart-tab-label-container")&&("down"===o?i._downTarget=t:"mouseout"===o?t.removeAttribute("hover"):"mouseover"===o?t.setAttribute("hover",""):"up"===o?t===i._downTarget&&(i.select(Array.from(i.$.dropDownButtonDropDown.children).indexOf(t)),i._closeDropDownButtonDropDown()):void 0));if("down"===o)i._downTarget=i.$.dropDownButton;else if("up"===o&&i._downTarget===i.$.dropDownButton)if(!i._dropDownButtonDropDownOpened){const t=i.tabPosition;let n,a;"top"===t?(n=i.$.dropDownButton.offsetLeft,a=i.$.tabsHeaderSection.offsetTop+i.$.dropDownButton.offsetHeight):"bottom"===t?(n=i.$.dropDownButton.offsetLeft,a=i.$.tabsHeaderSection.offsetTop):"left"===t?(n=i.$.dropDownButton.offsetWidth,a=i.$.dropDownButton.offsetTop):"right"===t?(n=i.$.tabsHeaderSection.offsetLeft,a=i.$.dropDownButton.offsetTop):void 0,i.$.dropDownButtonDropDown.style.left=n+"px",i.$.dropDownButtonDropDown.style.top=a+"px",i.$dropDownButtonDropDown.removeClass("smart-hidden"),i._dropDownButtonDropDownOpened=!0}else i._closeDropDownButtonDropDown()}_enableCloseButton(t){const n=this,a=n._tabLabelContainers[t];a.closeButtonEnabled=!0,n.closeButtons&&n._showCloseButton(a)}_endReordering(t,n){const a=this;a._reordering&&(a._draggedHoveredTab&&(!a._draggedHoveredTab.contains(n)&&a._draggedHoveredTab.removeAttribute("hover"),delete a._draggedHoveredTab),a._reorderedIndex=void 0,a._reordering=!1,a._reorderStartThrown=!1,a.removeAttribute("dragged"),t&&a._fireDragEvent(t,"dragEnd"))}_endSwiping(t,n){var a=Math.abs;const i=this;if(!i._dragStartDetails)return;const o=i._orientationSettings,r=i.$.tabStrip,l=a(i._dragStartDetails.startTime-n),s=200/l,d=(i._dragStartDetails[o.startCoordinate]-t[o.coordinate])*s;let c=a(d);const m=function(){return!(0<d&&r[o.scrollDirection]===r[o.scrollSize]-r[o.size]||0>d&&0===r[o.scrollDirection])};let p=.03*a(d)*s;const u=function(){if(5<p){const t=(c-p)/a(d);.1>t?p/=1.25:.15>t?p/=1.2:.2>t?p/=1.15:.25>t?p/=1.1:.3>t&&(p/=1.05)}p=Math.round(p);const t=r[o.scrollDirection];r[o.scrollDirection]=0<d?Math.min(t+p,r[o.scrollSize]-r[o.size]):Math.max(t-p,0),c-=p,i._updateScrollButtonVisibility(!0);const n=m();0<c&&n?i._scrollingAnimationFrame=window.requestAnimationFrame(u):i._wheelInProgress=!1};i._scrollingAnimationFrame&&cancelAnimationFrame(i._scrollingAnimationFrame),500>l&&m()?i._scrollingAnimationFrame=window.requestAnimationFrame(u):i._wheelInProgress=!1,delete i._dragStartDetails,i._swiping&&delete i._swiping}_fireDragEvent(t,n){const a=this,i=a.$.tabStrip.children[a._draggedIndex],o=i.tab;let r,l,s;o?(r=o.selected,l=o.index,s=o.label):s=i.group,a.$.fireEvent(n,{position:{left:t.pageX,top:t.pageY},target:i,selected:r,index:l,label:s})}_fixTabStripNotChrome(t){function n(){const n=t.children;let o=n[0].getBoundingClientRect(),r=o.left,l=r+n[0].offsetWidth;for(let t=1;t<n.length;t++)o=n[t].getBoundingClientRect(),r=Math.min(r,o.left),l=Math.max(l,o.left+n[t].offsetWidth);t.style.width=l-r+"px",a._inlineStyleTabStrip=!0}const a=this;0===a._tabs.length||(n(),Smart.Utilities.Core.Browser.Safari&&setTimeout(function(){t.parentElement.classList.add("smart-hidden"),setTimeout(function(){t.parentElement.classList.remove("smart-hidden"),n()},10)},10),a.$.fireEvent("tabStripResize"))}_fixTabStripFlex(t){const n=this;n._flexWritingModeNoFullSupport||"vertical"!==n.tabTextOrientation||"left"!==n.tabPosition&&"right"!==n.tabPosition||setTimeout(function(){n.$tabsHeaderSection.addClass("smart-hidden"),setTimeout(function(){n.$tabsHeaderSection.removeClass("smart-hidden"),n._getTabCoordinates(),"scroll"===t&&n._checkOverflowScroll()},10)},10)}_getCorrespondingCustomElement(t){return t.$.hasClass("smart-tab-label-container")?t.tab:this.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+t.group+"\"]")}_getReorderItems(){const t=this;let n;0===t._groups.length?n=t._tabLabelContainers:(n=Array.from(t.$.tabStrip.children),t.addNewTab&&n.pop()),t._reorderItems=n}_getTabCoordinates(){const t=this;if((t.reorder||t.resize)&&"hidden"!==t.tabPosition){const n=[],a=window.scrollX||window.pageXOffset,o=window.scrollY||window.pageYOffset;for(let r=0;r<t._reorderItems.length;r++){const i=t._reorderItems[r],l=i.getBoundingClientRect(),s=window.getComputedStyle(i),d=parseFloat(s.marginLeft),c=parseFloat(s.marginRight),m=parseFloat(s.marginTop),p=parseFloat(s.marginBottom);n.push({fromX:l.left-d+a,toX:l.right+c+a,fromY:l.top-m+o,toY:l.bottom+p+o})}t._tabCoordinates=n}}_getTabs(){const t=this;let n=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-tab-item"):t.getElementsByTagName("smart-tab-item");null!==t.selectedIndex&&(0===n.length?t.selectedIndex=null:t.selectedIndex=Math.max(0,Math.min(t.selectedIndex,n.length-1))),t._tabs=Array.from(n)}_groupContainerHandler(t,n){const a=this,i=t.dropDown;if("down"===n)return a._downTarget=t,void(a.reorder&&1<a._reorderItems.length&&(a._getTabCoordinates(),a._reordering=!0,a.setAttribute("dragged",""),a._draggedIndex=Array.from(a.$.tabStrip.children).indexOf(t)));a._reordering||a._swiping||(i===a._openDropDown||"mouseover"!==n||t.classList.contains("smart-tab-group-selected")?"mouseout"===n&&t.removeAttribute("hover"):t.setAttribute("hover",""));"up"!==n||a._downTarget!==t||void 0!==a._reorderedIndex||a._swiping||(i===a._openDropDown?(a._closeGroupDropDown(),!t.classList.contains("smart-tab-group-selected")&&t.setAttribute("hover","")):a._openGroupDropDown(t))}_handlePosition(t,n){const a=this;return-1!==[void 0,"top","left","hidden"].indexOf(n)&&("bottom"===t||"right"===t)?a.$.container.insertBefore(a.$.tabContentSection,a.$.tabsHeaderSection):("bottom"===n||"right"===n)&&-1!==["top","left","hidden"].indexOf(t)&&a.$.container.insertBefore(a.$.tabsHeaderSection,a.$.tabContentSection),"hidden"===t?(a._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},a.removeAttribute("horizontal"),void a.removeAttribute("vertical")):void("top"===t||"bottom"===t?(a._orientationSettings={coordinate:"pageX",dimension:"width",edge:"left",from:"fromX",size:"offsetWidth",to:"toX",scrollDirection:"scrollLeft",scrollSize:"scrollWidth",startCoordinate:"startX",wheelOffset:70},a.removeAttribute("vertical"),a.setAttribute("horizontal",""),a.$arrowNear.removeClass("smart-arrow-up"),a.$arrowNear.addClass("smart-arrow-left"),a.$arrowFar.removeClass("smart-arrow-down"),a.$arrowFar.addClass("smart-arrow-right")):(a._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},a.removeAttribute("horizontal"),a.setAttribute("vertical",""),a.$arrowNear.removeClass("smart-arrow-left"),a.$arrowNear.addClass("smart-arrow-up"),a.$arrowFar.removeClass("smart-arrow-right"),a.$arrowFar.addClass("smart-arrow-down")),a.$.dropDownButtonArrow.innerHTML=a._arrowCodes[a.tabPosition])}_handleScrollButtonsPosition(t,n){const a=this,i=a.$.tabsHeaderItems;t===n||("both"===t?"near"===n?i.insertBefore(a.$.scrollButtonFar,a.$.dropDownButton):i.insertBefore(a.$.scrollButtonNear,a.$.tabStrip):"near"===t?("far"===n&&i.insertBefore(a.$.scrollButtonNear,a.$.tabStrip),i.insertBefore(a.$.scrollButtonFar,a.$.tabStrip)):("near"===n&&i.insertBefore(a.$.scrollButtonFar,a.$.dropDownButton),i.insertBefore(a.$.scrollButtonNear,a.$.scrollButtonFar)))}_hideCloseButton(t){t.firstElementChild.children[0].$.removeClass("smart-close-button-enabled"),t.firstElementChild.children[1].$.addClass("smart-hidden")}_indexChangeHandler(t){const n=this,a=t.detail.oldIndex,i=Math.max(0,Math.min(t.detail.newIndex,n._tabs.length-1));if(a!==i){if(0===n._groups.length)n._reorderTabs(a,i);else{const o=t.detail.tabItem;o._setIndex(a),n.remove(a),n.insert(i,{node:o}),n.selectedIndex===a&&n._select(i,!1)}n._reorderedIndex=void 0}}_insertAddNewTab(){const t=this,n=t._addTabLabelContainer(void 0,!0).tabLabelContainer;n.$.addClass("smart-add-new-tab"),t.$.tabStrip.appendChild(n),t._addNewTab=n}_insertIntoExistingGroup(t){const n=this,a=t.smartTabItemsGroup,i=t.tab,o=t.tabLabelContainer,r=t.group,l=n._groupLabels[n._groups.indexOf(r)],s=l.dropDown;let d=t.index;d=Math.max(0,Math.min(d,a.childElementCount)),s.insertBefore(o,s.children[d]);const c=a.children[d];let m;m=c?c.index:a.children[d-1].index+1,a.insertBefore(i,c),n._tabLabelContainers.splice(m,0,o),n.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,n.$.dropDownButtonDropDown.children[m]||null),n._tabs.splice(m,0,i),d=m,i.group=r,n._updateIndexes(d)}_insertIntoNewGroup(t){const n=this,a=t.tab,i=t.tabLabelContainer,o=t.group,r=n._addGroupContainer(o),l=r.label,s=r.dropDown;s.appendChild(i),n._groups.push(o);let d=Math.max(0,Math.min(t.index,n.$.tabStrip.childElementCount)),c=d;n._addNewTab&&c===n.$.tabStrip.childElementCount&&c--,n.$.tabStrip.insertBefore(l,n.$.tabStrip.children[c]||null),n._groupLabels.push(l);const m=document.createElement("smart-tab-items-group");m.appendChild(a),n.$.tabContentSection.insertBefore(m,n.$.tabContentSection.children[d]),m.label=o;const p=m.previousElementSibling;let u=0;p&&(p instanceof Smart.TabItem?u=p.index+1:p&&(u=p.lastElementChild.index+1)),n._tabLabelContainers.splice(u,0,i),n.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,n.$.dropDownButtonDropDown.children[u]||null),n._tabs.splice(u,0,a),d=u,a.group=o,n._updateIndexes(d)}_insertNearAGroup(t){const n=this,a=t.tab,i=t.tabLabelContainer;let o=t.index;o=Math.max(0,Math.min(o,n._tabs.length));const r=n._tabs[o-1],l=n._tabs[o],s=l?l.group:void 0;r&&null!==r.group&&l&&null!==s?(l.tabLabelContainer.parentElement.insertBefore(i,l.tabLabelContainer),l.parentElement.insertBefore(a,l),a.group=s):l?null===s?(n.$.tabStrip.insertBefore(i,l.tabLabelContainer),n.$.tabContentSection.insertBefore(a,l)):(n.$.tabStrip.insertBefore(i,n._groupLabels[n._groups.indexOf(s)]),n.$.tabContentSection.insertBefore(a,n.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+s+"\"]"))):(n.$.tabStrip.insertBefore(i,n._addNewTab||null),n.$.tabContentSection.appendChild(a)),n._tabLabelContainers.splice(o,0,i),n.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,n.$.dropDownButtonDropDown.children[o]||null),n._tabs.splice(o,0,a),n._updateIndexes(o)}_insertNoGrouping(t){const n=this,a=Math.max(0,Math.min(t.index,n._tabs.length)),i=t.tab,o=t.tabLabelContainer;n.$.tabStrip.insertBefore(o,n._tabLabelContainers[a]||n._addNewTab||null),n.$.tabContentSection.insertBefore(i,n._tabs[a]||null),n._tabLabelContainers.splice(a,0,o),n.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,n.$.dropDownButtonDropDown.children[a]||null),n._tabs.splice(a,0,i),n._updateIndexes(a)}_keydownHandler(t){const n=this,a=t.key;if(document.activeElement!==n||-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home","Enter"," ","Escape"].indexOf(a)||n.disabled||n.readonly||"none"===n.selectionMode||!n.allowToggle&&null===n.selectedIndex||n._reordering||n._swiping)return;t.preventDefault();const i=n._tabs.length-1;let o=0,r,l;switch(a){case"ArrowLeft":case"ArrowUp":if(n.collapsible&&t.ctrlKey)return void("ArrowLeft"===a?"right"===n.tabPosition?n.expand():"left"===n.tabPosition&&n.collapse():"ArrowUp"===a&&("bottom"===n.tabPosition?n.expand():"top"===n.tabPosition&&n.collapse()));if(o=-1,0===n.selectedIndex){l=!0;break}r=n.selectedIndex+o;break;case"ArrowRight":case"ArrowDown":if(n.collapsible&&t.ctrlKey)return void("ArrowRight"===a?"right"===n.tabPosition?n.collapse():"left"===n.tabPosition&&n.expand():"ArrowDown"===a&&("bottom"===n.tabPosition?n.collapse():"top"===n.tabPosition&&n.expand()));if(o=1,n.selectedIndex===i){l=!0;break}r=n.selectedIndex+o;break;case"End":if(n.selectedIndex===i){l=!0;break}r=i;break;case"Home":if(0===n.selectedIndex){l=!0;break}r=0;break;case"Enter":case" ":if(!n.allowToggle)return;if(n._focusedItem){n.select(n._focusedItem.index);const t=n._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");t&&n._openGroupDropDown(t.groupContainer)}return;case"Escape":return void(n._openDropDown&&n._closeGroupDropDown());}if(n.allowToggle&&0<n._tabs.length){n._focusedItem?n._focusedItem.tabLabelContainer.removeAttribute("focus"):n._focusedItem=n._focusedItem||n._tabs[n.selectedIndex]||n._tabs[0],n._focusedItem=n._tabs[Math.min(Math.max(0,n._focusedItem.index+o),i)],n._focusedItem.tabLabelContainer.setAttribute("focus",""),n.ensureVisible(n._focusedItem.index);const t=n._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");return void(t&&t.groupContainer?(n._openDropDown&&n._openDropDown!==t.dropDown&&n._closeGroupDropDown(),n._openGroupDropDown(t.groupContainer)):n._openDropDown&&n._closeGroupDropDown())}l||n.select(r)}_labelContainerHandler(t,n,a){const i=this,o="up"===a&&i._downTarget===t;if("down"===a&&(i._downTarget=t,"click"===i.selectionMode&&t!==i._addNewTab))if(Smart.Utilities.Core.isMobile&&null===t.tab.group){const a=i.$.tabStrip[i._orientationSettings.scrollDirection];setTimeout(function(){if(a===i.$.tabStrip[i._orientationSettings.scrollDirection]){const a=i._ripple(n,t);a&&i._openDropDown&&i._openDropDown.contains(t)&&(i._openDropDown.rippleInProgress=!0)}},100)}else{const a=i._ripple(n,t);a&&i._openDropDown&&i._openDropDown.contains(t)&&(i._openDropDown.rippleInProgress=!0)}if(t===i._addNewTab)return void i._addNewTabHandler(t,a,o);const r=t.tab.index,l=!(i._reordering&&i._reorderedIndex!==void 0);o&&r===i.selectedIndex&&(i._closeGroupDropDown(),l&&null===t.tab.group&&i._toggleCollapsedState()),!i._swiping&&(l&&"click"===i.selectionMode&&o||!i._reordering&&(i.selectionMode===a||"mouseenter"===i.selectionMode&&"mouseover"===a))&&i._select(r,!0),i._reordering||i._swiping||"click"!==i.selectionMode&&"dblclick"!==i.selectionMode||("mouseover"!==a||t.hasAttribute("selected")?"mouseout"===a&&t.removeAttribute("hover"):t.setAttribute("hover","")),i.reorder&&"down"===a&&null===t.tab.group&&1<i._reorderItems.length&&(i._getTabCoordinates(),i._reordering=!0,i.setAttribute("dragged",""),t.hasAttribute("hover")&&(i._draggedHoveredTab=t),i._draggedIndex=0===i._groups.length?t.tab.index:Array.from(i.$.tabStrip.children).indexOf(t))}_labelSizeChangeHandler(t){const n=this,a=t.detail.size;let i;"shrink"===n.tabLayout||(i=t.target instanceof Smart.TabItem?t.target.tabLabelContainer:n._groupLabels[n._groups.indexOf(t.target.label)],null===a?i.style.removeProperty(n._orientationSettings.dimension):i.style[n._orientationSettings.dimension]=parseInt(a,10)+"px",n._applyTabOverflow())}_openGroupDropDown(t){const n=this;t&&(n._openDropDown&&n._openDropDown.$.addClass("smart-hidden"),t.dropDown.$.removeClass("smart-hidden"),n._positionGroupDropDown(t),n._openDropDown=t.dropDown,t.removeAttribute("hover"))}_orderTabs(){const t=this,n=t.getElementsByTagName("smart-tab-items-group"),a=[],o=[];let r=!0,l=!1;if(0===n.length)for(let n=0;n<t._tabs.length;n++){const i=t._tabs[n],s=i.index;if(r&&null!==s&&(r=!1),-1!==a.indexOf(s||0)&&(l=!0,null!==s))break;a.push(s||0),o.push({tab:i,index:s})}if(!l){const t=a.slice(0).sort(function(t,n){return t-n});JSON.stringify(a)===JSON.stringify(t)&&(r=!0)}if(!r&&!l){o.sort(function(t,n){return t.index-n.index});for(let n=0;n<o.length;n++){const a=o[n].tab;a._setIndex(n),t.$.tabContentSection.removeChild(a)}for(let n=0;n<o.length;n++){const a=o[n].tab;t.$.tabContentSection.appendChild(a),t._tabs[n]=a}}else{r||t.warn(t.localize("ambiguousIndexes"));for(let n=0;n<t._tabs.length;n++)t._tabs[n]._setIndex(n)}}_populateTabStrip(){const t=this,n=document.createDocumentFragment(),a=[],o=[],r=[];let l=null;for(let s=0;s<t._tabs.length;s++){const i=t._tabs[s],d=i.parentElement,c=d instanceof Smart.TabItemsGroup?d.label:null;i.group=c;const m=t._addTabLabelContainer(i),p=m.tabLabelContainer,u=m.dropDownLabelContainer;t.selectedIndex===s&&(p.$.addClass("smart-tab-selected"),p.setAttribute("selected",""),l=p),i.tabLabelContainer=p,p.tab=i,a.push(p),null===c?n.appendChild(p):t._addGroupElements({documentFragment:n,groups:o,groupLabels:r,i:s,group:c,tabLabelContainer:p,smartTabItemsGroup:d}),t.$.dropDownButtonDropDown.appendChild(u)}t.$.tabStrip.appendChild(n),t._tabLabelContainers=a,t._groups=o,t._groupLabels=r,t._positionTabSelectionBar(l,!0)}_positionTabSelectionBar(t,n){function a(){i.$.tabSelectionBar.style.top=l,i.$.tabSelectionBar.style.height=d,i.$.tabSelectionBar.style.left=r,i.$.tabSelectionBar.style.width=s}const i=this;if(!t)return;const o=i.tabPosition;let r,l,s,d;n&&(i.$.tabSelectionBar.style.transition="none"),t.tab.group&&(t=i._groupLabels[i._groups.indexOf(t.tab.group)]),"top"===o||"bottom"===o?("wrap"===i.tabLayout?(l=t.offsetTop,"top"===o&&(l+=t.offsetHeight-i.$.tabSelectionBar.offsetHeight),l+="px"):l=null,d=null,r=-i.$.tabStrip.scrollLeft+t.offsetLeft+"px",s=t.offsetWidth+"px"):("left"===o||"right"===o)&&("wrap"===i.tabLayout?(r=t.offsetLeft,"left"===o&&(r+=t.offsetWidth-i.$.tabSelectionBar.offsetWidth),r+="px"):r=null,s=null,l=-i.$.tabStrip.scrollTop+t.offsetTop+"px",d=t.offsetHeight+"px"),Smart.Utilities.Core.isMobile&&i.hasAnimation&&!n?requestAnimationFrame(function(){requestAnimationFrame(a)}):a(),n&&!i._tabPositionChanging&&(i.$.tabSelectionBar.style.transition=null)}_positionGroupDropDown(t){const n=this,a=n.tabPosition,i=t.dropDown,o=window.getComputedStyle(n.$.tabsHeaderSection),r=parseFloat(o.paddingLeft),l=parseFloat(o.paddingTop);if("top"===a||"bottom"===a){if(i.style.left=t.offsetLeft-n.$.tabStrip.scrollLeft+r+"px","top"===a)i.style.top=t.offsetTop+t.offsetHeight+l+"px";else{let a=t.getBoundingClientRect().top-n.$.container.getBoundingClientRect().top+l;!1,i.style.top=a+"px"}}else i.style.top=t.offsetTop-n.$.tabStrip.scrollTop+l+"px",i.style.left="left"===a?t.offsetLeft+t.offsetWidth+r+"px":t.getBoundingClientRect().left-n.$.container.getBoundingClientRect().left+r+"px"}_processDataSource(){function t(n,a){let o;if(Array.isArray(n.items)&&0<n.items.length){o=document.createElement("smart-tab-items-group");for(let a=0;a<n.items.length;a++)n.items[a].items||t(n.items[a],o)}else o=document.createElement("smart-tab-item"),!0===n.closeButtonHidden&&(o.closeButtonHidden=!0),void 0!==n.content&&(o.innerHTML=n.content),void 0!==n.index&&(o.index=n.index),!0===n.selected&&(o.selected=n.selected);void 0!==n.label&&(o.label=n.label),void 0!==n.labelSize&&(o.labelSize=n.labelSize),a.appendChild(o)}const n=this,a=n.dataSource;if(n.$.tabContentSection.innerHTML="",null!==a)for(let o=0;o<a.length;o++){const i=a[o];t(i,n.$.tabContentSection)}}_processHTML(){const t=this;t._getTabs(),t._orderTabs(),t._validateInitialSelection(),t._populateTabStrip(),t.addNewTab&&t._insertAddNewTab(),t._getReorderItems(),t._applyTabOverflow(),t.ensureVisible(t.selectedIndex)}_removeInlineStyle(){const t=this,n=t.$.tabStrip;if(t._inlineStyleTabStripChildren){const a=n.children;for(let t=0;t<a.length;t++)a[t].removeAttribute("style"),a[t].firstElementChild.firstElementChild.classList.remove("smart-tab-label-text-container-full-height");delete t._inlineStyleTabStripChildren}t._inlineStyleTabStrip&&(n.removeAttribute("style"),delete t._inlineStyleTabStrip),n.$.removeClass("shrink-tabs"),n.$.removeClass("shrink-tabs-vertical")}_reorderTabs(t,n){function a(t,n,a){const i=t[n];t.splice(n,1),t.splice(a,0,i)}const i=this;if(0===i._groups.length){const o=i._tabs,r=i._tabLabelContainers,l=t>n?n:n+1;i.selectedIndex===t?i.selectedIndex=n:i.selectedIndex<=n&&i.selectedIndex>t?i.selectedIndex--:i.selectedIndex>=n&&i.selectedIndex<t&&i.selectedIndex++;let s;s=r[l]?r[l]:i.addNewTab?i._addNewTab:null,i.$.tabStrip.insertBefore(r[t],s),i.$.dropDownButtonDropDown.insertBefore(i.$.dropDownButtonDropDown.children[t],i.$.dropDownButtonDropDown.children[l]||null),i.$.tabContentSection.insertBefore(o[t],o[l]||null),a(o,t,n),a(r,t,n),i._updateTabIndexes()}else i._reorderTabsGrouping(t,n);i.$.fireEvent("reorder",{newIndex:n,originalIndex:t}),i._reorderedIndex=n,i._positionTabSelectionBar(i._tabLabelContainers[i.selectedIndex],!0)}_reorderTabsGrouping(t,n){const a=this,i=a.$.tabStrip.children,o=a.$.tabContentSection.children,r=t>n?n:n+1,l=a._tabs[a.selectedIndex];a.$.tabStrip.insertBefore(i[t],i[r]||null),a.$.tabContentSection.insertBefore(o[t],o[r]||null),a._groupLabels=Array.from(a.$.tabStrip.getElementsByClassName("smart-tab-group-container")),a._groups=[];for(let o=0;o<a._groupLabels.length;o++)a._groups.push(a._groupLabels[o].group);a._tabs=Array.from(a.$.tabContentSection.getElementsByTagName("smart-tab-item"));const s=document.createDocumentFragment();let d=[];for(let o=0;o<a._tabs.length;o++)s.appendChild(a.$.dropDownButtonDropDown.children[a._tabs[o].index].cloneNode(!0));a.$.dropDownButtonDropDown.innerHTML="",a.$.dropDownButtonDropDown.appendChild(s);for(let o=0;o<a.$.tabStrip.childElementCount;o++){const t=a.$.tabStrip.children[o];t.$.hasClass("smart-tab-label-container")&&t!==a._addNewTab?d.push(t):t.$.hasClass("smart-tab-group-container")&&(d=d.concat(Array.from(t.dropDown.children)))}a._tabLabelContainers=d,a._updateTabIndexes(),l&&(a.selectedIndex=l.index)}_resize(t){const n=this;if(!n._resizing)return;const a=n._orientationSettings,i=t[a.coordinate]-n._resizeFrom,o=n._getCorrespondingCustomElement(n._tabToResize);let r=null===o.labelSize?n._tabToResize[a.size]:o.labelSize;const l=Math.max(10,r+i);l!==r&&(o._preventPropertyChangedHandler=!0,o.labelSize=l,n._tabToResize.style[a.dimension]=parseInt(l,10)+"px"),n.$resizeToken.addClass("smart-hidden"),n._applyTabOverflow(),n._resizing=!1,n.removeAttribute("resizing")}_ripple(t,n){const a=this;if(a.hasRippleAnimation){const a=document.createElement("div");return a.className="ripple-agent",n.firstElementChild.appendChild(a),setTimeout(function(){n.firstElementChild.removeChild(a)},1e3),Smart.Utilities.Animation.Ripple.animate(a,t.pageX,t.pageY),!0}}_scrollButtonClickHandler(t){const n=this,a=n.$.tabStrip;let i=t.target.closest("smart-repeat-button")===n.$.scrollButtonNear?-1:1;if("paging"===n.scrollMode){const o=n._orientationSettings,r={};return n._dragStartDetails={startX:0,startY:0,pageX:0,pageY:0,startTime:Date.now(),target:t.target},n._wheelInProgress=!0,r[o.coordinate]=-i*(a[o.size]/1.1428571428571428),void n._endSwiping(r,n._dragStartDetails.startTime+175)}n.hasAttribute("horizontal")?a.scrollLeft+=10*i:a.scrollTop+=10*i,n._updateScrollButtonVisibility(!0)}_select(t,n,a){const i=this,o=i.hasAnimation;if(void 0===a&&(a=i.selectedIndex),t!==a||i.allowToggle&&(!i.allowToggle||"mouseenter"!==i.selectionMode)){const r=i._tabs[t];if(i._focusedItem&&i._focusedItem.tabLabelContainer.removeAttribute("focus"),null!==a){const n=i._tabs[a];o?i._animateSelection(r,n,t>a):n.$.addClass("smart-visibility-hidden"),n.selected=!1,i._tabLabelContainers[a].$.removeClass("smart-tab-selected"),i._tabLabelContainers[a].removeAttribute("selected"),i.closeButtons&&"selected"===i.closeButtonMode&&i._disableCloseButton(a)}i.allowToggle&&(null===t||(void 0===arguments[2]?i.selectedIndex:a)===t)?(i.selectedIndex=null,i.$.tabContentSection.setAttribute("show-placeholder",""),i.allowToggle&&(i._focusedItem=i._tabs[null===t?a:t],i._focusedItem&&i._focusedItem.tabLabelContainer.setAttribute("focus",""))):(r.selected=!0,i.$.tabContentSection.removeAttribute("show-placeholder"),(null===a||!o)&&r.$.removeClass("smart-visibility-hidden"),i.selectedIndex=t,i._focusedItem=i._tabs[t],i._focusedItem.tabLabelContainer.$.addClass("smart-tab-selected"),i._focusedItem.tabLabelContainer.setAttribute("selected",""),i._positionTabSelectionBar(i._focusedItem.tabLabelContainer,null===a)),null!==t&&(i._tabLabelContainers[t].removeAttribute("hover"),i.closeButtons&&"selected"===i.closeButtonMode&&i._enableCloseButton(t)),n&&(i.$.hiddenInput.value=i.selectedIndex,i.$.fireEvent("change",{index:i.selectedIndex,oldIndex:a})),i._closeGroupDropDown(),r&&null!==r.group?(i._selectedGroup&&i._selectedGroup.$.removeClass("smart-tab-group-selected"),null!==i.selectedIndex&&(i._selectedGroup=i._groupLabels[i._groups.indexOf(r.group)],i._selectedGroup.$.addClass("smart-tab-group-selected"))):i._selectedGroup&&(i._selectedGroup.$.removeClass("smart-tab-group-selected"),delete i._selectedGroup)}}_selectStartHandler(t){const n=this;(n._reordering||n._resizing)&&t.preventDefault()}_setLabel(t,n,a){const i=t?document.getElementById(t):null;if(null!==i&&"template"===i.tagName.toLowerCase()){const t=document.importNode(i.content,!0);if(n.appendChild(t),a){const t=document.importNode(i.content,!0);a.appendChild(t)}}else""===t&&(t="&nbsp;"),n.innerHTML=t,a&&(a.innerHTML=t)}_showCloseButton(t){t.closeButtonEnabled&&(t.firstElementChild.children[0].$.addClass("smart-close-button-enabled"),t.firstElementChild.children[1].$.removeClass("smart-hidden"))}_tabContentSectionTransitionendHandler(t){const n=this,a=t.target;a instanceof Smart.TabItem&&(a===n._animatedOldTab?(a.$.addClass("smart-hidden"),a.$.removeClass("animate"),a.$.removeClass(n._animatedOldTab.classToRemove),a.$.removeClass("smart-hidden"),delete n._animatedOldTab):a===n._animatedTab&&(a.$.removeClass("animate"),delete n._animatedTab),a.classList.remove("left"),a.classList.remove("right"),a.classList.remove("top"),a.classList.remove("bottom"))}_tabsHeaderItemsWheelHandler(t){const n=this,a=n._orientationSettings;if(!(!n.enableMouseWheelAction||n._wheelInProgress||n.disabled||n.$.tabStrip[a.size]===n.$.tabStrip[a.scrollSize])){t.preventDefault(),n._dragStartDetails={startX:t.pageX,startY:t.pageY,pageX:t.pageX,pageY:t.pageY,startTime:Date.now(),target:t.target},n._wheelInProgress=!0;const i={};i[a.coordinate]=t[a.coordinate]+(0<t.deltaY?-1:1)*a.wheelOffset,n._endSwiping(i,n._dragStartDetails.startTime+100)}}_tabStripHandler(t,n){const a=this,i=n.type;if("down"===i&&void 0!==a._tabToResize)return a._resizing=!0,void(a._tabsHeaderSectionCoordinate=a.$.tabsHeaderSection.getBoundingClientRect()[a._orientationSettings.edge]);"down"===i&&Smart.Utilities.Core.isMobile&&(a._dragStartDetails={startX:n.pageX,startY:n.pageY,pageX:n.pageX,pageY:n.pageY,startTime:Date.now(),originalTime:Date.now(),target:n.originalEvent.target});const o=t.closest("smart-repeat-button");if("up"===i&&o)return a.focus(),void(a.resize&&a._getTabCoordinates());if(t.classList.contains("smart-tab-close-button"))if("up"!==i){if("down"===i)return void(a._downTarget=t);a._reordering||a._swiping||("mouseover"===i?t.setAttribute("hover",""):"mouseout"===i&&t.removeAttribute("hover"))}else if(t===a._downTarget){const n=t.parentElement.parentElement.tab.index,i=a.$.fireEvent("closing",{index:n});return void(i.defaultPrevented||(a.remove(n),a.$.fireEvent("close",{index:n})))}const r=t.closest(".smart-tab-label-container");if(null!==r)return void a._labelContainerHandler(r,n,i);const l=t.closest(".smart-tab-group-container");null!==l&&a._groupContainerHandler(l,i)}_tabStripMouseleaveHandler(){const t=this;t.resize&&!t._resizing&&t.hasAttribute("resizing")&&t.removeAttribute("resizing")}_tabStripMoveHandler(t){const n=this;if(n._dragStartDetails&&!n._dragStartDetails.checked&&(n._dragStartDetails.pageX!==t.pageX||n._dragStartDetails.pageY!==t.pageY)&&(500>Date.now()-n._dragStartDetails.originalTime?(n._endReordering(void 0,void 0),n._dragStartDetails.checked=!0):delete n._dragStartDetails),n._dragStartDetails){const a=n._orientationSettings,i=n._dragStartDetails[a.coordinate]-t[a.coordinate],o=n.$.tabStrip[a.scrollDirection];return n.$.tabStrip[a.scrollDirection]+=i,o!==n.$.tabStrip[a.scrollDirection]&&n._updateScrollButtonVisibility(),n._dragStartDetails={startX:n._dragStartDetails.startX,startY:n._dragStartDetails.startY,pageX:t.pageX,pageY:t.pageY,startTime:n._dragStartDetails.startTime,originalTime:n._dragStartDetails.originalTime,target:t.originalEvent.target,checked:n._dragStartDetails.checked},void(n._swiping=!0)}if(!n.resize||n._resizing||n._reordering||"shrink"===n.tabLayout)return;const a=n._orientationSettings,o=t[a.coordinate],r=n._tabCoordinates;let l;for(let s=0;s<r.length;s++){const t=r[s][a.to];if(o>=t-4&&o<=t+4){l=n._reorderItems[s],n._resizeFrom=o;break}}void 0===l?(n._tabToResize=void 0,n.removeAttribute("resizing")):(n._tabToResize=l,n.setAttribute("resizing",""))}_toggleCollapsedState(){const t=this;t.collapsible&&(t.collapsed?t.expand():t.collapse())}_toggleNavigationElementsVisibility(){const t=this,n=t._tabs.length;let a;if(0===n)a="addClass";else if(1===n)a="removeClass";else return;"scroll"===t.tabLayout&&"scroll"===t.overflow?(t.$scrollButtonNear[a]("smart-hidden"),t.$scrollButtonFar[a]("smart-hidden")):"dropDown"===t.tabLayout&&t.$dropDownButton[a]("smart-hidden")}_updateIndexes(t){const n=this;null!==n.selectedIndex&&t<=n.selectedIndex&&n.selectedIndex++,n._updateTabIndexes()}_updateScrollButtonVisibility(t){var n=Math.round;const a=this;if("scroll"!==a.tabLayout||"hidden"===a.overflow)return void a._positionTabSelectionBar(a._tabLabelContainers[a.selectedIndex],t);const i=a.$tabsHeaderSection,o=a.$.tabStrip,r=a._orientationSettings;let l=!0,s=!0;if(0===n(o[r.scrollDirection])&&(l=!1),n(o[r.size]+o[r.scrollDirection])>=n(o[r.scrollSize])-1&&(s=!1),"auto"===a.overflow){if(l&&s)return a.$scrollButtonNear.removeClass("smart-hidden"),a.$scrollButtonFar.removeClass("smart-hidden"),i.removeClass("one-button-shown"),void(a._tabLabelContainers[a.selectedIndex]&&a._positionTabSelectionBar(a._tabLabelContainers[a.selectedIndex],t));l?a.$scrollButtonNear.removeClass("smart-hidden"):a.$scrollButtonNear.addClass("smart-hidden"),s?a.$scrollButtonFar.removeClass("smart-hidden"):a.$scrollButtonFar.addClass("smart-hidden"),i.addClass("one-button-shown"),a._getTabCoordinates()}else"scroll"!==a.overflow||a.disabled||(a.$.scrollButtonNear.disabled=!l,a.$.scrollButtonFar.disabled=!s);a._tabLabelContainers[a.selectedIndex]&&a._positionTabSelectionBar(a._tabLabelContainers[a.selectedIndex],t)}_updateTabIndexes(){const t=this;if(0<t._tabs.length)for(let n=0;n<t._tabs.length;n++)t._tabs[n]._setIndex(n);else t.selectedIndex=null}_validateIndex(t,n){if(isNaN(parseInt(t,10))||"object"==typeof t){const t=this;t.error(t.localize("invalidIndex",{method:n}))}}_validateInitialSelection(){const t=this;let n=t.selectedIndex;for(let a=0;a<t._tabs.length;a++){const i=t._tabs[a];n===a?(i.selected=!0,i.$.removeClass("smart-visibility-hidden")):i.selected?null===n?(n=a,i.$.removeClass("smart-visibility-hidden")):(i.selected=!1,i.$.addClass("smart-visibility-hidden")):i.$.addClass("smart-visibility-hidden")}0<t._tabs.length&&null===n&&!t.allowToggle&&(n=0,t._tabs[0].selected=!0,t._tabs[0].$.removeClass("smart-visibility-hidden")),t.selectedIndex=n,null!==t.selectedIndex&&(t._focusedItem=t._tabs[t.selectedIndex])}}),Smart("smart-toast",class extends Smart.ContentElement{static get properties(){return{appendTo:{value:null,type:"any"},autoClose:{value:!1,type:"boolean"},autoCloseDelay:{value:3e3,type:"number"},autoOpen:{value:!1,type:"boolean"},itemTemplate:{value:null,type:"string?"},modal:{value:!1,type:"boolean"},position:{allowedValues:["top-left","top-right","bottom-left","bottom-right"],value:"top-right",type:"string"},showCloseButton:{value:!1,type:"boolean"},type:{allowedValues:["info","warning","success","error","mail","time",null],value:"info",type:"string?"},value:{value:"",type:"any"}}}static get listeners(){return{"toastContainerTopLeft.click":"_containerClickHandler","toastContainerTopLeft.swipeleft":"_swipeHandler","toastContainerTopLeft.swiperight":"_swipeHandler","toastContainerTopLeft.swipetop":"_swipeHandler","toastContainerTopLeft.swipebottom":"_swipeHandler","toastContainerTopRight.click":"_containerClickHandler","toastContainerTopRight.swipeleft":"_swipeHandler","toastContainerTopRight.swiperight":"_swipeHandler","toastContainerTopRight.swipetop":"_swipeHandler","toastContainerTopRight.swipebottom":"_swipeHandler","toastContainerBottomLeft.click":"_containerClickHandler","toastContainerBottomLeft.swipeleft":"_swipeHandler","toastContainerBottomLeft.swiperight":"_swipeHandler","toastContainerBottomLeft.swipetop":"_swipeHandler","toastContainerBottomLeft.swipebottom":"_swipeHandler","toastContainerBottomRight.click":"_containerClickHandler","toastContainerBottomRight.swipeleft":"_swipeHandler","toastContainerBottomRight.swiperight":"_swipeHandler","toastContainerBottomRight.swipetop":"_swipeHandler","toastContainerBottomRight.swipebottom":"_swipeHandler","toastContainerCustom.click":"_containerClickHandler","toastContainerCustom.swipeleft":"_swipeHandler","toastContainerCustom.swiperight":"_swipeHandler","toastContainerCustom.swipetop":"_swipeHandler","toastContainerCustom.swipebottom":"_swipeHandler","toastContainerModal.click":"_containerClickHandler","toastContainerModal.swipeleft":"_swipeHandler","toastContainerModal.swiperight":"_swipeHandler","toastContainerModal.swipetop":"_swipeHandler","toastContainerModal.swipebottom":"_swipeHandler"}}static get styleUrls(){return["smart.toast.css"]}template(){return`<div id="container">
                    <div id="toastContainerTopLeft" class ="smart-toast-container-top-left"></div>
                    <div id="toastContainerTopRight" class ="smart-toast-container-top-right"></div>
                    <div id="toastContainerBottomLeft" class ="smart-toast-container-bottom-left"></div>
                    <div id="toastContainerBottomRight" class ="smart-toast-container-bottom-right"></div>
                    <div id="toastContainerCustom" class ="smart-toast-container-custom"></div>
                    <div id="toastContainerModal" class ="smart-toast-container-modal"></div>
                </div>`}propertyChangedHandler(t,n,a){const i=this;let o;switch(super.propertyChangedHandler(t,n,a),t){case"value":o=i._instances[i._instances.length-1],o&&(o.getElementsByClassName("smart-toast-item-content")[0].innerHTML=a);break;case"appendTo":null!==n&&null!==a?i.appendTo=n:null===a&&0===i.$.toastContainerCustom.childNodes.length&&i.$.container.appendChild(i.$.toastContainerCustom),i._handleContainers();break;case"modal":case"position":i._handleContainers();break;default:}}attached(){const t=this,n=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];super.attached();for(let a=0;a<n.length;a++){const i=t.$["toastContainer"+n[a]];i._parent=t,i.closest("smart-toast")&&0<i.childNodes.length&&("Custom"===n[a]?t._appendTo.appendChild(t._container):document.body.appendChild(i))}}detached(){const t=this,n=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];super.detached();for(let a=0;a<n.length;a++){const i=t.$["toastContainer"+n[a]],o=i.childNodes;i.closest("smart-toast")||t.$.container.appendChild(i);for(let t=0;t<o.length;t++)o[t]._parent._close(o[t]);t.closeAll()}}ready(){super.ready();const t=this;t.value=t.$.content.innerHTML=t.value?t.value:t.innerHTML,t._instances=[],t._handleContainers(),t.autoOpen&&t.open()}closeAll(){const t=this;for(var n=t._instances.length-1;-1<n;n--)t._close(t._instances[n])}closeItem(t){const n=this;t&&0!==n._instances.length&&("string"==typeof t?t=document.getElementById(t):t instanceof HTMLElement&&(t=t.closest(".smart-toast-item")),t&&-1!==n._instances.indexOf(t)&&n._close(t))}closeLast(){const t=this;0<t._instances.length&&t._close(t._instances[t._instances.length-1])}open(){const t=this;if(t.disabled)return;-1===Array.from(document.body.childNodes).indexOf(t._container)&&t._handleContainers();let n=document.createElement("div");n.className="smart-toast-item",t.value instanceof HTMLElement?(n.innerHTML=t._defaultItemTemplate(""),n.getElementsByClassName("smart-toast-item-content")[0].appendChild(t.value)):n.innerHTML=t._handleItemTemplate()||t._defaultItemTemplate(t.value),t.showCloseButton&&n.setAttribute("show-close-button","");for(let a=0;a<t.classList.length;a++)n.classList.add(t.classList[a]);t.type&&n.classList.add("smart-"+t.type),n.setAttribute("animation",t.animation),n._parent=t,t._container.appendChild(n),t._instances.push(n),t.$.fireEvent("open",{instance:n}),setTimeout(function(){n.setAttribute("opened","")},10),t.autoClose&&(n._autoCloseTimeout=setTimeout(function(){t._close(n)},t.autoCloseDelay))}_containerClickHandler(t){const n=this,a=t.target.closest(".smart-toast-item-close-button"),i=t.target.closest(".smart-toast-item");a||i?(i._parent.$.fireEvent("click",{instance:i}),a&&i._parent._close(i)):n.modal&&n.closeAll()}_close(t){const n=this;if(-1<n._instances.indexOf(t)){const a=window.getComputedStyle(t,null).getPropertyValue("transition-duration"),i=-1<a.indexOf("ms")?parseInt(a):1e3*parseFloat(a);t.removeAttribute("opened"),n._instances.splice(n._instances.indexOf(t),1),setTimeout(function(){clearTimeout(t._autoCloseTimeout),n.$.fireEvent("close",{instance:t}),t.parentNode&&t.parentNode.removeChild(t)},i)}}_defaultItemTemplate(t){return`<div class ="smart-toast-item-header">
                    <span class ="smart-toast-item-close-button"></span>
                </div>
                <div class ="smart-toast-item-container">
                    <span class ="smart-toast-item-icon"></span><span class ="smart-toast-item-content">${t}</span>
                </div>`}_handleContainers(){const t=this,n=t._validateDOMElement(t.appendTo);if(t.modal)t._container=t.$.toastContainerModal,document.body.appendChild(t._container);else if(n)t._container=t.$.toastContainerCustom,t._appendTo=n,t._appendTo.appendChild(t._container);else{const n=document.querySelectorAll("body > .smart-toast-container-"+t.position)[0];if(!n){switch(t.position){case"top-left":t._container=t.$.toastContainerTopLeft;break;case"top-right":t._container=t.$.toastContainerTopRight;break;case"bottom-left":t._container=t.$.toastContainerBottomLeft;break;case"bottom-right":t._container=t.$.toastContainerBottomRight;}document.body.appendChild(t._container),t.appendTo=null,t._appendTo=null}else t._container=n}}_handleItemTemplate(){const t=this;let n=t.itemTemplate;if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(!n)return t._defaultItemTemplate(t.value);if(n=document.getElementById(n),null===n||!("content"in n))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"template"}));const a=n.innerHTML,i=/{{\w+}}/g;return a.replace(i,t.value)}_swipeHandler(t){const n=this,a=t.originalEvent.target.closest(".smart-toast-item");a&&n.$.fireEvent(t.type,{instance:a})}_validateDOMElement(t){if(t)return"string"==typeof t?document.getElementById(t):t instanceof HTMLElement?t:void 0}}),Smart("smart-tooltip",class extends Smart.ContentElement{static get properties(){return{arrow:{value:!1,type:"boolean"},arrowDirection:{allowedValues:["bottom","top","left","right"],value:"bottom",type:"string"},delay:{value:0,type:"number"},messages:{extend:!0,value:{en:{invalidSelector:"{{elementType}}: \"{{property}}\" must be a String, an HTMLElement or null.",htmlTemplateNotSuported:"{{elementType}}: Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: \"{{property}}\" property accepts a string that must match the id of an HTMLTemplate element from the DOM.",invalidNode:"{{elementType}}: Invalid parameter \"{{node}}\" when calling {{method}}."}},type:"object"},offset:{value:[0,0],type:"array"},openMode:{allowedValues:["click","focus","hover","manual"],value:"hover",type:"string"},position:{allowedValues:["bottom","top","left","right","absolute"],value:"top",type:"string"},selector:{value:null,type:"any?"},tooltipTemplate:{value:null,type:"any"},value:{value:"",type:"string",reflectToAttribute:!1},visible:{value:!1,type:"boolean"}}}static get styleUrls(){return["smart.tooltip.css"]}template(){return`<div id="container">
                    <div id="content" class="smart-tooltip-content" inner-h-t-m-l="[[innerHTML]]">
                        <content></content>
                    </div>
                </div>`}propertyChangedHandler(t,n,a){super.propertyChangedHandler(t,n,a);const i=this;let o;"openMode"===t?(i.close(),i._handleEventListeners(n),i._handleResize()):"selector"===t?(i._oldOwnerElement=i._ownerElement,i._handleSelector(a),i._handleEventListeners()):"tooltipTemplate"===t?i._handleTemplate(n):"value"===t?i.tooltipTemplate?i._handleTemplate():i.$.content.innerHTML=i.value:"visible"===t?(o=a?"open":"close",i.$.fireEvent(o,{owner:i._ownerElement})):void 0;i._applyPosition()}ready(){const t=this;super.ready(),t._isParentPositionStatic="static"===window.getComputedStyle(t.parentElement||document.querySelector("body")).position,t._handleSelector(t.selector),t._applyPosition(),t._handleEventListeners(),t._handleResize(),t.value=t.$.content.innerHTML=t.value?t.value:t.innerHTML,t._handleTemplate()}appendChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(n,t.concat(Array.prototype.slice.call(arguments)))}return t?void(n.$.content.appendChild(t),n._applyPosition()):void n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}close(){const t=this;t._isOpening&&clearTimeout(t._isOpening);t.visible&&(t.$.fireEvent("close",{owner:t._ownerElement}),t.visible=!1)}insertBefore(t,n){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}return t&&n?void(a.$.content.insertBefore(t,n),a._applyPosition()):void a.error(a.localize("invalidNode",{elementType:a.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}open(){const t=this;t.disabled||t.readonly||t.visible||(t._isOpening=setTimeout(function(){t._applyPosition(),t.$.fireEvent("open",{owner:t._ownerElement});const n=t.context;t.context=t,t.visible=!0,t.context=n},t.delay))}removeChild(t){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,t.concat(Array.prototype.slice.call(arguments)))}return t?void(n.$.content.removeChild(t),n._applyPosition()):void n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}toggle(){const t=this;t.visible?t.close():t.open()}_applyPosition(){function t(t){let a=[],i=t.parentElement;for(;i&&"BODY"!==i.nodeName;){if(a.push(i),n.enableShadowDOM&&!i.parentElement){i=i.getRootNode().host;continue}i=i.parentElement}return a}const n=this;if(!n._ownerElement)return;if(!n.parentElement)return;n._isParentPositionStatic="static"===window.getComputedStyle(n.parentElement).position;const a=n._ownerElement.getBoundingClientRect(),i=n.parentElement?n.parentElement.getBoundingClientRect():{top:0,left:0};let o,r;n.parentElement&&"BODY"===n.parentElement.nodeName.toUpperCase()?(o=a.top+window.scrollY+parseInt(n.offset[1]),r=a.left+window.scrollX+parseInt(n.offset[0])):(o=a.top-i.top+parseInt(n.offset[1]),r=a.left-i.left+parseInt(n.offset[0]));const l=function(){const a=t(n),o=a.length;let r=null,i=n._ownerElement.getBoundingClientRect();for(let t=0,n;t<o;t++)if(n=window.getComputedStyle(a[t]),"static"!==n.getPropertyValue("position")){r=a[t];break}return{top:i.top,left:i.left,nonStaticParent:r}}();switch(n.position){case"bottom":if(n.arrowDirection="top",null===l.nonStaticParent){n.style.top=l.top+window.scrollY+n._ownerElement.offsetHeight+"px",n.style.left=l.left+window.scrollX-n.offsetWidth/2+n._ownerElement.offsetWidth/2+"px";break}if(n._isParentPositionStatic){n.style.top=n._ownerElement.offsetTop+n._ownerElement.offsetHeight+"px",n.style.left=n._ownerElement.offsetLeft-n.offsetWidth/2+n._ownerElement.offsetWidth/2+"px";break}n.style.top=o+n._ownerElement.offsetHeight+"px",n.style.left=r-n.offsetWidth/2+n._ownerElement.offsetWidth/2+"px";break;case"top":if(n.arrowDirection="bottom",null===l.nonStaticParent){n.style.top=l.top+window.scrollY-n.offsetHeight+"px",n.style.left=l.left+window.scrollX-n.offsetWidth/2+n._ownerElement.offsetWidth/2+"px";break}if(n._isParentPositionStatic){if(n.style.top=n._ownerElement.offsetTop-n.offsetHeight+"px",n.style.left=n._ownerElement.offsetLeft-n.offsetWidth/2+n._ownerElement.offsetWidth/2+"px",n._ownerElement instanceof SVGElement){const t=n._ownerElement.getBoundingClientRect(),a=n._ownerElement.parentNode.getBoundingClientRect();n.style.top=t.top-a.top-n.offsetHeight/2+"px",n.style.left=t.left-n.offsetWidth/2+a.left/2+"px"}break}if(n._ownerElement instanceof SVGElement){const t=n._ownerElement.getBoundingClientRect(),a=n._ownerElement.parentNode.getBoundingClientRect();n.style.top=t.top-a.top-n.offsetHeight+"px",n.style.left=t.left-a.left-n.offsetWidth/2+t.width/2+"px";break}n.style.top=o-n.offsetHeight+"px",n.style.left=r-n.offsetWidth/2+n._ownerElement.offsetWidth/2+"px";break;case"left":if(n.arrowDirection="right",null===l.nonStaticParent){n.style.top=l.top+window.scrollY+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2+"px",n.style.left=l.left+window.scrollX-n.offsetWidth+"px";break}if(n._isParentPositionStatic){n.style.top=n._ownerElement.offsetTop+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2+"px",n.style.left=n._ownerElement.offsetLeft-n.offsetWidth+"px";break}n.style.top=o+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2+"px",n.style.left=r-n.offsetWidth+"px";break;case"right":if(n.arrowDirection="left",null===l.nonStaticParent){n.style.top=l.top+window.scrollY+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2+"px",n.style.left=l.left+window.scrollX+n._ownerElement.offsetWidth+"px";break}if(n._isParentPositionStatic){n.style.top=n._ownerElement.offsetTop+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2+"px",n.style.left=n._ownerElement.offsetLeft+n._ownerElement.offsetWidth+"px";break}n.style.top=o+n._ownerElement.offsetHeight/2-n.$.content.offsetHeight/2+"px",n.style.left=r+n._ownerElement.offsetWidth+"px";break;case"absolute":n.style.top=(parseInt(n.offset[1])||0)+"px",n.style.left=(parseInt(n.offset[0])||0)+"px";break;default:n.arrowDirection="bottom",n.style.top=n.style.left="";}}_eventsHandler(t){const n=this;return n.disabled||n.readonly?void 0:"click"===t.type?void(n.visible?this.close():this.open()):void("mouseenter"===t.type||"focus"===t.type?this.open():this.close())}_handleEventListeners(t){const n=this;if(n._ownerElement&&(n._oldOwnerElement&&"manual"!==n.openMode&&(n._oldOwnerElement.$.unlisten("mouseenter.tooltip"),n._oldOwnerElement.$.unlisten("mouseleave.tooltip"),n._oldOwnerElement.$.unlisten("focus.tooltip"),n._oldOwnerElement.$.unlisten("blur.tooltip"),n._oldOwnerElement.$.unlisten("click.tooltip"),n._oldOwnerElement=null),t&&("hover"===t?(n._ownerElement.$.unlisten("mouseenter.tooltip"),n._ownerElement.$.unlisten("mouseleave.tooltip")):"focus"===t?(n._ownerElement.$.unlisten("focus.tooltip"),n._ownerElement.$.unlisten("blur.tooltip")):"click"===t?n._ownerElement.$.unlisten("click.tooltip"):void 0),"manual"!==n.openMode))switch(n._ownerElement instanceof Smart.BaseElement||(n._ownerElement.$=Smart.Utilities.Extend(n._ownerElement)),n.openMode){case"hover":n._ownerElement.$.listen("mouseenter.tooltip",n._eventsHandler.bind(n)),n._ownerElement.$.listen("mouseleave.tooltip",n._eventsHandler.bind(n));break;case"focus":n._ownerElement.$.listen("focus.tooltip",n._eventsHandler.bind(n)),n._ownerElement.$.listen("blur.tooltip",n._eventsHandler.bind(n));break;case"click":n._ownerElement.$.listen("click.tooltip",n._eventsHandler.bind(n));break;default:}}_handleResize(){function t(){n._applyPosition()}const n=this;"click"===n.openMode?window.addEventListener("resize",t):window.removeEventListener("resize",t)}_handleSelector(t){const n=this;return"string"==typeof t?void(n._ownerElement=0<t.length?document.getElementById(t):void 0):t instanceof HTMLElement||t instanceof SVGElement?void(n._ownerElement=t):null===t?void(n._ownerElement=void 0):void n.error(n.localize("invalidSelector",{elementType:n.nodeName.toLowerCase(),property:"selector"}))}_handleTemplate(t){const n=this;let a=n.tooltipTemplate;if(t&&(n.$.content.innerHTML=n.value?n.value:""),null===a||!a)return;if("function"==typeof n.tooltipTemplate)return void n.tooltipTemplate(n.$.content,{value:n.value});if(!("content"in document.createElement("template")))return void n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}));if(a=document.getElementById(a),null===a||!("content"in a))return void n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:"template"}));const o=a.content,r=o.childNodes.length,l=/{{\w+}}/g;let s=[],d;for(let n=0;n<r;n++)for(d=l.exec(o.childNodes[n].innerHTML);d;)s.push({childNodeIndex:n,bindingString:d[0]}),d=l.exec(o.childNodes[n].innerHTML);const i=s.length;let c=document.importNode(a.content,!0),m,p;for(let a=0;a<i;a++){m=c.childNodes[s[a].childNodeIndex],p=s.length;for(let t=0;t<p;t++)m.innerHTML=m.innerHTML.replace(s[a].bindingString,n.value)}n.$.content.innerHTML="";for(let a=0;a<c.childNodes.length;a++)c.childNodes[a].outerHTML&&(n.$.content.innerHTML+=c.childNodes[a].outerHTML)}});